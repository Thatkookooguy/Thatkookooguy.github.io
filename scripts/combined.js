function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function millisecondsToStr(e){"use strict";function t(e){return e>1?"s ago":" ago"}var n=Math.floor(e/1e3),i=Math.floor(n/31536e3);if(i)return i+" year"+t(i);var r=Math.floor((n%=31536e3)/2592e3);if(r)return r+" month"+t(r);var o=Math.floor((n%=2592e3)/86400);if(o)return o+" day"+t(o);var a=Math.floor((n%=86400)/3600);if(a)return"about "+a+" hour"+t(a);var s=Math.floor((n%=3600)/60);if(s)return s+" minute"+t(s);var l=n%60;return l?l+" second"+t(l):"just now"}function pluralize(e,t){return 1!==t?e+"s":e}function md5cycle(e,t){var n=e[0],i=e[1],r=e[2],o=e[3];i=ii(i=ii(i=ii(i=ii(i=hh(i=hh(i=hh(i=hh(i=gg(i=gg(i=gg(i=gg(i=ff(i=ff(i=ff(i=ff(i,r=ff(r,o=ff(o,n=ff(n,i,r,o,t[0],7,-680876936),i,r,t[1],12,-389564586),n,i,t[2],17,606105819),o,n,t[3],22,-1044525330),r=ff(r,o=ff(o,n=ff(n,i,r,o,t[4],7,-176418897),i,r,t[5],12,1200080426),n,i,t[6],17,-1473231341),o,n,t[7],22,-45705983),r=ff(r,o=ff(o,n=ff(n,i,r,o,t[8],7,1770035416),i,r,t[9],12,-1958414417),n,i,t[10],17,-42063),o,n,t[11],22,-1990404162),r=ff(r,o=ff(o,n=ff(n,i,r,o,t[12],7,1804603682),i,r,t[13],12,-40341101),n,i,t[14],17,-1502002290),o,n,t[15],22,1236535329),r=gg(r,o=gg(o,n=gg(n,i,r,o,t[1],5,-165796510),i,r,t[6],9,-1069501632),n,i,t[11],14,643717713),o,n,t[0],20,-373897302),r=gg(r,o=gg(o,n=gg(n,i,r,o,t[5],5,-701558691),i,r,t[10],9,38016083),n,i,t[15],14,-660478335),o,n,t[4],20,-405537848),r=gg(r,o=gg(o,n=gg(n,i,r,o,t[9],5,568446438),i,r,t[14],9,-1019803690),n,i,t[3],14,-187363961),o,n,t[8],20,1163531501),r=gg(r,o=gg(o,n=gg(n,i,r,o,t[13],5,-1444681467),i,r,t[2],9,-51403784),n,i,t[7],14,1735328473),o,n,t[12],20,-1926607734),r=hh(r,o=hh(o,n=hh(n,i,r,o,t[5],4,-378558),i,r,t[8],11,-2022574463),n,i,t[11],16,1839030562),o,n,t[14],23,-35309556),r=hh(r,o=hh(o,n=hh(n,i,r,o,t[1],4,-1530992060),i,r,t[4],11,1272893353),n,i,t[7],16,-155497632),o,n,t[10],23,-1094730640),r=hh(r,o=hh(o,n=hh(n,i,r,o,t[13],4,681279174),i,r,t[0],11,-358537222),n,i,t[3],16,-722521979),o,n,t[6],23,76029189),r=hh(r,o=hh(o,n=hh(n,i,r,o,t[9],4,-640364487),i,r,t[12],11,-421815835),n,i,t[15],16,530742520),o,n,t[2],23,-995338651),r=ii(r,o=ii(o,n=ii(n,i,r,o,t[0],6,-198630844),i,r,t[7],10,1126891415),n,i,t[14],15,-1416354905),o,n,t[5],21,-57434055),r=ii(r,o=ii(o,n=ii(n,i,r,o,t[12],6,1700485571),i,r,t[3],10,-1894986606),n,i,t[10],15,-1051523),o,n,t[1],21,-2054922799),r=ii(r,o=ii(o,n=ii(n,i,r,o,t[8],6,1873313359),i,r,t[15],10,-30611744),n,i,t[6],15,-1560198380),o,n,t[13],21,1309151649),r=ii(r,o=ii(o,n=ii(n,i,r,o,t[4],6,-145523070),i,r,t[11],10,-1120210379),n,i,t[2],15,718787259),o,n,t[9],21,-343485551),e[0]=add32(n,e[0]),e[1]=add32(i,e[1]),e[2]=add32(r,e[2]),e[3]=add32(o,e[3])}function cmn(e,t,n,i,r,o){return t=add32(add32(t,e),add32(i,o)),add32(t<<r|t>>>32-r,n)}function ff(e,t,n,i,r,o,a){return cmn(t&n|~t&i,e,t,r,o,a)}function gg(e,t,n,i,r,o,a){return cmn(t&i|n&~i,e,t,r,o,a)}function hh(e,t,n,i,r,o,a){return cmn(t^n^i,e,t,r,o,a)}function ii(e,t,n,i,r,o,a){return cmn(n^(t|~i),e,t,r,o,a)}function md51(e){txt="";var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)md5cycle(i,md5blk(e.substring(t-64,t)));e=e.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(md5cycle(i,r),t=0;t<16;t++)r[t]=0;return r[14]=8*n,md5cycle(i,r),i}function md5blk(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function rhex(e){for(var t="",n=0;n<4;n++)t+=hex_chr[e>>8*n+4&15]+hex_chr[e>>8*n&15];return t}function hex(e){for(var t=0;t<e.length;t++)e[t]=rhex(e[t]);return e.join("")}function md5(e){return hex(md51(e))}function add32(e,t){return e+t&4294967295}function add32(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function createVisualizer(e,t,n){function i(e){d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),f.setSize(window.innerWidth,window.innerHeight)}function r(){b=(window.URL||window.webkitURL||{}).createObjectURL||function(){},"function"!==(document.createElement("audio").canPlayType,!1)?(E=new(window.AudioContext||window.webkitAudioContext),T=$(n+" audio")[0]):console.error("Sorry, your browser doesn't support Web Audio API.")}function o(){y=E.createMediaElementSource(T),(x=E.createAnalyser()).smoothingTimeConstant=.3,x.fftSize=512,y.connect(x),x.connect(E.destination),C=new Uint8Array(x.frequencyBinCount)}function a(){THREE.ImageUtils.crossOrigin="";var e={size:{type:"f",value:[]}};v={color:{type:"c",value:new THREE.Color(4539717)},bass:{type:"f",value:0},opacity:{type:"f",value:0}};var t=new THREE.ShaderMaterial({uniforms:v,attributes:e,vertexShader:document.getElementById("vertex").textContent,fragmentShader:document.getElementById("fragment").textContent,blending:THREE.AdditiveBlending,transparent:!0}),n=new THREE.Geometry;for(n.verticesNeedUpdate=!0,particle=0,r=100;particle<r;particle++)n.vertices.push(new THREE.Vector3(1e4*Math.random()-5e3,1e4*Math.random()-5e3,1e4*Math.random()-5e3));for(var i=0,r=n.vertices.length;i<r;i++)e.size.value[i]=100+100*Math.random();g=new THREE.PointCloud(n,t),h.add(g)}function s(e){var t=_.length;for(w+=void 0!==e?e:1;t--;){var n=_[t];n.mesh.material=n.materials[w%n.materials.length]}}function l(e){if(0===e)for(t=_.length;t--;){n=_[t];new TWEEN.Tween(n.mesh.scale).to({x:n.level/1.35,y:n.level/1.35,z:n.level/1.35},500).start()}if(Date.now()-R>0&&Date.now()-R<1e3&&start||void 0!==e){start=!1;for(var t=_.length;t--;){var n=_[t];new TWEEN.Tween(n.mesh.position).to({x:2e3*Math.random()-1e3,y:2e3*Math.random()-1e3,z:2e3*Math.random()-1e3},3e3).start(),new TWEEN.Tween(n.mesh.rotation).to({x:2*Math.random()*Math.PI,y:2*Math.random()*Math.PI,z:2*Math.random()*Math.PI},3e3).start()}}Date.now()-R>2e3&&(R=Date.now(),start=!0)}function c(){if(requestAnimationFrame(c),l(),TWEEN.update(),play||(m.rotation.x+=.006,m.rotation.y+=.006),play&&C.length>0){d.position.z+=.1*(THREE.Math.clamp(H,S,M)-d.position.z);for(var e=_.length;e--;){var t,n,i=_[e];n=(t=C[i.band]/256*i.level)<1?1:t,i.scale+=.2*(n-i.scale),m.rotation.x+=12e-5*i.scale,m.rotation.y+=12e-5*i.scale,g.rotation.copy(m.rotation),g.rotation.x*=.4,g.rotation.y*=.4,v.bass.value+=.5*(i.scale/2.7-v.bass.value),v.opacity.value=Math.max(0,t/Math.min(12,t)),d.fov+=.008*(75-3*i.scale-d.fov),d.updateProjectionMatrix()}x.getByteFrequencyData(C)}d.lookAt(h.position),p.update(),f.render(h,d)}var u,h,d,f,p,m,g,v,E,y,T,x,b,_=[],w=0,R=(start=play=!1,Date.now()),H=3e3,S=H-500,M=3*S,C=[],A=!1,k={lightRed:["#ffffff","#e50000"],lightViolet:["#ffffff","#ee82ee"],lightBlue:["#ffffff","#00bcff"]},P=function(){this.showStats=!1,this.enableStats=function(e){A=e,p.domElement.style.visibility=A?"visible":"hidden"},this.fullScreen=function(){var e;((e=document.documentElement).webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.requestFullscreen).call(document.documentElement)}};!function(){if(window.WebGLRenderingContext){r(),new P;var e=document.querySelector(t||"body"),n=$(e);(u=document.createElement("div")).width=n.innerWidth(),u.height=n.innerHeight(),u.style.position="absolute",u.style.top=0,u.style.bottom=0,u.style.left=0,u.style.right=0,u.style.zIndex=-1,u.style.overflow="hidden",u.style.background="-webkit-radial-gradient(#ffcc99, #ff9933)",u.style.background="-moz-radial-gradient(#ffcc99, #ff9933)",u.style.background="-ms-radial-gradient(#ffcc99, #ff9933)",u.style.background="-o-radial-gradient(#ffcc99, #ff9933)",u.style.background="radial-gradient(#ffcc99, #ff9933)",e.appendChild(u),(d=new THREE.PerspectiveCamera(30,n.innerWidth()/n.innerHeight(),1,1e4)).position.z=H,h=new THREE.Scene,hemisphereLight=new THREE.HemisphereLight(16777215,100),h.add(hemisphereLight),pointLight=new THREE.PointLight(16777215,3),h.add(pointLight),m=new THREE.Object3D;for(var o=0;o<80;o++){var g=new THREE.MeshPhongMaterial({color:k.lightRed[o%k.lightRed.length],shading:THREE.FlatShading,blending:THREE.NormalBlending,depthTest:!0,transparent:!1}),v=new THREE.MeshPhongMaterial({color:k.lightViolet[o%k.lightViolet.length],shading:THREE.FlatShading,blending:THREE.NormalBlending,depthTest:!0,transparent:!1}),E=new THREE.MeshPhongMaterial({color:k.lightBlue[o%k.lightBlue.length],shading:THREE.FlatShading,blending:THREE.NormalBlending,depthTest:!0,transparent:!1}),y=new THREE.TetrahedronGeometry(50,1);y.dynamic=!0;var T=new THREE.Mesh(y,v);T.position.x=2e3*Math.random()-1e3,T.position.y=2e3*Math.random()-1e3,T.position.z=2e3*Math.random()-1e3,T.rotation.x=2*Math.random()*Math.PI,T.rotation.y=2*Math.random()*Math.PI,T.rotation.z=2*Math.random()*Math.PI,_.push({mesh:T,materials:[g,v,E],band:Math.floor(Math.random(128)),scale:0,level:~~(6*Math.random()+2)}),m.add(T)}h.add(m),a(),l(0),s(~~(3*Math.random())),(f=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setSize(n.innerWidth(),n.innerHeight()),u.appendChild(f.domElement),(p=new Stats).domElement.style.position="absolute",p.domElement.style.top="0px",u.appendChild(p.domElement),c(),window.onresize=i}else console.error("Sorry, your browser doesn't support WebGL.")}(),o()}window.onSongChange=function(){},function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e,t){var n=(t=t||te).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function i(e){var t=!!e&&"length"in e&&e.length,n=pe.type(e);return"function"!==n&&!pe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function o(e,t,n){return pe.isFunction(t)?pe.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?pe.grep(e,function(e){return e===t!==n}):"string"!=typeof t?pe.grep(e,function(e){return ae.call(t,e)>-1!==n}):we.test(t)?pe.filter(t,e,n):(t=pe.filter(t,e),pe.grep(e,function(e){return ae.call(t,e)>-1!==n&&1===e.nodeType}))}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t={};return pe.each(e.match(Ce)||[],function(e,n){t[n]=!0}),t}function l(e){return e}function c(e){throw e}function u(e,t,n,i){var r;try{e&&pe.isFunction(r=e.promise)?r.call(e).done(t).fail(n):e&&pe.isFunction(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}function h(){te.removeEventListener("DOMContentLoaded",h),e.removeEventListener("load",h),pe.ready()}function d(){this.expando=pe.expando+d.uid++}function f(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ne.test(e)?JSON.parse(e):e)}function p(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Oe,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=f(n)}catch(e){}Fe.set(e,t,n)}else n=void 0;return n}function m(e,t,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return pe.css(e,t,"")},l=s(),c=n&&n[3]||(pe.cssNumber[t]?"":"px"),u=(pe.cssNumber[t]||"px"!==c&&+l)&&Ve.exec(pe.css(e,t));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{o=o||".5",u/=o,pe.style(e,t,u+c)}while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}function g(e){var t,n=e.ownerDocument,i=e.nodeName,r=We[i];return r||(t=n.body.appendChild(n.createElement(i)),r=pe.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),We[i]=r,r)}function v(e,t){for(var n,i,r=[],o=0,a=e.length;o<a;o++)(i=e[o]).style&&(n=i.style.display,t?("none"===n&&(r[o]=De.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&Ie(i)&&(r[o]=g(i))):"none"!==n&&(r[o]="none",De.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}function E(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&r(e,t)?pe.merge([e],n):n}function y(e,t){for(var n=0,i=e.length;n<i;n++)De.set(e[n],"globalEval",!t||De.get(t[n],"globalEval"))}function T(e,t,n,i,r){for(var o,a,s,l,c,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===pe.type(o))pe.merge(d,o.nodeType?[o]:o);else if(Ye.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(Ge.exec(o)||["",""])[1].toLowerCase(),l=Xe[s]||Xe._default,a.innerHTML=l[1]+pe.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;pe.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(i&&pe.inArray(o,i)>-1)r&&r.push(o);else if(c=pe.contains(o.ownerDocument,o),a=E(h.appendChild(o),"script"),c&&y(a),n)for(u=0;o=a[u++];)qe.test(o.type||"")&&n.push(o);return h}function x(){return!0}function b(){return!1}function _(){try{return te.activeElement}catch(e){}}function w(e,t,n,i,r,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)w(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=b;else if(!r)return e;return 1===o&&(a=r,r=function(e){return pe().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=pe.guid++)),e.each(function(){pe.event.add(this,t,r,i,n)})}function R(e,t){return r(e,"table")&&r(11!==t.nodeType?t:t.firstChild,"tr")?pe(">tbody",e)[0]||e:e}function H(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function S(e){var t=nt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function M(e,t){var n,i,r,o,a,s,l,c;if(1===t.nodeType){if(De.hasData(e)&&(o=De.access(e),a=De.set(t,o),c=o.events)){delete a.handle,a.events={};for(r in c)for(n=0,i=c[r].length;n<i;n++)pe.event.add(t,r,c[r][n])}Fe.hasData(e)&&(s=Fe.access(e),l=pe.extend({},s),Fe.set(t,l))}}function C(e,t){var n=t.nodeName.toLowerCase();"input"===n&&je.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function A(e,t,i,r){t=re.apply([],t);var o,a,s,l,c,u,h=0,d=e.length,f=d-1,p=t[0],m=pe.isFunction(p);if(m||d>1&&"string"==typeof p&&!de.checkClone&&tt.test(p))return e.each(function(n){var o=e.eq(n);m&&(t[0]=p.call(this,n,o.html())),A(o,t,i,r)});if(d&&(o=T(t,e[0].ownerDocument,!1,e,r),a=o.firstChild,1===o.childNodes.length&&(o=a),a||r)){for(l=(s=pe.map(E(o,"script"),H)).length;h<d;h++)c=o,h!==f&&(c=pe.clone(c,!0,!0),l&&pe.merge(s,E(c,"script"))),i.call(e[h],c,h);if(l)for(u=s[s.length-1].ownerDocument,pe.map(s,S),h=0;h<l;h++)c=s[h],qe.test(c.type||"")&&!De.access(c,"globalEval")&&pe.contains(u,c)&&(c.src?pe._evalUrl&&pe._evalUrl(c.src):n(c.textContent.replace(it,""),u))}return e}function k(e,t,n){for(var i,r=t?pe.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||pe.cleanData(E(i)),i.parentNode&&(n&&pe.contains(i.ownerDocument,i)&&y(E(i,"script")),i.parentNode.removeChild(i));return e}function P(e,t,n){var i,r,o,a,s=e.style;return(n=n||at(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||pe.contains(e.ownerDocument,e)||(a=pe.style(e,t)),!de.pixelMarginRight()&&ot.test(a)&&rt.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function L(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function D(e){if(e in dt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=ht.length;n--;)if((e=ht[n]+t)in dt)return e}function F(e){var t=pe.cssProps[e];return t||(t=pe.cssProps[e]=D(e)||e),t}function N(e,t,n){var i=Ve.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function O(e,t,n,i,r){var o,a=0;for(o=n===(i?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===n&&(a+=pe.css(e,n+Be[o],!0,r)),i?("content"===n&&(a-=pe.css(e,"padding"+Be[o],!0,r)),"margin"!==n&&(a-=pe.css(e,"border"+Be[o]+"Width",!0,r))):(a+=pe.css(e,"padding"+Be[o],!0,r),"padding"!==n&&(a+=pe.css(e,"border"+Be[o]+"Width",!0,r)));return a}function z(e,t,n){var i,r=at(e),o=P(e,t,r),a="border-box"===pe.css(e,"boxSizing",!1,r);return ot.test(o)?o:(i=a&&(de.boxSizingReliable()||o===e.style[t]),"auto"===o&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)]),(o=parseFloat(o)||0)+O(e,t,n||(a?"border":"content"),i,r)+"px")}function V(e,t,n,i,r){return new V.prototype.init(e,t,n,i,r)}function B(){pt&&(!1===te.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(B):e.setTimeout(B,pe.fx.interval),pe.fx.tick())}function I(){return e.setTimeout(function(){ft=void 0}),ft=pe.now()}function U(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)n=Be[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function W(e,t,n){for(var i,r=(G.tweeners[t]||[]).concat(G.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function j(e,t){var n,i,r,o,a;for(n in e)if(i=pe.camelCase(n),r=t[i],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=pe.cssHooks[i])&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function G(e,t,n){var i,r,o=0,a=G.prefilters.length,s=pe.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=ft||I(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(i);return s.notifyWith(e,[c,i,n]),i<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:pe.extend({},t),opts:pe.extend(!0,{specialEasing:{},easing:pe.easing._default},n),originalProperties:t,originalOptions:n,startTime:ft||I(),duration:n.duration,tweens:[],createTween:function(t,n){var i=pe.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(j(u,c.opts.specialEasing);o<a;o++)if(i=G.prefilters[o].call(c,e,u,c.opts))return pe.isFunction(i.stop)&&(pe._queueHooks(c.elem,c.opts.queue).stop=pe.proxy(i.stop,i)),i;return pe.map(u,W,c),pe.isFunction(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),pe.fx.timer(pe.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}function q(e){return(e.match(Ce)||[]).join(" ")}function X(e){return e.getAttribute&&e.getAttribute("class")||""}function Y(e,t,n,i){var r;if(Array.isArray(t))pe.each(t,function(t,r){n||Ht.test(e)?i(e,r):Y(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==pe.type(t))i(e,t);else for(r in t)Y(e+"["+r+"]",t[r],n,i)}function $(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(Ce)||[];if(pe.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Q(e,t,n,i){function r(s){var l;return o[s]=!0,pe.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var o={},a=e===zt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function K(e,t){var n,i,r=pe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&pe.extend(!0,e,i),e}function Z(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function J(e,t,n,i){var r,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var ee=[],te=e.document,ne=Object.getPrototypeOf,ie=ee.slice,re=ee.concat,oe=ee.push,ae=ee.indexOf,se={},le=se.toString,ce=se.hasOwnProperty,ue=ce.toString,he=ue.call(Object),de={},fe="3.2.1",pe=function(e,t){return new pe.fn.init(e,t)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^-ms-/,ve=/-([a-z])/g,Ee=function(e,t){return t.toUpperCase()};pe.fn=pe.prototype={jquery:fe,constructor:pe,length:0,toArray:function(){return ie.call(this)},get:function(e){return null==e?ie.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=pe.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return pe.each(this,e)},map:function(e){return this.pushStack(pe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:oe,sort:ee.sort,splice:ee.splice},pe.extend=pe.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||pe.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],i=e[t],a!==i&&(c&&i&&(pe.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,o=n&&Array.isArray(n)?n:[]):o=n&&pe.isPlainObject(n)?n:{},a[t]=pe.extend(c,o,i)):void 0!==i&&(a[t]=i));return a},pe.extend({expando:"jQuery"+(fe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===pe.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=pe.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==le.call(e)||(t=ne(e))&&("function"!=typeof(n=ce.call(t,"constructor")&&t.constructor)||ue.call(n)!==he))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?se[le.call(e)]||"object":typeof e},globalEval:function(e){n(e)},camelCase:function(e){return e.replace(ge,"ms-").replace(ve,Ee)},each:function(e,t){var n,r=0;if(i(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?pe.merge(n,"string"==typeof e?[e]:e):oe.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ae.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var r,o,a=0,s=[];if(i(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,n))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&s.push(o);return re.apply([],s)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),pe.isFunction(e))return i=ie.call(arguments,2),r=function(){return e.apply(t||this,i.concat(ie.call(arguments)))},r.guid=e.guid=e.guid||pe.guid++,r},now:Date.now,support:de}),"function"==typeof Symbol&&(pe.fn[Symbol.iterator]=ee[Symbol.iterator]),pe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){se["[object "+t+"]"]=t.toLowerCase()});var ye=function(e){function t(e,t,n,i){var r,o,a,s,l,u,d,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!i&&((t?t.ownerDocument||t:V)!==k&&A(t),t=t||k,L)){if(11!==p&&(l=me.exec(e)))if(r=l[1]){if(9===p){if(!(a=t.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(f&&(a=f.getElementById(r))&&O(t,a)&&a.id===r)return n.push(a),n}else{if(l[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(r)),n}if(T.qsa&&!j[e+" "]&&(!D||!D.test(e))){if(1!==p)f=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ye,Te):t.setAttribute("id",s=z),o=(u=w(e)).length;o--;)u[o]="#"+s+" "+h(u[o]);d=u.join(","),f=ge.test(e)&&c(t.parentNode)||t}if(d)try{return Q.apply(n,f.querySelectorAll(d)),n}catch(e){}finally{s===z&&t.removeAttribute("id")}}}return H(e.replace(oe,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[z]=!0,e}function r(e){var t=k.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&be(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function h(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,r=t.next,o=r||i,a=n&&"parentNode"===o,s=I++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r);return!1}:function(t,n,l){var c,u,h,d=[B,s];if(l){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(h=t[z]||(t[z]={}),u=h[t.uniqueID]||(h[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[o])&&c[0]===B&&c[1]===s)return d[2]=c[2];if(u[o]=d,d[2]=e(t,n,l))return!0}return!1}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function p(e,n,i){for(var r=0,o=n.length;r<o;r++)t(e,n[r],i);return i}function m(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),c&&t.push(s)));return a}function g(e,t,n,r,o,a){return r&&!r[z]&&(r=g(r)),o&&!o[z]&&(o=g(o,a)),i(function(i,a,s,l){var c,u,h,d=[],f=[],g=a.length,v=i||p(t||"*",s.nodeType?[s]:s,[]),E=!e||!i&&t?v:m(v,d,e,s,l),y=n?o||(i?e:g||r)?[]:a:E;if(n&&n(E,y,s,l),r)for(c=m(y,f),r(c,[],s,l),u=c.length;u--;)(h=c[u])&&(y[f[u]]=!(E[f[u]]=h));if(i){if(o||e){if(o){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(E[u]=h);o(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=o?Z(i,h):d[u])>-1&&(i[c]=!(a[c]=h))}}else y=m(y===a?y.splice(g,y.length):y),o?o(null,a,y,l):Q.apply(a,y)})}function v(e){for(var t,n,i,r=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,l=d(function(e){return e===t},a,!0),c=d(function(e){return Z(t,e)>-1},a,!0),u=[function(e,n,i){var r=!o&&(i||n!==S)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,r}];s<r;s++)if(n=x.relative[e[s].type])u=[d(f(u),n)];else{if((n=x.filter[e[s].type].apply(null,e[s].matches))[z]){for(i=++s;i<r&&!x.relative[e[i].type];i++);return g(s>1&&f(u),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),n,s<i&&v(e.slice(s,i)),i<r&&v(e=e.slice(i)),i<r&&h(e))}u.push(n)}return f(u)}function E(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,l,c){var u,h,d,f=0,p="0",g=i&&[],v=[],E=S,y=i||o&&x.find.TAG("*",c),T=B+=null==E?1:Math.random()||.1,b=y.length;for(c&&(S=a===k||a||c);p!==b&&null!=(u=y[p]);p++){if(o&&u){for(h=0,a||u.ownerDocument===k||(A(u),s=!L);d=e[h++];)if(d(u,a||k,s)){l.push(u);break}c&&(B=T)}r&&((u=!d&&u)&&f--,i&&g.push(u))}if(f+=p,r&&p!==f){for(h=0;d=n[h++];)d(g,v,a,s);if(i){if(f>0)for(;p--;)g[p]||v[p]||(v[p]=Y.call(l));v=m(v)}Q.apply(l,v),c&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return c&&(B=T,S=E),g};return r?i(a):a}var y,T,x,b,_,w,R,H,S,M,C,A,k,P,L,D,F,N,O,z="sizzle"+1*new Date,V=e.document,B=0,I=0,U=n(),W=n(),j=n(),G=function(e,t){return e===t&&(C=!0),0},q={}.hasOwnProperty,X=[],Y=X.pop,$=X.push,Q=X.push,K=X.slice,Z=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ie=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",re=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ce=new RegExp(ie),ue=new RegExp("^"+te+"$"),he={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,pe=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ve=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),Ee=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ye=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Te=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},xe=function(){A()},be=d(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(X=K.call(V.childNodes),V.childNodes),X[V.childNodes.length].nodeType}catch(e){Q={apply:X.length?function(e,t){$.apply(e,K.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}T=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},A=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:V;return i!==k&&9===i.nodeType&&i.documentElement?(k=i,P=k.documentElement,L=!_(k),V!==k&&(n=k.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),T.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=r(function(e){return e.appendChild(k.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=pe.test(k.getElementsByClassName),T.getById=r(function(e){return P.appendChild(e).id=z,!k.getElementsByName||!k.getElementsByName(z).length}),T.getById?(x.filter.ID=function(e){var t=e.replace(ve,Ee);return function(e){return e.getAttribute("id")===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}}):(x.filter.ID=function(e){var t=e.replace(ve,Ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&L){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),x.find.TAG=T.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=T.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&L)return t.getElementsByClassName(e)},F=[],D=[],(T.qsa=pe.test(k.querySelectorAll))&&(r(function(e){P.appendChild(e).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ee+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+z+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+z+"+*").length||D.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=k.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&D.push(":enabled",":disabled"),P.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(T.matchesSelector=pe.test(N=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(e){T.disconnectedMatch=N.call(e,"*"),N.call(e,"[s!='']:x"),F.push("!=",ie)}),D=D.length&&new RegExp(D.join("|")),F=F.length&&new RegExp(F.join("|")),t=pe.test(P.compareDocumentPosition),O=t||pe.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return C=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!T.sortDetached&&t.compareDocumentPosition(e)===n?e===k||e.ownerDocument===V&&O(V,e)?-1:t===k||t.ownerDocument===V&&O(V,t)?1:M?Z(M,e)-Z(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return C=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!r||!o)return e===k?-1:t===k?1:r?-1:o?1:M?Z(M,e)-Z(M,t):0;if(r===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?a(s[i],l[i]):s[i]===V?-1:l[i]===V?1:0},k):k},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==k&&A(e),n=n.replace(le,"='$1']"),T.matchesSelector&&L&&!j[n+" "]&&(!F||!F.test(n))&&(!D||!D.test(n)))try{var i=N.call(e,n);if(i||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,k,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==k&&A(e),O(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==k&&A(e);var n=x.attrHandle[t.toLowerCase()],i=n&&q.call(x.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==i?i:T.attributes||!L?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(ye,Te)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(C=!T.detectDuplicates,M=!T.sortStable&&e.slice(0),e.sort(G),C){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return M=null,e},b=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=b(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=b(t);return n},(x=t.selectors={cacheLength:50,createPseudo:i,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,Ee),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,Ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ce.test(n)&&(t=w(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,Ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(re," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,f,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),E=!l&&!s,y=!1;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&E){for(y=(f=(c=(u=(h=(d=g)[z]||(d[z]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===B&&c[1])&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(y=f=0)||p.pop();)if(1===d.nodeType&&++y&&d===t){u[e]=[B,f,y];break}}else if(E&&(d=t,h=d[z]||(d[z]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),c=u[e]||[],f=c[0]===B&&c[1],y=f),!1===y)for(;(d=++f&&d&&d[m]||(y=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++y||(E&&(h=d[z]||(d[z]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),u[e]=[B,y]),d!==t)););return(y-=r)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,n){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[z]?o(n):o.length>1?(r=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=Z(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=R(e.replace(oe,"$1"));return r[z]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(ve,Ee),function(t){return(t.textContent||t.innerText||b(t)).indexOf(e)>-1}}),lang:i(function(e){return ue.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ve,Ee).toLowerCase(),function(t){var n;do{if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=x.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[y]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})x.pseudos[y]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(y);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,w=t.tokenize=function(e,n){var i,r,o,a,s,l,c,u=W[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=x.preFilter;s;){i&&!(r=ae.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=se.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(oe," ")}),s=s.slice(i.length));for(a in x.filter)!(r=he[a].exec(s))||c[a]&&!(r=c[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):W(e,l).slice(0)},R=t.compile=function(e,t){var n,i=[],r=[],o=j[e+" "];if(!o){for(t||(t=w(e)),n=t.length;n--;)(o=v(t[n]))[z]?i.push(o):r.push(o);(o=j(e,E(r,i))).selector=e}return o},H=t.select=function(e,t,n,i){var r,o,a,s,l,u="function"==typeof e&&e,d=!i&&w(e=u.selector||e);if(n=n||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&L&&x.relative[o[1].type]){if(!(t=(x.find.ID(a.matches[0].replace(ve,Ee),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=he.needsContext.test(e)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((l=x.find[s])&&(i=l(a.matches[0].replace(ve,Ee),ge.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&h(o)))return Q.apply(n,i),n;break}}return(u||R(e,d))(i,t,!L,n,!t||ge.test(e)&&c(t.parentNode)||t),n},T.sortStable=z.split("").sort(G).join("")===z,T.detectDuplicates=!!C,A(),T.sortDetached=r(function(e){return 1&e.compareDocumentPosition(k.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(J,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);pe.find=ye,pe.expr=ye.selectors,pe.expr[":"]=pe.expr.pseudos,pe.uniqueSort=pe.unique=ye.uniqueSort,pe.text=ye.getText,pe.isXMLDoc=ye.isXML,pe.contains=ye.contains,pe.escapeSelector=ye.escape;var Te=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&pe(e).is(n))break;i.push(e)}return i},xe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},be=pe.expr.match.needsContext,_e=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,we=/^.[^:#\[\.,]*$/;pe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?pe.find.matchesSelector(i,e)?[i]:[]:pe.find.matches(e,pe.grep(t,function(e){return 1===e.nodeType}))},pe.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(pe(e).filter(function(){for(t=0;t<i;t++)if(pe.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)pe.find(e,r[t],n);return i>1?pe.uniqueSort(n):n},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&be.test(e)?pe(e):e||[],!1).length}});var Re,He=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(pe.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||Re,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:He.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof pe?t[0]:t,pe.merge(this,pe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:te,!0)),_e.test(i[1])&&pe.isPlainObject(t))for(i in t)pe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=te.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):pe.isFunction(e)?void 0!==n.ready?n.ready(e):e(pe):pe.makeArray(e,this)}).prototype=pe.fn,Re=pe(te);var Se=/^(?:parents|prev(?:Until|All))/,Me={children:!0,contents:!0,next:!0,prev:!0};pe.fn.extend({has:function(e){var t=pe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(pe.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&pe(e);if(!be.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&pe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?pe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ae.call(pe(e),this[0]):ae.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(pe.uniqueSort(pe.merge(this.get(),pe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),pe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Te(e,"parentNode")},parentsUntil:function(e,t,n){return Te(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return Te(e,"nextSibling")},prevAll:function(e){return Te(e,"previousSibling")},nextUntil:function(e,t,n){return Te(e,"nextSibling",n)},prevUntil:function(e,t,n){return Te(e,"previousSibling",n)},siblings:function(e){return xe((e.parentNode||{}).firstChild,e)},children:function(e){return xe(e.firstChild)},contents:function(e){return r(e,"iframe")?e.contentDocument:(r(e,"template")&&(e=e.content||e),pe.merge([],e.childNodes))}},function(e,t){pe.fn[e]=function(n,i){var r=pe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=pe.filter(i,r)),this.length>1&&(Me[e]||pe.uniqueSort(r),Se.test(e)&&r.reverse()),this.pushStack(r)}});var Ce=/[^\x20\t\r\n\f]+/g;pe.Callbacks=function(e){e="string"==typeof e?s(e):pe.extend({},e);var t,n,i,r,o=[],a=[],l=-1,c=function(){for(r=r||e.once,i=t=!0;a.length;l=-1)for(n=a.shift();++l<o.length;)!1===o[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(l=o.length-1,a.push(n)),function t(n){pe.each(n,function(n,i){pe.isFunction(i)?e.unique&&u.has(i)||o.push(i):i&&i.length&&"string"!==pe.type(i)&&t(i)})}(arguments),n&&!t&&c()),this},remove:function(){return pe.each(arguments,function(e,t){for(var n;(n=pe.inArray(t,o,n))>-1;)o.splice(n,1),n<=l&&l--}),this},has:function(e){return e?pe.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||t||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},pe.extend({Deferred:function(t){var n=[["notify","progress",pe.Callbacks("memory"),pe.Callbacks("memory"),2],["resolve","done",pe.Callbacks("once memory"),pe.Callbacks("once memory"),0,"resolved"],["reject","fail",pe.Callbacks("once memory"),pe.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return pe.Deferred(function(t){pe.each(n,function(n,i){var r=pe.isFunction(e[i[4]])&&e[i[4]];o[i[1]](function(){var e=r&&r.apply(this,arguments);e&&pe.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,i,r){function o(t,n,i,r){return function(){var s=this,u=arguments,h=function(){var e,h;if(!(t<a)){if((e=i.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");h=e&&("object"==typeof e||"function"==typeof e)&&e.then,pe.isFunction(h)?r?h.call(e,o(a,n,l,r),o(a,n,c,r)):(a++,h.call(e,o(a,n,l,r),o(a,n,c,r),o(a,n,l,n.notifyWith))):(i!==l&&(s=void 0,u=[e]),(r||n.resolveWith)(s,u))}},d=r?h:function(){try{h()}catch(e){pe.Deferred.exceptionHook&&pe.Deferred.exceptionHook(e,d.stackTrace),t+1>=a&&(i!==c&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?d():(pe.Deferred.getStackHook&&(d.stackTrace=pe.Deferred.getStackHook()),e.setTimeout(d))}}var a=0;return pe.Deferred(function(e){n[0][3].add(o(0,e,pe.isFunction(r)?r:l,e.notifyWith)),n[1][3].add(o(0,e,pe.isFunction(t)?t:l)),n[2][3].add(o(0,e,pe.isFunction(i)?i:c))}).promise()},promise:function(e){return null!=e?pe.extend(e,r):r}},o={};return pe.each(n,function(e,t){var a=t[2],s=t[5];r[t[1]]=a.add,s&&a.add(function(){i=s},n[3-e][2].disable,n[0][2].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,i=Array(n),r=ie.call(arguments),o=pe.Deferred(),a=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?ie.call(arguments):n,--t||o.resolveWith(i,r)}};if(t<=1&&(u(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||pe.isFunction(r[n]&&r[n].then)))return o.then();for(;n--;)u(r[n],a(n),o.reject);return o.promise()}});var Ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;pe.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Ae.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},pe.readyException=function(t){e.setTimeout(function(){throw t})};var ke=pe.Deferred();pe.fn.ready=function(e){return ke.then(e).catch(function(e){pe.readyException(e)}),this},pe.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--pe.readyWait:pe.isReady)||(pe.isReady=!0,!0!==e&&--pe.readyWait>0||ke.resolveWith(te,[pe]))}}),pe.ready.then=ke.then,"complete"===te.readyState||"loading"!==te.readyState&&!te.documentElement.doScroll?e.setTimeout(pe.ready):(te.addEventListener("DOMContentLoaded",h),e.addEventListener("load",h));var Pe=function(e,t,n,i,r,o,a){var s=0,l=e.length,c=null==n;if("object"===pe.type(n)){r=!0;for(s in n)Pe(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,pe.isFunction(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(pe(e),n)})),t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):o},Le=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};d.uid=1,d.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Le(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[pe.camelCase(t)]=n;else for(i in t)r[pe.camelCase(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][pe.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){Array.isArray(t)?t=t.map(pe.camelCase):(t=pe.camelCase(t),t=t in i?[t]:t.match(Ce)||[]),n=t.length;for(;n--;)delete i[t[n]]}(void 0===t||pe.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!pe.isEmptyObject(t)}};var De=new d,Fe=new d,Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/[A-Z]/g;pe.extend({hasData:function(e){return Fe.hasData(e)||De.hasData(e)},data:function(e,t,n){return Fe.access(e,t,n)},removeData:function(e,t){Fe.remove(e,t)},_data:function(e,t,n){return De.access(e,t,n)},_removeData:function(e,t){De.remove(e,t)}}),pe.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=Fe.get(o),1===o.nodeType&&!De.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=pe.camelCase(i.slice(5)),p(o,i,r[i]));De.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Fe.set(this,e)}):Pe(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=Fe.get(o,e)))return n;if(void 0!==(n=p(o,e)))return n}else this.each(function(){Fe.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Fe.remove(this,e)})}}),pe.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=De.get(e,t),n&&(!i||Array.isArray(n)?i=De.access(e,t,pe.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=pe.queue(e,t),i=n.length,r=n.shift(),o=pe._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){pe.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return De.get(e,n)||De.access(e,n,{empty:pe.Callbacks("once memory").add(function(){De.remove(e,[t+"queue",n])})})}}),pe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?pe.queue(this[0],e):void 0===t?this:this.each(function(){var n=pe.queue(this,e,t);pe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&pe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){pe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=pe.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=De.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var ze=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ve=new RegExp("^(?:([+-])=|)("+ze+")([a-z%]*)$","i"),Be=["Top","Right","Bottom","Left"],Ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&pe.contains(e.ownerDocument,e)&&"none"===pe.css(e,"display")},Ue=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r},We={};pe.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ie(this)?pe(this).show():pe(this).hide()})}});var je=/^(?:checkbox|radio)$/i,Ge=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,qe=/^$|\/(?:java|ecma)script/i,Xe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td;var Ye=/<|&#?\w+;/;!function(){var e=te.createDocumentFragment().appendChild(te.createElement("div")),t=te.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),de.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",de.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var $e=te.documentElement,Qe=/^key/,Ke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ze=/^([^.]*)(?:\.(.+)|)/;pe.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,c,u,h,d,f,p,m,g=De.get(e);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),r&&pe.find.matchesSelector($e,r),n.guid||(n.guid=pe.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==pe&&pe.event.triggered!==t.type?pe.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(Ce)||[""]).length;c--;)s=Ze.exec(t[c])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f&&(h=pe.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=pe.event.special[f]||{},u=pe.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&pe.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=l[f])||(d=l[f]=[],d.delegateCount=0,h.setup&&!1!==h.setup.call(e,i,p,a)||e.addEventListener&&e.addEventListener(f,a)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),pe.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,l,c,u,h,d,f,p,m,g=De.hasData(e)&&De.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(Ce)||[""]).length;c--;)if(s=Ze.exec(t[c])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f){for(h=pe.event.special[f]||{},d=l[f=(i?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)u=d[o],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||pe.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)pe.event.remove(e,f+t[c],n,i,!0);pe.isEmptyObject(l)&&De.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=pe.event.fix(e),l=new Array(arguments.length),c=(De.get(this,"events")||{})[s.type]||[],u=pe.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=pe.event.handlers.call(this,s,c),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((pe.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,i,r,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)i=t[n],r=i.selector+" ",void 0===a[r]&&(a[r]=i.needsContext?pe(r,this).index(c)>-1:pe.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(pe.Event.prototype,e,{enumerable:!0,configurable:!0,get:pe.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[pe.expando]?e:new pe.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===_()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r(this,"input"))return this.click(),!1},_default:function(e){return r(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},pe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},pe.Event=function(e,t){return this instanceof pe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?x:b,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&pe.extend(this,t),this.timeStamp=e&&e.timeStamp||pe.now(),void(this[pe.expando]=!0)):new pe.Event(e,t)},pe.Event.prototype={constructor:pe.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=x,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=x,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=x,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},pe.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Qe.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ke.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},pe.event.addProp),pe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){pe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||pe.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),pe.fn.extend({on:function(e,t,n,i){return w(this,e,t,n,i)},one:function(e,t,n,i){return w(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,pe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=b),this.each(function(){pe.event.remove(this,e,n,t)})}});var Je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,et=/<script|<style|<link/i,tt=/checked\s*(?:[^=]|=\s*.checked.)/i,nt=/^true\/(.*)/,it=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;pe.extend({htmlPrefilter:function(e){return e.replace(Je,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s=e.cloneNode(!0),l=pe.contains(e.ownerDocument,e);if(!(de.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||pe.isXMLDoc(e)))for(a=E(s),o=E(e),i=0,r=o.length;i<r;i++)C(o[i],a[i]);if(t)if(n)for(o=o||E(e),a=a||E(s),i=0,r=o.length;i<r;i++)M(o[i],a[i]);else M(e,s);return(a=E(s,"script")).length>0&&y(a,!l&&E(e,"script")),s},cleanData:function(e){for(var t,n,i,r=pe.event.special,o=0;void 0!==(n=e[o]);o++)if(Le(n)){if(t=n[De.expando]){if(t.events)for(i in t.events)r[i]?pe.event.remove(n,i):pe.removeEvent(n,i,t.handle);n[De.expando]=void 0}n[Fe.expando]&&(n[Fe.expando]=void 0)}}}),pe.fn.extend({detach:function(e){return k(this,e,!0)},remove:function(e){return k(this,e)},text:function(e){return Pe(this,function(e){return void 0===e?pe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return A(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||R(this,e).appendChild(e)})},prepend:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=R(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(pe.cleanData(E(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return pe.clone(this,e,t)})},html:function(e){return Pe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!et.test(e)&&!Xe[(Ge.exec(e)||["",""])[1].toLowerCase()]){e=pe.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(pe.cleanData(E(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,function(t){var n=this.parentNode;pe.inArray(this,e)<0&&(pe.cleanData(E(this)),n&&n.replaceChild(t,this))},e)}}),pe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){pe.fn[e]=function(e){for(var n,i=[],r=pe(e),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),pe(r[a])[t](n),oe.apply(i,n.get());return this.pushStack(i)}});var rt=/^margin/,ot=new RegExp("^("+ze+")(?!px)[a-z%]+$","i"),at=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",$e.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",r="4px"===t.marginRight,$e.removeChild(a),s=null}}var n,i,r,o,a=te.createElement("div"),s=te.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",de.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),pe.extend(de,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),i},pixelMarginRight:function(){return t(),r},reliableMarginLeft:function(){return t(),o}}))}();var st=/^(none|table(?!-c[ea]).+)/,lt=/^--/,ct={position:"absolute",visibility:"hidden",display:"block"},ut={letterSpacing:"0",fontWeight:"400"},ht=["Webkit","Moz","ms"],dt=te.createElement("div").style;pe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=P(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=pe.camelCase(t),l=lt.test(t),c=e.style;return l||(t=F(s)),a=pe.cssHooks[t]||pe.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t]:("string"===(o=typeof n)&&(r=Ve.exec(n))&&r[1]&&(n=m(e,t,r),o="number"),void(null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(pe.cssNumber[s]?"":"px")),de.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))))}},css:function(e,t,n,i){var r,o,a,s=pe.camelCase(t);return lt.test(t)||(t=F(s)),(a=pe.cssHooks[t]||pe.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=P(e,t,i)),"normal"===r&&t in ut&&(r=ut[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),pe.each(["height","width"],function(e,t){pe.cssHooks[t]={get:function(e,n,i){if(n)return!st.test(pe.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?z(e,t,i):Ue(e,ct,function(){return z(e,t,i)})},set:function(e,n,i){var r,o=i&&at(e),a=i&&O(e,t,i,"border-box"===pe.css(e,"boxSizing",!1,o),o);return a&&(r=Ve.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=pe.css(e,t)),N(0,n,a)}}}),pe.cssHooks.marginLeft=L(de.reliableMarginLeft,function(e,t){if(t)return(parseFloat(P(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),pe.each({margin:"",padding:"",border:"Width"},function(e,t){pe.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+Be[i]+t]=o[i]||o[i-2]||o[0];return r}},rt.test(e)||(pe.cssHooks[e+t].set=N)}),pe.fn.extend({css:function(e,t){return Pe(this,function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=at(e),r=t.length;a<r;a++)o[t[a]]=pe.css(e,t[a],!1,i);return o}return void 0!==n?pe.style(e,t,n):pe.css(e,t)},e,t,arguments.length>1)}}),pe.Tween=V,V.prototype={constructor:V,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||pe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(pe.cssNumber[n]?"":"px")},cur:function(){var e=V.propHooks[this.prop];return e&&e.get?e.get(this):V.propHooks._default.get(this)},run:function(e){var t,n=V.propHooks[this.prop];return this.options.duration?this.pos=t=pe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=pe.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){pe.fx.step[e.prop]?pe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[pe.cssProps[e.prop]]&&!pe.cssHooks[e.prop]?e.elem[e.prop]=e.now:pe.style(e.elem,e.prop,e.now+e.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},pe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},pe.fx=V.prototype.init,pe.fx.step={};var ft,pt,mt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;pe.Animation=pe.extend(G,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return m(n.elem,e,Ve.exec(t),n),n}]},tweener:function(e,t){pe.isFunction(e)?(t=e,e=["*"]):e=e.match(Ce);for(var n,i=0,r=e.length;i<r;i++)n=e[i],G.tweeners[n]=G.tweeners[n]||[],G.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,l,c,u,h="width"in t||"height"in t,d=this,f={},p=e.style,m=e.nodeType&&Ie(e),g=De.get(e,"fxshow");n.queue||(null==(a=pe._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,pe.queue(e,"fx").length||a.empty.fire()})}));for(i in t)if(r=t[i],mt.test(r)){if(delete t[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||pe.style(e,i)}if((l=!pe.isEmptyObject(t))||!pe.isEmptyObject(f)){h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=De.get(e,"display")),"none"===(u=pe.css(e,"display"))&&(c?u=c:(v([e],!0),c=e.style.display||c,u=pe.css(e,"display"),v([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===pe.css(e,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1;for(i in f)l||(g?"hidden"in g&&(m=g.hidden):g=De.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&v([e],!0),d.done(function(){m||v([e]),De.remove(e,"fxshow");for(i in f)pe.style(e,i,f[i])})),l=W(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}}],prefilter:function(e,t){t?G.prefilters.unshift(e):G.prefilters.push(e)}}),pe.speed=function(e,t,n){var i=e&&"object"==typeof e?pe.extend({},e):{complete:n||!n&&t||pe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!pe.isFunction(t)&&t};return pe.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in pe.fx.speeds?i.duration=pe.fx.speeds[i.duration]:i.duration=pe.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){pe.isFunction(i.old)&&i.old.call(this),i.queue&&pe.dequeue(this,i.queue)},i},pe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ie).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=pe.isEmptyObject(e),o=pe.speed(t,n,i),a=function(){var t=G(this,pe.extend({},e),o);(r||De.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=pe.timers,a=De.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&gt.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||pe.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=De.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=pe.timers,a=i?i.length:0;for(n.finish=!0,pe.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),pe.each(["toggle","show","hide"],function(e,t){var n=pe.fn[t];pe.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(U(t,!0),e,i,r)}}),pe.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){pe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),pe.timers=[],pe.fx.tick=function(){var e,t=0,n=pe.timers;for(ft=pe.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||pe.fx.stop(),ft=void 0},pe.fx.timer=function(e){pe.timers.push(e),pe.fx.start()},pe.fx.interval=13,pe.fx.start=function(){pt||(pt=!0,B())},pe.fx.stop=function(){pt=null},pe.fx.speeds={slow:600,fast:200,_default:400},pe.fn.delay=function(t,n){return t=pe.fx?pe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=te.createElement("input"),t=te.createElement("select").appendChild(te.createElement("option"));e.type="checkbox",de.checkOn=""!==e.value,de.optSelected=t.selected,(e=te.createElement("input")).value="t",e.type="radio",de.radioValue="t"===e.value}();var vt,Et=pe.expr.attrHandle;pe.fn.extend({attr:function(e,t){return Pe(this,pe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){pe.removeAttr(this,e)})}}),pe.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?pe.prop(e,t,n):(1===o&&pe.isXMLDoc(e)||(r=pe.attrHooks[t.toLowerCase()]||(pe.expr.match.bool.test(t)?vt:void 0)),void 0!==n?null===n?void pe.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=pe.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!de.radioValue&&"radio"===t&&r(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(Ce);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),vt={set:function(e,t,n){return!1===t?pe.removeAttr(e,n):e.setAttribute(n,n),n}},pe.each(pe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Et[t]||pe.find.attr;Et[t]=function(e,t,i){var r,o,a=t.toLowerCase();return i||(o=Et[a],Et[a]=r,r=null!=n(e,t,i)?a:null,Et[a]=o),r}});var yt=/^(?:input|select|textarea|button)$/i,Tt=/^(?:a|area)$/i;pe.fn.extend({prop:function(e,t){return Pe(this,pe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[pe.propFix[e]||e]})}}),pe.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&pe.isXMLDoc(e)||(t=pe.propFix[t]||t,r=pe.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=pe.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),de.optSelected||(pe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),pe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pe.propFix[this.toLowerCase()]=this}),pe.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(pe.isFunction(e))return this.each(function(t){pe(this).addClass(e.call(this,t,X(this)))});if("string"==typeof e&&e)for(t=e.match(Ce)||[];n=this[l++];)if(r=X(n),i=1===n.nodeType&&" "+q(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=q(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(pe.isFunction(e))return this.each(function(t){pe(this).removeClass(e.call(this,t,X(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ce)||[];n=this[l++];)if(r=X(n),i=1===n.nodeType&&" "+q(r)+" "){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(s=q(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):pe.isFunction(e)?this.each(function(n){pe(this).toggleClass(e.call(this,n,X(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=pe(this),o=e.match(Ce)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||((t=X(this))&&De.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":De.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+q(X(n))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;pe.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=pe.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,pe(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=pe.map(r,function(e){return null==e?"":e+""})),(t=pe.valHooks[this.type]||pe.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=pe.valHooks[r.type]||pe.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(xt,""):null==n?"":n:void 0}}),pe.extend({valHooks:{option:{get:function(e){var t=pe.find.attr(e,"value");return null!=t?t:q(pe.text(e))}},select:{get:function(e){var t,n,i,o=e.options,a=e.selectedIndex,s="select-one"===e.type,l=s?null:[],c=s?a+1:o.length;for(i=a<0?c:s?a:0;i<c;i++)if(((n=o[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!r(n.parentNode,"optgroup"))){if(t=pe(n).val(),s)return t;l.push(t)}return l},set:function(e,t){for(var n,i,r=e.options,o=pe.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=pe.inArray(pe.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),pe.each(["radio","checkbox"],function(){pe.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=pe.inArray(pe(e).val(),t)>-1}},de.checkOn||(pe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var bt=/^(?:focusinfocus|focusoutblur)$/;pe.extend(pe.event,{trigger:function(t,n,i,r){var o,a,s,l,c,u,h,d=[i||te],f=ce.call(t,"type")?t.type:t,p=ce.call(t,"namespace")?t.namespace.split("."):[];if(a=s=i=i||te,3!==i.nodeType&&8!==i.nodeType&&!bt.test(f+pe.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),c=f.indexOf(":")<0&&"on"+f,t=t[pe.expando]?t:new pe.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:pe.makeArray(n,[t]),h=pe.event.special[f]||{},r||!h.trigger||!1!==h.trigger.apply(i,n))){if(!r&&!h.noBubble&&!pe.isWindow(i)){for(l=h.delegateType||f,bt.test(l+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(i.ownerDocument||te)&&d.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=d[o++])&&!t.isPropagationStopped();)t.type=o>1?l:h.bindType||f,(u=(De.get(a,"events")||{})[t.type]&&De.get(a,"handle"))&&u.apply(a,n),(u=c&&a[c])&&u.apply&&Le(a)&&(t.result=u.apply(a,n),!1===t.result&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),n)||!Le(i)||c&&pe.isFunction(i[f])&&!pe.isWindow(i)&&((s=i[c])&&(i[c]=null),pe.event.triggered=f,i[f](),pe.event.triggered=void 0,s&&(i[c]=s)),t.result}},simulate:function(e,t,n){var i=pe.extend(new pe.Event,n,{type:e,isSimulated:!0});pe.event.trigger(i,null,t)}}),pe.fn.extend({trigger:function(e,t){return this.each(function(){pe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return pe.event.trigger(e,t,n,!0)}}),pe.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){pe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),pe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),de.focusin="onfocusin"in e,de.focusin||pe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){pe.event.simulate(t,e.target,pe.event.fix(e))};pe.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=De.access(i,t);r||i.addEventListener(e,n,!0),De.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=De.access(i,t)-1;r?De.access(i,t,r):(i.removeEventListener(e,n,!0),De.remove(i,t))}}});var _t=e.location,wt=pe.now(),Rt=/\?/;pe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||pe.error("Invalid XML: "+t),n};var Ht=/\[\]$/,St=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;pe.param=function(e,t){var n,i=[],r=function(e,t){var n=pe.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!pe.isPlainObject(e))pe.each(e,function(){r(this.name,this.value)});else for(n in e)Y(n,e[n],t,r);return i.join("&")},pe.fn.extend({serialize:function(){return pe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=pe.prop(this,"elements");return e?pe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!pe(this).is(":disabled")&&Ct.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!je.test(e))}).map(function(e,t){var n=pe(this).val();return null==n?null:Array.isArray(n)?pe.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}});var At=/%20/g,kt=/#.*$/,Pt=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ft=/^(?:GET|HEAD)$/,Nt=/^\/\//,Ot={},zt={},Vt="*/".concat("*"),Bt=te.createElement("a");Bt.href=_t.href,pe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:Dt.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":pe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?K(K(e,pe.ajaxSettings),t):K(pe.ajaxSettings,e)},ajaxPrefilter:$(Ot),ajaxTransport:$(zt),ajax:function(t,n){function i(t,n,i,s){var c,d,f,T,x,b=n;u||(u=!0,l&&e.clearTimeout(l),r=void 0,a=s||"",_.readyState=t>0?4:0,c=t>=200&&t<300||304===t,i&&(T=Z(p,_,i)),T=J(p,T,_,c),c?(p.ifModified&&((x=_.getResponseHeader("Last-Modified"))&&(pe.lastModified[o]=x),(x=_.getResponseHeader("etag"))&&(pe.etag[o]=x)),204===t||"HEAD"===p.type?b="nocontent":304===t?b="notmodified":(b=T.state,d=T.data,f=T.error,c=!f)):(f=b,!t&&b||(b="error",t<0&&(t=0))),_.status=t,_.statusText=(n||b)+"",c?v.resolveWith(m,[d,b,_]):v.rejectWith(m,[_,b,f]),_.statusCode(y),y=void 0,h&&g.trigger(c?"ajaxSuccess":"ajaxError",[_,p,c?d:f]),E.fireWith(m,[_,b]),h&&(g.trigger("ajaxComplete",[_,p]),--pe.active||pe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,a,s,l,c,u,h,d,f,p=pe.ajaxSetup({},n),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?pe(m):pe.event,v=pe.Deferred(),E=pe.Callbacks("once memory"),y=p.statusCode||{},T={},x={},b="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Lt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==u&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)_.always(e[_.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||b;return r&&r.abort(t),i(0,t),this}};if(v.promise(_),p.url=((t||p.url||_t.href)+"").replace(Nt,_t.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Ce)||[""],null==p.crossDomain){c=te.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Bt.protocol+"//"+Bt.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=pe.param(p.data,p.traditional)),Q(Ot,p,n,_),u)return _;(h=pe.event&&p.global)&&0==pe.active++&&pe.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ft.test(p.type),o=p.url.replace(kt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(At,"+")):(f=p.url.slice(o.length),p.data&&(o+=(Rt.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Pt,"$1"),f=(Rt.test(o)?"&":"?")+"_="+wt+++f),p.url=o+f),p.ifModified&&(pe.lastModified[o]&&_.setRequestHeader("If-Modified-Since",pe.lastModified[o]),pe.etag[o]&&_.setRequestHeader("If-None-Match",pe.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&_.setRequestHeader("Content-Type",p.contentType),_.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Vt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)_.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(m,_,p)||u))return _.abort();if(b="abort",E.add(p.complete),_.done(p.success),_.fail(p.error),r=Q(zt,p,n,_)){if(_.readyState=1,h&&g.trigger("ajaxSend",[_,p]),u)return _;p.async&&p.timeout>0&&(l=e.setTimeout(function(){_.abort("timeout")},p.timeout));try{u=!1,r.send(T,i)}catch(e){if(u)throw e;i(-1,e)}}else i(-1,"No Transport");return _},getJSON:function(e,t,n){return pe.get(e,t,n,"json")},getScript:function(e,t){return pe.get(e,void 0,t,"script")}}),pe.each(["get","post"],function(e,t){pe[t]=function(e,n,i,r){return pe.isFunction(n)&&(r=r||i,i=n,n=void 0),pe.ajax(pe.extend({url:e,type:t,dataType:r,data:n,success:i},pe.isPlainObject(e)&&e))}}),pe._evalUrl=function(e){return pe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},pe.fn.extend({wrapAll:function(e){var t;return this[0]&&(pe.isFunction(e)&&(e=e.call(this[0])),t=pe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return pe.isFunction(e)?this.each(function(t){pe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=pe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=pe.isFunction(e);return this.each(function(n){pe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){pe(this).replaceWith(this.childNodes)}),this}}),pe.expr.pseudos.hidden=function(e){return!pe.expr.pseudos.visible(e)},pe.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},pe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var It={0:200,1223:204},Ut=pe.ajaxSettings.xhr();de.cors=!!Ut&&"withCredentials"in Ut,de.ajax=Ut=!!Ut,pe.ajaxTransport(function(t){var n,i;if(de.cors||Ut&&!t.crossDomain)return{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(It[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),pe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),pe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return pe.globalEval(e),e}}}),pe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),pe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=pe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),te.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Wt=[],jt=/(=)\?(?=&|$)|\?\?/;pe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||pe.expando+"_"+wt++;return this[e]=!0,e}}),pe.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=!1!==t.jsonp&&(jt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&jt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=pe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(jt,"$1"+r):!1!==t.jsonp&&(t.url+=(Rt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||pe.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){void 0===o?pe(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Wt.push(r)),a&&pe.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),de.createHTMLDocument=function(){var e=te.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),pe.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,r,o;return t||(de.createHTMLDocument?(t=te.implementation.createHTMLDocument(""),i=t.createElement("base"),i.href=te.location.href,t.head.appendChild(i)):t=te),r=_e.exec(e),o=!n&&[],r?[t.createElement(r[1])]:(r=T([e],t,o),o&&o.length&&pe(o).remove(),pe.merge([],r.childNodes))},pe.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=q(e.slice(s)),e=e.slice(0,s)),pe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&pe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?pe("<div>").append(pe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},pe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){pe.fn[t]=function(e){return this.on(t,e)}}),pe.expr.pseudos.animated=function(e){return pe.grep(pe.timers,function(t){return e===t.elem}).length},pe.offset={setOffset:function(e,t,n){var i,r,o,a,s,l,c=pe.css(e,"position"),u=pe(e),h={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=pe.css(e,"top"),l=pe.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(i=u.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),pe.isFunction(t)&&(t=t.call(e,n,pe.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+r),"using"in t?t.using.call(e,h):u.css(h)}},pe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){pe.offset.setOffset(this,e,t)});var t,n,i,r,o=this[0];return o?o.getClientRects().length?(i=o.getBoundingClientRect(),t=o.ownerDocument,n=t.documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===pe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),r(e[0],"html")||(i=e.offset()),i={top:i.top+pe.css(e[0],"borderTopWidth",!0),left:i.left+pe.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-pe.css(n,"marginTop",!0),left:t.left-i.left-pe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===pe.css(e,"position");)e=e.offsetParent;return e||$e})}}),pe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;pe.fn[e]=function(i){return Pe(this,function(e,i,r){var o;return pe.isWindow(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r?o?o[t]:e[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r)},e,i,arguments.length)}}),pe.each(["top","left"],function(e,t){pe.cssHooks[t]=L(de.pixelPosition,function(e,n){if(n)return n=P(e,t),ot.test(n)?pe(e).position()[t]+"px":n})}),pe.each({Height:"height",Width:"width"},function(e,t){pe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){pe.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return Pe(this,function(t,n,r){var o;return pe.isWindow(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?pe.css(t,n,s):pe.style(t,n,r,s)},t,a?r:void 0,a)}})}),pe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),pe.holdReady=function(e){e?pe.readyWait++:pe.ready(!0)},pe.isArray=Array.isArray,pe.parseJSON=JSON.parse,pe.nodeName=r,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pe});var Gt=e.jQuery,qt=e.$;return pe.noConflict=function(t){return e.$===pe&&(e.$=qt),t&&e.jQuery===pe&&(e.jQuery=Gt),pe},t||(e.jQuery=e.$=pe),pe});var THREE={REVISION:"68"};"object"==typeof module&&(module.exports=THREE),THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(0===t)this.r=this.g=this.b=n;else{var i=function(e,t,n){return 0>n&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+6*(t-e)*(2/3-n):e};n=2*n-(t=.5>=n?n*(1+t):n+t-n*t),this.r=i(n,t,e+1/3),this.g=i(n,t,e),this.b=i(n,t,e-1/3)}return this},setStyle:function(e){return/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)?(e=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e),this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,this):/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)?(e=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e),this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,this):/^\#([0-9a-f]{6})$/i.test(e)?(e=/^\#([0-9a-f]{6})$/i.exec(e),this.setHex(parseInt(e[1],16)),this):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)?(e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e),this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16)),this):/^(\w+)$/i.test(e)?(this.setHex(THREE.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e=e||{h:0,s:0,l:0};var t,n=this.r,i=this.g,r=this.b,o=Math.max(n,i,r),a=((l=Math.min(n,i,r))+o)/2;if(l===o)l=t=0;else{var s=o-l,l=.5>=a?s/(o+l):s/(2-o-l);switch(o){case n:t=(i-r)/s+(i<r?6:0);break;case i:t=(r-n)/s+2;break;case r:t=(n-i)/s+4}t/=6}return e.h=t,e.s=l,e.l=a,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1==e instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),i=Math.cos(e._y/2),r=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=o*i*r+n*a*s,this._y=n*a*r-o*i*s,this._z=n*i*s+o*a*r,this._w=n*i*r-o*a*s):"YXZ"===e.order?(this._x=o*i*r+n*a*s,this._y=n*a*r-o*i*s,this._z=n*i*s-o*a*r,this._w=n*i*r+o*a*s):"ZXY"===e.order?(this._x=o*i*r-n*a*s,this._y=n*a*r+o*i*s,this._z=n*i*s+o*a*r,this._w=n*i*r-o*a*s):"ZYX"===e.order?(this._x=o*i*r-n*a*s,this._y=n*a*r+o*i*s,this._z=n*i*s-o*a*r,this._w=n*i*r+o*a*s):"YZX"===e.order?(this._x=o*i*r+n*a*s,this._y=n*a*r+o*i*s,this._z=n*i*s-o*a*r,this._w=n*i*r-o*a*s):"XZY"===e.order&&(this._x=o*i*r-n*a*s,this._y=n*a*r-o*i*s,this._z=n*i*s+o*a*r,this._w=n*i*r+o*a*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0];e=t[4];var i=t[8],r=t[1],o=t[5],a=t[9],s=t[2],l=t[6],c=n+o+(t=t[10]);return 0<c?(n=.5/Math.sqrt(c+1),this._w=.25/n,this._x=(l-a)*n,this._y=(i-s)*n,this._z=(r-e)*n):n>o&&n>t?(n=2*Math.sqrt(1+n-o-t),this._w=(l-a)/n,this._x=.25*n,this._y=(e+r)/n,this._z=(i+s)/n):o>t?(n=2*Math.sqrt(1+o-n-t),this._w=(i-s)/n,this._x=(e+r)/n,this._y=.25*n,this._z=(a+l)/n):(n=2*Math.sqrt(1+t-n-o),this._w=(r-e)/n,this._x=(i+s)/n,this._y=(a+l)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(n,i){return void 0===e&&(e=new THREE.Vector3),1e-6>(t=n.dot(i)+1)?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this.onChangeCallback(),this},multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){var n=this._x,i=this._y,r=this._z,o=this._w,a=o*e._w+n*e._x+i*e._y+r*e._z;if(0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),1<=a)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=Math.acos(a),l=Math.sqrt(1-a*a);return.001>Math.abs(l)?(this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this):(a=Math.sin((1-t)*s)/l,s=Math.sin(t*s)/l,this._w=o*a+this._w*s,this._x=n*a+this._x*s,this._y=i*a+this._y*s,this._z=r*a+this._z*s,this.onChangeCallback(),this)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],this._w=e[3],this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._w]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(e,t,n,i){return n.copy(e).slerp(t,i)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e):this.y=this.x=0,this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new THREE.Vector2,t=new THREE.Vector2),e.set(n,n),t.set(i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return e=this.y-e.y,t*t+e*e},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e){return this.x=e[0],this.y=e[1],this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return!1==t instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,n)),this}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z;return e=e.elements,this.x=e[0]*t+e[3]*n+e[6]*i,this.y=e[1]*t+e[4]*n+e[7]*i,this.z=e[2]*t+e[5]*n+e[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*i+e[12],this.y=e[1]*t+e[5]*n+e[9]*i+e[13],this.z=e[2]*t+e[6]*n+e[10]*i+e[14],this},applyProjection:function(e){var t=this.x,n=this.y,i=this.z,r=1/((e=e.elements)[3]*t+e[7]*n+e[11]*i+e[15]);return this.x=(e[0]*t+e[4]*n+e[8]*i+e[12])*r,this.y=(e[1]*t+e[5]*n+e[9]*i+e[13])*r,this.z=(e[2]*t+e[6]*n+e[10]*i+e[14])*r,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=(e=e.w)*t+o*i-a*n,l=e*n+a*t-r*i,c=e*i+r*n-o*t,t=-r*t-o*n-a*i;return this.x=s*e+t*-r+l*-a-c*-o,this.y=l*e+t*-o+c*-r-s*-a,this.z=c*e+t*-a+s*-o-l*-r,this},transformDirection:function(e){var t=this.x,n=this.y,i=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*i,this.y=e[1]*t+e[5]*n+e[9]*i,this.z=e[2]*t+e[6]*n+e[10]*i,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e,this.z*=e):this.z=this.y=this.x=0,this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new THREE.Vector3,t=new THREE.Vector3),e.set(n,n,n),t.set(i,i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,i=this.y,r=this.z;return this.x=i*e.z-r*e.y,this.y=r*e.x-n*e.z,this.z=n*e.y-i*e.x,this},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function(){var e,t;return function(n){return void 0===e&&(e=new THREE.Vector3),e.copy(n).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){return e=this.dot(e)/(this.length()*e.length()),Math.acos(THREE.Math.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return e=this.z-e.z,t*t+n*n+e*e},setEulerFromRotationMatrix:function(e,t){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length();return e=this.set(e.elements[8],e.elements[9],e.elements[10]).length(),this.x=t,this.y=n,this.z=e,this},setFromMatrixColumn:function(e,t){var n=4*e,i=t.elements;return this.x=i[n],this.y=i[n+1],this.z=i[n+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*i+e[12]*r,this.y=e[1]*t+e[5]*n+e[9]*i+e[13]*r,this.z=e[2]*t+e[6]*n+e[10]*i+e[14]*r,this.w=e[3]*t+e[7]*n+e[11]*i+e[15]*r,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.z=this.y=this.x=0,this.w=1),this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r=(e=e.elements)[0];i=e[4];var o=e[8],a=e[1],s=e[5],l=e[9];n=e[2],t=e[6];var c=e[10];return.01>Math.abs(i-a)&&.01>Math.abs(o-n)&&.01>Math.abs(l-t)?.1>Math.abs(i+a)&&.1>Math.abs(o+n)&&.1>Math.abs(l+t)&&.1>Math.abs(r+s+c-3)?(this.set(1,0,0,0),this):(e=Math.PI,r=(r+1)/2,s=(s+1)/2,c=(c+1)/2,i=(i+a)/4,o=(o+n)/4,l=(l+t)/4,r>s&&r>c?.01>r?(t=0,i=n=.707106781):(t=Math.sqrt(r),n=i/t,i=o/t):s>c?.01>s?(t=.707106781,n=0,i=.707106781):(n=Math.sqrt(s),t=i/n,i=l/n):.01>c?(n=t=.707106781,i=0):(i=Math.sqrt(c),t=o/i,n=l/i),this.set(t,n,i,e),this):(e=Math.sqrt((t-l)*(t-l)+(o-n)*(o-n)+(a-i)*(a-i)),.001>Math.abs(e)&&(e=1),this.x=(t-l)/e,this.y=(o-n)/e,this.z=(a-i)/e,this.w=Math.acos((r+s+c-1)/2),this)},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new THREE.Vector4,t=new THREE.Vector4),e.set(n,n,n,n),t.set(i,i,i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this.w=e[3],this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t){var n=THREE.Math.clamp,i=(h=e.elements)[0],r=h[4],o=h[8],a=h[1],s=h[5],l=h[9],c=h[2],u=h[6],h=h[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-r,i)):(this._x=Math.atan2(u,s),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(o,h),this._z=Math.atan2(a,s)):(this._y=Math.atan2(-c,i),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-r,s)):(this._y=0,this._z=Math.atan2(a,i))):"ZYX"===t?(this._y=Math.asin(-n(c,-1,1)),.99999>Math.abs(c)?(this._x=Math.atan2(u,h),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-r,s))):"YZX"===t?(this._z=Math.asin(n(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-l,s),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,h))):"XZY"===t?(this._z=Math.asin(-n(r,-1,1)),.99999>Math.abs(r)?(this._x=Math.atan2(u,s),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,h),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,this.onChangeCallback(),this},setFromQuaternion:function(e,t,n){var i=THREE.Math.clamp,r=e.x*e.x,o=e.y*e.y,a=e.z*e.z,s=e.w*e.w;return"XYZ"===(t=t||this._order)?(this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),s-r-o+a),this._y=Math.asin(i(2*(e.x*e.z+e.y*e.w),-1,1)),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),s+r-o-a)):"YXZ"===t?(this._x=Math.asin(i(2*(e.x*e.w-e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),s-r-o+a),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),s-r+o-a)):"ZXY"===t?(this._x=Math.asin(i(2*(e.x*e.w+e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),s-r-o+a),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),s-r+o-a)):"ZYX"===t?(this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),s-r-o+a),this._y=Math.asin(i(2*(e.y*e.w-e.x*e.z),-1,1)),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),s+r-o-a)):"YZX"===t?(this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),s-r+o-a),this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),s+r-o-a),this._z=Math.asin(i(2*(e.x*e.y+e.z*e.w),-1,1))):"XZY"===t?(this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),s-r+o-a),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),s+r-o-a),this._z=Math.asin(i(2*(e.z*e.w-e.x*e.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(e,t){this.start=void 0!==e?e:new THREE.Vector3,this.end=void 0!==t?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){return(e||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new THREE.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,i){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),r=t.dot(e)/r;return i&&(r=THREE.Math.clamp(r,0,1)),r}}(),closestPointToPoint:function(e,t,n){return e=this.closestPointToPointParameter(e,t),n=n||new THREE.Vector3,this.delta(n).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(e,t){this.min=void 0!==e?e:new THREE.Vector2(1/0,1/0),this.max=void 0!==t?t:new THREE.Vector2(-1/0,-1/0)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){return(e||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new THREE.Vector2).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new THREE.Vector2).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(e,t){this.min=void 0!==e?e:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new THREE.Vector3(-1/0,-1/0,-1/0)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){if(void 0!==t.geometry&&void 0!==t.geometry.vertices)for(var i=t.geometry.vertices,r=0,o=i.length;r<o;r++)e.copy(i[r]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){return(e||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new THREE.Vector3).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},clampPoint:function(e,t){return(t||new THREE.Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){return t=t||new THREE.Sphere,t.center=this.center(),t.radius=.5*this.size(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(e,t,n,i,r,o,a,s,l){var c=this.elements=new Float32Array(9);c[0]=void 0!==e?e:1,c[3]=t||0,c[6]=n||0,c[1]=i||0,c[4]=void 0!==r?r:1,c[7]=o||0,c[2]=a||0,c[5]=s||0,c[8]=void 0!==l?l:1},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,n,i,r,o,a,s,l){var c=this.elements;return c[0]=e,c[3]=t,c[6]=n,c[1]=i,c[4]=r,c[7]=o,c[2]=a,c[5]=s,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){return e=e.elements,this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,n,i){void 0===n&&(n=0),void 0===i&&(i=t.length);for(var r=0;r<i;r+=3,n+=3)e.x=t[n],e.y=t[n+1],e.z=t[n+2],e.applyMatrix3(this),t[n]=e.x,t[n+1]=e.y,t[n+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7];return t*o*(e=e[8])-t*a*l-n*r*e+n*a*s+i*r*l-i*o*s},getInverse:function(e,t){var n=e.elements,i=this.elements;if(i[0]=n[10]*n[5]-n[6]*n[9],i[1]=-n[10]*n[1]+n[2]*n[9],i[2]=n[6]*n[1]-n[2]*n[5],i[3]=-n[10]*n[4]+n[6]*n[8],i[4]=n[10]*n[0]-n[2]*n[8],i[5]=-n[6]*n[0]+n[2]*n[4],i[6]=n[9]*n[4]-n[5]*n[8],i[7]=-n[9]*n[0]+n[1]*n[8],i[8]=n[5]*n[0]-n[1]*n[4],0===(n=n[0]*i[0]+n[1]*i[3]+n[2]*i[6])){if(t)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/n),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){var e=this.elements;return new THREE.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},THREE.Matrix4=function(e,t,n,i,r,o,a,s,l,c,u,h,d,f,p,m){var g=this.elements=new Float32Array(16);g[0]=void 0!==e?e:1,g[4]=t||0,g[8]=n||0,g[12]=i||0,g[1]=r||0,g[5]=void 0!==o?o:1,g[9]=a||0,g[13]=s||0,g[2]=l||0,g[6]=c||0,g[10]=void 0!==u?u:1,g[14]=h||0,g[3]=d||0,g[7]=f||0,g[11]=p||0,g[15]=void 0!==m?m:1},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,n,i,r,o,a,s,l,c,u,h,d,f,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("THREEMatrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractRotation:function(){var e=new THREE.Vector3;return function(t){var n=this.elements;t=t.elements;var i=1/e.set(t[0],t[1],t[2]).length(),r=1/e.set(t[4],t[5],t[6]).length(),o=1/e.set(t[8],t[9],t[10]).length();return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[8]=t[8]*o,n[9]=t[9]*o,n[10]=t[10]*o,this}}(),makeRotationFromEuler:function(e){!1==e instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),n=Math.sin(n),a=Math.cos(i),i=Math.sin(i),s=Math.cos(r),r=Math.sin(r);if("XYZ"===e.order){e=o*s;var l=o*r,c=n*s,u=n*r;t[0]=a*s,t[4]=-a*r,t[8]=i,t[1]=l+c*i,t[5]=e-u*i,t[9]=-n*a,t[2]=u-e*i,t[6]=c+l*i,t[10]=o*a}else"YXZ"===e.order?(e=a*s,l=a*r,c=i*s,u=i*r,t[0]=e+u*n,t[4]=c*n-l,t[8]=o*i,t[1]=o*r,t[5]=o*s,t[9]=-n,t[2]=l*n-c,t[6]=u+e*n,t[10]=o*a):"ZXY"===e.order?(e=a*s,l=a*r,c=i*s,u=i*r,t[0]=e-u*n,t[4]=-o*r,t[8]=c+l*n,t[1]=l+c*n,t[5]=o*s,t[9]=u-e*n,t[2]=-o*i,t[6]=n,t[10]=o*a):"ZYX"===e.order?(e=o*s,l=o*r,c=n*s,u=n*r,t[0]=a*s,t[4]=c*i-l,t[8]=e*i+u,t[1]=a*r,t[5]=u*i+e,t[9]=l*i-c,t[2]=-i,t[6]=n*a,t[10]=o*a):"YZX"===e.order?(e=o*a,l=o*i,c=n*a,u=n*i,t[0]=a*s,t[4]=u-e*r,t[8]=c*r+l,t[1]=r,t[5]=o*s,t[9]=-n*s,t[2]=-i*s,t[6]=l*r+c,t[10]=e-u*r):"XZY"===e.order&&(e=o*a,l=o*i,c=n*a,u=n*i,t[0]=a*s,t[4]=-r,t[8]=i*s,t[1]=e*r+u,t[5]=o*s,t[9]=l*r-c,t[2]=c*r-l,t[6]=n*s,t[10]=u*r+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z,o=e.w,a=r+r;e=n*(c=n+n);var s=n*(u=i+i),n=n*a,l=i*u,i=i*a,r=r*a,c=o*c,u=o*u,o=o*a;return t[0]=1-(l+r),t[4]=s-o,t[8]=n+u,t[1]=s+o,t[5]=1-(e+r),t[9]=i-c,t[2]=n-u,t[6]=i+c,t[10]=1-(e+l),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(i,r,o){var a=this.elements;return n.subVectors(i,r).normalize(),0===n.length()&&(n.z=1),e.crossVectors(o,n).normalize(),0===e.length()&&(n.x+=1e-4,e.crossVectors(o,n).normalize()),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],E=n[7],y=n[11],n=n[15],T=i[0],x=i[4],b=i[8],_=i[12],w=i[1],R=i[5],H=i[9],S=i[13],M=i[2],C=i[6],A=i[10],k=i[14],P=i[3],L=i[7],D=i[11],i=i[15];return r[0]=o*T+a*w+s*M+l*P,r[4]=o*x+a*R+s*C+l*L,r[8]=o*b+a*H+s*A+l*D,r[12]=o*_+a*S+s*k+l*i,r[1]=c*T+u*w+h*M+d*P,r[5]=c*x+u*R+h*C+d*L,r[9]=c*b+u*H+h*A+d*D,r[13]=c*_+u*S+h*k+d*i,r[2]=f*T+p*w+m*M+g*P,r[6]=f*x+p*R+m*C+g*L,r[10]=f*b+p*H+m*A+g*D,r[14]=f*_+p*S+m*k+g*i,r[3]=v*T+E*w+y*M+n*P,r[7]=v*x+E*R+y*C+n*L,r[11]=v*b+E*H+y*A+n*D,r[15]=v*_+E*S+y*k+n*i,this},multiplyToArray:function(e,t,n){var i=this.elements;return this.multiplyMatrices(e,t),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,n,i){void 0===n&&(n=0),void 0===i&&(i=t.length);for(var r=0;r<i;r+=3,n+=3)e.x=t[n],e.y=t[n+1],e.z=t[n+2],e.applyMatrix4(this),t[n]=e.x,t[n+1]=e.y,t[n+2]=e.z;return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+r*o*h-i*o*d+i*l*c-r*s*c)+e[11]*(+t*l*u-t*a*d-r*o*u+n*o*d+r*a*c-n*l*c)+e[15]*(-i*a*c-t*s*u+t*a*h+i*o*u-n*o*h+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:function(){var e=new THREE.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=(E=e.elements)[0],r=E[4],o=E[8],a=E[12],s=E[1],l=E[5],c=E[9],u=E[13],h=E[2],d=E[6],f=E[10],p=E[14],m=E[3],g=E[7],v=E[11],E=E[15];if(n[0]=c*p*g-u*f*g+u*d*v-l*p*v-c*d*E+l*f*E,n[4]=a*f*g-o*p*g-a*d*v+r*p*v+o*d*E-r*f*E,n[8]=o*u*g-a*c*g+a*l*v-r*u*v-o*l*E+r*c*E,n[12]=a*c*d-o*u*d-a*l*f+r*u*f+o*l*p-r*c*p,n[1]=u*f*m-c*p*m-u*h*v+s*p*v+c*h*E-s*f*E,n[5]=o*p*m-a*f*m+a*h*v-i*p*v-o*h*E+i*f*E,n[9]=a*c*m-o*u*m-a*s*v+i*u*v+o*s*E-i*c*E,n[13]=o*u*h-a*c*h+a*s*f-i*u*f-o*s*p+i*c*p,n[2]=l*p*m-u*d*m+u*h*g-s*p*g-l*h*E+s*d*E,n[6]=a*d*m-r*p*m-a*h*g+i*p*g+r*h*E-i*d*E,n[10]=r*u*m-a*l*m+a*s*g-i*u*g-r*s*E+i*l*E,n[14]=a*l*h-r*u*h-a*s*d+i*u*d+r*s*p-i*l*p,n[3]=c*d*m-l*f*m-c*h*g+s*f*g+l*h*v-s*d*v,n[7]=r*f*m-o*d*m+o*h*g-i*f*g-r*h*v+i*d*v,n[11]=o*l*m-r*c*m-o*s*g+i*c*g+r*s*v-i*l*v,n[15]=r*c*h-o*l*h+o*s*d-i*c*d-r*s*f+i*l*f,0==(n=i*n[0]+s*n[4]+h*n[8]+m*n[12])){if(t)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/n),this},translate:function(e){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,n=e.x,i=e.y;return e=e.z,t[0]*=n,t[4]*=i,t[8]*=e,t[1]*=n,t[5]*=i,t[9]*=e,t[2]*=n,t[6]*=i,t[10]*=e,t[3]*=n,t[7]*=i,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],Math.max(e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10])))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,a=e.y,s=e.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new THREE.Vector3,t=new THREE.Matrix4;return function(n,i,r){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();0>this.determinant()&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.elements.set(this.elements),n=1/a;var o=1/s,c=1/l;return t.elements[0]*=n,t.elements[1]*=n,t.elements[2]*=n,t.elements[4]*=o,t.elements[5]*=o,t.elements[6]*=o,t.elements[8]*=c,t.elements[9]*=c,t.elements[10]*=c,i.setFromRotationMatrix(t),r.x=a,r.y=s,r.z=l,this}}(),makeFrustum:function(e,t,n,i,r,o){var a=this.elements;return a[0]=2*r/(t-e),a[4]=0,a[8]=(t+e)/(t-e),a[12]=0,a[1]=0,a[5]=2*r/(i-n),a[9]=(i+n)/(i-n),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+r)/(o-r),a[14]=-2*o*r/(o-r),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,i){var r=-(e=n*Math.tan(THREE.Math.degToRad(.5*e)));return this.makeFrustum(r*t,e*t,r,e,n,i)},makeOrthographic:function(e,t,n,i,r,o){var a=this.elements,s=t-e,l=n-i,c=o-r;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-(t+e)/s,a[1]=0,a[5]=2/l,a[9]=0,a[13]=-(n+i)/l,a[2]=0,a[6]=0,a[10]=-2/c,a[14]=-(o+r)/c,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){var e=this.elements;return new THREE.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}},THREE.Ray=function(e,t){this.origin=void 0!==e?e:new THREE.Vector3,this.direction=void 0!==t?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new THREE.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new THREE.Vector3;n.subVectors(e,this.origin);var i=n.dot(this.direction);return 0>i?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(e,t,n,i){var r=e.clone().add(t).multiplyScalar(.5),o=t.clone().sub(e).normalize(),a=.5*e.distanceTo(t),s=this.origin.clone().sub(r);e=-this.direction.dot(o),t=s.dot(this.direction);var l,c,u=-s.dot(o),h=s.lengthSq(),d=Math.abs(1-e*e);return 0<=d?(s=e*u-t,l=e*t-u,c=a*d,0<=s?l>=-c?l<=c?(a=1/d,s*=a,l*=a,e=s*(s+e*l+2*t)+l*(e*s+l+2*u)+h):(l=a,s=Math.max(0,-(e*l+t)),e=-s*s+l*(l+2*u)+h):(l=-a,s=Math.max(0,-(e*l+t)),e=-s*s+l*(l+2*u)+h):l<=-c?(s=Math.max(0,-(-e*a+t)),l=0<s?-a:Math.min(Math.max(-a,-u),a),e=-s*s+l*(l+2*u)+h):l<=c?(s=0,l=Math.min(Math.max(-a,-u),a),e=l*(l+2*u)+h):(s=Math.max(0,-(e*a+t)),l=0<s?a:Math.min(Math.max(-a,-u),a),e=-s*s+l*(l+2*u)+h)):(l=0<e?-a:a,s=Math.max(0,-(e*l+t)),e=-s*s+l*(l+2*u)+h),n&&n.copy(this.direction.clone().multiplyScalar(s).add(this.origin)),i&&i.copy(o.clone().multiplyScalar(l).add(r)),e},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new THREE.Vector3;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,o=t.radius*t.radius;return r>o?null:(o=Math.sqrt(o-r),r=i-o,i+=o,0>r&&0>i?null:0>r?this.at(i,n):this.at(r,n))}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0==t?0==e.distanceToPoint(this.origin)?0:null:0<=(e=-(this.origin.dot(e.normal)+e.constant)/t)?e:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},isIntersectionBox:function(){var e=new THREE.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var n,i,r,o,a;i=1/this.direction.x,o=1/this.direction.y,a=1/this.direction.z;var s=this.origin;return 0<=i?(n=(e.min.x-s.x)*i,i*=e.max.x-s.x):(n=(e.max.x-s.x)*i,i*=e.min.x-s.x),0<=o?(r=(e.min.y-s.y)*o,o*=e.max.y-s.y):(r=(e.max.y-s.y)*o,o*=e.min.y-s.y),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),0<=a?(r=(e.min.z-s.z)*a,a*=e.max.z-s.z):(r=(e.max.z-s.z)*a,a*=e.min.z-s.z),n>a||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),0>i?null:this.at(0<=n?n:i,t)))},intersectTriangle:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Vector3;return function(r,o,a,s,l){if(t.subVectors(o,r),n.subVectors(a,r),i.crossVectors(t,n),0<(o=this.direction.dot(i))){if(s)return null;s=1}else{if(!(0>o))return null;s=-1,o=-o}return e.subVectors(this.origin,r),0>(r=s*this.direction.dot(n.crossVectors(e,n)))?null:0>(a=s*this.direction.dot(t.cross(e)))||r+a>o?null:0>(r=-s*e.dot(i))?null:this.at(r/o,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(e,t){this.center=void 0!==e?e:new THREE.Vector3,this.radius=void 0!==t?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new THREE.Box3;return function(t,n){var i=this.center;void 0!==n?i.copy(n):e.setFromPoints(t).center(i);for(var r=0,o=0,a=t.length;o<a;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),i=t||new THREE.Vector3;return i.copy(e),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(e){return(e=e||new THREE.Box3).set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(e,t,n,i,r,o){this.planes=[void 0!==e?e:new THREE.Plane,void 0!==t?t:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==o?o:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,n,i,r,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes;e=(g=e.elements)[0];var n=g[1],i=g[2],r=g[3],o=g[4],a=g[5],s=g[6],l=g[7],c=g[8],u=g[9],h=g[10],d=g[11],f=g[12],p=g[13],m=g[14],g=g[15];return t[0].setComponents(r-e,l-o,d-c,g-f).normalize(),t[1].setComponents(r+e,l+o,d+c,g+f).normalize(),t[2].setComponents(r+n,l+a,d+u,g+p).normalize(),t[3].setComponents(r-n,l-a,d-u,g-p).normalize(),t[4].setComponents(r-i,l-s,d-h,g-m).normalize(),t[5].setComponents(r+i,l+s,d+h,g+m).normalize(),this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,n=e.center;e=-e.radius;for(var i=0;6>i;i++)if(t[i].distanceToPoint(n)<e)return!1;return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){for(var i=this.planes,r=0;6>r;r++){a=i[r];e.x=0<a.normal.x?n.min.x:n.max.x,t.x=0<a.normal.x?n.max.x:n.min.x,e.y=0<a.normal.y?n.min.y:n.max.y,t.y=0<a.normal.y?n.max.y:n.min.y,e.z=0<a.normal.z?n.min.z:n.max.z,t.z=0<a.normal.z?n.max.z:n.min.z;var o=a.distanceToPoint(e),a=a.distanceToPoint(t);if(0>o&&0>a)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(0>t[n].distanceToPoint(e))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(e,t){this.normal=void 0!==e?e:new THREE.Vector3(1,0,0),this.constant=void 0!==t?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,i,r){return i=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize(),this.setFromNormalAndCoplanarPoint(i,n),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new THREE.Vector3).copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&0<e||0>e&&0<t},intersectLine:function(){var e=new THREE.Vector3;return function(t,n){var i=n||new THREE.Vector3,r=t.delta(e),o=this.normal.dot(r);return 0!=o?0>(o=-(t.start.dot(this.normal)+this.constant)/o)||1<o?void 0:i.copy(r).multiplyScalar(o).add(t.start):0==this.distanceToPoint(t.start)?i.copy(t.start):void 0}}(),coplanarPoint:function(e){return(e||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Matrix3;return function(i,r){var o=r||n.getNormalMatrix(i),o=e.copy(this.normal).applyMatrix3(o),a=this.coplanarPoint(t);return a.applyMatrix4(i),this.setFromNormalAndCoplanarPoint(o,a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=Array(36),i=0;return function(){for(var r=0;36>r;r++)8==r||13==r||18==r||23==r?n[r]="-":14==r?n[r]="4":(2>=i&&(i=33554432+16777216*Math.random()|0),e=15&i,i>>=4,n[r]=t[19==r?3&e|8:e]);return n.join("")}}(),clamp:function(e,t,n){return e<t?t:e>n?n:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},sign:function(e){return 0>e?-1:0<e?1:0},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e}},THREE.Spline=function(e){function t(e,t,n,i,r,o,a){return e=.5*(n-e),i=.5*(i-t),(2*(t-n)+e+i)*a+(-3*(t-n)-2*e-i)*o+e*r+t}this.points=e;var n,i,r,o,a,s,l,c,u,h=[],d={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return n=(this.points.length-1)*e,i=Math.floor(n),r=n-i,h[0]=0===i?i:i-1,h[1]=i,h[2]=i>this.points.length-2?this.points.length-1:i+1,h[3]=i>this.points.length-3?this.points.length-1:i+2,s=this.points[h[0]],l=this.points[h[1]],c=this.points[h[2]],u=this.points[h[3]],o=r*r,a=r*o,d.x=t(s.x,l.x,c.x,u.x,r,o,a),d.y=t(s.y,l.y,c.y,u.y,r,o,a),d.z=t(s.z,l.z,c.z,u.z,r,o,a),d},this.getControlPointsArray=function(){var e,t,n=this.points.length,i=[];for(e=0;e<n;e++)t=this.points[e],i[e]=[t.x,t.y,t.z];return i},this.getLength=function(e){var t,n,i,r=t=t=0,o=new THREE.Vector3,a=new THREE.Vector3,s=[],l=0;for(s[0]=0,e||(e=100),n=this.points.length*e,o.copy(this.points[0]),e=1;e<n;e++)t=e/n,i=this.getPoint(t),a.copy(i),l+=a.distanceTo(o),o.copy(i),t*=this.points.length-1,(t=Math.floor(t))!=r&&(s[t]=l,r=t);return s[s.length]=l,{chunks:s,total:l}},this.reparametrizeByArcLength=function(e){var t,n,i,r,o,a,s=[],l=new THREE.Vector3,c=this.getLength();for(s.push(l.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(n=c.chunks[t]-c.chunks[t-1],a=Math.ceil(e*n/c.total),r=(t-1)/(this.points.length-1),o=t/(this.points.length-1),n=1;n<a-1;n++)i=r+1/a*n*(o-r),i=this.getPoint(i),s.push(l.copy(i).clone());s.push(l.copy(this.points[t]).clone())}this.points=s}},THREE.Triangle=function(e,t,n){this.a=void 0!==e?e:new THREE.Vector3,this.b=void 0!==t?t:new THREE.Vector3,this.c=void 0!==n?n:new THREE.Vector3},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,n,i,r){return(r=r||new THREE.Vector3).subVectors(i,n),e.subVectors(t,n),r.cross(e),0<(t=r.lengthSq())?r.multiplyScalar(1/Math.sqrt(t)):r.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(i,r,o,a,s){e.subVectors(a,r),t.subVectors(o,r),n.subVectors(i,r),i=e.dot(e),r=e.dot(t),o=e.dot(n);var l=t.dot(t);a=t.dot(n);var c=i*l-r*r;return s=s||new THREE.Vector3,0==c?s.set(-2,-1,-1):(c=1/c,l=(l*o-r*a)*c,i=(i*a-r*o)*c,s.set(1-l-i,i,l))}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,n,i,r){return 0<=(t=THREE.Triangle.barycoordFromPoint(t,n,i,r,e)).x&&0<=t.y&&1>=t.x+t.y}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Clock=function(e){this.autoStart=void 0===e||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),t=.001*(e-this.oldTime);this.oldTime=e,this.elapsedTime+=t}return t}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=[],i=t.length,r=0;r<i;r++)n[r]=t[r];for(r=0;r<i;r++)n[r].call(this,e)}}}},function(e){e.Raycaster=function(t,n,i,r){this.ray=new e.Ray(t,n),this.near=i||0,this.far=r||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},n=function(e,t,i,r){if(e.raycast(t,i),!0===r){r=0;for(var o=(e=e.children).length;r<o;r++)n(e[r],t,i,!0)}};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},intersectObject:function(e,i){var r=[];return n(e,this,r,i),r.sort(t),r},intersectObjects:function(e,i){for(var r=[],o=0,a=e.length;o<a;o++)n(e[o],this,r,i);return r.sort(t),r}}}(THREE),THREE.Object3D=function(){this.id=THREE.Object3DIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.parent=void 0,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var e=new THREE.Vector3,t=new THREE.Euler,n=new THREE.Quaternion,i=new THREE.Vector3(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i}}),this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}if(e===this)return console.error("THREE.Object3D.add:",e,"can't be added as a child of itself."),this;if(e instanceof THREE.Object3D){for(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e),t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.__addObject(e)}else console.error("THREE.Object3D.add:",e,"is not an instance of THREE.Object3D.");return this},remove:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);if(-1!==(t=this.children.indexOf(e))){for(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(t,1),t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.__removeObject(e)}},raycast:function(){},traverse:function(e){e(this);for(var t=0,n=this.children.length;t<n;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=0,n=this.children.length;t<n;t++)this.children[t].traverseVisible(e)}},getObjectById:function(e,t){for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n];if(r.id===e||!0===t&&void 0!==(r=r.getObjectById(e,t)))return r}},getObjectByName:function(e,t){for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n];if(r.name===e||!0===t&&void 0!==(r=r.getObjectByName(e,t)))return r}},getChildByName:function(e,t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)},clone:function(e,t){if(void 0===e&&(e=new THREE.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),!0===t)for(var n=0;n<this.children.length;n++)e.add(this.children[n].clone());return e}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){function e(){if(c===T){var e=new THREE.RenderableVertex;return y.push(e),T++,c++,e}return y[c++]}function t(){if(h===b){var e=new THREE.RenderableFace;return x.push(e),b++,h++,e}return x[h++]}function n(){if(f===w){var e=new THREE.RenderableLine;return _.push(e),w++,f++,e}return _[f++]}function i(){if(m===H){var e=new THREE.RenderableSprite;return R.push(e),H++,m++,e}return R[m++]}function r(e,t){return e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function o(e,t){var n=0,i=1,r=e.z+e.w,o=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;return 0<=r&&0<=o&&0<=a&&0<=s||!(0>r&&0>o||0>a&&0>s)&&(0>r?n=Math.max(n,r/(r-o)):0>o&&(i=Math.min(i,r/(r-o))),0>a?n=Math.max(n,a/(a-s)):0>s&&(i=Math.min(i,a/(a-s))),!(i<n)&&(e.lerp(t,n),t.lerp(e,1-i),!0))}var a,s,l,c,u,h,d,f,p,m,g,v=[],E=0,y=[],T=0,x=[],b=0,_=[],w=0,R=[],H=0,S={objects:[],lights:[],elements:[]},M=new THREE.Vector3,C=new THREE.Vector3,A=new THREE.Vector3,k=new THREE.Vector3,P=new THREE.Vector4,L=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),D=new THREE.Box3,F=Array(3),N=new THREE.Matrix4,O=new THREE.Matrix4,z=new THREE.Matrix4,V=new THREE.Matrix3,B=new THREE.Frustum,I=new THREE.Vector4,U=new THREE.Vector4;this.projectVector=function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),O.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),e.applyProjection(O)},this.unprojectVector=function(){var e=new THREE.Matrix4;return function(t,n){return e.getInverse(n.projectionMatrix),O.multiplyMatrices(n.matrixWorld,e),t.applyProjection(O)}}(),this.pickingRay=function(e,t){e.z=-1;var n=new THREE.Vector3(e.x,e.y,1);return this.unprojectVector(e,t),this.unprojectVector(n,t),n.sub(e).normalize(),new THREE.Raycaster(e,n)};var W=new function(){var i=[],r=[],o=null,a=null,s=new THREE.Matrix3,c=function(e){var t=e.positionWorld,n=e.positionScreen;t.copy(e.position).applyMatrix4(g),n.copy(t).applyMatrix4(O),t=1/n.w,n.x*=t,n.y*=t,n.z*=t,e.visible=-1<=n.x&&1>=n.x&&-1<=n.y&&1>=n.y&&-1<=n.z&&1>=n.z},h=function(e,t,n){return!0===e.visible||!0===t.visible||!0===n.visible||(F[0]=e.positionScreen,F[1]=t.positionScreen,F[2]=n.positionScreen,L.isIntersectionBox(D.setFromPoints(F)))},f=function(e,t,n){return 0>(n.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(n.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)};return{setObject:function(e){a=(o=e).material,s.getNormalMatrix(o.matrixWorld),i.length=0,r.length=0},projectVertex:c,checkTriangleVisibility:h,checkBackfaceCulling:f,pushVertex:function(t,n,i){(l=e()).position.set(t,n,i),c(l)},pushNormal:function(e,t,n){i.push(e,t,n)},pushUv:function(e,t){r.push(e,t)},pushLine:function(e,t){var i=y[e],r=y[t];(d=n()).id=o.id,d.v1.copy(i),d.v2.copy(r),d.z=(i.positionScreen.z+r.positionScreen.z)/2,d.material=o.material,S.elements.push(d)},pushTriangle:function(e,n,l){var c=y[e],d=y[n],p=y[l];if(!1!==h(c,d,p)&&(a.side===THREE.DoubleSide||!0===f(c,d,p))){for((u=t()).id=o.id,u.v1.copy(c),u.v2.copy(d),u.v3.copy(p),u.z=(c.positionScreen.z+d.positionScreen.z+p.positionScreen.z)/3,c=0;3>c;c++)d=3*arguments[c],(p=u.vertexNormalsModel[c]).set(i[d],i[d+1],i[d+2]),p.applyMatrix3(s).normalize(),d=2*arguments[c],u.uvs[c].set(r[d],r[d+1]);u.vertexNormalsLength=3,u.material=o.material,S.elements.push(u)}}}};this.projectScene=function(l,T,x,b){for(m=f=h=0,S.elements.length=0,!0===l.autoUpdate&&l.updateMatrixWorld(),void 0===T.parent&&T.updateMatrixWorld(),N.copy(T.matrixWorldInverse.getInverse(T.matrixWorld)),O.multiplyMatrices(T.projectionMatrix,N),B.setFromMatrix(O),s=0,S.objects.length=0,S.lights.length=0,l.traverseVisible(function(e){if(e instanceof THREE.Light)S.lights.push(e);else if((e instanceof THREE.Mesh||e instanceof THREE.Line||e instanceof THREE.Sprite)&&(!1===e.frustumCulled||!0===B.intersectsObject(e))){if(s===E){var t=new THREE.RenderableObject;v.push(t),E++,s++,a=t}else a=v[s++];a.id=e.id,a.object=e,null!==e.renderDepth?a.z=e.renderDepth:(k.setFromMatrixPosition(e.matrixWorld),k.applyProjection(O),a.z=k.z),S.objects.push(a)}}),!0===x&&S.objects.sort(r),l=0,x=S.objects.length;l<x;l++){R=(w=S.objects[l].object).geometry;if(W.setObject(w),g=w.matrixWorld,c=0,w instanceof THREE.Mesh){if(R instanceof THREE.BufferGeometry){var _=R.attributes,w=R.offsets;if(void 0!==_.position){for(var R=0,H=(F=_.position.array).length;R<H;R+=3)W.pushVertex(F[R],F[R+1],F[R+2]);if(void 0!==_.normal)for(var L=_.normal.array,R=0,H=L.length;R<H;R+=3)W.pushNormal(L[R],L[R+1],L[R+2]);if(void 0!==_.uv)for(L=_.uv.array,R=0,H=L.length;R<H;R+=2)W.pushUv(L[R],L[R+1]);if(void 0!==_.index)if(_=_.index.array,0<w.length)for(l=0;l<w.length;l++)for(H=w[l],F=H.index,R=H.start,H=H.start+H.count;R<H;R+=3)W.pushTriangle(_[R]+F,_[R+1]+F,_[R+2]+F);else for(R=0,H=_.length;R<H;R+=3)W.pushTriangle(_[R],_[R+1],_[R+2]);else for(R=0,H=F.length/3;R<H;R+=3)W.pushTriangle(R,R+1,R+2)}}else if(R instanceof THREE.Geometry){var D=R.vertices,H=R.faces,_=R.faceVertexUvs[0];V.getNormalMatrix(g);for(var F=w.material instanceof THREE.MeshFaceMaterial,L=!0===F?w.material:null,j=0,G=D.length;j<G;j++){Y=D[j];W.pushVertex(Y.x,Y.y,Y.z)}for(D=0,j=H.length;D<j;D++){var G=H[D],q=!0===F?L.materials[G.materialIndex]:w.material;if(void 0!==q){var X=q.side,Y=y[G.a],$=y[G.b],Q=y[G.c];if(!0===q.morphTargets){var K=R.morphTargets,Z=w.morphTargetInfluences,J=Y.position,ee=$.position,te=Q.position;M.set(0,0,0),C.set(0,0,0),A.set(0,0,0);for(var ne=0,ie=K.length;ne<ie;ne++){var re=Z[ne];if(0!==re){var oe=K[ne].vertices;M.x+=(oe[G.a].x-J.x)*re,M.y+=(oe[G.a].y-J.y)*re,M.z+=(oe[G.a].z-J.z)*re,C.x+=(oe[G.b].x-ee.x)*re,C.y+=(oe[G.b].y-ee.y)*re,C.z+=(oe[G.b].z-ee.z)*re,A.x+=(oe[G.c].x-te.x)*re,A.y+=(oe[G.c].y-te.y)*re,A.z+=(oe[G.c].z-te.z)*re}}Y.position.add(M),$.position.add(C),Q.position.add(A),W.projectVertex(Y),W.projectVertex($),W.projectVertex(Q)}if(!1!==W.checkTriangleVisibility(Y,$,Q)){if(K=W.checkBackfaceCulling(Y,$,Q),X!==THREE.DoubleSide){if(X===THREE.FrontSide&&!1===K)continue;if(X===THREE.BackSide&&!0===K)continue}for((u=t()).id=w.id,u.v1.copy(Y),u.v2.copy($),u.v3.copy(Q),u.normalModel.copy(G.normal),!1!==K||X!==THREE.BackSide&&X!==THREE.DoubleSide||u.normalModel.negate(),u.normalModel.applyMatrix3(V).normalize(),Z=G.vertexNormals,J=0,ee=Math.min(Z.length,3);J<ee;J++)(te=u.vertexNormalsModel[J]).copy(Z[J]),!1!==K||X!==THREE.BackSide&&X!==THREE.DoubleSide||te.negate(),te.applyMatrix3(V).normalize();if(u.vertexNormalsLength=Z.length,void 0!==(X=_[D]))for(K=0;3>K;K++)u.uvs[K].copy(X[K]);u.color=G.color,u.material=q,u.z=(Y.positionScreen.z+$.positionScreen.z+Q.positionScreen.z)/3,S.elements.push(u)}}}}}else if(w instanceof THREE.Line){if(R instanceof THREE.BufferGeometry){if(void 0!==(_=R.attributes).position){for(R=0,H=(F=_.position.array).length;R<H;R+=3)W.pushVertex(F[R],F[R+1],F[R+2]);if(void 0!==_.index)for(_=_.index.array,R=0,H=_.length;R<H;R+=2)W.pushLine(_[R],_[R+1]);else for(_=w.type===THREE.LinePieces?2:1,R=0,H=F.length/3-1;R<H;R+=_)W.pushLine(R,R+1)}}else if(R instanceof THREE.Geometry&&(z.multiplyMatrices(O,g),0!==(D=w.geometry.vertices).length))for((Y=e()).positionScreen.copy(D[0]).applyMatrix4(z),_=w.type===THREE.LinePieces?2:1,j=1,G=D.length;j<G;j++)(Y=e()).positionScreen.copy(D[j]).applyMatrix4(z),0<(j+1)%_||($=y[c-2],I.copy(Y.positionScreen),U.copy($.positionScreen),!0===o(I,U)&&(I.multiplyScalar(1/I.w),U.multiplyScalar(1/U.w),d=n(),d.id=w.id,d.v1.positionScreen.copy(I),d.v2.positionScreen.copy(U),d.z=Math.max(I.z,U.z),d.material=w.material,w.material.vertexColors===THREE.VertexColors&&(d.vertexColors[0].copy(w.geometry.colors[j]),d.vertexColors[1].copy(w.geometry.colors[j-1])),S.elements.push(d)))}else w instanceof THREE.Sprite&&(P.set(g.elements[12],g.elements[13],g.elements[14],1),P.applyMatrix4(O),R=1/P.w,P.z*=R,-1<=P.z&&1>=P.z&&(p=i(),p.id=w.id,p.x=P.x*R,p.y=P.y*R,p.z=P.z,p.object=w,p.rotation=w.rotation,p.scale.x=w.scale.x*Math.abs(p.x-(P.x+T.projectionMatrix.elements[0])/(P.w+T.projectionMatrix.elements[12])),p.scale.y=w.scale.y*Math.abs(p.y-(P.y+T.projectionMatrix.elements[5])/(P.w+T.projectionMatrix.elements[13])),p.material=w.material,S.elements.push(p)))}return!0===b&&S.elements.sort(r),S}},THREE.Face3=function(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i instanceof THREE.Vector3?i:new THREE.Vector3,this.vertexNormals=i instanceof Array?i:[],this.color=r instanceof THREE.Color?r:new THREE.Color,this.vertexColors=r instanceof Array?r:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e=new THREE.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,n=this.vertexNormals.length;t<n;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(t=0,n=this.vertexColors.length;t<n;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(t=0,n=this.vertexTangents.length;t<n;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},THREE.Face4=function(e,t,n,i,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(e,t,n,r,o,a)},THREE.BufferAttribute=function(e,t){this.array=e,this.itemSize=t},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},set:function(e){return this.array.set(e),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}},THREE.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.attributes={},this.offsets=this.drawcalls=[],this.boundingSphere=this.boundingBox=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(e,t,n){!1==t instanceof THREE.BufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[e]={array:t,itemSize:n}):this.attributes[e]=t},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,n){this.drawcalls.push({start:e,count:t,index:void 0!==n?n:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0),void 0!==(t=this.attributes.normal)&&((new THREE.Matrix3).getNormalMatrix(e).applyToVector3Array(t.array),t.needsUpdate=!0)},fromGeometry:function(e,t){t=t||{vertexColors:THREE.NoColors};var n=e.vertices,i=e.faces,r=e.faceVertexUvs,o=t.vertexColors,a=0<r[0].length,s=3==i[0].vertexNormals.length,l=new Float32Array(9*i.length);this.addAttribute("position",new THREE.BufferAttribute(l,3));var c=new Float32Array(9*i.length);if(this.addAttribute("normal",new THREE.BufferAttribute(c,3)),o!==THREE.NoColors){var u=new Float32Array(9*i.length);this.addAttribute("color",new THREE.BufferAttribute(u,3))}if(!0===a){var h=new Float32Array(6*i.length);this.addAttribute("uvs",new THREE.BufferAttribute(h,2))}for(var d=0,f=0,p=0;d<i.length;d++,f+=6,p+=9){var m=i[d],g=n[m.a],v=n[m.b],E=n[m.c];l[p]=g.x,l[p+1]=g.y,l[p+2]=g.z,l[p+3]=v.x,l[p+4]=v.y,l[p+5]=v.z,l[p+6]=E.x,l[p+7]=E.y,l[p+8]=E.z,!0===s?(g=m.vertexNormals[0],v=m.vertexNormals[1],E=m.vertexNormals[2],c[p]=g.x,c[p+1]=g.y,c[p+2]=g.z,c[p+3]=v.x,c[p+4]=v.y,c[p+5]=v.z,c[p+6]=E.x,c[p+7]=E.y,c[p+8]=E.z):(g=m.normal,c[p]=g.x,c[p+1]=g.y,c[p+2]=g.z,c[p+3]=g.x,c[p+4]=g.y,c[p+5]=g.z,c[p+6]=g.x,c[p+7]=g.y,c[p+8]=g.z),o===THREE.FaceColors?(m=m.color,u[p]=m.r,u[p+1]=m.g,u[p+2]=m.b,u[p+3]=m.r,u[p+4]=m.g,u[p+5]=m.b,u[p+6]=m.r,u[p+7]=m.g,u[p+8]=m.b):o===THREE.VertexColors&&(g=m.vertexColors[0],v=m.vertexColors[1],m=m.vertexColors[2],u[p]=g.r,u[p+1]=g.g,u[p+2]=g.b,u[p+3]=v.r,u[p+4]=v.g,u[p+5]=v.b,u[p+6]=m.r,u[p+7]=m.g,u[p+8]=m.b),!0===a&&(m=r[0][d][0],g=r[0][d][1],v=r[0][d][2],h[f]=m.x,h[f+1]=m.y,h[f+2]=g.x,h[f+3]=g.y,h[f+4]=v.x,h[f+5]=v.y)}return this.computeBoundingSphere(),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position.array;if(e){var t=this.boundingBox;3<=e.length&&(t.min.x=t.max.x=e[0],t.min.y=t.max.y=e[1],t.min.z=t.max.z=e[2]);for(var n=3,i=e.length;n<i;n+=3){var r=e[n],o=e[n+1],a=e[n+2];r<t.min.x?t.min.x=r:r>t.max.x&&(t.max.x=r),o<t.min.y?t.min.y=o:o>t.max.y&&(t.max.y=o),a<t.min.z?t.min.z=a:a>t.max.z&&(t.max.z=a)}}void 0!==e&&0!==e.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')},computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var n=this.attributes.position.array;if(n){e.makeEmpty();for(var i=this.boundingSphere.center,r=0,o=n.length;r<o;r+=3)t.set(n[r],n[r+1],n[r+2]),e.expandByPoint(t);e.center(i);for(var a=0,r=0,o=n.length;r<o;r+=3)t.set(n[r],n[r+1],n[r+2]),a=Math.max(a,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){if(this.attributes.position){var e,t,n,i;if(e=this.attributes.position.array.length,void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(e)};else for(e=0,t=this.attributes.normal.array.length;e<t;e++)this.attributes.normal.array[e]=0;var r,o,a,s,l,c,u=this.attributes.position.array,h=this.attributes.normal.array,d=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector3,g=new THREE.Vector3;if(this.attributes.index){var v=this.attributes.index.array,E=0<this.offsets.length?this.offsets:[{start:0,count:v.length,index:0}];for(n=0,i=E.length;n<i;++n){t=E[n].start,r=E[n].count;var y=E[n].index;for(e=t,t+=r;e<t;e+=3)r=y+v[e],o=y+v[e+1],a=y+v[e+2],s=u[3*r],l=u[3*r+1],c=u[3*r+2],d.set(s,l,c),s=u[3*o],l=u[3*o+1],c=u[3*o+2],f.set(s,l,c),s=u[3*a],l=u[3*a+1],c=u[3*a+2],p.set(s,l,c),m.subVectors(p,f),g.subVectors(d,f),m.cross(g),h[3*r]+=m.x,h[3*r+1]+=m.y,h[3*r+2]+=m.z,h[3*o]+=m.x,h[3*o+1]+=m.y,h[3*o+2]+=m.z,h[3*a]+=m.x,h[3*a+1]+=m.y,h[3*a+2]+=m.z}}else for(e=0,t=u.length;e<t;e+=9)s=u[e],l=u[e+1],c=u[e+2],d.set(s,l,c),s=u[e+3],l=u[e+4],c=u[e+5],f.set(s,l,c),s=u[e+6],l=u[e+7],c=u[e+8],p.set(s,l,c),m.subVectors(p,f),g.subVectors(d,f),m.cross(g),h[e]=m.x,h[e+1]=m.y,h[e+2]=m.z,h[e+3]=m.x,h[e+4]=m.y,h[e+5]=m.z,h[e+6]=m.x,h[e+7]=m.y,h[e+8]=m.z;this.normalizeNormals(),this.normalsNeedUpdate=!0}},computeTangents:function(){function e(e){Q.x=i[3*e],Q.y=i[3*e+1],Q.z=i[3*e+2],K.copy(Q),q=s[e],Y.copy(q),Y.sub(Q.multiplyScalar(Q.dot(q))).normalize(),$.crossVectors(K,q),X=$.dot(l[e]),G=0>X?-1:1,a[4*e]=Y.x,a[4*e+1]=Y.y,a[4*e+2]=Y.z,a[4*e+3]=G}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var t=this.attributes.index.array,n=this.attributes.position.array,i=this.attributes.normal.array,r=this.attributes.uv.array,o=n.length/3;void 0===this.attributes.tangent&&(this.attributes.tangent={itemSize:4,array:new Float32Array(4*o)});for(var a=this.attributes.tangent.array,s=[],l=[],c=0;c<o;c++)s[c]=new THREE.Vector3,l[c]=new THREE.Vector3;var u,h,d,f,p,m,g,v,E,y,T,x,b,_,w,R,H,S,M,C,A,k,P,L,D,F,N,O,z,V,B,I=new THREE.Vector3,U=new THREE.Vector3,W=this.offsets,c=0;for(O=W.length;c<O;++c){N=W[c].start,z=W[c].count;var j=W[c].index,o=N;for(N+=z;o<N;o+=3)z=j+t[o],V=j+t[o+1],B=j+t[o+2],function(e,t,i){u=n[3*e],h=n[3*e+1],d=n[3*e+2],f=n[3*t],p=n[3*t+1],m=n[3*t+2],g=n[3*i],v=n[3*i+1],E=n[3*i+2],y=r[2*e],T=r[2*e+1],x=r[2*t],b=r[2*t+1],_=r[2*i],w=r[2*i+1],R=f-u,H=g-u,S=p-h,M=v-h,C=m-d,A=E-d,F=1/((k=x-y)*(D=w-T)-(P=_-y)*(L=b-T)),I.set((D*R-L*H)*F,(D*S-L*M)*F,(D*C-L*A)*F),U.set((k*H-P*R)*F,(k*M-P*S)*F,(k*A-P*C)*F),s[e].add(I),s[t].add(I),s[i].add(I),l[e].add(U),l[t].add(U),l[i].add(U)}(z,V,B)}var G,q,X,Y=new THREE.Vector3,$=new THREE.Vector3,Q=new THREE.Vector3,K=new THREE.Vector3,c=0;for(O=W.length;c<O;++c)for(N=W[c].start,z=W[c].count,j=W[c].index,o=N,N+=z;o<N;o+=3)z=j+t[o],V=j+t[o+1],B=j+t[o+2],e(z),e(V),e(B)}},computeOffsets:function(e){var t=e;void 0===e&&(t=65535),Date.now(),e=this.attributes.index.array;for(var n=this.attributes.position.array,i=e.length/3,r=new Uint16Array(e.length),o=0,a=0,s=[{start:0,count:0,index:0}],l=s[0],c=0,u=new Int32Array(6),h=new Int32Array(n.length),d=new Int32Array(n.length),f=0;f<n.length;f++)h[f]=-1,d[f]=-1;for(n=0;n<i;n++){for(var p=c=0;3>p;p++)f=e[3*n+p],-1==h[f]?(u[2*p]=f,u[2*p+1]=-1,c++):h[f]<l.index?(u[2*p]=f,u[2*p+1]=-1,0):(u[2*p]=f,u[2*p+1]=h[f]);if(a+c>l.index+t)for(l={start:o,count:0,index:a},s.push(l),c=0;6>c;c+=2)-1<(p=u[c+1])&&p<l.index&&(u[c+1]=-1);for(c=0;6>c;c+=2)f=u[c],-1===(p=u[c+1])&&(p=a++),h[f]=p,d[p]=f,r[o++]=p-l.index,l.count++}return this.reorderBuffers(r,d,a),this.offsets=s},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var e,t,n,i=this.attributes.normal.array,r=0,o=i.length;r<o;r+=3)e=i[r],t=i[r+1],n=i[r+2],e=1/Math.sqrt(e*e+t*t+n*n),i[r]*=e,i[r+1]*=e,i[r+2]*=e},reorderBuffers:function(e,t,n){var i,r={},o=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(i in this.attributes)if("index"!=i)for(var a=this.attributes[i].array,s=0,l=o.length;s<l;s++)if(a instanceof(c=o[s])){r[i]=new c(this.attributes[i].itemSize*n);break}for(o=0;o<n;o++)for(i in a=t[o],this.attributes)if("index"!=i)for(var s=this.attributes[i].array,l=this.attributes[i].itemSize,c=r[i],u=0;u<l;u++)c[o*l+u]=s[a*l+u];this.attributes.index.array=e;for(i in this.attributes)"index"!=i&&(this.attributes[i].array=r[i],this.attributes[i].numItems=this.attributes[i].itemSize*n)},clone:function(){var e,t=new THREE.BufferGeometry,n=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(e in this.attributes){for(var i=(o=this.attributes[e]).array,r={itemSize:o.itemSize,array:null},o=0,a=n.length;o<a;o++){var s=n[o];if(i instanceof s){r.array=new s(i);break}}t.attributes[e]=r}for(o=0,a=this.offsets.length;o<a;o++)n=this.offsets[o],t.offsets.push({start:n.start,index:n.index,count:n.count});return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.hasTangents=!1,this.dynamic=!0,this.groupsNeedUpdate=this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=(new THREE.Matrix3).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(n=0,i=this.faces.length;n<i;n++){(e=this.faces[n]).normal.applyMatrix3(t).normalize();for(var r=0,o=e.vertexNormals.length;r<o;r++)e.vertexNormals[r].applyMatrix3(t).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},center:function(){this.computeBoundingBox();var e=new THREE.Vector3;return e.addVectors(this.boundingBox.min,this.boundingBox.max),e.multiplyScalar(-.5),this.applyMatrix((new THREE.Matrix4).makeTranslation(e.x,e.y,e.z)),this.computeBoundingBox(),e},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],a=this.vertices[r.b];e.subVectors(this.vertices[r.c],a),t.subVectors(o,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i;for(i=Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)i[t]=new THREE.Vector3;if(e){var r,o,a,s=new THREE.Vector3,l=new THREE.Vector3;for(new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,e=0,t=this.faces.length;e<t;e++)n=this.faces[e],r=this.vertices[n.a],o=this.vertices[n.b],a=this.vertices[n.c],s.subVectors(a,o),l.subVectors(r,o),s.cross(l),i[n.a].add(s),i[n.b].add(s),i[n.c].add(s)}else for(e=0,t=this.faces.length;e<t;e++)n=this.faces[e],i[n.a].add(n.normal),i[n.b].add(n.normal),i[n.c].add(n.normal);for(t=0,n=this.vertices.length;t<n;t++)i[t].normalize();for(e=0,t=this.faces.length;e<t;e++)n=this.faces[e],n.vertexNormals[0]=i[n.a].clone(),n.vertexNormals[1]=i[n.b].clone(),n.vertexNormals[2]=i[n.c].clone()},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new THREE.Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[],r=this.morphNormals[e].faceNormals;var a,s,l=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)a=new THREE.Vector3,s={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},r.push(a),l.push(s)}for(l=this.morphNormals[e],o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],a=l.faceNormals[n],s=l.vertexNormals[n],a.copy(r.normal),s.a.copy(r.vertexNormals[0]),s.b.copy(r.vertexNormals[1]),s.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeTangents:function(){var e,t,n,i,r,o,a,s,l,c,u,h,d,f,p,m,g,v=[],E=[];n=new THREE.Vector3;var y=new THREE.Vector3,T=new THREE.Vector3,x=new THREE.Vector3,b=new THREE.Vector3;for(e=0,t=this.vertices.length;e<t;e++)v[e]=new THREE.Vector3,E[e]=new THREE.Vector3;for(e=0,t=this.faces.length;e<t;e++)r=this.faces[e],o=this.faceVertexUvs[0][e],i=r.a,g=r.b,r=r.c,a=this.vertices[i],s=this.vertices[g],l=this.vertices[r],c=o[0],u=o[1],h=o[2],o=s.x-a.x,d=l.x-a.x,f=s.y-a.y,p=l.y-a.y,s=s.z-a.z,a=l.z-a.z,l=u.x-c.x,m=h.x-c.x,u=u.y-c.y,c=h.y-c.y,h=1/(l*c-m*u),n.set((c*o-u*d)*h,(c*f-u*p)*h,(c*s-u*a)*h),y.set((l*d-m*o)*h,(l*p-m*f)*h,(l*a-m*s)*h),v[i].add(n),v[g].add(n),v[r].add(n),E[i].add(y),E[g].add(y),E[r].add(y);for(y=["a","b","c","d"],e=0,t=this.faces.length;e<t;e++)for(r=this.faces[e],n=0;n<Math.min(r.vertexNormals.length,3);n++)b.copy(r.vertexNormals[n]),i=r[y[n]],g=v[i],T.copy(g),T.sub(b.multiplyScalar(b.dot(g))).normalize(),x.crossVectors(r.vertexNormals[n],g),i=x.dot(E[i]),i=0>i?-1:1,r.vertexTangents[n]=new THREE.Vector4(T.x,T.y,T.z,i);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,i=t.length;n<i;n++)0<n&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!1==e instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);else{var i,r=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0];e=e.faceVertexUvs[0],void 0===n&&(n=0),void 0!==t&&(i=(new THREE.Matrix3).getNormalMatrix(t));for(var u=0,h=a.length;u<h;u++){var d=a[u].clone();void 0!==t&&d.applyMatrix4(t),o.push(d)}for(u=0,h=l.length;u<h;u++){var f,p=(a=l[u]).vertexNormals,m=a.vertexColors;for((d=new THREE.Face3(a.a+r,a.b+r,a.c+r)).normal.copy(a.normal),void 0!==i&&d.normal.applyMatrix3(i).normalize(),t=0,o=p.length;t<o;t++)f=p[t].clone(),void 0!==i&&f.applyMatrix3(i).normalize(),d.vertexNormals.push(f);for(d.color.copy(a.color),t=0,o=m.length;t<o;t++)f=m[t],d.vertexColors.push(f.clone());d.materialIndex=a.materialIndex+n,s.push(d)}for(u=0,h=e.length;u<h;u++)if(n=e[u],i=[],void 0!==n){for(t=0,o=n.length;t<o;t++)i.push(new THREE.Vector2(n[t].x,n[t].y));c.push(i)}}},mergeVertices:function(){var e,t,n,i={},r=[],o=[],a=Math.pow(10,4);for(t=0,n=this.vertices.length;t<n;t++)e=this.vertices[t],e=Math.round(e.x*a)+"_"+Math.round(e.y*a)+"_"+Math.round(e.z*a),void 0===i[e]?(i[e]=t,r.push(this.vertices[t]),o[t]=r.length-1):o[t]=o[i[e]];for(i=[],t=0,n=this.faces.length;t<n;t++)for(a=this.faces[t],a.a=o[a.a],a.b=o[a.b],a.c=o[a.c],a=[a.a,a.b,a.c],e=0;3>e;e++)if(a[e]==a[(e+1)%3]){i.push(t);break}for(t=i.length-1;0<=t;t--)for(a=i[t],this.faces.splice(a,1),o=0,n=this.faceVertexUvs.length;o<n;o++)this.faceVertexUvs[o].splice(a,1);return t=this.vertices.length-r.length,this.vertices=r,t},makeGroups:function(){var e=0;return function(t,n){var i,r,o,a,s,l={},c=this.morphTargets.length,u=this.morphNormals.length;for(this.geometryGroups={},this.geometryGroupsList=[],i=0,r=this.faces.length;i<r;i++)o=this.faces[i],(o=t?o.materialIndex:0)in l||(l[o]={hash:o,counter:0}),(a=l[o].hash+"_"+l[o].counter)in this.geometryGroups||(s={id:e++,faces3:[],materialIndex:o,vertices:0,numMorphTargets:c,numMorphNormals:u},this.geometryGroups[a]=s,this.geometryGroupsList.push(s)),this.geometryGroups[a].vertices+3>n&&(l[o].counter+=1,(a=l[o].hash+"_"+l[o].counter)in this.geometryGroups||(s={id:e++,faces3:[],materialIndex:o,vertices:0,numMorphTargets:c,numMorphNormals:u},this.geometryGroups[a]=s,this.geometryGroupsList.push(s))),this.geometryGroups[a].faces3.push(i),this.geometryGroups[a].vertices+=3}}(),clone:function(){for(var e=new THREE.Geometry,t=this.vertices,n=0,i=t.length;n<i;n++)e.vertices.push(t[n].clone());for(n=0,i=(t=this.faces).length;n<i;n++)e.faces.push(t[n].clone());for(n=0,i=(t=this.faceVertexUvs[0]).length;n<i;n++){for(var r=t[n],o=[],a=0,s=r.length;a<s;a++)o.push(new THREE.Vector2(r[a].x,r[a].y));e.faceVertexUvs[0].push(o)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.Camera.prototype.clone=function(e){return void 0===e&&(e=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},THREE.CubeCamera=function(e,t,n){THREE.Object3D.call(this);var i=new THREE.PerspectiveCamera(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new THREE.Vector3(1,0,0)),this.add(i);var r=new THREE.PerspectiveCamera(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new THREE.Vector3(-1,0,0)),this.add(r);var o=new THREE.PerspectiveCamera(90,1,e,t);o.up.set(0,0,1),o.lookAt(new THREE.Vector3(0,1,0)),this.add(o);var a=new THREE.PerspectiveCamera(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new THREE.Vector3(0,-1,0)),this.add(a);var s=new THREE.PerspectiveCamera(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new THREE.Vector3(0,0,1)),this.add(s);var l=new THREE.PerspectiveCamera(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new THREE.Vector3(0,0,-1)),this.add(l),this.renderTarget=new THREE.WebGLRenderTargetCube(n,n,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){var n=this.renderTarget,c=n.generateMipmaps;n.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,r,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.generateMipmaps=c,n.activeCubeFace=5,e.render(t,l,n)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.OrthographicCamera=function(e,t,n,i,r,o){THREE.Camera.call(this),this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var e=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,e),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e},THREE.PerspectiveCamera=function(e,t,n,i){THREE.Camera.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,i,r,o){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=i,this.width=r,this.height=o,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(THREE.Math.degToRad(.5*this.fov))*this.near,n=e*(i=-t),e=Math.abs(e*t-n),i=Math.abs(t-i);this.projectionMatrix.makeFrustum(n+this.x*e/this.fullWidth,n+(this.x+this.width)*e/this.fullWidth,t-(this.y+this.height)*i/this.fullHeight,t-this.y*i/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var e=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,e),e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e},THREE.Light=function(e){THREE.Object3D.call(this),this.color=new THREE.Color(e)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(e){return void 0===e&&(e=new THREE.Light),THREE.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},THREE.AmbientLight=function(e){THREE.Light.call(this,e)},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,e),e},THREE.AreaLight=function(e,t){THREE.Light.call(this,e),this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.height=this.width=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraTop=this.shadowCameraRight=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},THREE.HemisphereLight=function(e,t,n){THREE.Light.call(this,e),this.position.set(0,100,0),this.groundColor=new THREE.Color(t),this.intensity=void 0!==n?n:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},THREE.PointLight=function(e,t,n){THREE.Light.call(this,e),this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},THREE.SpotLight=function(e,t,n,i,r){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.exponent=void 0!==r?r:10,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},THREE.Cache=function(){this.files={}},THREE.Cache.prototype={constructor:THREE.Cache,add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},THREE.Loader=function(e){this.statusDomElement=(this.showStatus=e)?THREE.Loader.prototype.addStatusElement():null,this.imageLoader=new THREE.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ",t=e.total?t+((100*e.loaded/e.total).toFixed(0)+"%"):t+((e.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=t},extractUrlBase:function(e){return 1===(e=e.split("/")).length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(e,t){for(var n=[],i=0;i<e.length;++i)n[i]=this.createMaterial(e[i],t);return n},needsTangents:function(e){for(var t=0,n=e.length;t<n;t++)if(e[t]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(e,t){function n(e){return e=Math.log(e)/Math.LN2,Math.pow(2,Math.round(e))}function i(e,i,r,a,s,l,c){var u,h=t+r,d=THREE.Loader.Handlers.get(h);null!==d?u=d.load(h):(u=new THREE.Texture,d=o.imageLoader,d.crossOrigin=o.crossOrigin,d.load(h,function(e){if(!1===THREE.Math.isPowerOfTwo(e.width)||!1===THREE.Math.isPowerOfTwo(e.height)){var t=n(e.width),i=n(e.height),r=document.createElement("canvas");r.width=t,r.height=i,r.getContext("2d").drawImage(e,0,0,t,i),u.image=r}else u.image=e;u.needsUpdate=!0})),u.sourceFile=r,a&&(u.repeat.set(a[0],a[1]),1!==a[0]&&(u.wrapS=THREE.RepeatWrapping),1!==a[1]&&(u.wrapT=THREE.RepeatWrapping)),s&&u.offset.set(s[0],s[1]),l&&(void 0!==(r={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping})[l[0]]&&(u.wrapS=r[l[0]]),void 0!==r[l[1]]&&(u.wrapT=r[l[1]])),c&&(u.anisotropy=c),e[i]=u}function r(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var o=this,a="MeshLambertMaterial",s={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var l=e.shading.toLowerCase();"phong"===l?a="MeshPhongMaterial":"basic"===l&&(a="MeshBasicMaterial")}return void 0!==e.blending&&void 0!==THREE[e.blending]&&(s.blending=THREE[e.blending]),(void 0!==e.transparent||1>e.opacity)&&(s.transparent=e.transparent),void 0!==e.depthTest&&(s.depthTest=e.depthTest),void 0!==e.depthWrite&&(s.depthWrite=e.depthWrite),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.flipSided&&(s.side=THREE.BackSide),void 0!==e.doubleSided&&(s.side=THREE.DoubleSide),void 0!==e.wireframe&&(s.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?s.vertexColors=THREE.FaceColors:e.vertexColors&&(s.vertexColors=THREE.VertexColors)),e.colorDiffuse?s.color=r(e.colorDiffuse):e.DbgColor&&(s.color=e.DbgColor),e.colorSpecular&&(s.specular=r(e.colorSpecular)),e.colorAmbient&&(s.ambient=r(e.colorAmbient)),e.colorEmissive&&(s.emissive=r(e.colorEmissive)),e.transparency&&(s.opacity=e.transparency),e.specularCoef&&(s.shininess=e.specularCoef),e.mapDiffuse&&t&&i(s,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&i(s,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&i(s,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&i(s,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&i(s,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&i(s,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(s.bumpScale=e.mapBumpScale),e.mapNormal?(a=THREE.ShaderLib.normalmap,l=THREE.UniformsUtils.clone(a.uniforms),l.tNormal.value=s.normalMap,e.mapNormalFactor&&l.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),s.map&&(l.tDiffuse.value=s.map,l.enableDiffuse.value=!0),s.specularMap&&(l.tSpecular.value=s.specularMap,l.enableSpecular.value=!0),s.lightMap&&(l.tAO.value=s.lightMap,l.enableAO.value=!0),l.diffuse.value.setHex(s.color),l.specular.value.setHex(s.specular),l.ambient.value.setHex(s.ambient),l.shininess.value=s.shininess,void 0!==s.opacity&&(l.opacity.value=s.opacity),a=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:l,lights:!0,fog:!0}),s.transparent&&(a.transparent=!0)):a=new THREE[a](s),void 0!==e.DbgName&&(a.name=e.DbgName),a}},THREE.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,n=this.handlers.length;t<n;t+=2){var i=this.handlers[t+1];if(this.handlers[t].test(e))return i}return null}},THREE.XHRLoader=function(e){this.cache=new THREE.Cache,this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,n,i){var r=this,o=r.cache.get(e);void 0!==o?t&&t(o):((o=new XMLHttpRequest).open("GET",e,!0),o.addEventListener("load",function(n){r.cache.add(e,this.response),t&&t(this.response),r.manager.itemEnd(e)},!1),void 0!==n&&o.addEventListener("progress",function(e){n(e)},!1),void 0!==i&&o.addEventListener("error",function(e){i(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(o.responseType=this.responseType),o.send(null),r.manager.itemStart(e))},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.ImageLoader=function(e){this.cache=new THREE.Cache,this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,n,i){var r=this,o=r.cache.get(e);if(void 0===o)return o=document.createElement("img"),void 0!==t&&o.addEventListener("load",function(n){r.cache.add(e,this),t(this),r.manager.itemEnd(e)},!1),void 0!==n&&o.addEventListener("progress",function(e){n(e)},!1),void 0!==i&&o.addEventListener("error",function(e){i(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.src=e,r.manager.itemStart(e),o;t(o)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){THREE.Loader.call(this,e),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load=function(e,t,n){n=n&&"string"==typeof n?n:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,n)},THREE.JSONLoader.prototype.loadAjaxJSON=function(e,t,n,i,r){var o=new XMLHttpRequest,a=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var s=JSON.parse(o.responseText);if(void 0!==s.metadata&&"scene"===s.metadata.type)return void console.error('THREE.JSONLoader: "'+t+'" seems to be a Scene. Use THREE.SceneLoader instead.');s=e.parse(s,i),n(s.geometry,s.materials)}else console.error('THREE.JSONLoader: "'+t+'" seems to be unreachable or the file is empty.');e.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+t+'" ('+o.status+")");else o.readyState===o.LOADING?r&&(0===a&&(a=o.getResponseHeader("Content-Length")),r({total:a,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==r&&(a=o.getResponseHeader("Content-Length"))},o.open("GET",t,!0),o.withCredentials=this.withCredentials,o.send(null)},THREE.JSONLoader.prototype.parse=function(e,t){var n=new THREE.Geometry,i=void 0!==e.scale?1/e.scale:1;return function(t){var i,r,o,a,s,l,c,u,h,d,f,p,m,g=e.faces;l=e.vertices;var v=e.normals,E=e.colors,y=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&y++;for(i=0;i<y;i++)n.faceVertexUvs[i]=[]}for(a=0,s=l.length;a<s;)i=new THREE.Vector3,i.x=l[a++]*t,i.y=l[a++]*t,i.z=l[a++]*t,n.vertices.push(i);for(a=0,s=g.length;a<s;)if(t=g[a++],h=1&t,o=2&t,i=8&t,c=16&t,d=32&t,l=64&t,t&=128,h){if(h=new THREE.Face3,h.a=g[a],h.b=g[a+1],h.c=g[a+3],f=new THREE.Face3,f.a=g[a+1],f.b=g[a+2],f.c=g[a+3],a+=4,o&&(o=g[a++],h.materialIndex=o,f.materialIndex=o),o=n.faces.length,i)for(i=0;i<y;i++)for(p=e.uvs[i],n.faceVertexUvs[i][o]=[],n.faceVertexUvs[i][o+1]=[],r=0;4>r;r++)u=g[a++],m=p[2*u],u=p[2*u+1],m=new THREE.Vector2(m,u),2!==r&&n.faceVertexUvs[i][o].push(m),0!==r&&n.faceVertexUvs[i][o+1].push(m);if(c&&(c=3*g[a++],h.normal.set(v[c++],v[c++],v[c]),f.normal.copy(h.normal)),d)for(i=0;4>i;i++)c=3*g[a++],d=new THREE.Vector3(v[c++],v[c++],v[c]),2!==i&&h.vertexNormals.push(d),0!==i&&f.vertexNormals.push(d);if(l&&(l=g[a++],l=E[l],h.color.setHex(l),f.color.setHex(l)),t)for(i=0;4>i;i++)l=g[a++],l=E[l],2!==i&&h.vertexColors.push(new THREE.Color(l)),0!==i&&f.vertexColors.push(new THREE.Color(l));n.faces.push(h),n.faces.push(f)}else{if(h=new THREE.Face3,h.a=g[a++],h.b=g[a++],h.c=g[a++],o&&(o=g[a++],h.materialIndex=o),o=n.faces.length,i)for(i=0;i<y;i++)for(p=e.uvs[i],n.faceVertexUvs[i][o]=[],r=0;3>r;r++)u=g[a++],m=p[2*u],u=p[2*u+1],m=new THREE.Vector2(m,u),n.faceVertexUvs[i][o].push(m);if(c&&(c=3*g[a++],h.normal.set(v[c++],v[c++],v[c])),d)for(i=0;3>i;i++)c=3*g[a++],d=new THREE.Vector3(v[c++],v[c++],v[c]),h.vertexNormals.push(d);if(l&&(l=g[a++],h.color.setHex(E[l])),t)for(i=0;3>i;i++)l=g[a++],h.vertexColors.push(new THREE.Color(E[l]));n.faces.push(h)}}(i),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=t)n.skinWeights.push(new THREE.Vector4(e.skinWeights[i],1<t?e.skinWeights[i+1]:0,2<t?e.skinWeights[i+2]:0,3<t?e.skinWeights[i+3]:0));if(e.skinIndices)for(i=0,r=e.skinIndices.length;i<r;i+=t)n.skinIndices.push(new THREE.Vector4(e.skinIndices[i],1<t?e.skinIndices[i+1]:0,2<t?e.skinIndices[i+2]:0,3<t?e.skinIndices[i+3]:0));n.bones=e.bones,n.bones&&0<n.bones.length&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match."),n.animation=e.animation,n.animations=e.animations}(),function(t){if(void 0!==e.morphTargets){var i,r,o,a,s,l;for(i=0,r=e.morphTargets.length;i<r;i++)for(n.morphTargets[i]={},n.morphTargets[i].name=e.morphTargets[i].name,n.morphTargets[i].vertices=[],s=n.morphTargets[i].vertices,l=e.morphTargets[i].vertices,o=0,a=l.length;o<a;o+=3){var c=new THREE.Vector3;c.x=l[o]*t,c.y=l[o+1]*t,c.z=l[o+2]*t,s.push(c)}}if(void 0!==e.morphColors)for(i=0,r=e.morphColors.length;i<r;i++)for(n.morphColors[i]={},n.morphColors[i].name=e.morphColors[i].name,n.morphColors[i].colors=[],a=n.morphColors[i].colors,s=e.morphColors[i].colors,t=0,o=s.length;t<o;t+=3)(l=new THREE.Color(16755200)).setRGB(s[t],s[t+1],s[t+2]),a.push(l)}(i),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:(i=this.initMaterials(e.materials,t),this.needsTangents(i)&&n.computeTangents(),{geometry:n,materials:i})},THREE.LoadingManager=function(e,t,n){var i=this,r=0,o=0;this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++},this.itemEnd=function(e){r++,void 0!==i.onProgress&&i.onProgress(e,r,o),r===o&&void 0!==i.onLoad&&i.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t,n,i){var r=this,o=new THREE.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t,n=new THREE.BufferGeometry,i=e.attributes;for(t in i){var r=i[t];n.attributes[t]={itemSize:r.itemSize,array:new self[r.type](r.array)}}return void 0!==(i=e.offsets)&&(n.offsets=JSON.parse(JSON.stringify(i))),void 0!==(e=e.boundingSphere)&&(n.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==e.center?e.center:[0,0,0]),e.radius)),n}},THREE.MaterialLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t,n,i){var r=this,o=new THREE.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var n=0,i=e.materials.length;n<i;n++)t.materials.push(this.parse(e.materials[n]));return t}},THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,n,i){var r=this,o=new THREE.XHRLoader(r.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),n=this.parseMaterials(e.materials);return this.parseObject(e.object,t,n)},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new THREE.JSONLoader,i=new THREE.BufferGeometryLoader,r=0,o=e.length;r<o;r++){var a,s=e[r];switch(s.type){case"PlaneGeometry":a=new THREE.PlaneGeometry(s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"CubeGeometry":a=new THREE.BoxGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":a=new THREE.CircleGeometry(s.radius,s.segments);break;case"CylinderGeometry":a=new THREE.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded);break;case"SphereGeometry":a=new THREE.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"IcosahedronGeometry":a=new THREE.IcosahedronGeometry(s.radius,s.detail);break;case"TorusGeometry":a=new THREE.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":a=new THREE.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":a=i.parse(s.data);break;case"Geometry":a=n.parse(s.data).geometry}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var n=new THREE.MaterialLoader,i=0,r=e.length;i<r;i++){var o=e[i],a=n.parse(o);a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),t[o.uuid]=a}return t},parseObject:function(){var e=new THREE.Matrix4;return function(t,n,i){var r;switch(t.type){case"Scene":r=new THREE.Scene;break;case"PerspectiveCamera":r=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":r=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":r=new THREE.AmbientLight(t.color);break;case"DirectionalLight":r=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":r=new THREE.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":r=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":r=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":r=n[t.geometry];var o=i[t.material];void 0===r&&console.error("THREE.ObjectLoader: Undefined geometry "+t.geometry),void 0===o&&console.error("THREE.ObjectLoader: Undefined material "+t.material),r=new THREE.Mesh(r,o);break;case"Sprite":void 0===(o=i[t.material])&&console.error("THREE.ObjectLoader: Undefined material "+t.material),r=new THREE.Sprite(o);break;default:r=new THREE.Object3D}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.children)for(var a in t.children)r.add(this.parseObject(t.children[a],n,i));return r}}()},THREE.TextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t,n,i){var r=new THREE.ImageLoader(this.manager);r.setCrossOrigin(this.crossOrigin),r.load(e,function(e){(e=new THREE.Texture(e)).needsUpdate=!0,void 0!==t&&t(e)},n,i)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.Material=function(){this.id=THREE.MaterialIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthWrite=this.depthTest=!0,this.polygonOffset=!1,this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.needsUpdate=this.visible=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0===n)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if(t in this){var i=this[t];i instanceof THREE.Color?i.set(n):i instanceof THREE.Vector3&&n instanceof THREE.Vector3?i.copy(n):this[t]="overdraw"==t?Number(n):n}}},clone:function(e){return void 0===e&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.wrapAround=this.metal=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.bumpMap=this.lightMap=this.map=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.envMap=this.alphaMap=this.specularMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.wireframe=this.morphTargets=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshFaceMaterial=function(e){this.materials=e instanceof Array?e:[]},THREE.MeshFaceMaterial.prototype.clone=function(){for(var e=new THREE.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e},THREE.PointCloudMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointCloudMaterial.prototype.clone=function(){var e=new THREE.PointCloudMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(e)},THREE.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(e)},THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=THREE.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.RawShaderMaterial=function(e){THREE.ShaderMaterial.call(this,e)},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.clone=function(){var e=new THREE.RawShaderMaterial;return THREE.ShaderMaterial.prototype.clone.call(this,e),e},THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.program=function(e,t){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.program=this.program,e},THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial,THREE.Texture=function(e,t,n,i,r,o,a,s,l){this.id=THREE.TextureIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.image=void 0!==e?e:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:THREE.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i?i:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==r?r:THREE.LinearFilter,this.minFilter=void 0!==o?o:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:THREE.RGBAFormat,this.type=void 0!==s?s:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=void 0,THREE.Texture.DEFAULT_MAPPING=new THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new THREE.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CubeTexture=function(e,t,n,i,r,o,a,s,l){THREE.Texture.call(this,e,t,n,i,r,o,a,s,l),this.images=e},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.clone=function(e){return void 0===e&&(e=new THREE.CubeTexture),THREE.Texture.prototype.clone.call(this,e),e.images=this.images,e},THREE.CompressedTexture=function(e,t,n,i,r,o,a,s,l,c,u){THREE.Texture.call(this,null,o,a,s,l,c,i,r,u),this.image={width:t,height:n},this.mipmaps=e,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.DataTexture=function(e,t,n,i,r,o,a,s,l,c,u){THREE.Texture.call(this,null,o,a,s,l,c,i,r,u),this.image={data:e,width:t,height:n}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.PointCloud=function(e,t){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.PointCloudMaterial({color:16777215*Math.random()}),this.sortParticles=!1},THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray;return function(n,i){var r=this,o=r.geometry,a=n.params.PointCloud.threshold;if(e.getInverse(this.matrixWorld),t.copy(n.ray).applyMatrix4(e),null===o.boundingBox||!1!==t.isIntersectionBox(o.boundingBox)){var s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=new THREE.Vector3,a=function(e,o){var a=t.distanceToPoint(e);if(a<s){var l=t.closestPointToPoint(e);l.applyMatrix4(r.matrixWorld);var c=n.ray.origin.distanceTo(l);i.push({distance:c,distanceToRay:a,point:l.clone(),index:o,face:null,object:r})}};if(o instanceof THREE.BufferGeometry){var c=(u=o.attributes).position.array;if(void 0!==u.index){var u=u.index.array,h=o.offsets;0===h.length&&(h=[{start:0,count:u.length,index:0}]);for(var d=0,f=h.length;d<f;++d)for(var p=h[d].start,m=h[d].index,o=p,p=p+h[d].count;o<p;o++){var g=m+u[o];l.set(c[3*g],c[3*g+1],c[3*g+2]),a(l,g)}}else for(u=c.length/3,o=0;o<u;o++)l.set(c[3*o],c[3*o+1],c[3*o+2]),a(l,o)}else for(l=this.geometry.vertices,o=0;o<l.length;o++)a(l[o],o)}}}(),THREE.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new THREE.PointCloud(this.geometry,this.material)),e.sortParticles=this.sortParticles,THREE.Object3D.prototype.clone.call(this,e),e},THREE.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new THREE.PointCloud(e,t)},THREE.Line=function(e,t,n){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==n?n:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,n=new THREE.Sphere;return function(i,r){var o=(o=i.linePrecision)*o;if(null===(a=this.geometry).boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(this.matrixWorld),!1!==i.ray.isIntersectionSphere(n)&&(e.getInverse(this.matrixWorld),t.copy(i.ray).applyMatrix4(e),a instanceof THREE.Geometry))for(var a=a.vertices,s=a.length,l=new THREE.Vector3,c=new THREE.Vector3,u=this.type===THREE.LineStrip?1:2,h=0;h<s-1;h+=u)if(!(t.distanceSqToSegment(a[h],a[h+1],c,l)>o)){var d=t.origin.distanceTo(c);d<i.near||d>i.far||r.push({distance:d,point:l.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}(),THREE.Line.prototype.clone=function(e){return void 0===e&&(e=new THREE.Line(this.geometry,this.material,this.type)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,n=new THREE.Sphere,i=new THREE.Vector3,r=new THREE.Vector3,o=new THREE.Vector3;return function(a,s){if(null===(y=this.geometry).boundingSphere&&y.computeBoundingSphere(),n.copy(y.boundingSphere),n.applyMatrix4(this.matrixWorld),!1!==a.ray.isIntersectionSphere(n)&&(e.getInverse(this.matrixWorld),t.copy(a.ray).applyMatrix4(e),null===y.boundingBox||!1!==t.isIntersectionBox(y.boundingBox)))if(y instanceof THREE.BufferGeometry){var l=this.material;if(void 0!==l){var c,u,h=y.attributes,d=a.precision;if(void 0!==h.index){var f=h.index.array,p=h.position.array,m=y.offsets;0===m.length&&(m=[{start:0,count:f.length,index:0}]);for(var g=0,v=m.length;g<v;++g)for(var h=m[g].start,E=m[g].index,y=h,T=h+m[g].count;y<T;y+=3){h=E+f[y],c=E+f[y+1],u=E+f[y+2],i.set(p[3*h],p[3*h+1],p[3*h+2]),r.set(p[3*c],p[3*c+1],p[3*c+2]),o.set(p[3*u],p[3*u+1],p[3*u+2]);var x=l.side===THREE.BackSide?t.intersectTriangle(o,r,i,!0):t.intersectTriangle(i,r,o,l.side!==THREE.DoubleSide);if(null!==x){x.applyMatrix4(this.matrixWorld);var b=a.ray.origin.distanceTo(x);b<d||b<a.near||b>a.far||s.push({distance:b,point:x,indices:[h,c,u],face:null,faceIndex:null,object:this})}}}else for(p=h.position.array,f=y=0,T=p.length;y<T;y+=3,f+=9)h=y,c=y+1,u=y+2,i.set(p[f],p[f+1],p[f+2]),r.set(p[f+3],p[f+4],p[f+5]),o.set(p[f+6],p[f+7],p[f+8]),null!==(x=l.side===THREE.BackSide?t.intersectTriangle(o,r,i,!0):t.intersectTriangle(i,r,o,l.side!==THREE.DoubleSide))&&(x.applyMatrix4(this.matrixWorld),(b=a.ray.origin.distanceTo(x))<d||b<a.near||b>a.far||s.push({distance:b,point:x,indices:[h,c,u],face:null,faceIndex:null,object:this}))}}else if(y instanceof THREE.Geometry)for(f=this.material instanceof THREE.MeshFaceMaterial,p=!0===f?this.material.materials:null,d=a.precision,m=y.vertices,g=0,v=y.faces.length;g<v;g++)if(E=y.faces[g],void 0!==(l=!0===f?p[E.materialIndex]:this.material)){if(h=m[E.a],c=m[E.b],u=m[E.c],!0===l.morphTargets){x=y.morphTargets,b=this.morphTargetInfluences,i.set(0,0,0),r.set(0,0,0),o.set(0,0,0);for(var T=0,_=x.length;T<_;T++){var w=b[T];if(0!==w){var R=x[T].vertices;i.x+=(R[E.a].x-h.x)*w,i.y+=(R[E.a].y-h.y)*w,i.z+=(R[E.a].z-h.z)*w,r.x+=(R[E.b].x-c.x)*w,r.y+=(R[E.b].y-c.y)*w,r.z+=(R[E.b].z-c.z)*w,o.x+=(R[E.c].x-u.x)*w,o.y+=(R[E.c].y-u.y)*w,o.z+=(R[E.c].z-u.z)*w}}i.add(h),r.add(c),o.add(u),h=i,c=r,u=o}null!==(x=l.side===THREE.BackSide?t.intersectTriangle(u,c,h,!0):t.intersectTriangle(h,c,u,l.side!==THREE.DoubleSide))&&(x.applyMatrix4(this.matrixWorld),(b=a.ray.origin.distanceTo(x))<d||b<a.near||b>a.far||s.push({distance:b,point:x,face:E,faceIndex:g,object:this}))}}}(),THREE.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e,t),e},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e,this.accumulatedSclWeight=this.accumulatedPosWeight=this.accumulatedRotWeight=0},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.updateMatrixWorld=function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e),this.accumulatedSclWeight=this.accumulatedPosWeight=this.accumulatedRotWeight=0},THREE.Skeleton=function(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new THREE.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=e=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new THREE.Matrix4)},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new THREE.Matrix4;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},THREE.Skeleton.prototype.pose=function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},THREE.Skeleton.prototype.update=function(){for(var e=new THREE.Matrix4,t=0,n=this.bones.length;t<n;t++)e.multiplyMatrices(this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)},THREE.SkinnedMesh=function(e,t,n){if(THREE.Mesh.call(this,e,t),this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4,e=[],this.geometry&&void 0!==this.geometry.bones){for(var i,r,o,a,s=0,l=this.geometry.bones.length;s<l;++s)i=this.geometry.bones[s],r=i.pos,o=i.rotq,a=i.scl,t=new THREE.Bone(this),e.push(t),t.name=i.name,t.position.set(r[0],r[1],r[2]),t.quaternion.set(o[0],o[1],o[2],o[3]),void 0!==a?t.scale.set(a[0],a[1],a[2]):t.scale.set(1,1,1);for(s=0,l=this.geometry.bones.length;s<l;++s)-1!==(i=this.geometry.bones[s]).parent?e[i.parent].add(e[s]):this.add(e[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(e,void 0,n))},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();1/0!==n?t.multiplyScalar(n):t.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(e){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,e),e},THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t),this.duration=1e3,this.mirroredLoop=!1,this.currentKeyframe=this.lastKeyframe=this.time=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,n=e.animations,i=/([a-z]+)_?(\d+)/,r=0,o=e.morphTargets.length;r<o;r++){var a=e.morphTargets[r].name.match(i);if(a&&1<a.length){n[a=a[1]]||(n[a]={start:1/0,end:-1/0});var s=n[a];r<s.start&&(s.start=r),r>s.end&&(s.end=r),t||(t=a)}}e.firstAnimation=t},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,n){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:n}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var n=this.geometry.animations[e];n?(this.setFrameRange(n.start,n.end),this.duration=(n.end-n.start)/t*1e3,this.time=0):console.warn("animation["+e+"] undefined")},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||0>this.time)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)):(this.time%=this.duration,0>this.time&&(this.time+=this.duration)),(e=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1))!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[e]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=e),t=this.time%t/t,this.directionBackwards&&(t=1-t),this.morphTargetInfluences[this.currentKeyframe]=t,this.morphTargetInfluences[this.lastKeyframe]=1-t},THREE.MorphAnimMesh.prototype.interpolateTargets=function(e,t,n){for(var i=this.morphTargetInfluences,r=0,o=i.length;r<o;r++)i[r]=0;-1<e&&(i[e]=1-n),-1<t&&(i[t]=n)},THREE.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,e),e},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=0;n<this.objects.length&&!(t<this.objects[n].distance);n++);this.objects.splice(n,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,n=this.objects.length;t<n&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},THREE.LOD.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,n)}}(),THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){if(1<this.objects.length){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld),n=e.distanceTo(t),this.objects[0].object.visible=!0;for(var i=1,r=this.objects.length;i<r&&n>=this.objects[i].distance;i++)this.objects[i-1].object.visible=!1,this.objects[i].object.visible=!0;for(;i<r;i++)this.objects[i].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(e){void 0===e&&(e=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,e);for(var t=0,n=this.objects.length;t<n;t++){var i=this.objects[t].object.clone();i.visible=0===t,e.addLevel(i,this.objects[t].distance)}return e},THREE.Sprite=function(){var e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0]),t=new THREE.BufferGeometry;return t.addAttribute("position",new THREE.BufferAttribute(e,3)),function(e){THREE.Object3D.call(this),this.geometry=t,this.material=void 0!==e?e:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.distanceToPoint(e);i>this.scale.x||n.push({distance:i,point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},THREE.Sprite.prototype.clone=function(e){return void 0===e&&(e=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Particle=THREE.Sprite,THREE.Scene=function(){THREE.Object3D.call(this),this.overrideMaterial=this.fog=null,this.autoUpdate=!0,this.matrixAutoUpdate=!1,this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.__addObject=function(e){if(e instanceof THREE.Light)-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target);else if(!(e instanceof THREE.Camera||e instanceof THREE.Bone)){this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(t,1)}for(this.dispatchEvent({type:"objectAdded",object:e}),e.dispatchEvent({type:"addedToScene",scene:this}),t=0;t<e.children.length;t++)this.__addObject(e.children[t])},THREE.Scene.prototype.__removeObject=function(e){if(e instanceof THREE.Light){var t=this.__lights.indexOf(e);if(-1!==t&&this.__lights.splice(t,1),e.shadowCascadeArray)for(t=0;t<e.shadowCascadeArray.length;t++)this.__removeObject(e.shadowCascadeArray[t])}else e instanceof THREE.Camera||(this.__objectsRemoved.push(e),-1!==(t=this.__objectsAdded.indexOf(e))&&this.__objectsAdded.splice(t,1));for(this.dispatchEvent({type:"objectRemoved",object:e}),e.dispatchEvent({type:"removedFromScene",scene:this}),t=0;t<e.children.length;t++)this.__removeObject(e.children[t])},THREE.Scene.prototype.clone=function(e){return void 0===e&&(e=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},THREE.Fog=function(e,t,n){this.name="",this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.CanvasRenderer=function(e){function t(e,t,n,i){c(t),u(n),h(i),d(e.getStyle()),D.stroke(),he.expandByScalar(2*t)}function n(e){f(e.getStyle()),D.fill()}function i(e){r(e.target)}function r(e){if(!(e instanceof THREE.CompressedTexture)){var t=e.wrapS===THREE.RepeatWrapping,n=e.wrapT===THREE.RepeatWrapping,i=e.image,r=document.createElement("canvas");r.width=i.width,r.height=i.height;var o=r.getContext("2d");o.setTransform(1,0,0,-1,0,i.height),o.drawImage(i,0,0),le[e.id]=D.createPattern(r,!0===t&&!0===n?"repeat":!0===t&&!1===n?"repeat-x":!1===t&&!0===n?"repeat-y":"no-repeat")}}function o(e,t,n,o,a,s,l,c,u,h,d,p,m){if(!(m instanceof THREE.DataTexture))if(!1===m.hasEventListener("update",i)&&(void 0!==m.image&&0<m.image.width&&r(m),m.addEventListener("update",i)),void 0!==(g=le[m.id])){f(g);var g=m.offset.x/m.repeat.x,v=m.offset.y/m.repeat.y,E=m.image.width*m.repeat.x;n-=e,o-=t,a-=e,s-=t,0!==(m=(u=(u+g)*E-(l=(l+g)*E))*(p=(p+v)*(m=m.image.height*m.repeat.y)-(c=(c+v)*m))-(d=(d+g)*E-l)*(h=(h+v)*m-c))&&(g=1/m,m=(p*n-h*a)*g,h=(p*o-h*s)*g,n=(u*a-d*n)*g,o=(u*s-d*o)*g,e=e-m*l-n*c,t=t-h*l-o*c,D.save(),D.transform(m,h,n,o,e,t),D.fill(),D.restore())}else f("rgba(0,0,0,1)"),D.fill()}function a(e,t,n){var i=t.x-e.x,r=t.y-e.y,o=i*i+r*r;0!==o&&(n/=Math.sqrt(o),i*=n,r*=n,t.x+=i,t.y+=r,e.x-=i,e.y-=r)}function s(e){O!==e&&(O=D.globalAlpha=e)}function l(e){z!==e&&(e===THREE.NormalBlending?D.globalCompositeOperation="source-over":e===THREE.AdditiveBlending?D.globalCompositeOperation="lighter":e===THREE.SubtractiveBlending&&(D.globalCompositeOperation="darker"),z=e)}function c(e){I!==e&&(I=D.lineWidth=e)}function u(e){U!==e&&(U=D.lineCap=e)}function h(e){W!==e&&(W=D.lineJoin=e)}function d(e){V!==e&&(V=D.strokeStyle=e)}function f(e){B!==e&&(B=D.fillStyle=e)}function p(e){j.length!==e.length&&(D.setLineDash(e),j=e)}console.log("THREE.CanvasRenderer",THREE.REVISION);var m=THREE.Math.smoothstep;e=e||{};var g,v,E,y,T,x,b,_=this,w=new THREE.Projector,R=void 0!==e.canvas?e.canvas:document.createElement("canvas"),H=R.width,S=R.height,M=Math.floor(H/2),C=Math.floor(S/2),A=0,k=0,P=H,L=S,D=R.getContext("2d",{alpha:!0===e.alpha}),F=new THREE.Color(0),N=0,O=1,z=0,V=null,B=null,I=null,U=null,W=null,j=[];new THREE.RenderableVertex,new THREE.RenderableVertex;var G,q,X,Y,$,Q,K=new THREE.Color;new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color;var Z,J,ee,te,ne,ie,re,oe=new THREE.Color,ae=new THREE.Color,se=new THREE.Color,le={},ce=new THREE.Box2,ue=new THREE.Box2,he=new THREE.Box2,de=new THREE.Color,fe=new THREE.Color,pe=new THREE.Color,me=new THREE.Vector3,ge=new THREE.Vector3,ve=new THREE.Vector3,Ee=new THREE.Matrix3;void 0===D.setLineDash&&(D.setLineDash=function(){}),this.domElement=R,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.sortElements=this.sortObjects=this.autoClear=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setSize=function(e,t,n){H=e*this.devicePixelRatio,S=t*this.devicePixelRatio,R.width=H,R.height=S,M=Math.floor(H/2),C=Math.floor(S/2),!1!==n&&(R.style.width=e+"px",R.style.height=t+"px"),ce.min.set(-M,-C),ce.max.set(M,C),ue.min.set(-M,-C),ue.max.set(M,C),O=1,z=0,W=U=I=B=V=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,i){A=e*this.devicePixelRatio,k=t*this.devicePixelRatio,P=n*this.devicePixelRatio,L=i*this.devicePixelRatio},this.setScissor=function(){},this.enableScissorTest=function(){},this.setClearColor=function(e,t){F.set(e),N=void 0!==t?t:1,ue.min.set(-M,-C),ue.max.set(M,C)},this.setClearColorHex=function(e,t){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return F},this.getClearAlpha=function(){return N},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===ue.empty()&&(ue.intersect(ce),ue.expandByScalar(2),ue.min.x+=M,ue.min.y=-ue.min.y+C,ue.max.x+=M,ue.max.y=-ue.max.y+C,1>N&&D.clearRect(0|ue.min.x,0|ue.min.y,ue.max.x-ue.min.x|0,ue.max.y-ue.min.y|0),0<N&&(l(THREE.NormalBlending),s(1),f("rgba("+Math.floor(255*F.r)+","+Math.floor(255*F.g)+","+Math.floor(255*F.b)+","+N+")"),D.fillRect(0|ue.min.x,0|ue.min.y,ue.max.x-ue.min.x|0,ue.max.y-ue.min.y|0)),ue.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,R){if(!1==R instanceof THREE.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{!0===this.autoClear&&this.clear(),_.info.render.vertices=0,_.info.render.faces=0,D.setTransform(P/H,0,0,-L/S,A,S-k),D.translate(M,C),g=w.projectScene(e,R,this.sortObjects,this.sortElements),v=g.elements,E=g.lights,y=R,Ee.getNormalMatrix(R.matrixWorldInverse),de.setRGB(0,0,0),fe.setRGB(0,0,0),pe.setRGB(0,0,0);for(var F=0,N=E.length;F<N;F++){var O=(z=E[F]).color;z instanceof THREE.AmbientLight?de.add(O):z instanceof THREE.DirectionalLight?fe.add(O):z instanceof THREE.PointLight&&pe.add(O)}for(F=0,N=v.length;F<N;F++)if(void 0!==(U=(I=v[F]).material)&&0!==U.opacity){if(he.makeEmpty(),I instanceof THREE.RenderableSprite){(T=I).x*=M,T.y*=C;var z=T,V=I;s((O=U).opacity),l(O.blending);var B=V.scale.x*M,V=V.scale.y*C,I=.5*Math.sqrt(B*B+V*V);if(he.min.set(z.x-I,z.y-I),he.max.set(z.x+I,z.y+I),O instanceof THREE.SpriteMaterial){if(null!==(j=O.map)&&void 0!==j.image){!1===j.hasEventListener("update",i)&&(0<j.image.width&&r(j),j.addEventListener("update",i)),f(void 0!==(I=le[j.id])?I:"rgba( 0, 0, 0, 1 )");var I=(ye=j.image).width*j.offset.x,U=ye.height*j.offset.y,W=ye.width*j.repeat.x,j=ye.height*j.repeat.y,ye=B/W,Te=V/j;D.save(),D.translate(z.x,z.y),0!==O.rotation&&D.rotate(O.rotation),D.translate(-B/2,-V/2),D.scale(ye,Te),D.translate(-I,-U),D.fillRect(I,U,W,j)}else f(O.color.getStyle()),D.save(),D.translate(z.x,z.y),0!==O.rotation&&D.rotate(O.rotation),D.scale(B,-V),D.fillRect(-.5,-.5,1,1);D.restore()}else O instanceof THREE.SpriteCanvasMaterial&&(d(O.color.getStyle()),f(O.color.getStyle()),D.save(),D.translate(z.x,z.y),0!==O.rotation&&D.rotate(O.rotation),D.scale(B,V),O.program(D),D.restore())}else if(I instanceof THREE.RenderableLine){if(T=I.v1,x=I.v2,T.positionScreen.x*=M,T.positionScreen.y*=C,x.positionScreen.x*=M,x.positionScreen.y*=C,he.setFromPoints([T.positionScreen,x.positionScreen]),!0===ce.isIntersectionBox(he))if(z=T,O=x,B=I,V=U,s(V.opacity),l(V.blending),D.beginPath(),D.moveTo(z.positionScreen.x,z.positionScreen.y),D.lineTo(O.positionScreen.x,O.positionScreen.y),V instanceof THREE.LineBasicMaterial){if(c(V.linewidth),u(V.linecap),h(V.linejoin),V.vertexColors!==THREE.VertexColors)d(V.color.getStyle());else if(I=B.vertexColors[0].getStyle(),B=B.vertexColors[1].getStyle(),I===B)d(I);else{try{var xe=D.createLinearGradient(z.positionScreen.x,z.positionScreen.y,O.positionScreen.x,O.positionScreen.y);xe.addColorStop(0,I),xe.addColorStop(1,B)}catch(e){xe=I}d(xe)}D.stroke(),he.expandByScalar(2*V.linewidth)}else V instanceof THREE.LineDashedMaterial&&(c(V.linewidth),u(V.linecap),h(V.linejoin),d(V.color.getStyle()),p([V.dashSize,V.gapSize]),D.stroke(),he.expandByScalar(2*V.linewidth),p([]))}else if(I instanceof THREE.RenderableFace){if(T=I.v1,x=I.v2,b=I.v3,-1>T.positionScreen.z||1<T.positionScreen.z)continue;if(-1>x.positionScreen.z||1<x.positionScreen.z)continue;if(-1>b.positionScreen.z||1<b.positionScreen.z)continue;if(T.positionScreen.x*=M,T.positionScreen.y*=C,x.positionScreen.x*=M,x.positionScreen.y*=C,b.positionScreen.x*=M,b.positionScreen.y*=C,0<U.overdraw&&(a(T.positionScreen,x.positionScreen,U.overdraw),a(x.positionScreen,b.positionScreen,U.overdraw),a(b.positionScreen,T.positionScreen,U.overdraw)),he.setFromPoints([T.positionScreen,x.positionScreen,b.positionScreen]),!0===ce.isIntersectionBox(he)){O=T,B=x,V=b,z=U,_.info.render.vertices+=3,_.info.render.faces++,s(z.opacity),l(z.blending),G=O.positionScreen.x,q=O.positionScreen.y,X=B.positionScreen.x,Y=B.positionScreen.y,$=V.positionScreen.x,Q=V.positionScreen.y;var U=G,W=q,j=X,ye=Y,Te=$,be=Q;if(D.beginPath(),D.moveTo(U,W),D.lineTo(j,ye),D.lineTo(Te,be),D.closePath(),(z instanceof THREE.MeshLambertMaterial||z instanceof THREE.MeshPhongMaterial)&&null===z.map){for(oe.copy(z.color),ae.copy(z.emissive),z.vertexColors===THREE.FaceColors&&oe.multiply(I.color),K.copy(de),ge.copy(O.positionWorld).add(B.positionWorld).add(V.positionWorld).divideScalar(3),O=ge,B=I.normalModel,V=K,I=0,U=E.length;I<U;I++)W=E[I],se.copy(W.color),W instanceof THREE.DirectionalLight?(j=me.setFromMatrixPosition(W.matrixWorld).normalize(),0>=(ye=B.dot(j))||(ye*=W.intensity,V.add(se.multiplyScalar(ye)))):W instanceof THREE.PointLight&&(j=me.setFromMatrixPosition(W.matrixWorld),0>=(ye=B.dot(me.subVectors(j,O).normalize()))||0!=(ye*=0==W.distance?1:1-Math.min(O.distanceTo(j)/W.distance,1))&&(ye*=W.intensity,V.add(se.multiplyScalar(ye))));K.multiply(oe).add(ae),!0===z.wireframe?t(K,z.wireframeLinewidth,z.wireframeLinecap,z.wireframeLinejoin):n(K)}else z instanceof THREE.MeshBasicMaterial||z instanceof THREE.MeshLambertMaterial||z instanceof THREE.MeshPhongMaterial?null!==z.map?z.map.mapping instanceof THREE.UVMapping&&(Z=I.uvs,o(G,q,X,Y,$,Q,Z[0].x,Z[0].y,Z[1].x,Z[1].y,Z[2].x,Z[2].y,z.map)):null!==z.envMap?z.envMap.mapping instanceof THREE.SphericalReflectionMapping?(ve.copy(I.vertexNormalsModel[0]).applyMatrix3(Ee),J=.5*ve.x+.5,ee=.5*ve.y+.5,ve.copy(I.vertexNormalsModel[1]).applyMatrix3(Ee),te=.5*ve.x+.5,ne=.5*ve.y+.5,ve.copy(I.vertexNormalsModel[2]).applyMatrix3(Ee),ie=.5*ve.x+.5,re=.5*ve.y+.5,o(G,q,X,Y,$,Q,J,ee,te,ne,ie,re,z.envMap)):z.envMap.mapping instanceof THREE.SphericalRefractionMapping&&(ve.copy(I.vertexNormalsModel[0]).applyMatrix3(Ee),J=-.5*ve.x+.5,ee=-.5*ve.y+.5,ve.copy(I.vertexNormalsModel[1]).applyMatrix3(Ee),te=-.5*ve.x+.5,ne=-.5*ve.y+.5,ve.copy(I.vertexNormalsModel[2]).applyMatrix3(Ee),ie=-.5*ve.x+.5,re=-.5*ve.y+.5,o(G,q,X,Y,$,Q,J,ee,te,ne,ie,re,z.envMap)):(K.copy(z.color),z.vertexColors===THREE.FaceColors&&K.multiply(I.color),!0===z.wireframe?t(K,z.wireframeLinewidth,z.wireframeLinecap,z.wireframeLinejoin):n(K)):(z instanceof THREE.MeshDepthMaterial?K.r=K.g=K.b=1-m(O.positionScreen.z*O.positionScreen.w,y.near,y.far):z instanceof THREE.MeshNormalMaterial?(ve.copy(I.normalModel).applyMatrix3(Ee),K.setRGB(ve.x,ve.y,ve.z).multiplyScalar(.5).addScalar(.5)):K.setRGB(1,1,1),!0===z.wireframe?t(K,z.wireframeLinewidth,z.wireframeLinecap,z.wireframeLinejoin):n(K))}}ue.union(he)}D.setTransform(1,0,0,1,0,0)}}},THREE.ShaderChunk={},THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\tvec3 dirVector = normalize( lDirection.xyz );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat lDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif",THREE.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n\tmvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tvec3 pointDiffuse = vec3( 0.0 );\n\tvec3 pointSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tvec3 spotDiffuse = vec3( 0.0 );\n\tvec3 spotSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n\t\t\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tvec3 dirDiffuse = vec3( 0.0 );\n\tvec3 dirSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\tvec3 dirVector = normalize( lDirection.xyz );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tvec3 hemiDiffuse = vec3( 0.0 );\n\tvec3 hemiSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\themiDiffuse += diffuse * hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n\ttotalDiffuse += dirDiffuse;\n\ttotalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\ttotalDiffuse += hemiDiffuse;\n\ttotalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\ttotalDiffuse += pointDiffuse;\n\ttotalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\ttotalDiffuse += spotDiffuse;\n\ttotalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\tuniform samplerCube envMap;\n\tuniform float flipEnvMap;\n\tuniform int combine;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tuniform bool useRefract;\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\t#ifdef GAMMA_INPUT\n\n\t\ttexelColor.xyz *= texelColor.xyz;\n\n\t#endif\n\n\tgl_FragColor = gl_FragColor * texelColor;\n\n#endif",THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\t#ifdef GAMMA_INPUT\n\n\t\tvColor = color * color;\n\n\t#else\n\n\t\tvColor = color;\n\n\t#endif\n\n#endif",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\tuniform bool useRefract;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n",THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\tvec3 reflectVec;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n\t\tif ( useRefract ) {\n\n\t\t\treflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t} else { \n\n\t\t\treflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t}\n\n\t#else\n\n\t\treflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t\tvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#endif\n\n\t#ifdef GAMMA_INPUT\n\n\t\tcubeColor.xyz *= cubeColor.xyz;\n\n\t#endif\n\n\tif ( combine == 1 ) {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n\t} else if ( combine == 2 ) {\n\n\t\tgl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n\t} else {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n\t}\n\n#endif",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif",THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tconst float LOG2 = 1.442695;\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif",THREE.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n\tobjectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n\tobjectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n\tobjectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n\tworldNormal = normalize( worldNormal );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tif ( useRefract ) {\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t} else {\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t}\n\n#endif",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\tshadowColor *= shadowColor;\n\n\t#endif\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#endif\n\n\t#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#endif\n\n\t#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif",THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",THREE.UniformsUtils={merge:function(e){var t,n,i,r={};for(t=0;t<e.length;t++)for(n in i=this.clone(e[t]))r[n]=i[n];return r},clone:function(e){var t,n,i,r={};for(t in e)for(n in r[t]={},e[t])i=e[t][n],r[t][n]=i instanceof THREE.Color||i instanceof THREE.Vector2||i instanceof THREE.Vector3||i instanceof THREE.Vector4||i instanceof THREE.Matrix4||i instanceof THREE.Texture?i.clone():i instanceof Array?i.slice():i;return r}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\tgl_FragColor.xyz *= vLightFront;\n\t\telse\n\t\t\tgl_FragColor.xyz *= vLightBack;\n\t#else\n\t\tgl_FragColor.xyz *= vLightFront;\n\t#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\tvNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float refractionRatio;\nuniform float reflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\n\tuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\n\tvec3 specularTex = vec3( 1.0 );\n\tvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\n\tnormalTex.xy *= uNormalScale;\n\tnormalTex = normalize( normalTex );\n\tif( enableDiffuse ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 texelColor = texture2D( tDiffuse, vUv );\n\t\t\ttexelColor.xyz *= texelColor.xyz;\n\t\t\tgl_FragColor = gl_FragColor * texelColor;\n\t\t#else\n\t\t\tgl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n\t\t#endif\n\t}\n\tif( enableAO ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 aoColor = texture2D( tAO, vUv );\n\t\t\taoColor.xyz *= aoColor.xyz;\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n\t\t#else\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n\t\t#endif\n\t}",THREE.ShaderChunk.alphatest_fragment,"\tif( enableSpecular )\n\t\tspecularTex = texture2D( tSpecular, vUv ).xyz;\n\tmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\n\tvec3 finalNormal = tsb * normalTex;\n\t#ifdef FLIP_SIDED\n\t\tfinalNormal = -finalNormal;\n\t#endif\n\tvec3 normal = normalize( finalNormal );\n\tvec3 viewPosition = normalize( vViewPosition );\n\t#if MAX_POINT_LIGHTS > 0\n\t\tvec3 pointDiffuse = vec3( 0.0 );\n\t\tvec3 pointSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\t\tvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat pointDistance = 1.0;\n\t\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\t\tpointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\n\t\t\tpointVector = normalize( pointVector );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\n\t\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n\t\t\t#endif\n\t\t\tpointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\n\t\t\tvec3 pointHalfVector = normalize( pointVector + viewPosition );\n\t\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\t\tfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\tvec3 spotDiffuse = vec3( 0.0 );\n\t\tvec3 spotSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\t\tvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat spotDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\n\t\t\tspotVector = normalize( spotVector );\n\t\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\t\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\t\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\t\t\t\t#ifdef WRAP_AROUND\n\t\t\t\t\tfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\n\t\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\t\t\t\t#else\n\t\t\t\t\tfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t#endif\n\t\t\t\tspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\n\t\t\t\tvec3 spotHalfVector = normalize( spotVector + viewPosition );\n\t\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\t\tfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\t\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n\t\t\t}\n\t\t}\n\t#endif\n\t#if MAX_DIR_LIGHTS > 0\n\t\tvec3 dirDiffuse = vec3( 0.0 );\n\t\tvec3 dirSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\t\tvec3 dirVector = normalize( lDirection.xyz );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\n\t\t\t\tfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n\t\t\t#endif\n\t\t\tdirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\n\t\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\t\tfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\tvec3 hemiDiffuse = vec3( 0.0 );\n\t\tvec3 hemiSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\t\tvec3 lVector = normalize( lDirection.xyz );\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\t\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\t\t\themiDiffuse += diffuse * hemiColor;\n\t\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\t\tfloat hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\t\t\tvec3 lVectorGround = -lVector;\n\t\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\t\tfloat hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\t\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\t\t}\n\t#endif\n\tvec3 totalDiffuse = vec3( 0.0 );\n\tvec3 totalSpecular = vec3( 0.0 );\n\t#if MAX_DIR_LIGHTS > 0\n\t\ttotalDiffuse += dirDiffuse;\n\t\ttotalSpecular += dirSpecular;\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\ttotalDiffuse += hemiDiffuse;\n\t\ttotalSpecular += hemiSpecular;\n\t#endif\n\t#if MAX_POINT_LIGHTS > 0\n\t\ttotalDiffuse += pointDiffuse;\n\t\ttotalSpecular += pointSpecular;\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\ttotalDiffuse += spotDiffuse;\n\t\ttotalSpecular += spotSpecular;\n\t#endif\n\t#ifdef METAL\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\t#else\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\t#endif\n\tif ( enableReflection ) {\n\t\tvec3 vReflect;\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tif ( useRefract ) {\n\t\t\tvReflect = refract( cameraToVertex, normal, refractionRatio );\n\t\t} else {\n\t\t\tvReflect = reflect( cameraToVertex, normal );\n\t\t}\n\t\tvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n\t\t#ifdef GAMMA_INPUT\n\t\t\tcubeColor.xyz *= cubeColor.xyz;\n\t\t#endif\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\n\t}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\n\tuniform sampler2D tDisplacement;\n\tuniform float uDisplacementScale;\n\tuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"\t#ifdef USE_SKINNING\n\t\tvNormal = normalize( normalMatrix * skinnedNormal.xyz );\n\t\tvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\n\t\tvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n\t#else\n\t\tvNormal = normalize( normalMatrix * normal );\n\t\tvTangent = normalize( normalMatrix * tangent.xyz );\n\t#endif\n\tvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\n\tvUv = uv * uRepeat + uOffset;\n\tvec3 displacedPosition;\n\t#ifdef VERTEX_TEXTURES\n\t\tif ( enableDisplacement ) {\n\t\t\tvec3 dv = texture2D( tDisplacement, uv ).xyz;\n\t\t\tfloat df = uDisplacementScale * dv.x + uDisplacementBias;\n\t\t\tdisplacedPosition = position + normalize( normal ) * df;\n\t\t} else {\n\t\t\t#ifdef USE_SKINNING\n\t\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\t\tdisplacedPosition = skinned.xyz;\n\t\t\t#else\n\t\t\t\tdisplacedPosition = position;\n\t\t\t#endif\n\t\t}\n\t#else\n\t\t#ifdef USE_SKINNING\n\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\tdisplacedPosition = skinned.xyz;\n\t\t#else\n\t\t\tdisplacedPosition = position;\n\t\t#endif\n\t#endif\n\tvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\n\tvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"\tvWorldPosition = worldPosition.xyz;\n\tvViewPosition = -mvPosition.xyz;\n\t#ifdef USE_SHADOWMAP\n\t\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\t\t}\n\t#endif\n}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\tvWorldPosition = worldPosition.xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")}},THREE.WebGLRenderer=function(e){function t(e,t){var n=e.vertices.length,i=t.material;if(i.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var r in i.attributes){var o=i.attributes[r];if(!o.__webglInitialized||o.createUniqueBuffers){o.__webglInitialized=!0;var a=1;"v2"===o.type?a=2:"v3"===o.type?a=3:"v4"===o.type?a=4:"c"===o.type&&(a=3),o.size=a,o.array=new Float32Array(n*a),o.buffer=K.createBuffer(),o.buffer.belongsToAttribute=r,o.needsUpdate=!0}e.__webglCustomAttributesList.push(o)}}}function n(e,t){var n=t.geometry,a=e.faces3,s=3*a.length,l=1*a.length,c=3*a.length,u=o(a=i(t,e)),h=r(a),d=!!a.vertexColors&&a.vertexColors;if(e.__vertexArray=new Float32Array(3*s),h&&(e.__normalArray=new Float32Array(3*s)),n.hasTangents&&(e.__tangentArray=new Float32Array(4*s)),d&&(e.__colorArray=new Float32Array(3*s)),u&&(0<n.faceVertexUvs.length&&(e.__uvArray=new Float32Array(2*s)),1<n.faceVertexUvs.length&&(e.__uv2Array=new Float32Array(2*s))),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*s),e.__skinWeightArray=new Float32Array(4*s)),n=null!==ne&&21845<l?Uint32Array:Uint16Array,e.__typeArray=n,e.__faceArray=new n(3*l),e.__lineArray=new n(2*c),e.numMorphTargets)for(e.__morphTargetsArrays=[],n=0,u=e.numMorphTargets;n<u;n++)e.__morphTargetsArrays.push(new Float32Array(3*s));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],n=0,u=e.numMorphNormals;n<u;n++)e.__morphNormalsArrays.push(new Float32Array(3*s));if(e.__webglFaceCount=3*l,e.__webglLineCount=2*c,a.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var f in a.attributes){var p,l=a.attributes[f],c={};for(p in l)c[p]=l[p];c.__webglInitialized&&!c.createUniqueBuffers||(c.__webglInitialized=!0,n=1,"v2"===c.type?n=2:"v3"===c.type?n=3:"v4"===c.type?n=4:"c"===c.type&&(n=3),c.size=n,c.array=new Float32Array(s*n),c.buffer=K.createBuffer(),c.buffer.belongsToAttribute=f,l.needsUpdate=!0,c.__original=l),e.__webglCustomAttributesList.push(c)}}e.__inittedArrays=!0}function i(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function r(e){return!(e instanceof THREE.MeshBasicMaterial&&!e.envMap||e instanceof THREE.MeshDepthMaterial)&&(e&&void 0!==e.shading&&e.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading)}function o(e){return!!(e.map||e.lightMap||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e instanceof THREE.ShaderMaterial)}function a(e){for(var t in e.attributes){var n="index"===t?K.ELEMENT_ARRAY_BUFFER:K.ARRAY_BUFFER,i=e.attributes[t];i.buffer=K.createBuffer(),K.bindBuffer(n,i.buffer),K.bufferData(n,i.array,K.STATIC_DRAW)}}function s(e,t,n,i){for(var r in t){var o=t[r],a=n[r];if(0<=o)if(a){var s=a.itemSize;K.bindBuffer(K.ARRAY_BUFFER,a.buffer),c(o),K.vertexAttribPointer(o,s,K.FLOAT,!1,0,i*s*4)}else e.defaultAttributeValues&&(2===e.defaultAttributeValues[r].length?K.vertexAttrib2fv(o,e.defaultAttributeValues[r]):3===e.defaultAttributeValues[r].length&&K.vertexAttrib3fv(o,e.defaultAttributeValues[r]))}u()}function l(){for(var e=0,t=Ce.length;e<t;e++)Ce[e]=0}function c(e){Ce[e]=1,0===Ae[e]&&(K.enableVertexAttribArray(e),Ae[e]=1)}function u(){for(var e=0,t=Ae.length;e<t;e++)Ae[e]!==Ce[e]&&(K.disableVertexAttribArray(e),Ae[e]=0)}function h(e,t){return e.z!==t.z?t.z-e.z:e.id-t.id}function d(e,t){return e.z!==t.z?e.z-t.z:e.id-t.id}function f(e,t){return t[0]-e[0]}function p(e,t,s){if(!1!==t.visible){var l=e.__webglObjects[t.id];if(l&&(!1===t.frustumCulled||!0===ke.intersectsObject(t))){var c,u,h,d=t.geometry;if(d instanceof THREE.BufferGeometry){var m,g,v=K.DYNAMIC_DRAW,E=d.attributes;for(m in E)(g=E[m]).needsUpdate&&("index"===m?(K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,g.buffer),K.bufferData(K.ELEMENT_ARRAY_BUFFER,g.array,v)):(K.bindBuffer(K.ARRAY_BUFFER,g.buffer),K.bufferData(K.ARRAY_BUFFER,g.array,v)),g.needsUpdate=!1)}else if(t instanceof THREE.Mesh){(d.buffersNeedUpdate||d.groupsNeedUpdate)&&(d instanceof THREE.BufferGeometry?a(d):t instanceof THREE.Mesh&&y(e,t,d));for(var T=0,_=d.geometryGroupsList.length;T<_;T++)if(c=d.geometryGroupsList[T],h=i(t,c),(d.buffersNeedUpdate||d.groupsNeedUpdate)&&n(c,t),u=h.attributes&&x(h),d.verticesNeedUpdate||d.morphTargetsNeedUpdate||d.elementsNeedUpdate||d.uvsNeedUpdate||d.normalsNeedUpdate||d.colorsNeedUpdate||d.tangentsNeedUpdate||u){var w=c,R=t,H=K.DYNAMIC_DRAW,S=!d.dynamic,M=h;if(w.__inittedArrays){var C=r(M),A=!!M.vertexColors&&M.vertexColors,k=o(M),P=C===THREE.SmoothShading,L=void 0,D=void 0,F=void 0,N=void 0,O=void 0,z=void 0,V=void 0,B=void 0,I=void 0,U=void 0,W=void 0,j=void 0,G=void 0,q=void 0,X=void 0,Y=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,oe=void 0,ae=void 0,se=void 0,le=void 0,ce=void 0,ue=void 0,he=void 0,de=void 0,fe=void 0,pe=void 0,me=void 0,ge=void 0,ve=void 0,Ee=void 0,ye=void 0,Te=void 0,xe=void 0,be=void 0,_e=0,we=0,Re=0,He=0,Se=0,Me=0,Ce=0,Ae=0,Fe=0,Ne=0,Oe=0,ze=0,Ve=void 0,Be=w.__vertexArray,Ie=w.__uvArray,Ue=w.__uv2Array,We=w.__normalArray,je=w.__tangentArray,Ge=w.__colorArray,qe=w.__skinIndexArray,Xe=w.__skinWeightArray,Ye=w.__morphTargetsArrays,$e=w.__morphNormalsArrays,Qe=w.__webglCustomAttributesList,Ke=void 0,Ze=w.__faceArray,Je=w.__lineArray,et=R.geometry,tt=et.elementsNeedUpdate,nt=et.uvsNeedUpdate,it=et.normalsNeedUpdate,rt=et.tangentsNeedUpdate,ot=et.colorsNeedUpdate,at=et.morphTargetsNeedUpdate,st=et.vertices,lt=w.faces3,ct=et.faces,ut=et.faceVertexUvs[0],ht=et.faceVertexUvs[1],dt=et.skinIndices,ft=et.skinWeights,pt=et.morphTargets,mt=et.morphNormals;if(et.verticesNeedUpdate){for(L=0,D=lt.length;L<D;L++)N=ct[lt[L]],j=st[N.a],G=st[N.b],q=st[N.c],Be[we]=j.x,Be[we+1]=j.y,Be[we+2]=j.z,Be[we+3]=G.x,Be[we+4]=G.y,Be[we+5]=G.z,Be[we+6]=q.x,Be[we+7]=q.y,Be[we+8]=q.z,we+=9;K.bindBuffer(K.ARRAY_BUFFER,w.__webglVertexBuffer),K.bufferData(K.ARRAY_BUFFER,Be,H)}if(at)for(ve=0,Ee=pt.length;ve<Ee;ve++){for(L=Oe=0,D=lt.length;L<D;L++)xe=lt[L],N=ct[xe],j=pt[ve].vertices[N.a],G=pt[ve].vertices[N.b],q=pt[ve].vertices[N.c],ye=Ye[ve],ye[Oe]=j.x,ye[Oe+1]=j.y,ye[Oe+2]=j.z,ye[Oe+3]=G.x,ye[Oe+4]=G.y,ye[Oe+5]=G.z,ye[Oe+6]=q.x,ye[Oe+7]=q.y,ye[Oe+8]=q.z,M.morphNormals&&(P?(be=mt[ve].vertexNormals[xe],J=be.a,ee=be.b,te=be.c):te=ee=J=mt[ve].faceNormals[xe],Te=$e[ve],Te[Oe]=J.x,Te[Oe+1]=J.y,Te[Oe+2]=J.z,Te[Oe+3]=ee.x,Te[Oe+4]=ee.y,Te[Oe+5]=ee.z,Te[Oe+6]=te.x,Te[Oe+7]=te.y,Te[Oe+8]=te.z),Oe+=9;K.bindBuffer(K.ARRAY_BUFFER,w.__webglMorphTargetsBuffers[ve]),K.bufferData(K.ARRAY_BUFFER,Ye[ve],H),M.morphNormals&&(K.bindBuffer(K.ARRAY_BUFFER,w.__webglMorphNormalsBuffers[ve]),K.bufferData(K.ARRAY_BUFFER,$e[ve],H))}if(ft.length){for(L=0,D=lt.length;L<D;L++)N=ct[lt[L]],ae=ft[N.a],se=ft[N.b],le=ft[N.c],Xe[Ne]=ae.x,Xe[Ne+1]=ae.y,Xe[Ne+2]=ae.z,Xe[Ne+3]=ae.w,Xe[Ne+4]=se.x,Xe[Ne+5]=se.y,Xe[Ne+6]=se.z,Xe[Ne+7]=se.w,Xe[Ne+8]=le.x,Xe[Ne+9]=le.y,Xe[Ne+10]=le.z,Xe[Ne+11]=le.w,ce=dt[N.a],ue=dt[N.b],he=dt[N.c],qe[Ne]=ce.x,qe[Ne+1]=ce.y,qe[Ne+2]=ce.z,qe[Ne+3]=ce.w,qe[Ne+4]=ue.x,qe[Ne+5]=ue.y,qe[Ne+6]=ue.z,qe[Ne+7]=ue.w,qe[Ne+8]=he.x,qe[Ne+9]=he.y,qe[Ne+10]=he.z,qe[Ne+11]=he.w,Ne+=12;0<Ne&&(K.bindBuffer(K.ARRAY_BUFFER,w.__webglSkinIndicesBuffer),K.bufferData(K.ARRAY_BUFFER,qe,H),K.bindBuffer(K.ARRAY_BUFFER,w.__webglSkinWeightsBuffer),K.bufferData(K.ARRAY_BUFFER,Xe,H))}if(ot&&A){for(L=0,D=lt.length;L<D;L++)N=ct[lt[L]],V=N.vertexColors,B=N.color,3===V.length&&A===THREE.VertexColors?(ne=V[0],re=V[1],oe=V[2]):oe=re=ne=B,Ge[Fe]=ne.r,Ge[Fe+1]=ne.g,Ge[Fe+2]=ne.b,Ge[Fe+3]=re.r,Ge[Fe+4]=re.g,Ge[Fe+5]=re.b,Ge[Fe+6]=oe.r,Ge[Fe+7]=oe.g,Ge[Fe+8]=oe.b,Fe+=9;0<Fe&&(K.bindBuffer(K.ARRAY_BUFFER,w.__webglColorBuffer),K.bufferData(K.ARRAY_BUFFER,Ge,H))}if(rt&&et.hasTangents){for(L=0,D=lt.length;L<D;L++)N=ct[lt[L]],I=N.vertexTangents,X=I[0],Y=I[1],Z=I[2],je[Ce]=X.x,je[Ce+1]=X.y,je[Ce+2]=X.z,je[Ce+3]=X.w,je[Ce+4]=Y.x,je[Ce+5]=Y.y,je[Ce+6]=Y.z,je[Ce+7]=Y.w,je[Ce+8]=Z.x,je[Ce+9]=Z.y,je[Ce+10]=Z.z,je[Ce+11]=Z.w,Ce+=12;K.bindBuffer(K.ARRAY_BUFFER,w.__webglTangentBuffer),K.bufferData(K.ARRAY_BUFFER,je,H)}if(it&&C){for(L=0,D=lt.length;L<D;L++)if(N=ct[lt[L]],O=N.vertexNormals,z=N.normal,3===O.length&&P)for(de=0;3>de;de++)pe=O[de],We[Me]=pe.x,We[Me+1]=pe.y,We[Me+2]=pe.z,Me+=3;else for(de=0;3>de;de++)We[Me]=z.x,We[Me+1]=z.y,We[Me+2]=z.z,Me+=3;K.bindBuffer(K.ARRAY_BUFFER,w.__webglNormalBuffer),K.bufferData(K.ARRAY_BUFFER,We,H)}if(nt&&ut&&k){for(L=0,D=lt.length;L<D;L++)if(F=lt[L],void 0!==(U=ut[F]))for(de=0;3>de;de++)me=U[de],Ie[Re]=me.x,Ie[Re+1]=me.y,Re+=2;0<Re&&(K.bindBuffer(K.ARRAY_BUFFER,w.__webglUVBuffer),K.bufferData(K.ARRAY_BUFFER,Ie,H))}if(nt&&ht&&k){for(L=0,D=lt.length;L<D;L++)if(F=lt[L],void 0!==(W=ht[F]))for(de=0;3>de;de++)ge=W[de],Ue[He]=ge.x,Ue[He+1]=ge.y,He+=2;0<He&&(K.bindBuffer(K.ARRAY_BUFFER,w.__webglUV2Buffer),K.bufferData(K.ARRAY_BUFFER,Ue,H))}if(tt){for(L=0,D=lt.length;L<D;L++)Ze[Se]=_e,Ze[Se+1]=_e+1,Ze[Se+2]=_e+2,Se+=3,Je[Ae]=_e,Je[Ae+1]=_e+1,Je[Ae+2]=_e,Je[Ae+3]=_e+2,Je[Ae+4]=_e+1,Je[Ae+5]=_e+2,Ae+=6,_e+=3;K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,w.__webglFaceBuffer),K.bufferData(K.ELEMENT_ARRAY_BUFFER,Ze,H),K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,w.__webglLineBuffer),K.bufferData(K.ELEMENT_ARRAY_BUFFER,Je,H)}if(Qe)for(de=0,fe=Qe.length;de<fe;de++)if((Ke=Qe[de]).__original.needsUpdate){if(ze=0,1===Ke.size){if(void 0===Ke.boundTo||"vertices"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)N=ct[lt[L]],Ke.array[ze]=Ke.value[N.a],Ke.array[ze+1]=Ke.value[N.b],Ke.array[ze+2]=Ke.value[N.c],ze+=3;else if("faces"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)Ve=Ke.value[lt[L]],Ke.array[ze]=Ve,Ke.array[ze+1]=Ve,Ke.array[ze+2]=Ve,ze+=3}else if(2===Ke.size){if(void 0===Ke.boundTo||"vertices"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)N=ct[lt[L]],j=Ke.value[N.a],G=Ke.value[N.b],q=Ke.value[N.c],Ke.array[ze]=j.x,Ke.array[ze+1]=j.y,Ke.array[ze+2]=G.x,Ke.array[ze+3]=G.y,Ke.array[ze+4]=q.x,Ke.array[ze+5]=q.y,ze+=6;else if("faces"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)q=G=j=Ve=Ke.value[lt[L]],Ke.array[ze]=j.x,Ke.array[ze+1]=j.y,Ke.array[ze+2]=G.x,Ke.array[ze+3]=G.y,Ke.array[ze+4]=q.x,Ke.array[ze+5]=q.y,ze+=6}else if(3===Ke.size){var gt;if(gt="c"===Ke.type?["r","g","b"]:["x","y","z"],void 0===Ke.boundTo||"vertices"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)N=ct[lt[L]],j=Ke.value[N.a],G=Ke.value[N.b],q=Ke.value[N.c],Ke.array[ze]=j[gt[0]],Ke.array[ze+1]=j[gt[1]],Ke.array[ze+2]=j[gt[2]],Ke.array[ze+3]=G[gt[0]],Ke.array[ze+4]=G[gt[1]],Ke.array[ze+5]=G[gt[2]],Ke.array[ze+6]=q[gt[0]],Ke.array[ze+7]=q[gt[1]],Ke.array[ze+8]=q[gt[2]],ze+=9;else if("faces"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)q=G=j=Ve=Ke.value[lt[L]],Ke.array[ze]=j[gt[0]],Ke.array[ze+1]=j[gt[1]],Ke.array[ze+2]=j[gt[2]],Ke.array[ze+3]=G[gt[0]],Ke.array[ze+4]=G[gt[1]],Ke.array[ze+5]=G[gt[2]],Ke.array[ze+6]=q[gt[0]],Ke.array[ze+7]=q[gt[1]],Ke.array[ze+8]=q[gt[2]],ze+=9;else if("faceVertices"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)Ve=Ke.value[lt[L]],j=Ve[0],G=Ve[1],q=Ve[2],Ke.array[ze]=j[gt[0]],Ke.array[ze+1]=j[gt[1]],Ke.array[ze+2]=j[gt[2]],Ke.array[ze+3]=G[gt[0]],Ke.array[ze+4]=G[gt[1]],Ke.array[ze+5]=G[gt[2]],Ke.array[ze+6]=q[gt[0]],Ke.array[ze+7]=q[gt[1]],Ke.array[ze+8]=q[gt[2]],ze+=9}else if(4===Ke.size)if(void 0===Ke.boundTo||"vertices"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)N=ct[lt[L]],j=Ke.value[N.a],G=Ke.value[N.b],q=Ke.value[N.c],Ke.array[ze]=j.x,Ke.array[ze+1]=j.y,Ke.array[ze+2]=j.z,Ke.array[ze+3]=j.w,Ke.array[ze+4]=G.x,Ke.array[ze+5]=G.y,Ke.array[ze+6]=G.z,Ke.array[ze+7]=G.w,Ke.array[ze+8]=q.x,Ke.array[ze+9]=q.y,Ke.array[ze+10]=q.z,Ke.array[ze+11]=q.w,ze+=12;else if("faces"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)q=G=j=Ve=Ke.value[lt[L]],Ke.array[ze]=j.x,Ke.array[ze+1]=j.y,Ke.array[ze+2]=j.z,Ke.array[ze+3]=j.w,Ke.array[ze+4]=G.x,Ke.array[ze+5]=G.y,Ke.array[ze+6]=G.z,Ke.array[ze+7]=G.w,Ke.array[ze+8]=q.x,Ke.array[ze+9]=q.y,Ke.array[ze+10]=q.z,Ke.array[ze+11]=q.w,ze+=12;else if("faceVertices"===Ke.boundTo)for(L=0,D=lt.length;L<D;L++)Ve=Ke.value[lt[L]],j=Ve[0],G=Ve[1],q=Ve[2],Ke.array[ze]=j.x,Ke.array[ze+1]=j.y,Ke.array[ze+2]=j.z,Ke.array[ze+3]=j.w,Ke.array[ze+4]=G.x,Ke.array[ze+5]=G.y,Ke.array[ze+6]=G.z,Ke.array[ze+7]=G.w,Ke.array[ze+8]=q.x,Ke.array[ze+9]=q.y,Ke.array[ze+10]=q.z,Ke.array[ze+11]=q.w,ze+=12;K.bindBuffer(K.ARRAY_BUFFER,Ke.buffer),K.bufferData(K.ARRAY_BUFFER,Ke.array,H)}S&&(delete w.__inittedArrays,delete w.__colorArray,delete w.__normalArray,delete w.__tangentArray,delete w.__uvArray,delete w.__uv2Array,delete w.__faceArray,delete w.__vertexArray,delete w.__lineArray,delete w.__skinIndexArray,delete w.__skinWeightArray)}}d.verticesNeedUpdate=!1,d.morphTargetsNeedUpdate=!1,d.elementsNeedUpdate=!1,d.uvsNeedUpdate=!1,d.normalsNeedUpdate=!1,d.colorsNeedUpdate=!1,d.tangentsNeedUpdate=!1,d.buffersNeedUpdate=!1,h.attributes&&b(h)}else if(t instanceof THREE.Line){if(h=i(t,d),u=h.attributes&&x(h),d.verticesNeedUpdate||d.colorsNeedUpdate||d.lineDistancesNeedUpdate||u){var vt,Et,yt,Tt,xt,bt,_t,wt,Rt,Ht,St,Mt,Ct=K.DYNAMIC_DRAW,At=d.vertices,kt=d.colors,Pt=d.lineDistances,Lt=At.length,Dt=kt.length,Ft=Pt.length,Nt=d.__vertexArray,Ot=d.__colorArray,zt=d.__lineDistanceArray,Vt=d.colorsNeedUpdate,Bt=d.lineDistancesNeedUpdate,It=d.__webglCustomAttributesList;if(d.verticesNeedUpdate){for(vt=0;vt<Lt;vt++)Tt=At[vt],xt=3*vt,Nt[xt]=Tt.x,Nt[xt+1]=Tt.y,Nt[xt+2]=Tt.z;K.bindBuffer(K.ARRAY_BUFFER,d.__webglVertexBuffer),K.bufferData(K.ARRAY_BUFFER,Nt,Ct)}if(Vt){for(Et=0;Et<Dt;Et++)bt=kt[Et],xt=3*Et,Ot[xt]=bt.r,Ot[xt+1]=bt.g,Ot[xt+2]=bt.b;K.bindBuffer(K.ARRAY_BUFFER,d.__webglColorBuffer),K.bufferData(K.ARRAY_BUFFER,Ot,Ct)}if(Bt){for(yt=0;yt<Ft;yt++)zt[yt]=Pt[yt];K.bindBuffer(K.ARRAY_BUFFER,d.__webglLineDistanceBuffer),K.bufferData(K.ARRAY_BUFFER,zt,Ct)}if(It)for(_t=0,wt=It.length;_t<wt;_t++)if((Mt=It[_t]).needsUpdate&&(void 0===Mt.boundTo||"vertices"===Mt.boundTo)){if(xt=0,Ht=Mt.value.length,1===Mt.size)for(Rt=0;Rt<Ht;Rt++)Mt.array[Rt]=Mt.value[Rt];else if(2===Mt.size)for(Rt=0;Rt<Ht;Rt++)St=Mt.value[Rt],Mt.array[xt]=St.x,Mt.array[xt+1]=St.y,xt+=2;else if(3===Mt.size)if("c"===Mt.type)for(Rt=0;Rt<Ht;Rt++)St=Mt.value[Rt],Mt.array[xt]=St.r,Mt.array[xt+1]=St.g,Mt.array[xt+2]=St.b,xt+=3;else for(Rt=0;Rt<Ht;Rt++)St=Mt.value[Rt],Mt.array[xt]=St.x,Mt.array[xt+1]=St.y,Mt.array[xt+2]=St.z,xt+=3;else if(4===Mt.size)for(Rt=0;Rt<Ht;Rt++)St=Mt.value[Rt],Mt.array[xt]=St.x,Mt.array[xt+1]=St.y,Mt.array[xt+2]=St.z,Mt.array[xt+3]=St.w,xt+=4;K.bindBuffer(K.ARRAY_BUFFER,Mt.buffer),K.bufferData(K.ARRAY_BUFFER,Mt.array,Ct)}}d.verticesNeedUpdate=!1,d.colorsNeedUpdate=!1,d.lineDistancesNeedUpdate=!1,h.attributes&&b(h)}else if(t instanceof THREE.PointCloud){if(h=i(t,d),u=h.attributes&&x(h),d.verticesNeedUpdate||d.colorsNeedUpdate||t.sortParticles||u){var Ut,Wt,jt,Gt,qt,Xt,Yt,$t,Qt,Kt,Zt,Jt,en=K.DYNAMIC_DRAW,tn=d.vertices,nn=tn.length,rn=d.colors,on=rn.length,an=d.__vertexArray,sn=d.__colorArray,ln=d.__sortArray,cn=d.verticesNeedUpdate,un=d.colorsNeedUpdate,hn=d.__webglCustomAttributesList;if(t.sortParticles){for(Le.copy(Pe),Le.multiply(t.matrixWorld),Ut=0;Ut<nn;Ut++)jt=tn[Ut],De.copy(jt),De.applyProjection(Le),ln[Ut]=[De.z,Ut];for(ln.sort(f),Ut=0;Ut<nn;Ut++)jt=tn[ln[Ut][1]],Gt=3*Ut,an[Gt]=jt.x,an[Gt+1]=jt.y,an[Gt+2]=jt.z;for(Wt=0;Wt<on;Wt++)Gt=3*Wt,Xt=rn[ln[Wt][1]],sn[Gt]=Xt.r,sn[Gt+1]=Xt.g,sn[Gt+2]=Xt.b;if(hn)for(Yt=0,$t=hn.length;Yt<$t;Yt++)if(void 0===(Jt=hn[Yt]).boundTo||"vertices"===Jt.boundTo)if(Gt=0,Kt=Jt.value.length,1===Jt.size)for(Qt=0;Qt<Kt;Qt++)qt=ln[Qt][1],Jt.array[Qt]=Jt.value[qt];else if(2===Jt.size)for(Qt=0;Qt<Kt;Qt++)qt=ln[Qt][1],Zt=Jt.value[qt],Jt.array[Gt]=Zt.x,Jt.array[Gt+1]=Zt.y,Gt+=2;else if(3===Jt.size)if("c"===Jt.type)for(Qt=0;Qt<Kt;Qt++)qt=ln[Qt][1],Zt=Jt.value[qt],Jt.array[Gt]=Zt.r,Jt.array[Gt+1]=Zt.g,Jt.array[Gt+2]=Zt.b,Gt+=3;else for(Qt=0;Qt<Kt;Qt++)qt=ln[Qt][1],Zt=Jt.value[qt],Jt.array[Gt]=Zt.x,Jt.array[Gt+1]=Zt.y,Jt.array[Gt+2]=Zt.z,Gt+=3;else if(4===Jt.size)for(Qt=0;Qt<Kt;Qt++)qt=ln[Qt][1],Zt=Jt.value[qt],Jt.array[Gt]=Zt.x,Jt.array[Gt+1]=Zt.y,Jt.array[Gt+2]=Zt.z,Jt.array[Gt+3]=Zt.w,Gt+=4}else{if(cn)for(Ut=0;Ut<nn;Ut++)jt=tn[Ut],Gt=3*Ut,an[Gt]=jt.x,an[Gt+1]=jt.y,an[Gt+2]=jt.z;if(un)for(Wt=0;Wt<on;Wt++)Xt=rn[Wt],Gt=3*Wt,sn[Gt]=Xt.r,sn[Gt+1]=Xt.g,sn[Gt+2]=Xt.b;if(hn)for(Yt=0,$t=hn.length;Yt<$t;Yt++)if((Jt=hn[Yt]).needsUpdate&&(void 0===Jt.boundTo||"vertices"===Jt.boundTo))if(Kt=Jt.value.length,Gt=0,1===Jt.size)for(Qt=0;Qt<Kt;Qt++)Jt.array[Qt]=Jt.value[Qt];else if(2===Jt.size)for(Qt=0;Qt<Kt;Qt++)Zt=Jt.value[Qt],Jt.array[Gt]=Zt.x,Jt.array[Gt+1]=Zt.y,Gt+=2;else if(3===Jt.size)if("c"===Jt.type)for(Qt=0;Qt<Kt;Qt++)Zt=Jt.value[Qt],Jt.array[Gt]=Zt.r,Jt.array[Gt+1]=Zt.g,Jt.array[Gt+2]=Zt.b,Gt+=3;else for(Qt=0;Qt<Kt;Qt++)Zt=Jt.value[Qt],Jt.array[Gt]=Zt.x,Jt.array[Gt+1]=Zt.y,Jt.array[Gt+2]=Zt.z,Gt+=3;else if(4===Jt.size)for(Qt=0;Qt<Kt;Qt++)Zt=Jt.value[Qt],Jt.array[Gt]=Zt.x,Jt.array[Gt+1]=Zt.y,Jt.array[Gt+2]=Zt.z,Jt.array[Gt+3]=Zt.w,Gt+=4}if((cn||t.sortParticles)&&(K.bindBuffer(K.ARRAY_BUFFER,d.__webglVertexBuffer),K.bufferData(K.ARRAY_BUFFER,an,en)),(un||t.sortParticles)&&(K.bindBuffer(K.ARRAY_BUFFER,d.__webglColorBuffer),K.bufferData(K.ARRAY_BUFFER,sn,en)),hn)for(Yt=0,$t=hn.length;Yt<$t;Yt++)((Jt=hn[Yt]).needsUpdate||t.sortParticles)&&(K.bindBuffer(K.ARRAY_BUFFER,Jt.buffer),K.bufferData(K.ARRAY_BUFFER,Jt.array,en))}d.verticesNeedUpdate=!1,d.colorsNeedUpdate=!1,h.attributes&&b(h)}for(var dn=0,fn=l.length;dn<fn;dn++){var pn=l[dn],mn=pn,gn=mn.object,vn=mn.buffer,En=gn.geometry,yn=gn.material;yn instanceof THREE.MeshFaceMaterial?(yn=yn.materials[En instanceof THREE.BufferGeometry?0:vn.materialIndex]).transparent?(mn.material=yn,Q.push(mn)):(mn.material=yn,$.push(mn)):yn&&(yn.transparent?(mn.material=yn,Q.push(mn)):(mn.material=yn,$.push(mn))),pn.render=!0,!0===ie.sortObjects&&(null!==t.renderDepth?pn.z=t.renderDepth:(De.setFromMatrixPosition(t.matrixWorld),De.applyProjection(Pe),pn.z=De.z))}}for(dn=0,fn=t.children.length;dn<fn;dn++)p(e,t.children[dn],s)}}function m(e,t,n){if(0!==e.length)for(var i=0,r=e.length;i<r;i++)ce=oe=null,se=le=de=he=Ee=ve=fe=-1,Ne=!0,e[i].render(t,n,Se,Me),ce=oe=null,se=le=de=he=Ee=ve=fe=-1,Ne=!0}function g(e,t,n,i,r,o){for(var a,s,l,c=e.length-1;-1!==c;c--){if(a=e[c],s=a.object,l=a.buffer,S(s,t),o)a=o;else{if(!(a=a.material))continue;r&&ie.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst),ie.setDepthTest(a.depthTest),ie.setDepthWrite(a.depthWrite),k(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}ie.setMaterialFaces(a),l instanceof THREE.BufferGeometry?ie.renderBufferDirect(t,n,i,a,l,s):ie.renderBuffer(t,n,i,a,l,s)}}function v(e,t,n,i,r,o,a){for(var s,l,c=0,u=e.length;c<u;c++)if(s=e[c],(l=s.object).visible){if(a)s=a;else{if(!(s=s[t]))continue;o&&ie.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),ie.setDepthTest(s.depthTest),ie.setDepthWrite(s.depthWrite),k(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}ie.renderImmediateObject(n,i,r,s,l)}}function E(e){var t=e.object.material;t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)}function y(e,t,i){var r,o=!1;r=t.material,(void 0===i.geometryGroups||i.groupsNeedUpdate)&&(delete e.__webglObjects[t.id],i.makeGroups(r instanceof THREE.MeshFaceMaterial,ne?4294967296:65535),i.groupsNeedUpdate=!1);for(var a=0,s=i.geometryGroupsList.length;a<s;a++){if((r=i.geometryGroupsList[a]).__webglVertexBuffer)o=!1;else{(o=r).__webglVertexBuffer=K.createBuffer(),o.__webglNormalBuffer=K.createBuffer(),o.__webglTangentBuffer=K.createBuffer(),o.__webglColorBuffer=K.createBuffer(),o.__webglUVBuffer=K.createBuffer(),o.__webglUV2Buffer=K.createBuffer(),o.__webglSkinIndicesBuffer=K.createBuffer(),o.__webglSkinWeightsBuffer=K.createBuffer(),o.__webglFaceBuffer=K.createBuffer(),o.__webglLineBuffer=K.createBuffer();var l=void 0,c=void 0;if(o.numMorphTargets)for(o.__webglMorphTargetsBuffers=[],l=0,c=o.numMorphTargets;l<c;l++)o.__webglMorphTargetsBuffers.push(K.createBuffer());if(o.numMorphNormals)for(o.__webglMorphNormalsBuffers=[],l=0,c=o.numMorphNormals;l<c;l++)o.__webglMorphNormalsBuffers.push(K.createBuffer());ie.info.memory.geometries++,n(r,t),i.verticesNeedUpdate=!0,i.morphTargetsNeedUpdate=!0,i.elementsNeedUpdate=!0,i.uvsNeedUpdate=!0,i.normalsNeedUpdate=!0,i.tangentsNeedUpdate=!0,o=i.colorsNeedUpdate=!0}(o||void 0===t.__webglActive)&&T(e.__webglObjects,r,t)}t.__webglActive=!0}function T(e,t,n){var i=n.id;e[i]=e[i]||[],e[i].push({id:i,buffer:t,object:n,material:null,z:0})}function x(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function b(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function _(e,t){if(e instanceof THREE.Mesh||e instanceof THREE.PointCloud||e instanceof THREE.Line)delete t.__webglObjects[e.id];else if(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)for(var n=t.__webglObjectsImmediate,i=n.length-1;0<=i;i--)n[i].object===e&&n.splice(i,1);delete e.__webglActive}function w(e,t,n,i,r){ue=0,i.needsUpdate&&(i.program&&tt(i),ie.initMaterial(i,t,n,r),i.needsUpdate=!1),i.morphTargets&&!r.__webglMorphTargetInfluences&&(r.__webglMorphTargetInfluences=new Float32Array(ie.maxMorphTargets));var o=!1,a=!1,s=!1,l=i.program,c=l.uniforms,u=i.__webglShader.uniforms;if(l.id!==oe&&(K.useProgram(l.program),oe=l.id,s=a=o=!0),i.id!==se&&(-1===se&&(s=!0),se=i.id,a=!0),(o||e!==ce)&&(K.uniformMatrix4fv(c.projectionMatrix,!1,e.projectionMatrix.elements),q&&K.uniform1f(c.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==ce&&(ce=e),(i instanceof THREE.ShaderMaterial||i instanceof THREE.MeshPhongMaterial||i.envMap)&&null!==c.cameraPosition&&(De.setFromMatrixPosition(e.matrixWorld),K.uniform3f(c.cameraPosition,De.x,De.y,De.z)),(i instanceof THREE.MeshPhongMaterial||i instanceof THREE.MeshLambertMaterial||i instanceof THREE.ShaderMaterial||i.skinning)&&null!==c.viewMatrix&&K.uniformMatrix4fv(c.viewMatrix,!1,e.matrixWorldInverse.elements)),i.skinning&&(r.bindMatrix&&null!==c.bindMatrix&&K.uniformMatrix4fv(c.bindMatrix,!1,r.bindMatrix.elements),r.bindMatrixInverse&&null!==c.bindMatrixInverse&&K.uniformMatrix4fv(c.bindMatrixInverse,!1,r.bindMatrixInverse.elements),We&&r.skeleton&&r.skeleton.useVertexTexture?(null!==c.boneTexture&&(o=H(),K.uniform1i(c.boneTexture,o),ie.setTexture(r.skeleton.boneTexture,o)),null!==c.boneTextureWidth&&K.uniform1i(c.boneTextureWidth,r.skeleton.boneTextureWidth),null!==c.boneTextureHeight&&K.uniform1i(c.boneTextureHeight,r.skeleton.boneTextureHeight)):r.skeleton&&r.skeleton.boneMatrices&&null!==c.boneGlobalMatrices&&K.uniformMatrix4fv(c.boneGlobalMatrices,!1,r.skeleton.boneMatrices)),a){if(n&&i.fog&&(u.fogColor.value=n.color,n instanceof THREE.Fog?(u.fogNear.value=n.near,u.fogFar.value=n.far):n instanceof THREE.FogExp2&&(u.fogDensity.value=n.density)),i instanceof THREE.MeshPhongMaterial||i instanceof THREE.MeshLambertMaterial||i.lights){if(Ne){var h,d,f,p,s=!0,m=o=0,g=0,v=Oe,E=v.directional.colors,y=v.directional.positions,T=v.point.colors,x=v.point.positions,b=v.point.distances,_=v.spot.colors,w=v.spot.positions,S=v.spot.distances,A=v.spot.directions,k=v.spot.anglesCos,L=v.spot.exponents,D=v.hemi.skyColors,F=v.hemi.groundColors,z=v.hemi.positions,V=0,B=0,I=0,U=0,W=0,j=0,G=0,X=0,Y=h=0;for(n=p=Y=0,a=t.length;n<a;n++)(h=t[n]).onlyShadow||(d=h.color,f=h.intensity,p=h.distance,h instanceof THREE.AmbientLight?h.visible&&(ie.gammaInput?(o+=d.r*d.r,m+=d.g*d.g,g+=d.b*d.b):(o+=d.r,m+=d.g,g+=d.b)):h instanceof THREE.DirectionalLight?(W+=1,h.visible&&(Fe.setFromMatrixPosition(h.matrixWorld),De.setFromMatrixPosition(h.target.matrixWorld),Fe.sub(De),Fe.normalize(),h=3*V,y[h]=Fe.x,y[h+1]=Fe.y,y[h+2]=Fe.z,ie.gammaInput?M(E,h,d,f*f):C(E,h,d,f),V+=1)):h instanceof THREE.PointLight?(j+=1,h.visible&&(Y=3*B,ie.gammaInput?M(T,Y,d,f*f):C(T,Y,d,f),De.setFromMatrixPosition(h.matrixWorld),x[Y]=De.x,x[Y+1]=De.y,x[Y+2]=De.z,b[B]=p,B+=1)):h instanceof THREE.SpotLight?(G+=1,h.visible&&(Y=3*I,ie.gammaInput?M(_,Y,d,f*f):C(_,Y,d,f),De.setFromMatrixPosition(h.matrixWorld),w[Y]=De.x,w[Y+1]=De.y,w[Y+2]=De.z,S[I]=p,Fe.copy(De),De.setFromMatrixPosition(h.target.matrixWorld),Fe.sub(De),Fe.normalize(),A[Y]=Fe.x,A[Y+1]=Fe.y,A[Y+2]=Fe.z,k[I]=Math.cos(h.angle),L[I]=h.exponent,I+=1)):h instanceof THREE.HemisphereLight&&(X+=1,h.visible&&(Fe.setFromMatrixPosition(h.matrixWorld),Fe.normalize(),p=3*U,z[p]=Fe.x,z[p+1]=Fe.y,z[p+2]=Fe.z,d=h.color,h=h.groundColor,ie.gammaInput?(f*=f,M(D,p,d,f),M(F,p,h,f)):(C(D,p,d,f),C(F,p,h,f)),U+=1)));for(n=3*V,a=Math.max(E.length,3*W);n<a;n++)E[n]=0;for(n=3*B,a=Math.max(T.length,3*j);n<a;n++)T[n]=0;for(n=3*I,a=Math.max(_.length,3*G);n<a;n++)_[n]=0;for(n=3*U,a=Math.max(D.length,3*X);n<a;n++)D[n]=0;for(n=3*U,a=Math.max(F.length,3*X);n<a;n++)F[n]=0;v.directional.length=V,v.point.length=B,v.spot.length=I,v.hemi.length=U,v.ambient[0]=o,v.ambient[1]=m,v.ambient[2]=g,Ne=!1}s?(s=Oe,u.ambientLightColor.value=s.ambient,u.directionalLightColor.value=s.directional.colors,u.directionalLightDirection.value=s.directional.positions,u.pointLightColor.value=s.point.colors,u.pointLightPosition.value=s.point.positions,u.pointLightDistance.value=s.point.distances,u.spotLightColor.value=s.spot.colors,u.spotLightPosition.value=s.spot.positions,u.spotLightDistance.value=s.spot.distances,u.spotLightDirection.value=s.spot.directions,u.spotLightAngleCos.value=s.spot.anglesCos,u.spotLightExponent.value=s.spot.exponents,u.hemisphereLightSkyColor.value=s.hemi.skyColors,u.hemisphereLightGroundColor.value=s.hemi.groundColors,u.hemisphereLightDirection.value=s.hemi.positions,R(u,!0)):R(u,!1)}if(i instanceof THREE.MeshBasicMaterial||i instanceof THREE.MeshLambertMaterial||i instanceof THREE.MeshPhongMaterial){u.opacity.value=i.opacity,ie.gammaInput?u.diffuse.value.copyGammaToLinear(i.color):u.diffuse.value=i.color,u.map.value=i.map,u.lightMap.value=i.lightMap,u.specularMap.value=i.specularMap,u.alphaMap.value=i.alphaMap,i.bumpMap&&(u.bumpMap.value=i.bumpMap,u.bumpScale.value=i.bumpScale),i.normalMap&&(u.normalMap.value=i.normalMap,u.normalScale.value.copy(i.normalScale));var $;i.map?$=i.map:i.specularMap?$=i.specularMap:i.normalMap?$=i.normalMap:i.bumpMap?$=i.bumpMap:i.alphaMap&&($=i.alphaMap),void 0!==$&&(s=$.offset,$=$.repeat,u.offsetRepeat.value.set(s.x,s.y,$.x,$.y)),u.envMap.value=i.envMap,u.flipEnvMap.value=i.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,u.reflectivity.value=i.reflectivity,u.refractionRatio.value=i.refractionRatio,u.combine.value=i.combine,u.useRefract.value=i.envMap&&i.envMap.mapping instanceof THREE.CubeRefractionMapping}if(i instanceof THREE.LineBasicMaterial?(u.diffuse.value=i.color,u.opacity.value=i.opacity):i instanceof THREE.LineDashedMaterial?(u.diffuse.value=i.color,u.opacity.value=i.opacity,u.dashSize.value=i.dashSize,u.totalSize.value=i.dashSize+i.gapSize,u.scale.value=i.scale):i instanceof THREE.PointCloudMaterial?(u.psColor.value=i.color,u.opacity.value=i.opacity,u.size.value=i.size,u.scale.value=O.height/2,u.map.value=i.map):i instanceof THREE.MeshPhongMaterial?(u.shininess.value=i.shininess,ie.gammaInput?(u.ambient.value.copyGammaToLinear(i.ambient),u.emissive.value.copyGammaToLinear(i.emissive),u.specular.value.copyGammaToLinear(i.specular)):(u.ambient.value=i.ambient,u.emissive.value=i.emissive,u.specular.value=i.specular),i.wrapAround&&u.wrapRGB.value.copy(i.wrapRGB)):i instanceof THREE.MeshLambertMaterial?(ie.gammaInput?(u.ambient.value.copyGammaToLinear(i.ambient),u.emissive.value.copyGammaToLinear(i.emissive)):(u.ambient.value=i.ambient,u.emissive.value=i.emissive),i.wrapAround&&u.wrapRGB.value.copy(i.wrapRGB)):i instanceof THREE.MeshDepthMaterial?(u.mNear.value=e.near,u.mFar.value=e.far,u.opacity.value=i.opacity):i instanceof THREE.MeshNormalMaterial&&(u.opacity.value=i.opacity),r.receiveShadow&&!i._shadowPass&&u.shadowMatrix)for($=e=0,s=t.length;$<s;$++)(n=t[$]).castShadow&&(n instanceof THREE.SpotLight||n instanceof THREE.DirectionalLight&&!n.shadowCascade)&&(u.shadowMap.value[e]=n.shadowMap,u.shadowMapSize.value[e]=n.shadowMapSize,u.shadowMatrix.value[e]=n.shadowMatrix,u.shadowDarkness.value[e]=n.shadowDarkness,u.shadowBias.value[e]=n.shadowBias,e++);for(t=i.uniformsList,i=0,u=t.length;i<u;i++)if(!1!==(e=t[i][0]).needsUpdate)switch(n=e.type,s=e.value,$=t[i][1],n){case"1i":K.uniform1i($,s);break;case"1f":K.uniform1f($,s);break;case"2f":K.uniform2f($,s[0],s[1]);break;case"3f":K.uniform3f($,s[0],s[1],s[2]);break;case"4f":K.uniform4f($,s[0],s[1],s[2],s[3]);break;case"1iv":K.uniform1iv($,s);break;case"3iv":K.uniform3iv($,s);break;case"1fv":K.uniform1fv($,s);break;case"2fv":K.uniform2fv($,s);break;case"3fv":K.uniform3fv($,s);break;case"4fv":K.uniform4fv($,s);break;case"Matrix3fv":K.uniformMatrix3fv($,!1,s);break;case"Matrix4fv":K.uniformMatrix4fv($,!1,s);break;case"i":K.uniform1i($,s);break;case"f":K.uniform1f($,s);break;case"v2":K.uniform2f($,s.x,s.y);break;case"v3":K.uniform3f($,s.x,s.y,s.z);break;case"v4":K.uniform4f($,s.x,s.y,s.z,s.w);break;case"c":K.uniform3f($,s.r,s.g,s.b);break;case"iv1":K.uniform1iv($,s);break;case"iv":K.uniform3iv($,s);break;case"fv1":K.uniform1fv($,s);break;case"fv":K.uniform3fv($,s);break;case"v2v":for(void 0===e._array&&(e._array=new Float32Array(2*s.length)),n=0,a=s.length;n<a;n++)o=2*n,e._array[o]=s[n].x,e._array[o+1]=s[n].y;K.uniform2fv($,e._array);break;case"v3v":for(void 0===e._array&&(e._array=new Float32Array(3*s.length)),n=0,a=s.length;n<a;n++)o=3*n,e._array[o]=s[n].x,e._array[o+1]=s[n].y,e._array[o+2]=s[n].z;K.uniform3fv($,e._array);break;case"v4v":for(void 0===e._array&&(e._array=new Float32Array(4*s.length)),n=0,a=s.length;n<a;n++)o=4*n,e._array[o]=s[n].x,e._array[o+1]=s[n].y,e._array[o+2]=s[n].z,e._array[o+3]=s[n].w;K.uniform4fv($,e._array);break;case"m3":K.uniformMatrix3fv($,!1,s.elements);break;case"m3v":for(void 0===e._array&&(e._array=new Float32Array(9*s.length)),n=0,a=s.length;n<a;n++)s[n].flattenToArrayOffset(e._array,9*n);K.uniformMatrix3fv($,!1,e._array);break;case"m4":K.uniformMatrix4fv($,!1,s.elements);break;case"m4v":for(void 0===e._array&&(e._array=new Float32Array(16*s.length)),n=0,a=s.length;n<a;n++)s[n].flattenToArrayOffset(e._array,16*n);K.uniformMatrix4fv($,!1,e._array);break;case"t":if(o=s,s=H(),K.uniform1i($,s),!o)continue;if(o instanceof THREE.CubeTexture||o.image instanceof Array&&6===o.image.length){if(e=o,$=s,6===e.image.length)if(e.needsUpdate){for(e.image.__webglTextureCube||(e.addEventListener("dispose",Ke),e.image.__webglTextureCube=K.createTexture(),ie.info.memory.textures++),K.activeTexture(K.TEXTURE0+$),K.bindTexture(K.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,e.flipY),$=e instanceof THREE.CompressedTexture,s=[],n=0;6>n;n++)ie.autoScaleCubemaps&&!$?(a=s,o=n,m=e.image[n],v=Be,m.width<=v&&m.height<=v||(E=Math.max(m.width,m.height),g=Math.floor(m.width*v/E),v=Math.floor(m.height*v/E),E=document.createElement("canvas"),E.width=g,E.height=v,E.getContext("2d").drawImage(m,0,0,m.width,m.height,0,0,g,v),m=E),a[o]=m):s[n]=e.image[n];for(n=s[0],a=THREE.Math.isPowerOfTwo(n.width)&&THREE.Math.isPowerOfTwo(n.height),o=N(e.format),m=N(e.type),P(K.TEXTURE_CUBE_MAP,e,a),n=0;6>n;n++)if($)for(v=s[n].mipmaps,E=0,y=v.length;E<y;E++)g=v[E],e.format!==THREE.RGBAFormat?K.compressedTexImage2D(K.TEXTURE_CUBE_MAP_POSITIVE_X+n,E,o,g.width,g.height,0,g.data):K.texImage2D(K.TEXTURE_CUBE_MAP_POSITIVE_X+n,E,o,g.width,g.height,0,o,m,g.data);else K.texImage2D(K.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,o,o,m,s[n]);e.generateMipmaps&&a&&K.generateMipmap(K.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else K.activeTexture(K.TEXTURE0+$),K.bindTexture(K.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}else o instanceof THREE.WebGLRenderTargetCube?(e=o,K.activeTexture(K.TEXTURE0+s),K.bindTexture(K.TEXTURE_CUBE_MAP,e.__webglTexture)):ie.setTexture(o,s);break;case"tv":for(void 0===e._array&&(e._array=[]),n=0,a=e.value.length;n<a;n++)e._array[n]=H();for(K.uniform1iv($,e._array),n=0,a=e.value.length;n<a;n++)o=e.value[n],s=e._array[n],o&&ie.setTexture(o,s);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+n)}}return K.uniformMatrix4fv(c.modelViewMatrix,!1,r._modelViewMatrix.elements),c.normalMatrix&&K.uniformMatrix3fv(c.normalMatrix,!1,r._normalMatrix.elements),null!==c.modelMatrix&&K.uniformMatrix4fv(c.modelMatrix,!1,r.matrixWorld.elements),l}function R(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function H(){var e=ue;return e>=ze&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+ze),ue+=1,e}function S(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function M(e,t,n,i){e[t]=n.r*n.r*i,e[t+1]=n.g*n.g*i,e[t+2]=n.b*n.b*i}function C(e,t,n,i){e[t]=n.r*i,e[t+1]=n.g*i,e[t+2]=n.b*i}function A(e){e!==be&&(K.lineWidth(e),be=e)}function k(e,t,n){ye!==e&&(e?K.enable(K.POLYGON_OFFSET_FILL):K.disable(K.POLYGON_OFFSET_FILL),ye=e),!e||Te===t&&xe===n||(K.polygonOffset(t,n),Te=t,xe=n)}function P(e,t,n){n?(K.texParameteri(e,K.TEXTURE_WRAP_S,N(t.wrapS)),K.texParameteri(e,K.TEXTURE_WRAP_T,N(t.wrapT)),K.texParameteri(e,K.TEXTURE_MAG_FILTER,N(t.magFilter)),K.texParameteri(e,K.TEXTURE_MIN_FILTER,N(t.minFilter))):(K.texParameteri(e,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(e,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(e,K.TEXTURE_MAG_FILTER,F(t.magFilter)),K.texParameteri(e,K.TEXTURE_MIN_FILTER,F(t.minFilter))),ee&&t.type!==THREE.FloatType&&(1<t.anisotropy||t.__oldAnisotropy)&&(K.texParameterf(e,ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,Ie)),t.__oldAnisotropy=t.anisotropy)}function L(e,t){K.bindRenderbuffer(K.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(K.renderbufferStorage(K.RENDERBUFFER,K.DEPTH_COMPONENT16,t.width,t.height),K.framebufferRenderbuffer(K.FRAMEBUFFER,K.DEPTH_ATTACHMENT,K.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(K.renderbufferStorage(K.RENDERBUFFER,K.DEPTH_STENCIL,t.width,t.height),K.framebufferRenderbuffer(K.FRAMEBUFFER,K.DEPTH_STENCIL_ATTACHMENT,K.RENDERBUFFER,e)):K.renderbufferStorage(K.RENDERBUFFER,K.RGBA4,t.width,t.height)}function D(e){e instanceof THREE.WebGLRenderTargetCube?(K.bindTexture(K.TEXTURE_CUBE_MAP,e.__webglTexture),K.generateMipmap(K.TEXTURE_CUBE_MAP),K.bindTexture(K.TEXTURE_CUBE_MAP,null)):(K.bindTexture(K.TEXTURE_2D,e.__webglTexture),K.generateMipmap(K.TEXTURE_2D),K.bindTexture(K.TEXTURE_2D,null))}function F(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?K.NEAREST:K.LINEAR}function N(e){if(e===THREE.RepeatWrapping)return K.REPEAT;if(e===THREE.ClampToEdgeWrapping)return K.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return K.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return K.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return K.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return K.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return K.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return K.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return K.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return K.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return K.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return K.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return K.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return K.BYTE;if(e===THREE.ShortType)return K.SHORT;if(e===THREE.UnsignedShortType)return K.UNSIGNED_SHORT;if(e===THREE.IntType)return K.INT;if(e===THREE.UnsignedIntType)return K.UNSIGNED_INT;if(e===THREE.FloatType)return K.FLOAT;if(e===THREE.AlphaFormat)return K.ALPHA;if(e===THREE.RGBFormat)return K.RGB;if(e===THREE.RGBAFormat)return K.RGBA;if(e===THREE.LuminanceFormat)return K.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return K.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return K.FUNC_ADD;if(e===THREE.SubtractEquation)return K.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return K.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return K.ZERO;if(e===THREE.OneFactor)return K.ONE;if(e===THREE.SrcColorFactor)return K.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return K.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return K.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return K.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return K.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return K.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return K.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return K.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return K.SRC_ALPHA_SATURATE;if(void 0!==te){if(e===THREE.RGB_S3TC_DXT1_Format)return te.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return te.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return te.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return te.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);var O=void 0!==(e=e||{}).canvas?e.canvas:document.createElement("canvas"),z=void 0!==e.context?e.context:null,V=void 0!==e.precision?e.precision:"highp",B=void 0!==e.alpha&&e.alpha,I=void 0===e.depth||e.depth,U=void 0===e.stencil||e.stencil,W=void 0!==e.antialias&&e.antialias,j=void 0===e.premultipliedAlpha||e.premultipliedAlpha,G=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,q=void 0!==e.logarithmicDepthBuffer&&e.logarithmicDepthBuffer,X=new THREE.Color(0),Y=0,$=[],Q=[];this.domElement=O,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1,this.shadowMapAutoUpdate=!0,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapCascade=this.shadowMapDebug=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.renderPluginsPre=[],this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var K,Z,J,ee,te,ne,ie=this,re=[],oe=null,ae=null,se=-1,le=null,ce=null,ue=0,he=-1,de=-1,fe=-1,pe=-1,me=-1,ge=-1,ve=-1,Ee=-1,ye=null,Te=null,xe=null,be=null,_e=0,we=0,Re=O.width,He=O.height,Se=0,Me=0,Ce=new Uint8Array(16),Ae=new Uint8Array(16),ke=new THREE.Frustum,Pe=new THREE.Matrix4,Le=new THREE.Matrix4,De=new THREE.Vector3,Fe=new THREE.Vector3,Ne=!0,Oe={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};!function(){try{var e={alpha:B,depth:I,stencil:U,antialias:W,premultipliedAlpha:j,preserveDrawingBuffer:G};if(null===(K=z||O.getContext("webgl",e)||O.getContext("experimental-webgl",e)))throw"Error creating WebGL context."}catch(e){console.error(e)}Z=K.getExtension("OES_texture_float"),K.getExtension("OES_texture_float_linear"),J=K.getExtension("OES_standard_derivatives"),ee=K.getExtension("EXT_texture_filter_anisotropic")||K.getExtension("MOZ_EXT_texture_filter_anisotropic")||K.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),te=K.getExtension("WEBGL_compressed_texture_s3tc")||K.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||K.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),ne=K.getExtension("OES_element_index_uint"),null===Z&&console.log("THREE.WebGLRenderer: Float textures not supported."),null===J&&console.log("THREE.WebGLRenderer: Standard derivatives not supported."),null===ee&&console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported."),null===te&&console.log("THREE.WebGLRenderer: S3TC compressed textures not supported."),null===ne&&console.log("THREE.WebGLRenderer: elementindex as unsigned integer not supported."),void 0===K.getShaderPrecisionFormat&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),q&&K.getExtension("EXT_frag_depth")}(),K.clearColor(0,0,0,1),K.clearDepth(1),K.clearStencil(0),K.enable(K.DEPTH_TEST),K.depthFunc(K.LEQUAL),K.frontFace(K.CCW),K.cullFace(K.BACK),K.enable(K.CULL_FACE),K.enable(K.BLEND),K.blendEquation(K.FUNC_ADD),K.blendFunc(K.SRC_ALPHA,K.ONE_MINUS_SRC_ALPHA),K.viewport(_e,we,Re,He),K.clearColor(X.r,X.g,X.b,Y),this.context=K;var ze=K.getParameter(K.MAX_TEXTURE_IMAGE_UNITS),Ve=K.getParameter(K.MAX_VERTEX_TEXTURE_IMAGE_UNITS);K.getParameter(K.MAX_TEXTURE_SIZE);var Be=K.getParameter(K.MAX_CUBE_MAP_TEXTURE_SIZE),Ie=ee?K.getParameter(ee.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Ue=0<Ve,We=Ue&&Z;te&&K.getParameter(K.COMPRESSED_TEXTURE_FORMATS);var je=K.getShaderPrecisionFormat(K.VERTEX_SHADER,K.HIGH_FLOAT),Ge=K.getShaderPrecisionFormat(K.VERTEX_SHADER,K.MEDIUM_FLOAT);K.getShaderPrecisionFormat(K.VERTEX_SHADER,K.LOW_FLOAT);var qe=K.getShaderPrecisionFormat(K.FRAGMENT_SHADER,K.HIGH_FLOAT),Xe=K.getShaderPrecisionFormat(K.FRAGMENT_SHADER,K.MEDIUM_FLOAT);K.getShaderPrecisionFormat(K.FRAGMENT_SHADER,K.LOW_FLOAT);var Ye=0<je.precision&&0<qe.precision,$e=0<Ge.precision&&0<Xe.precision;"highp"!==V||Ye||($e?(V="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(V="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==V||$e||(V="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp.")),this.getContext=function(){return K},this.supportsVertexTextures=function(){return Ue},this.supportsFloatTextures=function(){return Z},this.supportsStandardDerivatives=function(){return J},this.supportsCompressedTextureS3TC=function(){return te},this.getMaxAnisotropy=function(){return Ie},this.getPrecision=function(){return V},this.setSize=function(e,t,n){O.width=e*this.devicePixelRatio,O.height=t*this.devicePixelRatio,!1!==n&&(O.style.width=e+"px",O.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,i){_e=e*this.devicePixelRatio,we=t*this.devicePixelRatio,Re=n*this.devicePixelRatio,He=i*this.devicePixelRatio,K.viewport(_e,we,Re,He)},this.setScissor=function(e,t,n,i){K.scissor(e*this.devicePixelRatio,t*this.devicePixelRatio,n*this.devicePixelRatio,i*this.devicePixelRatio)},this.enableScissorTest=function(e){e?K.enable(K.SCISSOR_TEST):K.disable(K.SCISSOR_TEST)},this.setClearColor=function(e,t){X.set(e),Y=void 0!==t?t:1,K.clearColor(X.r,X.g,X.b,Y)},this.setClearColorHex=function(e,t){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return X},this.getClearAlpha=function(){return Y},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=K.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=K.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=K.STENCIL_BUFFER_BIT),K.clear(i)},this.clearColor=function(){K.clear(K.COLOR_BUFFER_BIT)},this.clearDepth=function(){K.clear(K.DEPTH_BUFFER_BIT)},this.clearStencil=function(){K.clear(K.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)},this.addPrePlugin=function(e){e.init(this),this.renderPluginsPre.push(e)},this.updateShadowMap=function(e,t){oe=null,se=le=Ee=ve=fe=-1,Ne=!0,de=he=-1,nt(e),this.shadowMapPlugin.update(e,t)};var Qe=function(e){if((e=e.target).removeEventListener("dispose",Qe),e.__webglInit=void 0,e instanceof THREE.BufferGeometry){e=e.attributes;for(var t in e)void 0!==e[t].buffer&&K.deleteBuffer(e[t].buffer);ie.info.memory.geometries--}else if(void 0!==e.geometryGroups){t=0;for(var n=e.geometryGroupsList.length;t<n;t++){var i=e.geometryGroupsList[t];if(void 0!==i.numMorphTargets)for(var r=0,o=i.numMorphTargets;r<o;r++)K.deleteBuffer(i.__webglMorphTargetsBuffers[r]);if(void 0!==i.numMorphNormals)for(r=0,o=i.numMorphNormals;r<o;r++)K.deleteBuffer(i.__webglMorphNormalsBuffers[r]);et(i)}}else et(e)},Ke=function(e){(e=e.target).removeEventListener("dispose",Ke),e.image&&e.image.__webglTextureCube?K.deleteTexture(e.image.__webglTextureCube):e.__webglInit&&(e.__webglInit=!1,K.deleteTexture(e.__webglTexture)),ie.info.memory.textures--},Ze=function(e){if((e=e.target).removeEventListener("dispose",Ze),e&&e.__webglTexture)if(K.deleteTexture(e.__webglTexture),e instanceof THREE.WebGLRenderTargetCube)for(var t=0;6>t;t++)K.deleteFramebuffer(e.__webglFramebuffer[t]),K.deleteRenderbuffer(e.__webglRenderbuffer[t]);else K.deleteFramebuffer(e.__webglFramebuffer),K.deleteRenderbuffer(e.__webglRenderbuffer);ie.info.memory.textures--},Je=function(e){(e=e.target).removeEventListener("dispose",Je),tt(e)},et=function(e){if(void 0!==e.__webglVertexBuffer&&K.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglNormalBuffer&&K.deleteBuffer(e.__webglNormalBuffer),void 0!==e.__webglTangentBuffer&&K.deleteBuffer(e.__webglTangentBuffer),void 0!==e.__webglColorBuffer&&K.deleteBuffer(e.__webglColorBuffer),void 0!==e.__webglUVBuffer&&K.deleteBuffer(e.__webglUVBuffer),void 0!==e.__webglUV2Buffer&&K.deleteBuffer(e.__webglUV2Buffer),void 0!==e.__webglSkinIndicesBuffer&&K.deleteBuffer(e.__webglSkinIndicesBuffer),void 0!==e.__webglSkinWeightsBuffer&&K.deleteBuffer(e.__webglSkinWeightsBuffer),void 0!==e.__webglFaceBuffer&&K.deleteBuffer(e.__webglFaceBuffer),void 0!==e.__webglLineBuffer&&K.deleteBuffer(e.__webglLineBuffer),void 0!==e.__webglLineDistanceBuffer&&K.deleteBuffer(e.__webglLineDistanceBuffer),void 0!==e.__webglCustomAttributesList)for(var t in e.__webglCustomAttributesList)K.deleteBuffer(e.__webglCustomAttributesList[t].buffer);ie.info.memory.geometries--},tt=function(e){var t=e.program.program;if(void 0!==t){e.program=void 0;var n,i,r=!1;for(e=0,n=re.length;e<n;e++)if((i=re[e]).program===t){i.usedTimes--,0===i.usedTimes&&(r=!0);break}if(!0===r){for(r=[],e=0,n=re.length;e<n;e++)(i=re[e]).program!==t&&r.push(i);re=r,K.deleteProgram(t),ie.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,n){if(l(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=K.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=K.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=K.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=K.createBuffer()),e.hasPositions&&(K.bindBuffer(K.ARRAY_BUFFER,e.__webglVertexBuffer),K.bufferData(K.ARRAY_BUFFER,e.positionArray,K.DYNAMIC_DRAW),c(t.attributes.position),K.vertexAttribPointer(t.attributes.position,3,K.FLOAT,!1,0,0)),e.hasNormals){if(K.bindBuffer(K.ARRAY_BUFFER,e.__webglNormalBuffer),n.shading===THREE.FlatShading){var i,r,o,a,s,h,d,f,p,m,g,v=3*e.count;for(g=0;g<v;g+=9)m=e.normalArray,i=m[g],r=m[g+1],o=m[g+2],a=m[g+3],h=m[g+4],f=m[g+5],s=m[g+6],d=m[g+7],p=m[g+8],i=(i+a+s)/3,r=(r+h+d)/3,o=(o+f+p)/3,m[g]=i,m[g+1]=r,m[g+2]=o,m[g+3]=i,m[g+4]=r,m[g+5]=o,m[g+6]=i,m[g+7]=r,m[g+8]=o}K.bufferData(K.ARRAY_BUFFER,e.normalArray,K.DYNAMIC_DRAW),c(t.attributes.normal),K.vertexAttribPointer(t.attributes.normal,3,K.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(K.bindBuffer(K.ARRAY_BUFFER,e.__webglUvBuffer),K.bufferData(K.ARRAY_BUFFER,e.uvArray,K.DYNAMIC_DRAW),c(t.attributes.uv),K.vertexAttribPointer(t.attributes.uv,2,K.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==THREE.NoColors&&(K.bindBuffer(K.ARRAY_BUFFER,e.__webglColorBuffer),K.bufferData(K.ARRAY_BUFFER,e.colorArray,K.DYNAMIC_DRAW),c(t.attributes.color),K.vertexAttribPointer(t.attributes.color,3,K.FLOAT,!1,0,0)),u(),K.drawArrays(K.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,o){if(!1!==i.visible){var a=w(e,t,n,i,o);if(e=a.attributes,t=r.attributes,n=!1,(a=16777215*r.id+2*a.id+(i.wireframe?1:0))!==le&&(le=a,n=!0),n&&l(),o instanceof THREE.Mesh)if(a=t.index){var c,u;if(a.array instanceof Uint32Array?(c=K.UNSIGNED_INT,u=4):(c=K.UNSIGNED_SHORT,u=2),0===(r=r.offsets).length)n&&(s(i,e,t,0),K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,a.buffer)),K.drawElements(K.TRIANGLES,a.array.length,c,0),ie.info.render.calls++,ie.info.render.vertices+=a.array.length,ie.info.render.faces+=a.array.length/3;else{n=!0;for(var h=0,d=r.length;h<d;h++){var f=r[h].index;n&&(s(i,e,t,f),K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,a.buffer)),K.drawElements(K.TRIANGLES,r[h].count,c,r[h].start*u),ie.info.render.calls++,ie.info.render.vertices+=r[h].count,ie.info.render.faces+=r[h].count/3}}}else n&&s(i,e,t,0),i=r.attributes.position,K.drawArrays(K.TRIANGLES,0,i.array.length/3),ie.info.render.calls++,ie.info.render.vertices+=i.array.length/3,ie.info.render.faces+=i.array.length/9;else if(o instanceof THREE.PointCloud)n&&s(i,e,t,0),i=t.position,K.drawArrays(K.POINTS,0,i.array.length/3),ie.info.render.calls++,ie.info.render.points+=i.array.length/3;else if(o instanceof THREE.Line)if(o=o.type===THREE.LineStrip?K.LINE_STRIP:K.LINES,A(i.linewidth),a=t.index)if(a.array instanceof Uint32Array?(c=K.UNSIGNED_INT,u=4):(c=K.UNSIGNED_SHORT,u=2),0===(r=r.offsets).length)n&&(s(i,e,t,0),K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,a.buffer)),K.drawElements(o,a.array.length,c,0),ie.info.render.calls++,ie.info.render.vertices+=a.array.length;else for(1<r.length&&(n=!0),h=0,d=r.length;h<d;h++)f=r[h].index,n&&(s(i,e,t,f),K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,a.buffer)),K.drawElements(o,r[h].count,c,r[h].start*u),ie.info.render.calls++,ie.info.render.vertices+=r[h].count;else n&&s(i,e,t,0),i=t.position,K.drawArrays(o,0,i.array.length/3),ie.info.render.calls++,ie.info.render.points+=i.array.length/3}},this.renderBuffer=function(e,t,n,i,r,o){if(!1!==i.visible){var a,s;if(n=w(e,t,n,i,o),t=n.attributes,e=!1,(n=16777215*r.id+2*n.id+(i.wireframe?1:0))!==le&&(le=n,e=!0),e&&l(),!i.morphTargets&&0<=t.position)e&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglVertexBuffer),c(t.position),K.vertexAttribPointer(t.position,3,K.FLOAT,!1,0,0));else if(o.morphTargetBase){if(n=i.program.attributes,-1!==o.morphTargetBase&&0<=n.position?(K.bindBuffer(K.ARRAY_BUFFER,r.__webglMorphTargetsBuffers[o.morphTargetBase]),c(n.position),K.vertexAttribPointer(n.position,3,K.FLOAT,!1,0,0)):0<=n.position&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglVertexBuffer),c(n.position),K.vertexAttribPointer(n.position,3,K.FLOAT,!1,0,0)),o.morphTargetForcedOrder.length){var h=0;for(s=o.morphTargetForcedOrder,a=o.morphTargetInfluences;h<i.numSupportedMorphTargets&&h<s.length;)0<=n["morphTarget"+h]&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglMorphTargetsBuffers[s[h]]),c(n["morphTarget"+h]),K.vertexAttribPointer(n["morphTarget"+h],3,K.FLOAT,!1,0,0)),0<=n["morphNormal"+h]&&i.morphNormals&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglMorphNormalsBuffers[s[h]]),c(n["morphNormal"+h]),K.vertexAttribPointer(n["morphNormal"+h],3,K.FLOAT,!1,0,0)),o.__webglMorphTargetInfluences[h]=a[s[h]],h++}else{s=[];var d,p=(a=o.morphTargetInfluences).length;for(d=0;d<p;d++)0<(h=a[d])&&s.push([h,d]);for(s.length>i.numSupportedMorphTargets?(s.sort(f),s.length=i.numSupportedMorphTargets):s.length>i.numSupportedMorphNormals?s.sort(f):0===s.length&&s.push([0,0]),h=0;h<i.numSupportedMorphTargets;)s[h]?(d=s[h][1],0<=n["morphTarget"+h]&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglMorphTargetsBuffers[d]),c(n["morphTarget"+h]),K.vertexAttribPointer(n["morphTarget"+h],3,K.FLOAT,!1,0,0)),0<=n["morphNormal"+h]&&i.morphNormals&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglMorphNormalsBuffers[d]),c(n["morphNormal"+h]),K.vertexAttribPointer(n["morphNormal"+h],3,K.FLOAT,!1,0,0)),o.__webglMorphTargetInfluences[h]=a[d]):o.__webglMorphTargetInfluences[h]=0,h++}null!==i.program.uniforms.morphTargetInfluences&&K.uniform1fv(i.program.uniforms.morphTargetInfluences,o.__webglMorphTargetInfluences)}if(e){if(r.__webglCustomAttributesList)for(a=0,s=r.__webglCustomAttributesList.length;a<s;a++)n=r.__webglCustomAttributesList[a],0<=t[n.buffer.belongsToAttribute]&&(K.bindBuffer(K.ARRAY_BUFFER,n.buffer),c(t[n.buffer.belongsToAttribute]),K.vertexAttribPointer(t[n.buffer.belongsToAttribute],n.size,K.FLOAT,!1,0,0));0<=t.color&&(0<o.geometry.colors.length||0<o.geometry.faces.length?(K.bindBuffer(K.ARRAY_BUFFER,r.__webglColorBuffer),c(t.color),K.vertexAttribPointer(t.color,3,K.FLOAT,!1,0,0)):i.defaultAttributeValues&&K.vertexAttrib3fv(t.color,i.defaultAttributeValues.color)),0<=t.normal&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglNormalBuffer),c(t.normal),K.vertexAttribPointer(t.normal,3,K.FLOAT,!1,0,0)),0<=t.tangent&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglTangentBuffer),c(t.tangent),K.vertexAttribPointer(t.tangent,4,K.FLOAT,!1,0,0)),0<=t.uv&&(o.geometry.faceVertexUvs[0]?(K.bindBuffer(K.ARRAY_BUFFER,r.__webglUVBuffer),c(t.uv),K.vertexAttribPointer(t.uv,2,K.FLOAT,!1,0,0)):i.defaultAttributeValues&&K.vertexAttrib2fv(t.uv,i.defaultAttributeValues.uv)),0<=t.uv2&&(o.geometry.faceVertexUvs[1]?(K.bindBuffer(K.ARRAY_BUFFER,r.__webglUV2Buffer),c(t.uv2),K.vertexAttribPointer(t.uv2,2,K.FLOAT,!1,0,0)):i.defaultAttributeValues&&K.vertexAttrib2fv(t.uv2,i.defaultAttributeValues.uv2)),i.skinning&&0<=t.skinIndex&&0<=t.skinWeight&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglSkinIndicesBuffer),c(t.skinIndex),K.vertexAttribPointer(t.skinIndex,4,K.FLOAT,!1,0,0),K.bindBuffer(K.ARRAY_BUFFER,r.__webglSkinWeightsBuffer),c(t.skinWeight),K.vertexAttribPointer(t.skinWeight,4,K.FLOAT,!1,0,0)),0<=t.lineDistance&&(K.bindBuffer(K.ARRAY_BUFFER,r.__webglLineDistanceBuffer),c(t.lineDistance),K.vertexAttribPointer(t.lineDistance,1,K.FLOAT,!1,0,0))}u(),o instanceof THREE.Mesh?(o=r.__typeArray===Uint32Array?K.UNSIGNED_INT:K.UNSIGNED_SHORT,i.wireframe?(A(i.wireframeLinewidth),e&&K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,r.__webglLineBuffer),K.drawElements(K.LINES,r.__webglLineCount,o,0)):(e&&K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,r.__webglFaceBuffer),K.drawElements(K.TRIANGLES,r.__webglFaceCount,o,0)),ie.info.render.calls++,ie.info.render.vertices+=r.__webglFaceCount,ie.info.render.faces+=r.__webglFaceCount/3):o instanceof THREE.Line?(o=o.type===THREE.LineStrip?K.LINE_STRIP:K.LINES,A(i.linewidth),K.drawArrays(o,0,r.__webglLineCount),ie.info.render.calls++):o instanceof THREE.PointCloud&&(K.drawArrays(K.POINTS,0,r.__webglParticleCount),ie.info.render.calls++,ie.info.render.points+=r.__webglParticleCount)}},this.render=function(e,t,n,i){function r(e){e instanceof THREE.SkinnedMesh&&e.skeleton.update();for(var t=0,n=e.children.length;t<n;t++)r(e.children[t])}if(!1==t instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var o,a,s,l,c=e.__lights,u=e.fog;for(se=-1,ce=null,Ne=!0,!0===e.autoUpdate&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),r(e),t.matrixWorldInverse.getInverse(t.matrixWorld),Pe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ke.setFromMatrix(Pe),nt(e),$.length=0,Q.length=0,p(e,e,t),!0===ie.sortObjects&&($.sort(h),Q.sort(d)),m(this.renderPluginsPre,e,t),ie.info.render.calls=0,ie.info.render.vertices=0,ie.info.render.faces=0,ie.info.render.points=0,this.setRenderTarget(n),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),i=0,o=(l=e.__webglObjectsImmediate).length;i<o;i++)a=l[i],(s=a.object).visible&&(S(s,t),E(a));e.overrideMaterial?(i=e.overrideMaterial,this.setBlending(i.blending,i.blendEquation,i.blendSrc,i.blendDst),this.setDepthTest(i.depthTest),this.setDepthWrite(i.depthWrite),k(i.polygonOffset,i.polygonOffsetFactor,i.polygonOffsetUnits),g($,t,c,u,!0,i),g(Q,t,c,u,!0,i),v(e.__webglObjectsImmediate,"",t,c,u,!1,i)):(i=null,this.setBlending(THREE.NoBlending),g($,t,c,u,!1,i),v(e.__webglObjectsImmediate,"opaque",t,c,u,!1,i),g(Q,t,c,u,!0,i),v(e.__webglObjectsImmediate,"transparent",t,c,u,!0,i)),m(this.renderPluginsPost,e,t),n&&n.generateMipmaps&&n.minFilter!==THREE.NearestFilter&&n.minFilter!==THREE.LinearFilter&&D(n),this.setDepthTest(!0),this.setDepthWrite(!0)}},this.renderImmediateObject=function(e,t,n,i,r){var o=w(e,t,n,i,r);le=-1,ie.setMaterialFaces(i),r.immediateRenderCallback?r.immediateRenderCallback(o,K,ke):r.render(function(e){ie.renderBufferImmediate(e,o,i)})};var nt=function(e){for(e.__webglObjects||(e.__webglObjects={},e.__webglObjectsImmediate=[]);e.__objectsAdded.length;){var n=e.__objectsAdded[0],i=e,r=void 0,o=void 0;if(void 0===n.__webglInit&&(n.__webglInit=!0,n._modelViewMatrix=new THREE.Matrix4,n._normalMatrix=new THREE.Matrix3),void 0!==(r=n.geometry)&&void 0===r.__webglInit)if(r.__webglInit=!0,r.addEventListener("dispose",Qe),r instanceof THREE.BufferGeometry)a(r);else if(n instanceof THREE.Mesh)void 0!==n.__webglActive&&_(n,i),y(i,n,r);else if(n instanceof THREE.Line){if(!r.__webglVertexBuffer){(o=r).__webglVertexBuffer=K.createBuffer(),o.__webglColorBuffer=K.createBuffer(),o.__webglLineDistanceBuffer=K.createBuffer(),ie.info.memory.geometries++;var s=n,l=(o=r).vertices.length;o.__vertexArray=new Float32Array(3*l),o.__colorArray=new Float32Array(3*l),o.__lineDistanceArray=new Float32Array(1*l),o.__webglLineCount=l,t(o,s),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0,r.lineDistancesNeedUpdate=!0}}else n instanceof THREE.PointCloud&&!r.__webglVertexBuffer&&(o=r,o.__webglVertexBuffer=K.createBuffer(),o.__webglColorBuffer=K.createBuffer(),ie.info.memory.geometries++,o=r,s=n,l=o.vertices.length,o.__vertexArray=new Float32Array(3*l),o.__colorArray=new Float32Array(3*l),o.__sortArray=[],o.__webglParticleCount=l,t(o,s),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0);if(void 0===n.__webglActive){if(n instanceof THREE.Mesh){if((r=n.geometry)instanceof THREE.BufferGeometry)T(i.__webglObjects,r,n);else if(r instanceof THREE.Geometry)for(s=0,l=r.geometryGroupsList.length;s<l;s++)o=r.geometryGroupsList[s],T(i.__webglObjects,o,n)}else n instanceof THREE.Line||n instanceof THREE.PointCloud?(r=n.geometry,T(i.__webglObjects,r,n)):(n instanceof THREE.ImmediateRenderObject||n.immediateRenderCallback)&&i.__webglObjectsImmediate.push({id:null,object:n,opaque:null,transparent:null,z:0});n.__webglActive=!0}e.__objectsAdded.splice(0,1)}for(;e.__objectsRemoved.length;)_(e.__objectsRemoved[0],e),e.__objectsRemoved.splice(0,1)};this.initMaterial=function(e,t,n,i){var r,o,a,s;e.addEventListener("dispose",Je);var l,c,u,h;e instanceof THREE.MeshDepthMaterial?h="depth":e instanceof THREE.MeshNormalMaterial?h="normal":e instanceof THREE.MeshBasicMaterial?h="basic":e instanceof THREE.MeshLambertMaterial?h="lambert":e instanceof THREE.MeshPhongMaterial?h="phong":e instanceof THREE.LineBasicMaterial?h="basic":e instanceof THREE.LineDashedMaterial?h="dashed":e instanceof THREE.PointCloudMaterial&&(h="particle_basic"),h?(r=THREE.ShaderLib[h],e.__webglShader={uniforms:THREE.UniformsUtils.clone(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}):e.__webglShader={uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader},u=s=a=o=r=0;for(var d=t.length;u<d;u++){var f=t[u];f.onlyShadow||!1===f.visible||(f instanceof THREE.DirectionalLight&&r++,f instanceof THREE.PointLight&&o++,f instanceof THREE.SpotLight&&a++,f instanceof THREE.HemisphereLight&&s++)}for(d=u=0,f=t.length;d<f;d++){var p=t[d];p.castShadow&&(p instanceof THREE.SpotLight&&u++,p instanceof THREE.DirectionalLight&&!p.shadowCascade&&u++)}t=u,We&&i&&i.skeleton&&i.skeleton.useVertexTexture?u=1024:(u=K.getParameter(K.MAX_VERTEX_UNIFORM_VECTORS),u=Math.floor((u-20)/4),void 0!==i&&i instanceof THREE.SkinnedMesh&&(u=Math.min(i.skeleton.bones.length,u))<i.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+i.skeleton.bones.length+", this GPU supports just "+u+" (try OpenGL instead of ANGLE)")),n={precision:V,supportsVertexTextures:Ue,map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,vertexColors:e.vertexColors,fog:n,useFog:e.fog,fogExp:n instanceof THREE.FogExp2,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:q,skinning:e.skinning,maxBones:u,useVertexTexture:We&&i&&i.skeleton&&i.skeleton.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:r,maxPointLights:o,maxSpotLights:a,maxHemiLights:s,maxShadows:t,shadowMapEnabled:this.shadowMapEnabled&&i.receiveShadow&&0<t,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===THREE.DoubleSide,flipSided:e.side===THREE.BackSide},i=[],h?i.push(h):(i.push(e.fragmentShader),i.push(e.vertexShader));for(var m in e.defines)i.push(m),i.push(e.defines[m]);for(c in n)i.push(c),i.push(n[c]);h=i.join();var g;for(c=0,m=re.length;c<m;c++)if((i=re[c]).code===h){(g=i).usedTimes++;break}if(void 0===g&&(g=new THREE.WebGLProgram(this,h,e,n),re.push(g),ie.info.memory.programs=re.length),e.program=g,g=e.program.attributes,e.morphTargets)for(e.numSupportedMorphTargets=0,m="morphTarget",c=0;c<this.maxMorphTargets;c++)h=m+c,0<=g[h]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(e.numSupportedMorphNormals=0,m="morphNormal",c=0;c<this.maxMorphNormals;c++)h=m+c,0<=g[h]&&e.numSupportedMorphNormals++;e.uniformsList=[];for(l in e.__webglShader.uniforms)(c=e.program.uniforms[l])&&e.uniformsList.push([e.__webglShader.uniforms[l],c])},this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?K.disable(K.CULL_FACE):(t===THREE.FrontFaceDirectionCW?K.frontFace(K.CW):K.frontFace(K.CCW),e===THREE.CullFaceBack?K.cullFace(K.BACK):e===THREE.CullFaceFront?K.cullFace(K.FRONT):K.cullFace(K.FRONT_AND_BACK),K.enable(K.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===THREE.DoubleSide;e=e.side===THREE.BackSide,he!==t&&(t?K.disable(K.CULL_FACE):K.enable(K.CULL_FACE),he=t),de!==e&&(e?K.frontFace(K.CW):K.frontFace(K.CCW),de=e)},this.setDepthTest=function(e){ve!==e&&(e?K.enable(K.DEPTH_TEST):K.disable(K.DEPTH_TEST),ve=e)},this.setDepthWrite=function(e){Ee!==e&&(K.depthMask(e),Ee=e)},this.setBlending=function(e,t,n,i){e!==fe&&(e===THREE.NoBlending?K.disable(K.BLEND):e===THREE.AdditiveBlending?(K.enable(K.BLEND),K.blendEquation(K.FUNC_ADD),K.blendFunc(K.SRC_ALPHA,K.ONE)):e===THREE.SubtractiveBlending?(K.enable(K.BLEND),K.blendEquation(K.FUNC_ADD),K.blendFunc(K.ZERO,K.ONE_MINUS_SRC_COLOR)):e===THREE.MultiplyBlending?(K.enable(K.BLEND),K.blendEquation(K.FUNC_ADD),K.blendFunc(K.ZERO,K.SRC_COLOR)):e===THREE.CustomBlending?K.enable(K.BLEND):(K.enable(K.BLEND),K.blendEquationSeparate(K.FUNC_ADD,K.FUNC_ADD),K.blendFuncSeparate(K.SRC_ALPHA,K.ONE_MINUS_SRC_ALPHA,K.ONE,K.ONE_MINUS_SRC_ALPHA)),fe=e),e===THREE.CustomBlending?(t!==pe&&(K.blendEquation(N(t)),pe=t),(n!==me||i!==ge)&&(K.blendFunc(N(n),N(i)),me=n,ge=i)):ge=me=pe=null},this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener("dispose",Ke),e.__webglTexture=K.createTexture(),ie.info.memory.textures++),K.activeTexture(K.TEXTURE0+t),K.bindTexture(K.TEXTURE_2D,e.__webglTexture),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,e.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,e.unpackAlignment);var n=e.image,i=THREE.Math.isPowerOfTwo(n.width)&&THREE.Math.isPowerOfTwo(n.height),r=N(e.format),o=N(e.type);P(K.TEXTURE_2D,e,i);var a=e.mipmaps;if(e instanceof THREE.DataTexture)if(0<a.length&&i){for(var s=0,l=a.length;s<l;s++)n=a[s],K.texImage2D(K.TEXTURE_2D,s,r,n.width,n.height,0,r,o,n.data);e.generateMipmaps=!1}else K.texImage2D(K.TEXTURE_2D,0,r,n.width,n.height,0,r,o,n.data);else if(e instanceof THREE.CompressedTexture)for(s=0,l=a.length;s<l;s++)n=a[s],e.format!==THREE.RGBAFormat?K.compressedTexImage2D(K.TEXTURE_2D,s,r,n.width,n.height,0,n.data):K.texImage2D(K.TEXTURE_2D,s,r,n.width,n.height,0,r,o,n.data);else if(0<a.length&&i){for(s=0,l=a.length;s<l;s++)n=a[s],K.texImage2D(K.TEXTURE_2D,s,r,r,o,n);e.generateMipmaps=!1}else K.texImage2D(K.TEXTURE_2D,0,r,r,o,e.image);e.generateMipmaps&&i&&K.generateMipmap(K.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else K.activeTexture(K.TEXTURE0+t),K.bindTexture(K.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&!e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",Ze),e.__webglTexture=K.createTexture(),ie.info.memory.textures++;var n=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),i=N(e.format),r=N(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],K.bindTexture(K.TEXTURE_CUBE_MAP,e.__webglTexture),P(K.TEXTURE_CUBE_MAP,e,n);for(var o=0;6>o;o++){e.__webglFramebuffer[o]=K.createFramebuffer(),e.__webglRenderbuffer[o]=K.createRenderbuffer(),K.texImage2D(K.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,i,e.width,e.height,0,i,r,null);var a=e,s=K.TEXTURE_CUBE_MAP_POSITIVE_X+o;K.bindFramebuffer(K.FRAMEBUFFER,e.__webglFramebuffer[o]),K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,s,a.__webglTexture,0),L(e.__webglRenderbuffer[o],e)}n&&K.generateMipmap(K.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=K.createFramebuffer(),e.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:K.createRenderbuffer(),K.bindTexture(K.TEXTURE_2D,e.__webglTexture),P(K.TEXTURE_2D,e,n),K.texImage2D(K.TEXTURE_2D,0,i,e.width,e.height,0,i,r,null),i=K.TEXTURE_2D,K.bindFramebuffer(K.FRAMEBUFFER,e.__webglFramebuffer),K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,i,e.__webglTexture,0),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?K.framebufferRenderbuffer(K.FRAMEBUFFER,K.DEPTH_ATTACHMENT,K.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&K.framebufferRenderbuffer(K.FRAMEBUFFER,K.DEPTH_STENCIL_ATTACHMENT,K.RENDERBUFFER,e.__webglRenderbuffer):L(e.__webglRenderbuffer,e),n&&K.generateMipmap(K.TEXTURE_2D);t?K.bindTexture(K.TEXTURE_CUBE_MAP,null):K.bindTexture(K.TEXTURE_2D,null),K.bindRenderbuffer(K.RENDERBUFFER,null),K.bindFramebuffer(K.FRAMEBUFFER,null)}e?(t=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,n=e.width,e=e.height,r=i=0):(t=null,n=Re,e=He,i=_e,r=we),t!==ae&&(K.bindFramebuffer(K.FRAMEBUFFER,t),K.viewport(i,r,n,e),ae=t),Se=n,Me=e},this.shadowMapPlugin=new THREE.ShadowMapPlugin,this.addPrePlugin(this.shadowMapPlugin),this.addPostPlugin(new THREE.SpritePlugin),this.addPostPlugin(new THREE.LensFlarePlugin)},THREE.WebGLRenderTarget=function(e,t,n){this.width=e,this.height=t,n=n||{},this.wrapS=void 0!==n.wrapS?n.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==n.wrapT?n.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n.magFilter?n.magFilter:THREE.LinearFilter,this.minFilter=void 0!==n.minFilter?n.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==n.format?n.format:THREE.RGBAFormat,this.type=void 0!==n.type?n.type:THREE.UnsignedByteType,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.generateMipmaps=!0,this.shareDepthFrom=null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,n){THREE.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLProgram=function(){var e=0;return function(t,n,i,r){var o=t.context,a=i.defines,s=i.__webglShader.uniforms,l=i.attributes,c=i.__webglShader.vertexShader,u=i.__webglShader.fragmentShader,h=i.index0AttributeName;void 0===h&&!0===r.morphTargets&&(h="position");var d="SHADOWMAP_TYPE_BASIC";r.shadowMapType===THREE.PCFShadowMap?d="SHADOWMAP_TYPE_PCF":r.shadowMapType===THREE.PCFSoftShadowMap&&(d="SHADOWMAP_TYPE_PCF_SOFT");var f,p;f=[];for(var m in a)!1!==(p=a[m])&&(p="#define "+m+" "+p,f.push(p));f=f.join("\n"),a=o.createProgram(),i instanceof THREE.RawShaderMaterial?t=i="":(i=["precision "+r.precision+" float;","precision "+r.precision+" int;",f,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.gammaInput?"#define GAMMA_INPUT":"",t.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+r.maxDirLights,"#define MAX_POINT_LIGHTS "+r.maxPointLights,"#define MAX_SPOT_LIGHTS "+r.maxSpotLights,"#define MAX_HEMI_LIGHTS "+r.maxHemiLights,"#define MAX_SHADOWS "+r.maxShadows,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.lightMap?"#define USE_LIGHTMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals?"#define USE_MORPHNORMALS":"",r.wrapAround?"#define WRAP_AROUND":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+d:"",r.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",r.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n\tattribute vec3 morphTarget0;\n\tattribute vec3 morphTarget1;\n\tattribute vec3 morphTarget2;\n\tattribute vec3 morphTarget3;\n\t#ifdef USE_MORPHNORMALS\n\t\tattribute vec3 morphNormal0;\n\t\tattribute vec3 morphNormal1;\n\t\tattribute vec3 morphNormal2;\n\t\tattribute vec3 morphNormal3;\n\t#else\n\t\tattribute vec3 morphTarget4;\n\t\tattribute vec3 morphTarget5;\n\t\tattribute vec3 morphTarget6;\n\t\tattribute vec3 morphTarget7;\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tattribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n#endif\n"].join("\n"),t=["precision "+r.precision+" float;","precision "+r.precision+" int;",r.bumpMap||r.normalMap?"#extension GL_OES_standard_derivatives : enable":"",f,"#define MAX_DIR_LIGHTS "+r.maxDirLights,"#define MAX_POINT_LIGHTS "+r.maxPointLights,"#define MAX_SPOT_LIGHTS "+r.maxSpotLights,"#define MAX_HEMI_LIGHTS "+r.maxHemiLights,"#define MAX_SHADOWS "+r.maxShadows,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"",t.gammaInput?"#define GAMMA_INPUT":"",t.gammaOutput?"#define GAMMA_OUTPUT":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.lightMap?"#define USE_LIGHTMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.metal?"#define METAL":"",r.wrapAround?"#define WRAP_AROUND":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+d:"",r.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",r.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n")),c=new THREE.WebGLShader(o,o.VERTEX_SHADER,i+c),u=new THREE.WebGLShader(o,o.FRAGMENT_SHADER,t+u),o.attachShader(a,c),o.attachShader(a,u),void 0!==h&&o.bindAttribLocation(a,0,h),o.linkProgram(a),!1===o.getProgramParameter(a,o.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",o.getProgramParameter(a,o.VALIDATE_STATUS)),console.error("gl.getError()",o.getError())),""!==o.getProgramInfoLog(a)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",o.getProgramInfoLog(a)),o.deleteShader(c),o.deleteShader(u),h="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" "),r.useVertexTexture?(h.push("boneTexture"),h.push("boneTextureWidth"),h.push("boneTextureHeight")):h.push("boneGlobalMatrices"),r.logarithmicDepthBuffer&&h.push("logDepthBufFC");for(var g in s)h.push(g);for(s=h,g={},h=0,t=s.length;h<t;h++)d=s[h],g[d]=o.getUniformLocation(a,d);for(this.uniforms=g,h="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" "),s=0;s<r.maxMorphTargets;s++)h.push("morphTarget"+s);for(s=0;s<r.maxMorphNormals;s++)h.push("morphNormal"+s);for(var v in l)h.push(v);for(l={},v=0,s=(r=h).length;v<s;v++)g=r[v],l[g]=o.getAttribLocation(a,g);return this.attributes=l,this.id=e++,this.code=n,this.usedTimes=1,this.program=a,this.vertexShader=c,this.fragmentShader=u,this}}(),THREE.WebGLShader=function(){var e=function(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")};return function(t,n,i){return n=t.createShader(n),t.shaderSource(n,i),t.compileShader(n),!1===t.getShaderParameter(n,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t.getShaderInfoLog(n)),console.warn(e(i))),n}}(),THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.rotation=this.z=this.y=this.x=0,this.scale=new THREE.Vector2,this.material=null},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0},THREE.GeometryUtils={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,n,i){var r=new THREE.ImageLoader;r.crossOrigin=this.crossOrigin;var o=new THREE.Texture(void 0,t);return r.load(e,function(e){o.image=e,o.needsUpdate=!0,n&&n(o)},void 0,function(e){i&&i(e)}),o.sourceFile=e,o},loadTextureCube:function(e,t,n,i){var r=new THREE.ImageLoader;r.crossOrigin=this.crossOrigin;var o=new THREE.CubeTexture([],t);o.flipY=!1;var a=0;t=function(t){r.load(e[t],function(e){o.images[t]=e,6===(a+=1)&&(o.needsUpdate=!0,n&&n(o))})},i=0;for(var s=e.length;i<s;++i)t(i);return o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){t|=1;var n=e.width,i=e.height,r=document.createElement("canvas");r.width=n,r.height=i;var o=r.getContext("2d");o.drawImage(e,0,0);for(var a=o.getImageData(0,0,n,i).data,s=o.createImageData(n,i),l=s.data,c=0;c<n;c++)for(var u=0;u<i;u++){var h=0>u-1?0:u-1,d=u+1>i-1?i-1:u+1,f=0>c-1?0:c-1,p=c+1>n-1?n-1:c+1,m=[],g=[0,0,a[4*(u*n+c)]/255*t];for(m.push([-1,0,a[4*(u*n+f)]/255*t]),m.push([-1,-1,a[4*(h*n+f)]/255*t]),m.push([0,-1,a[4*(h*n+c)]/255*t]),m.push([1,-1,a[4*(h*n+p)]/255*t]),m.push([1,0,a[4*(u*n+p)]/255*t]),m.push([1,1,a[4*(d*n+p)]/255*t]),m.push([0,1,a[4*(d*n+c)]/255*t]),m.push([-1,1,a[4*(d*n+f)]/255*t]),h=[],f=m.length,d=0;d<f;d++){var p=m[d],v=m[(d+1)%f],p=[p[0]-g[0],p[1]-g[1],p[2]-g[2]],v=[v[0]-g[0],v[1]-g[1],v[2]-g[2]];h.push(function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]}([p[1]*v[2]-p[2]*v[1],p[2]*v[0]-p[0]*v[2],p[0]*v[1]-p[1]*v[0]]))}for(m=[0,0,0],d=0;d<h.length;d++)m[0]+=h[d][0],m[1]+=h[d][1],m[2]+=h[d][2];m[0]/=h.length,m[1]/=h.length,m[2]/=h.length,l[g=4*(u*n+c)]=(m[0]+1)/2*255|0,l[g+1]=(m[1]+1)/2*255|0,l[g+2]=255*m[2]|0,l[g+3]=255}return o.putImageData(s,0,0),r},generateDataTexture:function(e,t,n){var i=e*t,r=new Uint8Array(3*i),o=Math.floor(255*n.r),a=Math.floor(255*n.g);n=Math.floor(255*n.b);for(var s=0;s<i;s++)r[3*s]=o,r[3*s+1]=a,r[3*s+2]=n;return e=new THREE.DataTexture(r,e,t,THREE.RGBFormat),e.needsUpdate=!0,e}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var n=new THREE.Object3D,i=0,r=t.length;i<r;i++)n.add(new THREE.Mesh(e,t[i]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var i=new THREE.Matrix4;i.getInverse(n.matrixWorld),e.applyMatrix(i),t.remove(e),n.add(e)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase();return this.faces[t]=this.faces[t]||{},this.faces[t][e.cssFontWeight]=this.faces[t][e.cssFontWeight]||{},this.faces[t][e.cssFontWeight][e.cssFontStyle]=e,this.faces[t][e.cssFontWeight][e.cssFontStyle]=e},drawText:function(e){var t=this.getFace(),n=this.size/t.resolution,i=0,r=String(e).split(""),o=r.length,a=[];for(e=0;e<o;e++){var s=new THREE.Path,i=i+(s=this.extractGlyphPoints(r[e],t,n,i,s)).offset;a.push(s.path)}return{paths:a,offset:i/2}},extractGlyphPoints:function(e,t,n,i,r){var o,a,s,l,c,u,h,d,f,p,m,g=[],v=t.glyphs[e]||t.glyphs["?"];if(v){if(v.o)for(t=v._cachedOutline||(v._cachedOutline=v.o.split(" ")),l=t.length,e=0;e<l;)switch(s=t[e++]){case"m":s=t[e++]*n+i,c=t[e++]*n,r.moveTo(s,c);break;case"l":s=t[e++]*n+i,c=t[e++]*n,r.lineTo(s,c);break;case"q":if(s=t[e++]*n+i,c=t[e++]*n,d=t[e++]*n+i,f=t[e++]*n,r.quadraticCurveTo(d,f,s,c),o=g[g.length-1])for(u=o.x,h=o.y,o=1,a=this.divisions;o<=a;o++){var E=o/a;THREE.Shape.Utils.b2(E,u,d,s),THREE.Shape.Utils.b2(E,h,f,c)}break;case"b":if(s=t[e++]*n+i,c=t[e++]*n,d=t[e++]*n+i,f=t[e++]*n,p=t[e++]*n+i,m=t[e++]*n,r.bezierCurveTo(d,f,p,m,s,c),o=g[g.length-1])for(u=o.x,h=o.y,o=1,a=this.divisions;o<=a;o++)E=o/a,THREE.Shape.Utils.b3(E,u,d,p,s),THREE.Shape.Utils.b3(E,h,f,m,c)}return{offset:v.ha*n,path:r}}}},THREE.FontUtils.generateShapes=function(e,t){var n=void 0!==(t=t||{}).curveSegments?t.curveSegments:4,i=void 0!==t.font?t.font:"helvetiker",r=void 0!==t.weight?t.weight:"normal",o=void 0!==t.style?t.style:"normal";for(THREE.FontUtils.size=void 0!==t.size?t.size:100,THREE.FontUtils.divisions=n,THREE.FontUtils.face=i,THREE.FontUtils.weight=r,THREE.FontUtils.style=o,i=[],r=0,o=(n=THREE.FontUtils.drawText(e).paths).length;r<o;r++)Array.prototype.push.apply(i,n[r].toShapes());return i},function(e){var t=function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n};e.Triangulate=function(e,n){var i=e.length;if(3>i)return null;var r,o,a,s=[],l=[],c=[];if(0<t(e))for(o=0;o<i;o++)l[o]=o;else for(o=0;o<i;o++)l[o]=i-1-o;var u=2*i;for(o=i-1;2<i;){if(0>=u--){console.log("Warning, unable to triangulate polygon!");break}i<=(r=o)&&(r=0),i<=(o=r+1)&&(o=0),i<=(a=o+1)&&(a=0);var h;e:{var d=h=void 0,f=void 0,p=void 0,m=void 0,g=void 0,v=void 0,E=void 0,y=void 0,d=e[l[r]].x,f=e[l[r]].y,p=e[l[o]].x,m=e[l[o]].y,g=e[l[a]].x;if(1e-10>(p-d)*((v=e[l[a]].y)-f)-(m-f)*(g-d))h=!1;else{var T=void 0,x=void 0,b=void 0,_=void 0,w=void 0,R=void 0,H=void 0,S=void 0,M=void 0,C=void 0,M=S=H=y=E=void 0,T=g-p,x=v-m,b=d-g,_=f-v,w=p-d,R=m-f;for(h=0;h<i;h++)if(E=e[l[h]].x,y=e[l[h]].y,!(E===d&&y===f||E===p&&y===m||E===g&&y===v)&&(H=E-d,S=y-f,M=E-p,C=y-m,E-=g,y-=v,M=T*C-x*M,H=w*S-R*H,S=b*y-_*E,-1e-10<=M&&-1e-10<=S&&-1e-10<=H)){h=!1;break e}h=!0}}if(h){for(s.push([e[l[r]],e[l[o]],e[l[a]]]),c.push([l[r],l[o],l[a]]),r=o,a=o+1;a<i;r++,a++)l[r]=l[a];u=2*--i}}return n?c:s},e.Triangulate.area=t}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(e){return console.log("Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(e){return e=this.getUtoTmapping(e),this.getPoint(e)},THREE.Curve.prototype.getPoints=function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPoint(t/e));return n},THREE.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPointAt(t/e));return n},THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},THREE.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(r),i.push(o),r=t;return this.cacheArcLengths=i},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(e,t){var n,i=this.getLengths(),r=0,o=i.length;n=t||e*i[o-1];for(var a,s=0,l=o-1;s<=l;)if(r=Math.floor(s+(l-s)/2),0>(a=i[r]-n))s=r+1;else{if(!(0<a)){l=r;break}l=r-1}return r=l,i[r]==n?r/(o-1):(s=i[r],i=(r+(n-s)/(i[r+1]-s))/(o-1))},THREE.Curve.prototype.getTangent=function(e){var t=e-1e-4;return e+=1e-4,0>t&&(t=0),1<e&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},THREE.Curve.prototype.getTangentAt=function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,n,i){return 2*(1-e)*(n-t)+2*e*(i-n)},tangentCubicBezier:function(e,t,n,i,r){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*i*(1-e)-3*e*e*i+3*e*e*r},tangentSpline:function(e,t,n,i,r){return 6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e)},interpolate:function(e,t,n,i,r){var o=r*r;return(2*t-2*n+(e=.5*(n-e))+(i=.5*(i-t)))*r*o+(-3*t+3*n-2*e-i)*o+e*r+t}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){var t=e*this.getLength(),n=this.getCurveLengths();for(e=0;e<n.length;){if(n[e]>=t)return t=n[e]-t,e=this.curves[e],t=1-t/e.getLength(),e.getPointAt(t);e++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],n=0,i=this.curves.length;for(e=0;e<i;e++)n+=this.curves[e].getLength(),t.push(n);return this.cacheLengths=t},THREE.CurvePath.prototype.getBoundingBox=function(){var e,t,n,i,r,o,a=this.getPoints();e=t=Number.NEGATIVE_INFINITY,i=r=Number.POSITIVE_INFINITY;var s,l,c,u,h=a[0]instanceof THREE.Vector3;for(u=h?new THREE.Vector3:new THREE.Vector2,l=0,c=a.length;l<c;l++)(s=a[l]).x>e?e=s.x:s.x<i&&(i=s.x),s.y>t?t=s.y:s.y<r&&(r=s.y),h&&(s.z>n?n=s.z:s.z<o&&(o=s.z)),u.add(s);return a={minX:i,minY:r,maxX:e,maxY:t},h&&(a.maxZ=n,a.minZ=o),a},THREE.CurvePath.prototype.createPointsGeometry=function(e){return e=this.getPoints(e,!0),this.createGeometry(e)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){return e=this.getSpacedPoints(e,!0),this.createGeometry(e)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,n=0;n<e.length;n++)t.vertices.push(new THREE.Vector3(e[n].x,e[n].y,e[n].z||0));return t},THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var n,i,r=this.getPoints(e);for(t||(t=this.bends),n=0,i=t.length;n<i;n++)r=this.getWrapPoints(r,t[n]);return r},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var n,i,r=this.getSpacedPoints(e);for(t||(t=this.bends),n=0,i=t.length;n<i;n++)r=this.getWrapPoints(r,t[n]);return r},THREE.CurvePath.prototype.getWrapPoints=function(e,t){var n,i,r,o,a,s,l=this.getBoundingBox();for(n=0,i=e.length;n<i;n++)r=e[n],o=r.x,a=r.y,s=o/l.maxX,s=t.getUtoTmapping(s,o),o=t.getPoint(s),(s=t.getTangent(s)).set(-s.y,s.x).multiplyScalar(a),r.x=o.x+s.x,r.y=o.y+s.y;return e},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld=function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)},THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3,THREE.Gyroscope.prototype.translationObject=new THREE.Vector3,THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion,THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion,THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3,THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3,THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(e,t){var n=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:n})},THREE.Path.prototype.lineTo=function(e,t){var n=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,i=new THREE.LineCurve(new THREE.Vector2(i[i.length-2],i[i.length-1]),new THREE.Vector2(e,t));this.curves.push(i),this.actions.push({action:THREE.PathActions.LINE_TO,args:n})},THREE.Path.prototype.quadraticCurveTo=function(e,t,n,i){var r=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,o=new THREE.QuadraticBezierCurve(new THREE.Vector2(o[o.length-2],o[o.length-1]),new THREE.Vector2(e,t),new THREE.Vector2(n,i));this.curves.push(o),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:r})},THREE.Path.prototype.bezierCurveTo=function(e,t,n,i,r,o){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,s=new THREE.CubicBezierCurve(new THREE.Vector2(s[s.length-2],s[s.length-1]),new THREE.Vector2(e,t),new THREE.Vector2(n,i),new THREE.Vector2(r,o));this.curves.push(s),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:a})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,n=[new THREE.Vector2(n[n.length-2],n[n.length-1])];Array.prototype.push.apply(n,e),n=new THREE.SplineCurve(n),this.curves.push(n),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})},THREE.Path.prototype.arc=function(e,t,n,i,r,o){var a=this.actions[this.actions.length-1].args;this.absarc(e+a[a.length-2],t+a[a.length-1],n,i,r,o)},THREE.Path.prototype.absarc=function(e,t,n,i,r,o){this.absellipse(e,t,n,n,i,r,o)},THREE.Path.prototype.ellipse=function(e,t,n,i,r,o,a){var s=this.actions[this.actions.length-1].args;this.absellipse(e+s[s.length-2],t+s[s.length-1],n,i,r,o,a)},THREE.Path.prototype.absellipse=function(e,t,n,i,r,o,a){var s=Array.prototype.slice.call(arguments),l=new THREE.EllipseCurve(e,t,n,i,r,o,a);this.curves.push(l),l=l.getPoint(1),s.push(l.x),s.push(l.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:s})},THREE.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var n=[],i=0;i<e;i++)n.push(this.getPoint(i/e));return n},THREE.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var n,i,r,o,a,s,l,c,u,h,d,f,p,m=[];for(n=0,i=this.actions.length;n<i;n++)switch(r=this.actions[n],o=r.action,r=r.args,o){case THREE.PathActions.MOVE_TO:case THREE.PathActions.LINE_TO:m.push(new THREE.Vector2(r[0],r[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(a=r[2],s=r[3],u=r[0],h=r[1],0<m.length?(o=m[m.length-1],d=o.x,f=o.y):(o=this.actions[n-1].args,d=o[o.length-2],f=o[o.length-1]),r=1;r<=e;r++)p=r/e,o=THREE.Shape.Utils.b2(p,d,u,a),p=THREE.Shape.Utils.b2(p,f,h,s),m.push(new THREE.Vector2(o,p));break;case THREE.PathActions.BEZIER_CURVE_TO:for(a=r[4],s=r[5],u=r[0],h=r[1],l=r[2],c=r[3],0<m.length?(o=m[m.length-1],d=o.x,f=o.y):(o=this.actions[n-1].args,d=o[o.length-2],f=o[o.length-1]),r=1;r<=e;r++)p=r/e,o=THREE.Shape.Utils.b3(p,d,u,l,a),p=THREE.Shape.Utils.b3(p,f,h,c,s),m.push(new THREE.Vector2(o,p));break;case THREE.PathActions.CSPLINE_THRU:for(o=this.actions[n-1].args,p=[new THREE.Vector2(o[o.length-2],o[o.length-1])],o=e*r[0].length,p=p.concat(r[0]),p=new THREE.SplineCurve(p),r=1;r<=o;r++)m.push(p.getPointAt(r/o));break;case THREE.PathActions.ARC:for(a=r[0],s=r[1],h=r[2],l=r[3],o=r[4],u=!!r[5],d=o-l,f=2*e,r=1;r<=f;r++)p=r/f,u||(p=1-p),p=l+p*d,o=a+h*Math.cos(p),p=s+h*Math.sin(p),m.push(new THREE.Vector2(o,p));break;case THREE.PathActions.ELLIPSE:for(a=r[0],s=r[1],h=r[2],c=r[3],l=r[4],o=r[5],u=!!r[6],d=o-l,f=2*e,r=1;r<=f;r++)p=r/f,u||(p=1-p),p=l+p*d,o=a+h*Math.cos(p),p=s+c*Math.sin(p),m.push(new THREE.Vector2(o,p))}return n=m[m.length-1],1e-10>Math.abs(n.x-m[0].x)&&1e-10>Math.abs(n.y-m[0].y)&&m.splice(m.length-1,1),t&&m.push(m[0]),m},THREE.Path.prototype.toShapes=function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=new THREE.Shape;o.actions=r.actions,o.curves=r.curves,t.push(o)}return t}var i=function(e){var t,n,i,r,o=[],a=new THREE.Path;for(t=0,n=e.length;t<n;t++)i=e[t],r=i.args,(i=i.action)==THREE.PathActions.MOVE_TO&&0!=a.actions.length&&(o.push(a),a=new THREE.Path),a[i].apply(a,r);return 0!=a.actions.length&&o.push(a),o}(this.actions);if(0==i.length)return[];if(!0===t)return n(i);var r,o,a,s=[];if(1==i.length)return o=i[0],a=new THREE.Shape,a.actions=o.actions,a.curves=o.curves,s.push(a),s;var l=!THREE.Shape.Utils.isClockWise(i[0].getPoints()),l=e?!l:l;a=[];var c,u=[],h=[],d=0;u[d]=void 0,h[d]=[];var f,p;for(f=0,p=i.length;f<p;f++)o=i[f],c=o.getPoints(),r=THREE.Shape.Utils.isClockWise(c),(r=e?!r:r)?(!l&&u[d]&&d++,u[d]={s:new THREE.Shape,p:c},u[d].s.actions=o.actions,u[d].s.curves=o.curves,l&&d++,h[d]=[]):h[d].push({h:o,p:c[0]});if(!u[0])return n(i);if(1<u.length){for(f=!1,p=[],o=0,i=u.length;o<i;o++)a[o]=[];for(o=0,i=u.length;o<i;o++)for(r=h[o],l=0;l<r.length;l++){d=r[l],c=!0;for(var m=0;m<u.length;m++)(function(e,t){for(var n=t.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=t[r],s=t[o],l=s.x-a.x,c=s.y-a.y;if(1e-10<Math.abs(c)){if(0>c&&(a=t[o],l=-l,s=t[r],c=-c),!(e.y<a.y||e.y>s.y))if(e.y==a.y){if(e.x==a.x)return!0}else{if(0==(r=c*(e.x-a.x)-l*(e.y-a.y)))return!0;0>r||(i=!i)}}else if(e.y==a.y&&(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x))return!0}return i})(d.p,u[m].p)&&(o!=m&&p.push({froms:o,tos:m,hole:l}),c?(c=!1,a[m].push(d)):f=!0);c&&a[o].push(d)}0<p.length&&(f||(h=a))}for(f=0,p=u.length;f<p;f++)for(a=u[f].s,s.push(a),o=h[f],i=0,r=o.length;i<r;i++)a.holes.push(o[i].h);return s},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(e){return new THREE.ExtrudeGeometry(this,e)},THREE.Shape.prototype.makeGeometry=function(e){return new THREE.ShapeGeometry(this,e)},THREE.Shape.prototype.getPointsHoles=function(e){var t,n=this.holes.length,i=[];for(t=0;t<n;t++)i[t]=this.holes[t].getTransformedPoints(e,this.bends);return i},THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t,n=this.holes.length,i=[];for(t=0;t<n;t++)i[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return i},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={triangulateShape:function(e,t){function n(e,t,n){return e.x!=t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function i(e,t,i,r,o){var a=t.x-e.x,s=t.y-e.y,l=r.x-i.x,c=r.y-i.y,u=e.x-i.x,h=e.y-i.y,d=s*l-a*c,f=s*u-a*h;if(1e-10<Math.abs(d)){if(0<d){if(0>f||f>d)return[];if(0>(l=c*u-l*h)||l>d)return[]}else{if(0<f||f<d)return[];if(0<(l=c*u-l*h)||l<d)return[]}return 0==l?!o||0!=f&&f!=d?[e]:[]:l==d?!o||0!=f&&f!=d?[t]:[]:0==f?[i]:f==d?[r]:(o=l/d,[{x:e.x+o*a,y:e.y+o*s}])}return 0!=f||c*u!=l*h?[]:(s=0==a&&0==s,l=0==l&&0==c,s&&l?e.x!=i.x||e.y!=i.y?[]:[e]:s?n(i,r,e)?[e]:[]:l?n(e,t,i)?[i]:[]:(0!=a?(e.x<t.x?(a=e,l=e.x,s=t,e=t.x):(a=t,l=t.x,s=e,e=e.x),i.x<r.x?(t=i,d=i.x,c=r,i=r.x):(t=r,d=r.x,c=i,i=i.x)):(e.y<t.y?(a=e,l=e.y,s=t,e=t.y):(a=t,l=t.y,s=e,e=e.y),i.y<r.y?(t=i,d=i.y,c=r,i=r.y):(t=r,d=r.y,c=i,i=i.y)),l<=d?e<d?[]:e==d?o?[]:[t]:e<=i?[t,s]:[t,c]:l>i?[]:l==i?o?[]:[a]:e<=i?[a,s]:[a,c]))}function r(e,t,n,i){var r=t.x-e.x,o=t.y-e.y;t=n.x-e.x,n=n.y-e.y;var a=i.x-e.x;return i=i.y-e.y,e=r*n-o*t,r=r*i-o*a,1e-10<Math.abs(e)?(t=a*n-i*t,0<e?0<=r&&0<=t:0<=r||0<=t):0<r}var o,a,s,l,c,u={};for(s=e.concat(),o=0,a=t.length;o<a;o++)Array.prototype.push.apply(s,t[o]);for(o=0,a=s.length;o<a;o++)c=s[o].x+":"+s[o].y,void 0!==u[c]&&console.log("Duplicate point",c),u[c]=o;o=function(e,t){var n,o,a,s,l,c,u,h,d,f=e.concat(),p=[],m=[],g=0;for(o=t.length;g<o;g++)p.push(g);u=0;for(var v=2*p.length;0<p.length;){if(0>--v){console.log("Infinite Loop! Holes left:"+p.length+", Probably Hole outside Shape!");break}for(a=u;a<f.length;a++){for(s=f[a],o=-1,g=0;g<p.length;g++)if(l=p[g],c=s.x+":"+s.y+":"+l,void 0===m[c]){for(n=t[l],h=0;h<n.length;h++)if(l=n[h],function(e,t){var i=f.length-1,o=e-1;0>o&&(o=i);var a=e+1;return a>i&&(a=0),!!(i=r(f[e],f[o],f[a],n[t]))&&(i=n.length-1,0>(o=t-1)&&(o=i),(a=t+1)>i&&(a=0),!!(i=r(n[t],n[o],n[a],f[e])))}(a,h)&&!function(e,t){var n,r;for(n=0;n<f.length;n++)if(r=n+1,r%=f.length,0<(r=i(e,t,f[n],f[r],!0)).length)return!0;return!1}(s,l)&&!function(e,n){var r,o,a,s;for(r=0;r<p.length;r++)for(o=t[p[r]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,0<(s=i(e,n,o[a],o[s],!0)).length)return!0;return!1}(s,l)){o=h,p.splice(g,1),u=f.slice(0,a+1),l=f.slice(a),h=n.slice(o),d=n.slice(0,o+1),f=u.concat(h).concat(d).concat(l),u=a;break}if(0<=o)break;m[c]=!0}if(0<=o)break}}return f}(e,t);var h=THREE.FontUtils.Triangulate(o,!1);for(o=0,a=h.length;o<a;o++)for(l=h[o],s=0;3>s;s++)c=l[s].x+":"+l[s].y,void 0!==(c=u[c])&&(l[s]=c);return h.concat()},isClockWise:function(e){return 0>THREE.FontUtils.Triangulate.area(e)},b2p0:function(e,t){var n=1-e;return n*n*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,n,i){return this.b2p0(e,t)+this.b2p1(e,n)+this.b2p2(e,i)},b3p0:function(e,t){var n=1-e;return n*n*n*t},b3p1:function(e,t){var n=1-e;return 3*n*n*e*t},b3p2:function(e,t){return 3*(1-e)*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,n,i,r){return this.b3p0(e,t)+this.b3p1(e,n)+this.b3p2(e,i)+this.b3p3(e,r)}},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},THREE.QuadraticBezierCurve=function(e,t,n){this.v0=e,this.v1=t,this.v2=n},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),e=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),new THREE.Vector2(t,e)},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t;return t=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),e=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),(t=new THREE.Vector2(t,e)).normalize(),t},THREE.CubicBezierCurve=function(e,t,n,i){this.v0=e,this.v1=t,this.v2=n,this.v3=i},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint=function(e){var t;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(t,e)},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t;return t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),(t=new THREE.Vector2(t,e)).normalize(),t},THREE.SplineCurve=function(e){this.points=void 0==e?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint=function(e){var t,n=new THREE.Vector2,i=[],r=this.points;return t=(r.length-1)*e,e=Math.floor(t),t-=e,i[0]=0==e?e:e-1,i[1]=e,i[2]=e>r.length-2?r.length-1:e+1,i[3]=e>r.length-3?r.length-1:e+2,n.x=THREE.Curve.Utils.interpolate(r[i[0]].x,r[i[1]].x,r[i[2]].x,r[i[3]].x,t),n.y=THREE.Curve.Utils.interpolate(r[i[0]].y,r[i[1]].y,r[i[2]].y,r[i[3]].y,t),n},THREE.EllipseCurve=function(e,t,n,i,r,o,a){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint=function(e){var t;return 0>(t=this.aEndAngle-this.aStartAngle)&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),t=!0===this.aClockwise?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t,e=this.aX+this.xRadius*Math.cos(t),t=this.aY+this.yRadius*Math.sin(t),new THREE.Vector2(e,t)},THREE.ArcCurve=function(e,t,n,i,r,o){THREE.EllipseCurve.call(this,e,t,n,n,i,r,o)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t,n;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),n=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),e=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),new THREE.Vector3(t,n,e)}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,n,i){this.v0=e,this.v1=t,this.v2=n,this.v3=i},function(e){var t,n;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new THREE.Vector3(t,n,e)}),THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t,n=new THREE.Vector3,i=[],r=this.points;e*=r.length-1,e-=t=Math.floor(e),i[0]=0==t?t:t-1,i[1]=t,i[2]=t>r.length-2?r.length-1:t+1,i[3]=t>r.length-3?r.length-1:t+2,t=r[i[0]];var o=r[i[1]],a=r[i[2]],i=r[i[3]];return n.x=THREE.Curve.Utils.interpolate(t.x,o.x,a.x,i.x,e),n.y=THREE.Curve.Utils.interpolate(t.y,o.y,a.y,i.y,e),n.z=THREE.Curve.Utils.interpolate(t.z,o.z,a.z,i.z,e),n}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t,n=new THREE.Vector3,i=[],r=this.points;return t=(r.length-0)*e,e=Math.floor(t),t-=e,e+=0<e?0:(Math.floor(Math.abs(e)/r.length)+1)*r.length,i[0]=(e-1)%r.length,i[1]=e%r.length,i[2]=(e+1)%r.length,i[3]=(e+2)%r.length,n.x=THREE.Curve.Utils.interpolate(r[i[0]].x,r[i[1]].x,r[i[2]].x,r[i[3]].x,t),n.y=THREE.Curve.Utils.interpolate(r[i[0]].y,r[i[1]].y,r[i[2]].y,r[i[3]].y,t),n.z=THREE.Curve.Utils.interpolate(r[i[0]].z,r[i[1]].z,r[i[2]].z,r[i[3]].z,t),n}),THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(!0!==e.initialized){for(var t=0;t<e.hierarchy.length;t++){for(var n=0;n<e.hierarchy[t].keys.length;n++)if(0>e.hierarchy[t].keys[n].time&&(e.hierarchy[t].keys[n].time=0),void 0!==e.hierarchy[t].keys[n].rot&&!(e.hierarchy[t].keys[n].rot instanceof THREE.Quaternion)){var i=e.hierarchy[t].keys[n].rot;e.hierarchy[t].keys[n].rot=(new THREE.Quaternion).fromArray(i)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(i={},n=0;n<e.hierarchy[t].keys.length;n++)for(var r=0;r<e.hierarchy[t].keys[n].morphTargets.length;r++){var o=e.hierarchy[t].keys[n].morphTargets[r];i[o]=-1}for(e.hierarchy[t].usedMorphTargets=i,n=0;n<e.hierarchy[t].keys.length;n++){var a={};for(o in i){for(r=0;r<e.hierarchy[t].keys[n].morphTargets.length;r++)if(e.hierarchy[t].keys[n].morphTargets[r]===o){a[o]=e.hierarchy[t].keys[n].morphTargetsInfluences[r];break}r===e.hierarchy[t].keys[n].morphTargets.length&&(a[o]=0)}e.hierarchy[t].keys[n].morphTargetsInfluences=a}}for(n=1;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].time===e.hierarchy[t].keys[n-1].time&&(e.hierarchy[t].keys.splice(n,1),n--);for(n=0;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].index=n}return e.initialized=!0,e}},parse:function(e){var t=function(e,n){n.push(e);for(var i=0;i<e.children.length;i++)t(e.children[i],n)},n=[];if(e instanceof THREE.SkinnedMesh)for(var i=0;i<e.skeleton.bones.length;i++)n.push(e.skeleton.bones[i]);else t(e,n);return n},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){-1!==(e=this.animations.indexOf(e))&&this.animations.splice(e,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].update(e)}},THREE.Animation=function(e,t){this.root=e,this.data=THREE.AnimationHandler.init(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype.keyTypes=["pos","rot","scl"],THREE.Animation.prototype.play=function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),THREE.AnimationHandler.play(this)},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,THREE.AnimationHandler.stop(this)},THREE.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;e<t;e++){(n=this.hierarchy[e]).matrixAutoUpdate=!0,void 0===n.animationCache&&(n.animationCache={}),void 0===n.animationCache[this.data.name]&&(n.animationCache[this.data.name]={},n.animationCache[this.data.name].prevKey={pos:0,rot:0,scl:0},n.animationCache[this.data.name].nextKey={pos:0,rot:0,scl:0},n.animationCache[this.data.name].originalMatrix=n.matrix);for(var n=n.animationCache[this.data.name],i=0;3>i;i++){for(var r=this.keyTypes[i],o=this.data.hierarchy[e].keys[0],a=this.getNextKeyWith(r,e,1);a.time<this.currentTime&&a.index>o.index;)o=a,a=this.getNextKeyWith(r,e,a.index+1);n.prevKey[r]=o,n.nextKey[r]=a}}},THREE.Animation.prototype.update=function(){var e=[],t=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Quaternion,r=function(e,t){var n,i,r,a,s,l,c=[],u=[];return n=(e.length-1)*t,i=Math.floor(n),n-=i,c[0]=0===i?i:i-1,c[1]=i,c[2]=i>e.length-2?i:i+1,c[3]=i>e.length-3?i:i+2,i=e[c[0]],a=e[c[1]],s=e[c[2]],l=e[c[3]],c=n*n,r=n*c,u[0]=o(i[0],a[0],s[0],l[0],n,c,r),u[1]=o(i[1],a[1],s[1],l[1],n,c,r),u[2]=o(i[2],a[2],s[2],l[2],n,c,r),u},o=function(e,t,n,i,r,o,a){return e=.5*(n-e),i=.5*(i-t),(2*(t-n)+e+i)*a+(-3*(t-n)-2*e-i)*o+e*r+t};return function(o){if(!1!==this.isPlaying&&(this.currentTime+=o*this.timeScale,0!==this.weight)){if(o=this.data.length,!0===this.loop&&this.currentTime>o)this.currentTime%=o,this.reset();else if(!1===this.loop&&this.currentTime>o)return void this.stop();o=0;for(var a=this.hierarchy.length;o<a;o++)for(var s=this.hierarchy[o],l=s.animationCache[this.data.name],c=0;3>c;c++){var u=this.keyTypes[c],h=l.prevKey[u],d=l.nextKey[u];if(d.time<=this.currentTime){for(h=this.data.hierarchy[o].keys[0],d=this.getNextKeyWith(u,o,1);d.time<this.currentTime&&d.index>h.index;)h=d,d=this.getNextKeyWith(u,o,d.index+1);l.prevKey[u]=h,l.nextKey[u]=d}s.matrixAutoUpdate=!0,s.matrixWorldNeedsUpdate=!0;var f=(this.currentTime-h.time)/(d.time-h.time),p=h[u],m=d[u];0>f&&(f=0),1<f&&(f=1),"pos"===u?this.interpolationType===THREE.AnimationHandler.LINEAR?(n.x=p[0]+(m[0]-p[0])*f,n.y=p[1]+(m[1]-p[1])*f,n.z=p[2]+(m[2]-p[2])*f,s instanceof THREE.Bone?(h=this.weight/(this.weight+s.accumulatedPosWeight),s.position.lerp(n,h),s.accumulatedPosWeight+=this.weight):s.position.copy(n)):this.interpolationType!==THREE.AnimationHandler.CATMULLROM&&this.interpolationType!==THREE.AnimationHandler.CATMULLROM_FORWARD||(e[0]=this.getPrevKeyWith("pos",o,h.index-1).pos,e[1]=p,e[2]=m,e[3]=this.getNextKeyWith("pos",o,d.index+1).pos,f=.33*f+.33,d=r(e,f),h=1,s instanceof THREE.Bone&&(h=this.weight/(this.weight+s.accumulatedPosWeight),s.accumulatedPosWeight+=this.weight),u=s.position,u.x+=(d[0]-u.x)*h,u.y+=(d[1]-u.y)*h,u.z+=(d[2]-u.z)*h,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(f=r(e,1.01*f),t.set(f[0],f[1],f[2]),t.sub(u),t.y=0,t.normalize(),f=Math.atan2(t.x,t.z),s.rotation.set(0,f,0))):"rot"===u?(THREE.Quaternion.slerp(p,m,i,f),s instanceof THREE.Bone?0===s.accumulatedRotWeight?(s.quaternion.copy(i),s.accumulatedRotWeight=this.weight):(h=this.weight/(this.weight+s.accumulatedRotWeight),THREE.Quaternion.slerp(s.quaternion,i,s.quaternion,h),s.accumulatedRotWeight+=this.weight):s.quaternion.copy(i)):"scl"===u&&(n.x=p[0]+(m[0]-p[0])*f,n.y=p[1]+(m[1]-p[1])*f,n.z=p[2]+(m[2]-p[2])*f,s instanceof THREE.Bone?(h=this.weight/(this.weight+s.accumulatedSclWeight),s.scale.lerp(n,h),s.accumulatedSclWeight+=this.weight):s.scale.copy(n))}return!0}}}(),THREE.Animation.prototype.getNextKeyWith=function(e,t,n){var i=this.data.hierarchy[t].keys;for(n=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?n<i.length-1?n:i.length-1:n%i.length;n<i.length;n++)if(void 0!==i[n][e])return i[n];return this.data.hierarchy[t].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(e,t,n){var i=this.data.hierarchy[t].keys;for(n=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<n?n:0:0<=n?n:n+i.length;0<=n;n--)if(void 0!==i[n][e])return i[n];return this.data.hierarchy[t].keys[i.length-1]},THREE.KeyFrameAnimation=function(e){this.root=e.node,this.data=THREE.AnimationHandler.init(e),this.hierarchy=THREE.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.loop=this.isPaused=!0,e=0;for(var t=this.hierarchy.length;e<t;e++){var n=this.data.hierarchy[e].sids,i=this.hierarchy[e];if(this.data.hierarchy[e].keys.length&&n){for(var r=0;r<n.length;r++){var o=n[r],a=this.getNextKeyWith(o,e,0);a&&a.apply(o)}i.matrixAutoUpdate=!1,this.data.hierarchy[e].node.updateMatrix(),i.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(e){if(this.currentTime=void 0!==e?e:0,!1===this.isPlaying){this.isPlaying=!0;var t,n,i=this.hierarchy.length;for(e=0;e<i;e++)t=this.hierarchy[e],void 0===(n=this.data.hierarchy[e]).animationCache&&(n.animationCache={},n.animationCache.prevKey=null,n.animationCache.nextKey=null,n.animationCache.originalMatrix=t.matrix),(t=this.data.hierarchy[e].keys).length&&(n.animationCache.prevKey=t[0],n.animationCache.nextKey=t[1],this.startTime=Math.min(t[0].time,this.startTime),this.endTime=Math.max(t[t.length-1].time,this.endTime));this.update(0)}this.isPaused=!1,THREE.AnimationHandler.play(this)},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1,THREE.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],n=this.data.hierarchy[e];if(void 0!==n.animationCache){var i=n.animationCache.originalMatrix;i.copy(t.matrix),t.matrix=i,delete n.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(e){if(!1!==this.isPlaying){this.currentTime+=e*this.timeScale,e=this.data.length,!0===this.loop&&this.currentTime>e&&(this.currentTime%=e),this.currentTime=Math.min(this.currentTime,e),e=0;for(var t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e],i=(r=this.data.hierarchy[e]).keys,r=r.animationCache;if(i.length){var o=r.prevKey,a=r.nextKey;if(a.time<=this.currentTime){for(;a.time<this.currentTime&&a.index>o.index;)o=a,a=i[o.index+1];r.prevKey=o,r.nextKey=a}a.time>=this.currentTime?o.interpolate(a,this.currentTime):o.interpolate(a,a.time),this.data.hierarchy[e].node.updateMatrix(),n.matrixWorldNeedsUpdate=!0}}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,n){for(n%=(t=this.data.hierarchy[t].keys).length;n<t.length;n++)if(t[n].hasTarget(e))return t[n];return t[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,n){for(t=this.data.hierarchy[t].keys,n=0<=n?n:n+t.length;0<=n;n--)if(t[n].hasTarget(e))return t[n];return t[t.length-1]},THREE.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.isPlaying=!1},THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var e=0,t=0;return function(n){if(!1!==this.isPlaying){this.currentTime+=n,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration),n=this.duration/this.frames;var i=Math.floor(this.currentTime/n);i!=t&&(this.mesh.morphTargetInfluences[e]=0,this.mesh.morphTargetInfluences[t]=1,this.mesh.morphTargetInfluences[i]=0,e=t,t=i),this.mesh.morphTargetInfluences[i]=this.currentTime%n/n,this.mesh.morphTargetInfluences[e]=1-this.mesh.morphTargetInfluences[i]}}}()},THREE.BoxGeometry=function(e,t,n,i,r,o){function a(e,t,n,i,r,o,a,l){var c,u=s.widthSegments,h=s.heightSegments,d=r/2,f=o/2,p=s.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?c="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(c="y",h=s.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(c="x",u=s.depthSegments);var m=u+1,g=h+1,v=r/u,E=o/h,y=new THREE.Vector3;for(y[c]=0<a?1:-1,r=0;r<g;r++)for(o=0;o<m;o++){var T=new THREE.Vector3;T[e]=(o*v-d)*n,T[t]=(r*E-f)*i,T[c]=a,s.vertices.push(T)}for(r=0;r<h;r++)for(o=0;o<u;o++)f=o+m*r,e=o+m*(r+1),t=o+1+m*(r+1),n=o+1+m*r,i=new THREE.Vector2(o/u,1-r/h),a=new THREE.Vector2(o/u,1-(r+1)/h),c=new THREE.Vector2((o+1)/u,1-(r+1)/h),d=new THREE.Vector2((o+1)/u,1-r/h),(f=new THREE.Face3(f+p,e+p,n+p)).normal.copy(y),f.vertexNormals.push(y.clone(),y.clone(),y.clone()),f.materialIndex=l,s.faces.push(f),s.faceVertexUvs[0].push([i,a,d]),(f=new THREE.Face3(e+p,t+p,n+p)).normal.copy(y),f.vertexNormals.push(y.clone(),y.clone(),y.clone()),f.materialIndex=l,s.faces.push(f),s.faceVertexUvs[0].push([a.clone(),c,d.clone()])}THREE.Geometry.call(this),this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.widthSegments=i||1,this.heightSegments=r||1,this.depthSegments=o||1;var s=this;r=t/2,o=n/2,a("z","y",-1,-1,n,t,i=e/2,0),a("z","y",1,-1,n,t,-i,1),a("x","z",1,1,e,n,r,2),a("x","z",1,-1,e,n,-r,3),a("x","y",1,-1,e,t,o,4),a("x","y",-1,-1,e,t,-o,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry=function(e,t,n,i){THREE.Geometry.call(this),this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,o=[];r=new THREE.Vector3;var a=new THREE.Vector2(.5,.5);for(this.vertices.push(r),o.push(a),r=0;r<=t;r++){var s=new THREE.Vector3,l=n+r/t*i;s.x=e*Math.cos(l),s.y=e*Math.sin(l),this.vertices.push(s),o.push(new THREE.Vector2((s.x/e+1)/2,(s.y/e+1)/2))}for(n=new THREE.Vector3(0,0,1),r=1;r<=t;r++)this.faces.push(new THREE.Face3(r,r+1,0,[n.clone(),n.clone(),n.clone()])),this.faceVertexUvs[0].push([o[r].clone(),o[r+1].clone(),a.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CubeGeometry=function(e,t,n,i,r,o){return console.warn("THEE.CubeGeometry has been renamed to THREE.BoxGeometry."),new THREE.BoxGeometry(e,t,n,i,r,o)},THREE.CylinderGeometry=function(e,t,n,i,r,o){THREE.Geometry.call(this),this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o},e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,i=i||8,r=r||1,o=void 0!==o&&o;var a,s,l=n/2,c=[],u=[];for(s=0;s<=r;s++){var h=[],d=[],f=(p=s/r)*(t-e)+e;for(a=0;a<=i;a++){m=a/i;(g=new THREE.Vector3).x=f*Math.sin(m*Math.PI*2),g.y=-p*n+l,g.z=f*Math.cos(m*Math.PI*2),this.vertices.push(g),h.push(this.vertices.length-1),d.push(new THREE.Vector2(m,1-p))}c.push(h),u.push(d)}for(n=(t-e)/n,a=0;a<i;a++)for(0!==e?(h=this.vertices[c[0][a]].clone(),d=this.vertices[c[0][a+1]].clone()):(h=this.vertices[c[1][a]].clone(),d=this.vertices[c[1][a+1]].clone()),h.setY(Math.sqrt(h.x*h.x+h.z*h.z)*n).normalize(),d.setY(Math.sqrt(d.x*d.x+d.z*d.z)*n).normalize(),s=0;s<r;s++){var p=c[s][a],f=c[s+1][a],m=c[s+1][a+1],g=c[s][a+1],v=h.clone(),E=h.clone(),y=d.clone(),T=d.clone(),x=u[s][a].clone(),b=u[s+1][a].clone(),_=u[s+1][a+1].clone(),w=u[s][a+1].clone();this.faces.push(new THREE.Face3(p,f,g,[v,E,T])),this.faceVertexUvs[0].push([x,b,w]),this.faces.push(new THREE.Face3(f,m,g,[E.clone(),y,T.clone()])),this.faceVertexUvs[0].push([b.clone(),_,w.clone()])}if(!1===o&&0<e)for(this.vertices.push(new THREE.Vector3(0,l,0)),a=0;a<i;a++)p=c[0][a],f=c[0][a+1],m=this.vertices.length-1,v=new THREE.Vector3(0,1,0),E=new THREE.Vector3(0,1,0),y=new THREE.Vector3(0,1,0),x=u[0][a].clone(),b=u[0][a+1].clone(),_=new THREE.Vector2(b.x,0),this.faces.push(new THREE.Face3(p,f,m,[v,E,y])),this.faceVertexUvs[0].push([x,b,_]);if(!1===o&&0<t)for(this.vertices.push(new THREE.Vector3(0,-l,0)),a=0;a<i;a++)p=c[s][a+1],f=c[s][a],m=this.vertices.length-1,v=new THREE.Vector3(0,-1,0),E=new THREE.Vector3(0,-1,0),y=new THREE.Vector3(0,-1,0),x=u[s][a+1].clone(),b=u[s][a].clone(),_=new THREE.Vector2(b.x,1),this.faces.push(new THREE.Face3(p,f,m,[v,E,y])),this.faceVertexUvs[0].push([x,b,_]);this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry=function(e,t){void 0!==e&&(THREE.Geometry.call(this),e=e instanceof Array?e:[e],this.addShapeList(e,t),this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var n=e.length,i=0;i<n;i++)this.addShape(e[i],t)},THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function n(e,t,n){return t||console.log("die"),t.clone().multiplyScalar(n).add(e)}function i(e,t,n){var i=THREE.Math.sign,r=1,r=e.x-t.x,o=e.y-t.y,a=n.x-e.x,s=n.y-e.y,l=r*r+o*o;if(1e-10<Math.abs(r*s-o*a)){var c=Math.sqrt(l),i=Math.sqrt(a*a+s*s),l=t.x-o/c;if(t=t.y+r/c,a=((n.x-s/i-l)*s-(n.y+a/i-t)*a)/(r*s-o*a),n=l+r*a-e.x,e=t+o*a-e.y,2>=(r=n*n+e*e))return new THREE.Vector2(n,e);r=Math.sqrt(r/2)}else e=!1,1e-10<r?1e-10<a&&(e=!0):-1e-10>r?-1e-10>a&&(e=!0):i(o)==i(s)&&(e=!0),e?(n=-o,e=r,r=Math.sqrt(l)):(n=r,e=o,r=Math.sqrt(l/2));return new THREE.Vector2(n/r,e/r)}function r(n,i){var r,o;for(B=n.length;0<=--B;){r=B,0>(o=B-1)&&(o=n.length-1);for(var a=0,s=E+2*m,a=0;a<s;a++){var l=n,c=a,u=s,h=r,d=o,f=(f=i+r+(p=z*a))+M,p=(p=i+o+p)+M,g=(g=i+o+(v=z*(a+1)))+M,v=(v=i+r+v)+M;S.faces.push(new THREE.Face3(f,p,v,null,null,b)),S.faces.push(new THREE.Face3(p,g,v,null,null,b)),f=_.generateSideWallUV(S,e,l,t,f,p,g,v,c,u,h,d),S.faceVertexUvs[0].push([f[0],f[1],f[3]]),S.faceVertexUvs[0].push([f[1],f[2],f[3]])}}}function o(e,t,n){S.vertices.push(new THREE.Vector3(e,t,n))}function a(n,i,r,o){n+=M,i+=M,r+=M,S.faces.push(new THREE.Face3(n,i,r,null,null,x)),n=o?_.generateBottomUV(S,e,t,n,i,r):_.generateTopUV(S,e,t,n,i,r),S.faceVertexUvs[0].push(n)}var s,l,c,u,h,d=void 0!==t.amount?t.amount:100,f=void 0!==t.bevelThickness?t.bevelThickness:6,p=void 0!==t.bevelSize?t.bevelSize:f-2,m=void 0!==t.bevelSegments?t.bevelSegments:3,g=void 0===t.bevelEnabled||t.bevelEnabled,v=void 0!==t.curveSegments?t.curveSegments:12,E=void 0!==t.steps?t.steps:1,y=t.extrudePath,T=!1,x=t.material,b=t.extrudeMaterial,_=void 0!==t.UVGenerator?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;y&&(s=y.getSpacedPoints(E),T=!0,g=!1,l=void 0!==t.frames?t.frames:new THREE.TubeGeometry.FrenetFrames(y,E,!1),c=new THREE.Vector3,u=new THREE.Vector3,h=new THREE.Vector3),g||(p=f=m=0);var w,R,H,S=this,M=this.vertices.length,v=(y=e.extractPoints(v)).shape,C=y.holes;if(y=!THREE.Shape.Utils.isClockWise(v)){for(v=v.reverse(),R=0,H=C.length;R<H;R++)w=C[R],THREE.Shape.Utils.isClockWise(w)&&(C[R]=w.reverse());y=!1}var A=THREE.Shape.Utils.triangulateShape(v,C),k=v;for(R=0,H=C.length;R<H;R++)w=C[R],v=v.concat(w);var P,L,D,F,N,O,z=v.length,V=A.length,y=[],B=0;for(P=(D=k.length)-1,L=B+1;B<D;B++,P++,L++)P===D&&(P=0),L===D&&(L=0),y[B]=i(k[B],k[P],k[L]);var I,U=[],W=y.concat();for(R=0,H=C.length;R<H;R++){for(w=C[R],I=[],B=0,P=(D=w.length)-1,L=B+1;B<D;B++,P++,L++)P===D&&(P=0),L===D&&(L=0),I[B]=i(w[B],w[P],w[L]);U.push(I),W=W.concat(I)}for(P=0;P<m;P++){for(F=f*(1-(D=P/m)),L=p*Math.sin(D*Math.PI/2),B=0,D=k.length;B<D;B++)N=n(k[B],y[B],L),o(N.x,N.y,-F);for(R=0,H=C.length;R<H;R++)for(w=C[R],I=U[R],B=0,D=w.length;B<D;B++)N=n(w[B],I[B],L),o(N.x,N.y,-F)}for(L=p,B=0;B<z;B++)N=g?n(v[B],W[B],L):v[B],T?(u.copy(l.normals[0]).multiplyScalar(N.x),c.copy(l.binormals[0]).multiplyScalar(N.y),h.copy(s[0]).add(u).add(c),o(h.x,h.y,h.z)):o(N.x,N.y,0);for(D=1;D<=E;D++)for(B=0;B<z;B++)N=g?n(v[B],W[B],L):v[B],T?(u.copy(l.normals[D]).multiplyScalar(N.x),c.copy(l.binormals[D]).multiplyScalar(N.y),h.copy(s[D]).add(u).add(c),o(h.x,h.y,h.z)):o(N.x,N.y,d/E*D);for(P=m-1;0<=P;P--){for(F=f*(1-(D=P/m)),L=p*Math.sin(D*Math.PI/2),B=0,D=k.length;B<D;B++)N=n(k[B],y[B],L),o(N.x,N.y,d+F);for(R=0,H=C.length;R<H;R++)for(w=C[R],I=U[R],B=0,D=w.length;B<D;B++)N=n(w[B],I[B],L),T?o(N.x,N.y+s[E-1].y,s[E-1].x+F):o(N.x,N.y,d+F)}!function(){if(g){var e;for(e=0*z,B=0;B<V;B++)O=A[B],a(O[2]+e,O[1]+e,O[0]+e,!0);for(e=E+2*m,e*=z,B=0;B<V;B++)O=A[B],a(O[0]+e,O[1]+e,O[2]+e,!1)}else{for(B=0;B<V;B++)O=A[B],a(O[2],O[1],O[0],!0);for(B=0;B<V;B++)O=A[B],a(O[0]+z*E,O[1]+z*E,O[2]+z*E,!1)}}(),function(){var e=0;for(r(k,e),e+=k.length,R=0,H=C.length;R<H;R++)w=C[R],r(w,e),e+=w.length}()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,i,r,o){return t=e.vertices[r].x,r=e.vertices[r].y,n=e.vertices[o].x,o=e.vertices[o].y,[new THREE.Vector2(e.vertices[i].x,e.vertices[i].y),new THREE.Vector2(t,r),new THREE.Vector2(n,o)]},generateBottomUV:function(e,t,n,i,r,o){return this.generateTopUV(e,t,n,i,r,o)},generateSideWallUV:function(e,t,n,i,r,o,a,s,l,c,u,h){t=e.vertices[r].x,n=e.vertices[r].y,r=e.vertices[r].z,i=e.vertices[o].x,l=e.vertices[o].y,o=e.vertices[o].z,c=e.vertices[a].x,u=e.vertices[a].y,a=e.vertices[a].z,h=e.vertices[s].x;var d=e.vertices[s].y;return e=e.vertices[s].z,.01>Math.abs(n-l)?[new THREE.Vector2(t,1-r),new THREE.Vector2(i,1-o),new THREE.Vector2(c,1-a),new THREE.Vector2(h,1-e)]:[new THREE.Vector2(n,1-r),new THREE.Vector2(l,1-o),new THREE.Vector2(u,1-a),new THREE.Vector2(d,1-e)]}},THREE.ExtrudeGeometry.__v1=new THREE.Vector2,THREE.ExtrudeGeometry.__v2=new THREE.Vector2,THREE.ExtrudeGeometry.__v3=new THREE.Vector2,THREE.ExtrudeGeometry.__v4=new THREE.Vector2,THREE.ExtrudeGeometry.__v5=new THREE.Vector2,THREE.ExtrudeGeometry.__v6=new THREE.Vector2,THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),!1==e instanceof Array&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,i=e.length;n<i;n++)this.addShape(e[n],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var n,i,r,o=t.material,a=void 0===t.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,s=this.vertices.length,l=(n=e.extractPoints(void 0!==t.curveSegments?t.curveSegments:12)).shape,c=n.holes;if(!THREE.Shape.Utils.isClockWise(l))for(l=l.reverse(),n=0,i=c.length;n<i;n++)r=c[n],THREE.Shape.Utils.isClockWise(r)&&(c[n]=r.reverse());var u=THREE.Shape.Utils.triangulateShape(l,c);for(n=0,i=c.length;n<i;n++)r=c[n],l=l.concat(r);for(c=l.length,i=u.length,n=0;n<c;n++)r=l[n],this.vertices.push(new THREE.Vector3(r.x,r.y,0));for(n=0;n<i;n++)c=u[n],l=c[0]+s,r=c[1]+s,c=c[2]+s,this.faces.push(new THREE.Face3(l,r,c,null,null,o)),this.faceVertexUvs[0].push(a.generateBottomUV(this,e,t,l,r,c))},THREE.LatheGeometry=function(e,t,n,i){THREE.Geometry.call(this),t=t||12,n=n||0,i=i||2*Math.PI;for(var r=1/(e.length-1),o=1/t,a=0,s=t;a<=s;a++)for(var l=n+a*o*i,c=Math.cos(l),u=Math.sin(l),l=0,h=e.length;l<h;l++){var d=e[l];(f=new THREE.Vector3).x=c*d.x-u*d.y,f.y=u*d.x+c*d.y,f.z=d.z,this.vertices.push(f)}for(n=e.length,a=0,s=t;a<s;a++)for(l=0,h=e.length-1;l<h;l++){t=u=l+n*a,i=u+n;var c=u+1+n,u=u+1,f=l*r,p=(d=a*o)+o,m=f+r;this.faces.push(new THREE.Face3(t,i,u)),this.faceVertexUvs[0].push([new THREE.Vector2(d,f),new THREE.Vector2(p,f),new THREE.Vector2(d,m)]),this.faces.push(new THREE.Face3(i,c,u)),this.faceVertexUvs[0].push([new THREE.Vector2(p,f),new THREE.Vector2(p,m),new THREE.Vector2(d,m)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry=function(e,t,n,i){THREE.Geometry.call(this),this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r=e/2,o=t/2,a=(n=n||1)+1,s=(i=i||1)+1,l=e/n,c=t/i,u=new THREE.Vector3(0,0,1);for(e=0;e<s;e++){d=e*c-o;for(t=0;t<a;t++)this.vertices.push(new THREE.Vector3(t*l-r,-d,0))}for(e=0;e<i;e++)for(t=0;t<n;t++){var h=t+a*e,r=t+a*(e+1),o=t+1+a*(e+1),s=t+1+a*e,l=new THREE.Vector2(t/n,1-e/i),c=new THREE.Vector2(t/n,1-(e+1)/i),d=new THREE.Vector2((t+1)/n,1-(e+1)/i),f=new THREE.Vector2((t+1)/n,1-e/i);(h=new THREE.Face3(h,r,s)).normal.copy(u),h.vertexNormals.push(u.clone(),u.clone(),u.clone()),this.faces.push(h),this.faceVertexUvs[0].push([l,c,f]),(h=new THREE.Face3(r,o,s)).normal.copy(u),h.vertexNormals.push(u.clone(),u.clone(),u.clone()),this.faces.push(h),this.faceVertexUvs[0].push([c.clone(),d,f.clone()])}},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry=function(e,t,n,i,r,o){THREE.Geometry.call(this),e=e||0,t=t||50,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s=[],l=e,c=(t-e)/(i=void 0!==i?Math.max(1,i):8);for(e=0;e<i+1;e++){for(a=0;a<n+1;a++){var u=new THREE.Vector3,h=r+a/n*o;u.x=l*Math.cos(h),u.y=l*Math.sin(h),this.vertices.push(u),s.push(new THREE.Vector2((u.x/t+1)/2,(u.y/t+1)/2))}l+=c}for(t=new THREE.Vector3(0,0,1),e=0;e<i;e++)for(r=e*(n+1),a=0;a<n;a++)o=h=a+r,c=h+n+1,u=h+n+2,this.faces.push(new THREE.Face3(o,c,u,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([s[o].clone(),s[c].clone(),s[u].clone()]),o=h,c=h+n+2,u=h+1,this.faces.push(new THREE.Face3(o,c,u,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([s[o].clone(),s[c].clone(),s[u].clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,l)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(e,t,n,i,r,o,a){THREE.Geometry.call(this),this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,l,c=[],u=[];for(l=0;l<=n;l++){var h=[],d=[];for(s=0;s<=t;s++){var f=s/t,p=l/n;(m=new THREE.Vector3).x=-e*Math.cos(i+f*r)*Math.sin(o+p*a),m.y=e*Math.cos(o+p*a),m.z=e*Math.sin(i+f*r)*Math.sin(o+p*a),this.vertices.push(m),h.push(this.vertices.length-1),d.push(new THREE.Vector2(f,1-p))}c.push(h),u.push(d)}for(l=0;l<n;l++)for(s=0;s<t;s++){i=c[l][s+1],r=c[l][s],o=c[l+1][s],a=c[l+1][s+1];var h=this.vertices[i].clone().normalize(),d=this.vertices[r].clone().normalize(),f=this.vertices[o].clone().normalize(),p=this.vertices[a].clone().normalize(),m=u[l][s+1].clone(),g=u[l][s].clone(),v=u[l+1][s].clone(),E=u[l+1][s+1].clone();Math.abs(this.vertices[i].y)===e?(m.x=(m.x+g.x)/2,this.faces.push(new THREE.Face3(i,o,a,[h,f,p])),this.faceVertexUvs[0].push([m,v,E])):Math.abs(this.vertices[o].y)===e?(v.x=(v.x+E.x)/2,this.faces.push(new THREE.Face3(i,r,o,[h,d,f])),this.faceVertexUvs[0].push([m,g,v])):(this.faces.push(new THREE.Face3(i,r,a,[h,d,p])),this.faceVertexUvs[0].push([m,g,E]),this.faces.push(new THREE.Face3(r,o,a,[d.clone(),f,p.clone()])),this.faceVertexUvs[0].push([g.clone(),v,E.clone()]))}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TextGeometry=function(e,t){t=t||{};var n=THREE.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,n,t)},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry=function(e,t,n,i,r){THREE.Geometry.call(this),this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||100,t=t||40,n=n||8,i=i||6,r=r||2*Math.PI;for(var o=new THREE.Vector3,a=[],s=[],l=0;l<=n;l++)for(var c=0;c<=i;c++){var u=c/i*r,h=l/n*Math.PI*2;o.x=e*Math.cos(u),o.y=e*Math.sin(u);var d=new THREE.Vector3;d.x=(e+t*Math.cos(h))*Math.cos(u),d.y=(e+t*Math.cos(h))*Math.sin(u),d.z=t*Math.sin(h),this.vertices.push(d),a.push(new THREE.Vector2(c/i,l/n)),s.push(d.clone().sub(o).normalize())}for(l=1;l<=n;l++)for(c=1;c<=i;c++)e=(i+1)*l+c-1,t=(i+1)*(l-1)+c-1,r=(i+1)*(l-1)+c,o=(i+1)*l+c,u=new THREE.Face3(e,t,o,[s[e].clone(),s[t].clone(),s[o].clone()]),this.faces.push(u),this.faceVertexUvs[0].push([a[e].clone(),a[t].clone(),a[o].clone()]),u=new THREE.Face3(t,r,o,[s[t].clone(),s[r].clone(),s[o].clone()]),this.faces.push(u),this.faceVertexUvs[0].push([a[t].clone(),a[r].clone(),a[o].clone()]);this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry=function(e,t,n,i,r,o,a){function s(e,t,n,i,r){var o=Math.cos(e),a=Math.sin(e);return e*=t/n,t=Math.cos(e),o*=i*(2+t)*.5,a=i*(2+t)*a*.5,i=r*i*Math.sin(e)*.5,new THREE.Vector3(o,a,i)}THREE.Geometry.call(this),this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,p:r,q:o,heightScale:a},e=e||100,t=t||40,n=n||64,i=i||8,r=r||2,o=o||3,a=a||1;for(var l=Array(n),c=new THREE.Vector3,u=new THREE.Vector3,h=new THREE.Vector3,d=0;d<n;++d){l[d]=Array(i);var f=s(p=d/n*2*r*Math.PI,o,r,e,a),p=s(p+.01,o,r,e,a);for(c.subVectors(p,f),u.addVectors(p,f),h.crossVectors(c,u),u.crossVectors(h,c),h.normalize(),u.normalize(),p=0;p<i;++p){var m=p/i*2*Math.PI,g=-t*Math.cos(m),m=t*Math.sin(m),v=new THREE.Vector3;v.x=f.x+g*u.x+m*h.x,v.y=f.y+g*u.y+m*h.y,v.z=f.z+g*u.z+m*h.z,l[d][p]=this.vertices.push(v)-1}}for(d=0;d<n;++d)for(p=0;p<i;++p)r=(d+1)%n,o=(p+1)%i,e=l[d][p],t=l[r][p],r=l[r][o],o=l[d][o],a=new THREE.Vector2(d/n,p/i),c=new THREE.Vector2((d+1)/n,p/i),u=new THREE.Vector2((d+1)/n,(p+1)/i),h=new THREE.Vector2(d/n,(p+1)/i),this.faces.push(new THREE.Face3(e,t,o)),this.faceVertexUvs[0].push([a,c,h]),this.faces.push(new THREE.Face3(t,r,o)),this.faceVertexUvs[0].push([c.clone(),u,h.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry=function(e,t,n,i,r){THREE.Geometry.call(this),this.parameters={path:e,segments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var o,a,s,l,c,u,h,d,f,p=[],m=t+1,g=new THREE.Vector3;for(d=(h=new THREE.TubeGeometry.FrenetFrames(e,t,r)).normals,f=h.binormals,this.tangents=h.tangents,this.normals=d,this.binormals=f,h=0;h<m;h++)for(p[h]=[],s=h/(m-1),u=e.getPointAt(s),o=d[h],a=f[h],s=0;s<i;s++)l=s/i*2*Math.PI,c=-n*Math.cos(l),l=n*Math.sin(l),g.copy(u),g.x+=c*o.x+l*a.x,g.y+=c*o.y+l*a.y,g.z+=c*o.z+l*a.z,p[h][s]=this.vertices.push(new THREE.Vector3(g.x,g.y,g.z))-1;for(h=0;h<t;h++)for(s=0;s<i;s++)m=r?(h+1)%t:h+1,g=(s+1)%i,e=p[h][s],n=p[m][s],m=p[m][g],g=p[h][g],d=new THREE.Vector2(h/t,s/i),f=new THREE.Vector2((h+1)/t,s/i),o=new THREE.Vector2((h+1)/t,(s+1)/i),a=new THREE.Vector2(h/t,(s+1)/i),this.faces.push(new THREE.Face3(e,n,g)),this.faceVertexUvs[0].push([d,f,a]),this.faces.push(new THREE.Face3(n,m,g)),this.faceVertexUvs[0].push([f.clone(),o,a.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames=function(e,t,n){new THREE.Vector3;var i=new THREE.Vector3;new THREE.Vector3;var r=[],o=[],a=[],s=new THREE.Vector3,l=new THREE.Matrix4;t+=1;var c,u,h;for(this.tangents=r,this.normals=o,this.binormals=a,c=0;c<t;c++)u=c/(t-1),r[c]=e.getTangentAt(u),r[c].normalize();for(o[0]=new THREE.Vector3,a[0]=new THREE.Vector3,e=Number.MAX_VALUE,c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z),c<=e&&(e=c,i.set(1,0,0)),u<=e&&(e=u,i.set(0,1,0)),h<=e&&i.set(0,0,1),s.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],s),a[0].crossVectors(r[0],o[0]),c=1;c<t;c++)o[c]=o[c-1].clone(),a[c]=a[c-1].clone(),s.crossVectors(r[c-1],r[c]),1e-4<s.length()&&(s.normalize(),i=Math.acos(THREE.Math.clamp(r[c-1].dot(r[c]),-1,1)),o[c].applyMatrix4(l.makeRotationAxis(s,i))),a[c].crossVectors(r[c],o[c]);if(n)for(i=Math.acos(THREE.Math.clamp(o[0].dot(o[t-1]),-1,1)),i/=t-1,0<r[0].dot(s.crossVectors(o[0],o[t-1]))&&(i=-i),c=1;c<t;c++)o[c].applyMatrix4(l.makeRotationAxis(r[c],i*c)),a[c].crossVectors(r[c],o[c])},THREE.PolyhedronGeometry=function(e,t,n,i){function r(e){var t=e.normalize().clone();t.index=s.vertices.push(t)-1;var n=Math.atan2(e.z,-e.x)/2/Math.PI+.5;return e=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5,t.uv=new THREE.Vector2(n,1-e),t}function o(e,t,n){var i=new THREE.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()]);s.faces.push(i),m.copy(e).add(t).add(n).divideScalar(3),i=Math.atan2(m.z,-m.x),s.faceVertexUvs[0].push([a(e.uv,e,i),a(t.uv,t,i),a(n.uv,n,i)])}function a(e,t,n){return 0>n&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}THREE.Geometry.call(this),n=n||1,i=i||0;for(var s=this,l=0,c=e.length;l<c;l+=3)r(new THREE.Vector3(e[l],e[l+1],e[l+2]));e=this.vertices;for(var u=[],h=l=0,c=t.length;l<c;l+=3,h++){var d=e[t[l]],f=e[t[l+1]],p=e[t[l+2]];u[h]=new THREE.Face3(d.index,f.index,p.index,[d.clone(),f.clone(),p.clone()])}for(var m=new THREE.Vector3,l=0,c=u.length;l<c;l++)!function(e,t){var n=Math.pow(2,t);Math.pow(4,t);for(var i=r(s.vertices[e.a]),a=r(s.vertices[e.b]),l=r(s.vertices[e.c]),c=[],u=0;u<=n;u++){c[u]=[];for(var h=r(i.clone().lerp(l,u/n)),d=r(a.clone().lerp(l,u/n)),f=n-u,p=0;p<=f;p++)c[u][p]=0==p&&u==n?h:r(h.clone().lerp(d,p/f))}for(u=0;u<n;u++)for(p=0;p<2*(n-u)-1;p++)i=Math.floor(p/2),0==p%2?o(c[u][i+1],c[u+1][i],c[u][i]):o(c[u][i+1],c[u+1][i+1],c[u+1][i])}(u[l],i);for(l=0,c=this.faceVertexUvs[0].length;l<c;l++)t=this.faceVertexUvs[0][l],i=t[0].x,e=t[1].x,u=t[2].x,h=Math.max(i,Math.max(e,u)),d=Math.min(i,Math.min(e,u)),.9<h&&.1>d&&(.2>i&&(t[0].x+=1),.2>e&&(t[1].x+=1),.2>u&&(t[2].x+=1));for(l=0,c=this.vertices.length;l<c;l++)this.vertices[l].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,n)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var n=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t)},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t},THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t)},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry=function(e,t){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t)},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry=function(e,t,n){THREE.Geometry.call(this);var i,r,o,a,s=this.vertices,l=this.faces,c=this.faceVertexUvs[0],u=t+1;for(i=0;i<=n;i++)for(a=i/n,r=0;r<=t;r++)o=r/t,o=e(o,a),s.push(o);var h,d,f,p;for(i=0;i<n;i++)for(r=0;r<t;r++)e=i*u+r,s=i*u+r+1,a=(i+1)*u+r+1,o=(i+1)*u+r,h=new THREE.Vector2(r/t,i/n),d=new THREE.Vector2((r+1)/t,i/n),f=new THREE.Vector2((r+1)/t,(i+1)/n),p=new THREE.Vector2(r/t,(i+1)/n),l.push(new THREE.Face3(e,s,o)),c.push([h,d,p]),l.push(new THREE.Face3(s,a,o)),c.push([d.clone(),f,p.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);(e=new THREE.BufferGeometry).addAttribute("position",new THREE.BufferAttribute(t,3)),e.addAttribute("color",new THREE.BufferAttribute(n,3)),t=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors}),THREE.Line.call(this,e,t,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.ArrowHelper=function(){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var t=new THREE.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),function(n,i,r,o,a,s){THREE.Object3D.call(this),void 0===o&&(o=16776960),void 0===r&&(r=1),void 0===a&&(a=.2*r),void 0===s&&(s=.2*a),this.position.copy(i),this.line=new THREE.Line(e,new THREE.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new THREE.Mesh(t,new THREE.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(r,a,s)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection=function(){var e,t=new THREE.Vector3;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),THREE.ArrowHelper.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,e,1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},THREE.BoxHelper=function(e){var t=new THREE.BufferGeometry;t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3)),THREE.Line.call(this,t,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==e&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update=function(e){null===(n=e.geometry).boundingBox&&n.computeBoundingBox();var t=n.boundingBox.min,n=n.boundingBox.max,i=this.geometry.attributes.position.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=n.y,i[8]=n.z,i[9]=t.x,i[10]=t.y,i[11]=n.z,i[12]=t.x,i[13]=t.y,i[14]=n.z,i[15]=n.x,i[16]=t.y,i[17]=n.z,i[18]=n.x,i[19]=t.y,i[20]=n.z,i[21]=n.x,i[22]=n.y,i[23]=n.z,i[24]=n.x,i[25]=n.y,i[26]=t.z,i[27]=t.x,i[28]=n.y,i[29]=t.z,i[30]=t.x,i[31]=n.y,i[32]=t.z,i[33]=t.x,i[34]=t.y,i[35]=t.z,i[36]=t.x,i[37]=t.y,i[38]=t.z,i[39]=n.x,i[40]=t.y,i[41]=t.z,i[42]=n.x,i[43]=t.y,i[44]=t.z,i[45]=n.x,i[46]=n.y,i[47]=t.z,i[48]=n.x,i[49]=n.y,i[50]=n.z,i[51]=n.x,i[52]=n.y,i[53]=t.z,i[54]=t.x,i[55]=n.y,i[56]=n.z,i[57]=t.x,i[58]=n.y,i[59]=t.z,i[60]=t.x,i[61]=t.y,i[62]=n.z,i[63]=t.x,i[64]=t.y,i[65]=t.z,i[66]=n.x,i[67]=t.y,i[68]=n.z,i[69]=n.x,i[70]=t.y,i[71]=t.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.BoundingBoxHelper=function(e,t){var n=void 0!==t?t:8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:n,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function t(e,t,i){n(e,i),n(t,i)}function n(e,t){i.vertices.push(new THREE.Vector3),i.colors.push(new THREE.Color(t)),void 0===o[e]&&(o[e]=[]),o[e].push(i.vertices.length-1)}var i=new THREE.Geometry,r=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),o={};t("n1","n2",16755200),t("n2","n4",16755200),t("n4","n3",16755200),t("n3","n1",16755200),t("f1","f2",16755200),t("f2","f4",16755200),t("f4","f3",16755200),t("f3","f1",16755200),t("n1","f1",16755200),t("n2","f2",16755200),t("n3","f3",16755200),t("n4","f4",16755200),t("p","n1",16711680),t("p","n2",16711680),t("p","n3",16711680),t("p","n4",16711680),t("u1","u2",43775),t("u2","u3",43775),t("u3","u1",43775),t("c","t",16777215),t("p","c",3355443),t("cn1","cn2",3355443),t("cn3","cn4",3355443),t("cf1","cf2",3355443),t("cf3","cf4",3355443),THREE.Line.call(this,i,r,THREE.LinePieces),this.camera=e,this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Camera,n=new THREE.Projector;return function(){function i(i,o,a,s){if(e.set(o,a,s),n.unprojectVector(e,t),void 0!==(i=r.pointMap[i]))for(o=0,a=i.length;o<a;o++)r.geometry.vertices[i[o]].copy(e)}var r=this;t.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),this.geometry.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var n=new THREE.Geometry;n.vertices.push(new THREE.Vector3(-t,t,0),new THREE.Vector3(t,t,0),new THREE.Vector3(t,-t,0),new THREE.Vector3(-t,-t,0),new THREE.Vector3(-t,t,0));var i=new THREE.LineBasicMaterial({fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(n,i),this.add(this.lightPlane),(n=new THREE.Geometry).vertices.push(new THREE.Vector3,new THREE.Vector3),(i=new THREE.LineBasicMaterial({fog:!1})).color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(n,i),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(n),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(e,t){var n=void 0!==t?t:16777215,i=[0,0],r={},o=function(e,t){return e-t},a=["a","b","c"],s=new THREE.BufferGeometry,l=e.geometry.clone();l.mergeVertices(),l.computeFaceNormals();for(var c=l.vertices,u=0,h=0,d=(l=l.faces).length;h<d;h++)for(var f=l[h],p=0;3>p;p++){i[0]=f[a[p]],i[1]=f[a[(p+1)%3]],i.sort(o);var m=i.toString();void 0===r[m]?(r[m]={vert1:i[0],vert2:i[1],face1:h,face2:void 0},u++):r[m].face2=h}s.addAttribute("position",new THREE.Float32Attribute(6*u,3)),i=s.attributes.position.array,o=0;for(m in r)(void 0===(a=r[m]).face2||.9999>l[a.face1].normal.dot(l[a.face2].normal))&&(u=c[a.vert1],i[o++]=u.x,i[o++]=u.y,i[o++]=u.z,u=c[a.vert2],i[o++]=u.x,i[o++]=u.y,i[o++]=u.z);THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:n}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper=function(e,t,n,i){this.object=e,this.size=void 0!==t?t:1,e=void 0!==n?n:16776960,i=void 0!==i?i:1,t=new THREE.Geometry,n=0;for(var r=this.object.geometry.faces.length;n<r;n++)t.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,t,new THREE.LineBasicMaterial({color:e,linewidth:i}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,n=t.geometry.vertices,i=t.geometry.faces,r=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(r);for(var o=t=0,a=i.length;t<a;t++,o+=2){var s=i[t];e[o].copy(n[s.a]).add(n[s.b]).add(n[s.c]).divideScalar(3).applyMatrix4(r),e[o+1].copy(s.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[o])}return this.geometry.verticesNeedUpdate=!0,this},THREE.GridHelper=function(e,t){var n=new THREE.Geometry,i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var r=-e;r<=e;r+=t){n.vertices.push(new THREE.Vector3(-e,0,r),new THREE.Vector3(e,0,r),new THREE.Vector3(r,0,-e),new THREE.Vector3(r,0,e));var o=0===r?this.color1:this.color2;n.colors.push(o,o,o,o)}THREE.Line.call(this,n,i,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t,n,i){for(THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color],(e=new THREE.SphereGeometry(t,4,2)).applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2)),t=0;8>t;t++)e.faces[t].color=this.colors[4>t?0:1];t=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0}),this.lightSphere=new THREE.Mesh(e,t),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var n=new THREE.SphereGeometry(t,4,2),i=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,n,i),this.matrixWorld=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new THREE.Geometry,n=0;n<this.bones.length;n++)this.bones[n].parent instanceof THREE.Bone&&(t.vertices.push(new THREE.Vector3),t.vertices.push(new THREE.Vector3),t.colors.push(new THREE.Color(0,0,1)),t.colors.push(new THREE.Color(0,1,0)));n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0}),THREE.Line.call(this,t,n,THREE.LinePieces),this.root=e,this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype),THREE.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof THREE.Bone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},THREE.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new THREE.Matrix4).getInverse(this.root.matrixWorld),n=new THREE.Matrix4,i=0,r=0;r<this.bones.length;r++){var o=this.bones[r];o.parent instanceof THREE.Bone&&(n.multiplyMatrices(t,o.matrixWorld),e.vertices[i].setFromMatrixPosition(n),n.multiplyMatrices(t,o.parent.matrixWorld),e.vertices[i+1].setFromMatrixPosition(n),i+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,(e=new THREE.CylinderGeometry(0,1,1,8,1,!0)).applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),e.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var t=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(e,t),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){var n=this.light.distance?this.light.distance:1e4,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,n,i){this.object=e,this.size=void 0!==t?t:1,t=void 0!==n?n:16711680,i=void 0!==i?i:1,n=new THREE.Geometry;for(var r=0,o=(e=e.geometry.faces).length;r<o;r++)for(var a=0,s=e[r].vertexNormals.length;a<s;a++)n.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,n,new THREE.LineBasicMaterial({color:t,linewidth:i}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){e=["a","b","c","d"],this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var n=this.geometry.vertices,i=this.object.geometry.vertices,r=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,l=r.length;s<l;s++)for(var c=r[s],u=0,h=c.vertexNormals.length;u<h;u++){var d=c.vertexNormals[u];n[a].copy(i[c[e[u]]]).applyMatrix4(o),t.copy(d).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),t.add(n[a]),n[a+=1].copy(t),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(e,t,n,i){this.object=e,this.size=void 0!==t?t:1,t=void 0!==n?n:255,i=void 0!==i?i:1,n=new THREE.Geometry;for(var r=0,o=(e=e.geometry.faces).length;r<o;r++)for(var a=0,s=e[r].vertexTangents.length;a<s;a++)n.vertices.push(new THREE.Vector3),n.vertices.push(new THREE.Vector3);THREE.Line.call(this,n,new THREE.LineBasicMaterial({color:t,linewidth:i}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){e=["a","b","c","d"],this.object.updateMatrixWorld(!0);for(var n=this.geometry.vertices,i=this.object.geometry.vertices,r=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,l=r.length;s<l;s++)for(var c=r[s],u=0,h=c.vertexTangents.length;u<h;u++){var d=c.vertexTangents[u];n[a].copy(i[c[e[u]]]).applyMatrix4(o),t.copy(d).transformDirection(o).multiplyScalar(this.size),t.add(n[a]),n[a+=1].copy(t),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(e,t){var n=void 0!==t?t:16777215,i=[0,0],r={},o=function(e,t){return e-t},a=["a","b","c"],s=new THREE.BufferGeometry;if(e.geometry instanceof THREE.Geometry){for(var l=e.geometry.vertices,c=e.geometry.faces,u=0,h=new Uint32Array(6*c.length),d=0,f=c.length;d<f;d++)for(var p=c[d],m=0;3>m;m++)i[0]=p[a[m]],i[1]=p[a[(m+1)%3]],i.sort(o),void 0===r[v=i.toString()]&&(h[2*u]=i[0],h[2*u+1]=i[1],r[v]=!0,u++);for(i=new Float32Array(6*u),d=0,f=u;d<f;d++)for(m=0;2>m;m++)u=l[h[2*d+m]],a=6*d+3*m,i[a+0]=u.x,i[a+1]=u.y,i[a+2]=u.z;s.addAttribute("position",new THREE.BufferAttribute(i,3))}else if(e.geometry instanceof THREE.BufferGeometry){if(void 0!==e.geometry.attributes.index){for(var l=e.geometry.attributes.position.array,f=e.geometry.attributes.index.array,c=e.geometry.offsets,u=0,h=new Uint32Array(2*f.length),p=0,g=c.length;p<g;++p)for(var m=c[p].start,v=c[p].count,a=c[p].index,d=m,E=m+v;d<E;d+=3)for(m=0;3>m;m++)i[0]=a+f[d+m],i[1]=a+f[d+(m+1)%3],i.sort(o),v=i.toString(),void 0===r[v]&&(h[2*u]=i[0],h[2*u+1]=i[1],r[v]=!0,u++);for(i=new Float32Array(6*u),d=0,f=u;d<f;d++)for(m=0;2>m;m++)a=6*d+3*m,u=3*h[2*d+m],i[a+0]=l[u],i[a+1]=l[u+1],i[a+2]=l[u+2]}else for(l=e.geometry.attributes.position.array,u=l.length/3,h=u/3,i=new Float32Array(6*u),d=0,f=h;d<f;d++)for(m=0;3>m;m++)a=18*d+6*m,h=9*d+3*m,i[a+0]=l[h],i[a+1]=l[h+1],i[a+2]=l[h+2],u=9*d+(m+1)%3*3,i[a+3]=l[u],i[a+4]=l[u+1],i[a+5]=l[u+2];s.addAttribute("position",new THREE.BufferAttribute(i,3))}THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:n}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(e){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare=function(e,t,n,i,r){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,i,r)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add=function(e,t,n,i,r,o){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===r&&(r=new THREE.Color(16777215)),void 0===i&&(i=THREE.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:r,blending:i})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t,n=this.lensFlares.length,i=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(e=0;e<n;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+i*t.distance,t.y=this.positionScreen.y+r*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length;this.createAnimation("__default",0,n-1,n/1),this.setAnimationWeight("__default",1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,n,i){t={startFrame:t,endFrame:n,length:n-t+1,fps:i,duration:(n-t)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[e]=t,this.animationsList.push(t)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/,i={},r=this.geometry,o=0,a=r.morphTargets.length;o<a;o++){var s=r.morphTargets[o].name.match(n);if(s&&1<s.length){var l=s[1];i[l]||(i[l]={start:1/0,end:-1/0}),o<(s=i[l]).start&&(s.start=o),o>s.end&&(s.end=o),t||(t=l)}}for(l in i)s=i[l],this.createAnimation(l,s.start,s.end,e);this.firstAnimation=t},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){(e=this.animationsMap[e])&&(e.direction=1,e.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){(e=this.animationsMap[e])&&(e.direction=-1,e.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0;return(e=this.animationsMap[e])&&(t=e.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1;return(e=this.animationsMap[e])&&(t=e.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){(e=this.animationsMap[e])&&(e.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var i=this.animationsList[t];if(i.active){var r=i.duration/i.length;i.time+=i.direction*e,i.mirroredLoop?(i.time>i.duration||0>i.time)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),0>i.time&&(i.time=0,i.directionBackwards=!1)):(i.time%=i.duration,0>i.time&&(i.time+=i.duration));var o=i.startFrame+THREE.Math.clamp(Math.floor(i.time/r),0,i.length-1),a=i.weight;o!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*a,this.morphTargetInfluences[o]=0,i.lastFrame=i.currentFrame,i.currentFrame=o),r=i.time%r/r,i.directionBackwards&&(r=1-r),this.morphTargetInfluences[i.currentFrame]=r*a,this.morphTargetInfluences[i.lastFrame]=(1-r)*a}}},THREE.LensFlarePlugin=function(){function e(e,n){var i=t.createProgram(),r=t.createShader(t.FRAGMENT_SHADER),o=t.createShader(t.VERTEX_SHADER),a="precision "+n+" float;\n";return t.shaderSource(r,a+e.fragmentShader),t.shaderSource(o,a+e.vertexShader),t.compileShader(r),t.compileShader(o),t.attachShader(i,r),t.attachShader(i,o),t.linkProgram(i),i}var t,n,i,r,o,a,s,l,c,u,h,d,f,p=[];this.init=function(p){t=p.context,n=p,i=p.getPrecision(),r=new Float32Array(16),o=new Uint16Array(6),p=0,r[p++]=-1,r[p++]=-1,r[p++]=0,r[p++]=0,r[p++]=1,r[p++]=-1,r[p++]=1,r[p++]=0,r[p++]=1,r[p++]=1,r[p++]=1,r[p++]=1,r[p++]=-1,r[p++]=1,r[p++]=0,r[p++]=1,p=0,o[p++]=0,o[p++]=1,o[p++]=2,o[p++]=0,o[p++]=2,o[p++]=3,a=t.createBuffer(),s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.bufferData(t.ELEMENT_ARRAY_BUFFER,o,t.STATIC_DRAW),l=t.createTexture(),c=t.createTexture(),t.bindTexture(t.TEXTURE_2D,l),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,c),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),0>=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(u=!1,h=e(THREE.ShaderFlares.lensFlare,i)):(u=!0,h=e(THREE.ShaderFlares.lensFlareVertexTexture,i)),f={},(d={}).vertex=t.getAttribLocation(h,"position"),d.uv=t.getAttribLocation(h,"uv"),f.renderType=t.getUniformLocation(h,"renderType"),f.map=t.getUniformLocation(h,"map"),f.occlusionMap=t.getUniformLocation(h,"occlusionMap"),f.opacity=t.getUniformLocation(h,"opacity"),f.color=t.getUniformLocation(h,"color"),f.scale=t.getUniformLocation(h,"scale"),f.rotation=t.getUniformLocation(h,"rotation"),f.screenPosition=t.getUniformLocation(h,"screenPosition")},this.render=function(e,i,r,o){if(p.length=0,e.traverseVisible(function(e){e instanceof THREE.LensFlare&&p.push(e)}),0!==p.length){e=new THREE.Vector3;var m=o/r,g=.5*r,v=.5*o,E=16/o,y=new THREE.Vector2(E*m,E),T=new THREE.Vector3(1,1,0),x=new THREE.Vector2(1,1),b=f,E=d;t.useProgram(h),t.enableVertexAttribArray(d.vertex),t.enableVertexAttribArray(d.uv),t.uniform1i(b.occlusionMap,0),t.uniform1i(b.map,1),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(E.vertex,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(E.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.disable(t.CULL_FACE),t.depthMask(!1);for(var _=0,w=p.length;_<w;_++){E=16/o,y.set(E*m,E);var R=p[_];if(e.set(R.matrixWorld.elements[12],R.matrixWorld.elements[13],R.matrixWorld.elements[14]),e.applyMatrix4(i.matrixWorldInverse),e.applyProjection(i.projectionMatrix),T.copy(e),x.x=T.x*g+g,x.y=T.y*v+v,u||0<x.x&&x.x<r&&0<x.y&&x.y<o){t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,l),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,x.x-8,x.y-8,16,16,0),t.uniform1i(b.renderType,0),t.uniform2f(b.scale,y.x,y.y),t.uniform3f(b.screenPosition,T.x,T.y,T.z),t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,c),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,x.x-8,x.y-8,16,16,0),t.uniform1i(b.renderType,1),t.disable(t.DEPTH_TEST),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,l),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),R.positionScreen.copy(T),R.customUpdateCallback?R.customUpdateCallback(R):R.updateLensFlares(),t.uniform1i(b.renderType,2),t.enable(t.BLEND);for(var H=0,S=R.lensFlares.length;H<S;H++){var M=R.lensFlares[H];.001<M.opacity&&.001<M.scale&&(T.x=M.x,T.y=M.y,T.z=M.z,E=M.size*M.scale/o,y.x=E*m,y.y=E,t.uniform3f(b.screenPosition,T.x,T.y,T.z),t.uniform2f(b.scale,y.x,y.y),t.uniform1f(b.rotation,M.rotation),t.uniform1f(b.opacity,M.opacity),t.uniform3f(b.color,M.color.r,M.color.g,M.color.b),n.setBlending(M.blending,M.blendEquation,M.blendSrc,M.blendDst),n.setTexture(M.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}}t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.depthMask(!0)}}},THREE.ShadowMapPlugin=function(){function e(t,n,i){if(n.visible){var r=t.__webglObjects[n.id];if(r&&n.castShadow&&(!1===n.frustumCulled||!0===s.intersectsObject(n)))for(var o=0,a=r.length;o<a;o++){var l=r[o];n._modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld),d.push(l)}for(o=0,a=n.children.length;o<a;o++)e(t,n.children[o],i)}}var t,n,i,r,o,a,s=new THREE.Frustum,l=new THREE.Matrix4,c=new THREE.Vector3,u=new THREE.Vector3,h=new THREE.Vector3,d=[];this.init=function(e){t=e.context,n=e,e=THREE.ShaderLib.depthRGBA;var s=THREE.UniformsUtils.clone(e.uniforms);i=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:s}),r=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:s,morphTargets:!0}),o=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:s,skinning:!0}),a=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:s,morphTargets:!0,skinning:!0}),i._shadowPass=!0,r._shadowPass=!0,o._shadowPass=!0,a._shadowPass=!0},this.render=function(e,t){n.shadowMapEnabled&&n.shadowMapAutoUpdate&&this.update(e,t)},this.update=function(f,p){var m,g,v,E,y,T,x,b,_=[];for(E=0,t.clearColor(1,1,1,1),t.disable(t.BLEND),t.enable(t.CULL_FACE),t.frontFace(t.CCW),n.shadowMapCullFace===THREE.CullFaceFront?t.cullFace(t.FRONT):t.cullFace(t.BACK),n.setDepthTest(!0),m=0,g=f.__lights.length;m<g;m++)if((v=f.__lights[m]).castShadow)if(v instanceof THREE.DirectionalLight&&v.shadowCascade)for(y=0;y<v.shadowCascadeCount;y++){var w;if(v.shadowCascadeArray[y])w=v.shadowCascadeArray[y];else{x=v;var R=y;(w=new THREE.DirectionalLight).isVirtual=!0,w.onlyShadow=!0,w.castShadow=!0,w.shadowCameraNear=x.shadowCameraNear,w.shadowCameraFar=x.shadowCameraFar,w.shadowCameraLeft=x.shadowCameraLeft,w.shadowCameraRight=x.shadowCameraRight,w.shadowCameraBottom=x.shadowCameraBottom,w.shadowCameraTop=x.shadowCameraTop,w.shadowCameraVisible=x.shadowCameraVisible,w.shadowDarkness=x.shadowDarkness,w.shadowBias=x.shadowCascadeBias[R],w.shadowMapWidth=x.shadowCascadeWidth[R],w.shadowMapHeight=x.shadowCascadeHeight[R],w.pointsWorld=[],w.pointsFrustum=[],b=w.pointsWorld,T=w.pointsFrustum;for(var H=0;8>H;H++)b[H]=new THREE.Vector3,T[H]=new THREE.Vector3;b=x.shadowCascadeNearZ[R],x=x.shadowCascadeFarZ[R],T[0].set(-1,-1,b),T[1].set(1,-1,b),T[2].set(-1,1,b),T[3].set(1,1,b),T[4].set(-1,-1,x),T[5].set(1,-1,x),T[6].set(-1,1,x),T[7].set(1,1,x),w.originalCamera=p,(T=new THREE.Gyroscope).position.copy(v.shadowCascadeOffset),T.add(w),T.add(w.target),p.add(T),v.shadowCascadeArray[y]=w,console.log("Created virtualLight",w)}b=y,(x=(R=v).shadowCascadeArray[b]).position.copy(R.position),x.target.position.copy(R.target.position),x.lookAt(x.target),x.shadowCameraVisible=R.shadowCameraVisible,x.shadowDarkness=R.shadowDarkness,x.shadowBias=R.shadowCascadeBias[b],T=R.shadowCascadeNearZ[b],R=R.shadowCascadeFarZ[b],(x=x.pointsFrustum)[0].z=T,x[1].z=T,x[2].z=T,x[3].z=T,x[4].z=R,x[5].z=R,x[6].z=R,x[7].z=R,_[E]=w,E++}else _[E]=v,E++;for(m=0,g=_.length;m<g;m++){if((v=_[m]).shadowMap||(y=THREE.LinearFilter,n.shadowMapType===THREE.PCFSoftShadowMap&&(y=THREE.NearestFilter),v.shadowMap=new THREE.WebGLRenderTarget(v.shadowMapWidth,v.shadowMapHeight,{minFilter:y,magFilter:y,format:THREE.RGBAFormat}),v.shadowMapSize=new THREE.Vector2(v.shadowMapWidth,v.shadowMapHeight),v.shadowMatrix=new THREE.Matrix4),!v.shadowCamera){if(v instanceof THREE.SpotLight)v.shadowCamera=new THREE.PerspectiveCamera(v.shadowCameraFov,v.shadowMapWidth/v.shadowMapHeight,v.shadowCameraNear,v.shadowCameraFar);else{if(!(v instanceof THREE.DirectionalLight)){console.error("Unsupported light type for shadow");continue}v.shadowCamera=new THREE.OrthographicCamera(v.shadowCameraLeft,v.shadowCameraRight,v.shadowCameraTop,v.shadowCameraBottom,v.shadowCameraNear,v.shadowCameraFar)}f.add(v.shadowCamera),!0===f.autoUpdate&&f.updateMatrixWorld()}if(v.shadowCameraVisible&&!v.cameraHelper&&(v.cameraHelper=new THREE.CameraHelper(v.shadowCamera),v.shadowCamera.add(v.cameraHelper)),v.isVirtual&&w.originalCamera==p){for(y=p,E=v.shadowCamera,T=v.pointsFrustum,x=v.pointsWorld,c.set(1/0,1/0,1/0),u.set(-1/0,-1/0,-1/0),R=0;8>R;R++)(b=x[R]).copy(T[R]),THREE.ShadowMapPlugin.__projector.unprojectVector(b,y),b.applyMatrix4(E.matrixWorldInverse),b.x<c.x&&(c.x=b.x),b.x>u.x&&(u.x=b.x),b.y<c.y&&(c.y=b.y),b.y>u.y&&(u.y=b.y),b.z<c.z&&(c.z=b.z),b.z>u.z&&(u.z=b.z);E.left=c.x,E.right=u.x,E.top=u.y,E.bottom=c.y,E.updateProjectionMatrix()}for(E=v.shadowMap,T=v.shadowMatrix,(y=v.shadowCamera).position.setFromMatrixPosition(v.matrixWorld),h.setFromMatrixPosition(v.target.matrixWorld),y.lookAt(h),y.updateMatrixWorld(),y.matrixWorldInverse.getInverse(y.matrixWorld),v.cameraHelper&&(v.cameraHelper.visible=v.shadowCameraVisible),v.shadowCameraVisible&&v.cameraHelper.update(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(y.projectionMatrix),T.multiply(y.matrixWorldInverse),l.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),s.setFromMatrix(l),n.setRenderTarget(E),n.clear(),d.length=0,e(f,f,y),v=0,E=d.length;v<E;v++)x=d[v],T=x.object,x=x.buffer,R=T.material instanceof THREE.MeshFaceMaterial?T.material.materials[0]:T.material,b=void 0!==T.geometry.morphTargets&&0<T.geometry.morphTargets.length&&R.morphTargets,H=T instanceof THREE.SkinnedMesh&&R.skinning,b=T.customDepthMaterial?T.customDepthMaterial:H?b?a:o:b?r:i,n.setMaterialFaces(R),x instanceof THREE.BufferGeometry?n.renderBufferDirect(y,f.__lights,null,b,x,T):n.renderBuffer(y,f.__lights,null,b,x,T);for(v=0,E=(R=f.__webglObjectsImmediate).length;v<E;v++)x=R[v],(T=x.object).visible&&T.castShadow&&(T._modelViewMatrix.multiplyMatrices(y.matrixWorldInverse,T.matrixWorld),n.renderImmediateObject(y,f.__lights,null,i,T))}m=n.getClearColor(),g=n.getClearAlpha(),t.clearColor(m.r,m.g,m.b,g),t.enable(t.BLEND),n.shadowMapCullFace===THREE.CullFaceFront&&t.cullFace(t.BACK)}},THREE.ShadowMapPlugin.__projector=new THREE.Projector,THREE.SpritePlugin=function(){function e(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var t,n,i,r,o,a,s,l,c,u,h,d,f,p,m,g,v,E,y,T,x,b,_,w,R,H=[];this.init=function(e){E=e.context,y=e,x=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),b=new Uint16Array([0,1,2,0,2,3]),_=E.createBuffer(),w=E.createBuffer(),E.bindBuffer(E.ARRAY_BUFFER,_),E.bufferData(E.ARRAY_BUFFER,x,E.STATIC_DRAW),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,w),E.bufferData(E.ELEMENT_ARRAY_BUFFER,b,E.STATIC_DRAW),e=E.createProgram();var H=E.createShader(E.VERTEX_SHADER),S=E.createShader(E.FRAGMENT_SHADER);E.shaderSource(H,["precision "+y.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),E.shaderSource(S,["precision "+y.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),E.compileShader(H),E.compileShader(S),E.attachShader(e,H),E.attachShader(e,S),E.linkProgram(e),R=e,g=E.getAttribLocation(R,"position"),v=E.getAttribLocation(R,"uv"),t=E.getUniformLocation(R,"uvOffset"),n=E.getUniformLocation(R,"uvScale"),i=E.getUniformLocation(R,"rotation"),r=E.getUniformLocation(R,"scale"),o=E.getUniformLocation(R,"color"),a=E.getUniformLocation(R,"map"),s=E.getUniformLocation(R,"opacity"),l=E.getUniformLocation(R,"modelViewMatrix"),c=E.getUniformLocation(R,"projectionMatrix"),u=E.getUniformLocation(R,"fogType"),h=E.getUniformLocation(R,"fogDensity"),d=E.getUniformLocation(R,"fogNear"),f=E.getUniformLocation(R,"fogFar"),p=E.getUniformLocation(R,"fogColor"),m=E.getUniformLocation(R,"alphaTest"),(e=document.createElement("canvas")).width=8,e.height=8,(H=e.getContext("2d")).fillStyle="white",H.fillRect(0,0,8,8),(T=new THREE.Texture(e)).needsUpdate=!0},this.render=function(x,b,S,M){if(H.length=0,x.traverseVisible(function(e){e instanceof THREE.Sprite&&H.push(e)}),0!==H.length){E.useProgram(R),E.enableVertexAttribArray(g),E.enableVertexAttribArray(v),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.bindBuffer(E.ARRAY_BUFFER,_),E.vertexAttribPointer(g,2,E.FLOAT,!1,16,0),E.vertexAttribPointer(v,2,E.FLOAT,!1,16,8),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,w),E.uniformMatrix4fv(c,!1,b.projectionMatrix.elements),E.activeTexture(E.TEXTURE0),E.uniform1i(a,0),M=S=0,(C=x.fog)?(E.uniform3f(p,C.color.r,C.color.g,C.color.b),C instanceof THREE.Fog?(E.uniform1f(d,C.near),E.uniform1f(f,C.far),E.uniform1i(u,1),M=S=1):C instanceof THREE.FogExp2&&(E.uniform1f(h,C.density),E.uniform1i(u,2),M=S=2)):(E.uniform1i(u,0),M=S=0);for(var C=0,A=H.length;C<A;C++){var k=H[C],P=k.material;k._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,k.matrixWorld),k.z=-k._modelViewMatrix.elements[14]}for(H.sort(e),b=[],C=0,A=H.length;C<A;C++)k=H[C],P=k.material,E.uniform1f(m,P.alphaTest),E.uniformMatrix4fv(l,!1,k._modelViewMatrix.elements),b[0]=k.scale.x,b[1]=k.scale.y,k=0,x.fog&&P.fog&&(k=M),S!==k&&(E.uniform1i(u,k),S=k),null!==P.map?(E.uniform2f(t,P.map.offset.x,P.map.offset.y),E.uniform2f(n,P.map.repeat.x,P.map.repeat.y)):(E.uniform2f(t,0,0),E.uniform2f(n,1,1)),E.uniform1f(s,P.opacity),E.uniform3f(o,P.color.r,P.color.g,P.color.b),E.uniform1f(i,P.rotation),E.uniform2fv(r,b),y.setBlending(P.blending,P.blendEquation,P.blendSrc,P.blendDst),y.setDepthTest(P.depthTest),y.setDepthWrite(P.depthWrite),P.map&&P.map.image&&P.map.image.width?y.setTexture(P.map,0):y.setTexture(T,0),E.drawElements(E.TRIANGLES,6,E.UNSIGNED_SHORT,0);E.enable(E.CULL_FACE)}}},THREE.DepthPassPlugin=function(){function e(t,n,i){if(n.visible){var r=t.__webglObjects[n.id];if(r&&(!1===n.frustumCulled||!0===s.intersectsObject(n)))for(var o=0,a=r.length;o<a;o++){var l=r[o];n._modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld),c.push(l)}for(o=0,a=n.children.length;o<a;o++)e(t,n.children[o],i)}}this.enabled=!1,this.renderTarget=null;var t,n,i,r,o,a,s=new THREE.Frustum,l=new THREE.Matrix4,c=[];this.init=function(e){t=e.context,n=e,e=THREE.ShaderLib.depthRGBA;var s=THREE.UniformsUtils.clone(e.uniforms);i=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:s}),r=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:s,morphTargets:!0}),o=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:s,skinning:!0}),a=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:s,morphTargets:!0,skinning:!0}),i._shadowPass=!0,r._shadowPass=!0,o._shadowPass=!0,a._shadowPass=!0},this.render=function(e,t){this.enabled&&this.update(e,t)},this.update=function(u,h){var d,f,p,m,g;t.clearColor(1,1,1,1),t.disable(t.BLEND),n.setDepthTest(!0),!0===u.autoUpdate&&u.updateMatrixWorld(),h.matrixWorldInverse.getInverse(h.matrixWorld),l.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),s.setFromMatrix(l),n.setRenderTarget(this.renderTarget),n.clear(),c.length=0,e(u,u,h);var v;for(d=0,f=c.length;d<f;d++)p=c[d],g=p.object,p=p.buffer,g instanceof THREE.PointCloud&&!g.customDepthMaterial||((v=g.material instanceof THREE.MeshFaceMaterial?g.material.materials[0]:g.material)&&n.setMaterialFaces(g.material),m=void 0!==g.geometry.morphTargets&&0<g.geometry.morphTargets.length&&v.morphTargets,v=g instanceof THREE.SkinnedMesh&&v.skinning,m=g.customDepthMaterial?g.customDepthMaterial:v?m?a:o:m?r:i,p instanceof THREE.BufferGeometry?n.renderBufferDirect(h,u.__lights,null,m,p,g):n.renderBuffer(h,u.__lights,null,m,p,g));for(d=0,f=(m=u.__webglObjectsImmediate).length;d<f;d++)p=m[d],(g=p.object).visible&&(g._modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,g.matrixWorld),n.renderImmediateObject(h,u.__lights,null,i,g));d=n.getClearColor(),f=n.getClearAlpha(),t.clearColor(d.r,d.g,d.b,f),t.enable(t.BLEND)}},THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},lensFlare:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};var TWEEN=TWEEN||function(){var e=[];return{REVISION:"7",getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){-1!==(t=e.indexOf(t))&&e.splice(t,1)},update:function(t){if(0===e.length)return!1;for(var n=0,i=e.length,t=void 0!==t?t:Date.now();n<i;)e[n].update(t)?n++:(e.splice(n,1),i--);return!0}}}();TWEEN.Tween=function(e){var t={},n={},i=1e3,r=0,o=null,a=TWEEN.Easing.Linear.None,s=TWEEN.Interpolation.Linear,l=[],c=null,u=!1,h=null,d=null;this.to=function(e,t){return null!==t&&(i=t),n=e,this},this.start=function(i){TWEEN.add(this),u=!1,o=void 0!==i?i:Date.now(),o+=r;for(var a in n)if(null!==e[a]){if(n[a]instanceof Array){if(0===n[a].length)continue;n[a]=[e[a]].concat(n[a])}t[a]=e[a]}return this},this.stop=function(){return TWEEN.remove(this),this},this.delay=function(e){return r=e,this},this.easing=function(e){return a=e,this},this.interpolation=function(e){return s=e,this},this.chain=function(){return l=arguments,this},this.onStart=function(e){return c=e,this},this.onUpdate=function(e){return h=e,this},this.onComplete=function(e){return d=e,this},this.update=function(r){if(r<o)return!0;!1===u&&(null!==c&&c.call(e),u=!0);var f,p=(r-o)/i,m=a(p=1<p?1:p);for(f in t){var g=t[f],v=n[f];e[f]=v instanceof Array?s(v,m):g+(v-g)*m}if(null!==h&&h.call(e,m),1==p){for(null!==d&&d.call(e),p=0,m=l.length;p<m;p++)l[p].start(r);return!1}return!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin(2*(e-t)*Math.PI/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),1>(e*=2)?-.5*n*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4):.5*n*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return 1>(e*=2)?.5*e*e*(3.5949095*e-2.5949095):.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return.5>e?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=TWEEN.Interpolation.Utils.Linear;return 0>t?o(e[0],e[1],i):1<t?o(e[n],e[n-1],n-i):o(e[r],e[r+1>n?n:r+1],i-r)},Bezier:function(e,t){var n,i=0,r=e.length-1,o=Math.pow,a=TWEEN.Interpolation.Utils.Bernstein;for(n=0;n<=r;n++)i+=o(1-t,r-n)*o(t,n)*e[n]*a(r,n);return i},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(0>t&&(r=Math.floor(i=n*(1+t))),o(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):0>t?e[0]-(o(e[0],e[0],e[1],e[1],-i)-e[0]):1<t?e[n]-(o(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):o(e[r?r-1:0],e[r],e[n<r+1?n:r+1],e[n<r+2?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=TWEEN.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n,i=1;if(e[t])return e[t];for(n=t;1<n;n--)i*=n;return e[t]=i}}(),CatmullRom:function(e,t,n,i,r){var o=r*r;return(2*t-2*n+(e=.5*(n-e))+(i=.5*(i-t)))*r*o+(-3*t+3*n-2*e-i)*o+e*r+t}}};var Stats=function(){var e=Date.now(),t=e,n=0,i=1/0,r=0,o=0,a=1/0,s=0,l=0,c=0,u=document.createElement("div");u.id="stats",u.addEventListener("mousedown",function(e){e.preventDefault(),E(++c%2)},!1),u.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",u.appendChild(h);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",h.appendChild(d);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(f);f.children.length<74;)(v=document.createElement("span")).style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(v);var p=document.createElement("div");p.id="ms",p.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",u.appendChild(p);var m=document.createElement("div");m.id="msText",m.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="MS",p.appendChild(m);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",p.appendChild(g);g.children.length<74;){var v=document.createElement("span");v.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(v)}var E=function(e){switch(c=e){case 0:h.style.display="block",p.style.display="none";break;case 1:h.style.display="none",p.style.display="block"}},y=function(e,t){e.appendChild(e.firstChild).style.height=t+"px"};return{REVISION:11,domElement:u,setMode:E,begin:function(){e=Date.now()},end:function(){var c=Date.now();return n=c-e,i=Math.min(i,n),r=Math.max(r,n),m.textContent=n+" MS ("+i+"-"+r+")",y(g,Math.min(30,30-n/200*30)),l++,c>t+1e3&&(o=Math.round(1e3*l/(c-t)),a=Math.min(a,o),s=Math.max(s,o),d.textContent=o+" FPS ("+a+"-"+s+")",y(f,Math.min(30,30-o/100*30)),t=c,l=0),c},update:function(){e=this.end()}}},dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css={load:function(e,t){var n=(t=t||document).createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){var t=t||document,n=document.createElement("style");n.type="text/css",n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}},dat.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),i=e.length-1;i>=0;i--)n=[e[i].apply(this,n)];return n[0]}},each:function(t,n,i){if(e&&t.forEach===e)t.forEach(n,i);else if(t.length===t.length+0)for(var r=0,o=t.length;r<o&&!(r in t&&n.call(i,t[r],r)===this.BREAK);r++);else for(r in t)if(n.call(i,t[r],r)===this.BREAK)break},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),dat.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onFinishChange=this.__onChange=void 0};return dat.utils.common.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(),dat.dom.dom=function(e){function t(t){return"0"===t||e.isUndefined(t)?0:(t=t.match(i),e.isNull(t)?0:parseFloat(t[1]))}var n={};e.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,i){e.each(t,function(e){n[e]=i})});var i=/(\d+(\.\d+)?)px/,r={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,n,i){e.isUndefined(n)&&(n=!0),e.isUndefined(i)&&(i=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),i&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,i,r,o){var r=r||{},a=n[i];if(!a)throw Error("Event type "+i+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":s.initMouseEvent(i,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,r.x||r.clientX||0,r.y||r.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":a=s.initKeyboardEvent||s.initKeyEvent,e.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),a(i,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(i,r.bubbles||!1,r.cancelable||!0)}e.defaults(s,o),t.dispatchEvent(s)},bind:function(e,t,n,i){return e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n),r},unbind:function(e,t,n,i){return e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n),r},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1==n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return r},removeClass:function(e,t){if(t){if(void 0!==e.className)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),i=n.indexOf(t);-1!=i&&(n.splice(i,1),e.className=n.join(" "))}}else e.className=void 0;return r},hasClass:function(e,t){return RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){return e=getComputedStyle(e),t(e["border-left-width"])+t(e["border-right-width"])+t(e["padding-left"])+t(e["padding-right"])+t(e.width)},getHeight:function(e){return e=getComputedStyle(e),t(e["border-top-width"])+t(e["border-bottom-width"])+t(e["padding-top"])+t(e["padding-bottom"])+t(e.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return r}(dat.utils.common),dat.controllers.OptionController=function(e,t,n){var i=function(e,r,o){i.superclass.call(this,e,r);var a=this;if(this.__select=document.createElement("select"),n.isArray(o)){var s={};n.each(o,function(e){s[e]=e}),o=s}n.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){a.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return i.superclass=e,n.extend(i.prototype,e.prototype,{setValue:function(e){return e=i.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),i.superclass.prototype.updateDisplay.call(this)}}),i}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(e,t){var n=function(e,i,r){n.superclass.call(this,e,i),r=r||{},this.__min=r.min,this.__max=r.max,this.__step=r.step,e=(e=this.__impliedStep=t.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step).toString(),this.__precision=e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0};return n.superclass=e,t.extend(n.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),n}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(e,t,n){var i=function(e,r,o){function a(){var e=parseFloat(u.__input.value);n.isNaN(e)||u.setValue(e)}function s(e){var t=c-e.clientY;u.setValue(u.getValue()+t*u.__impliedStep),c=e.clientY}function l(){t.unbind(window,"mousemove",s),t.unbind(window,"mouseup",l)}this.__truncationSuspended=!1,i.superclass.call(this,e,r,o);var c,u=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",a),t.bind(this.__input,"blur",function(){a(),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",s),t.bind(window,"mouseup",l),c=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(u.__truncationSuspended=!0,this.blur(),u.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=e,n.extend(i.prototype,e.prototype,{updateDisplay:function(){var e,t=this.__input;if(this.__truncationSuspended)e=this.getValue();else{e=this.getValue();var n=Math.pow(10,this.__precision);e=Math.round(e*n)/n}return t.value=e,i.superclass.prototype.updateDisplay.call(this)}}),i}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(e,t,n,i,r){var o=function(e,n,i,r,a){function s(e){e.preventDefault();var n=t.getOffset(c.__background),i=t.getWidth(c.__background);return c.setValue(c.__min+(c.__max-c.__min)*((e.clientX-n.left)/(n.left+i-n.left))),!1}function l(){t.unbind(window,"mousemove",s),t.unbind(window,"mouseup",l),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}o.superclass.call(this,e,n,{min:i,max:r,step:a});var c=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){t.bind(window,"mousemove",s),t.bind(window,"mouseup",l),s(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return o.superclass=e,o.useDefaultStyles=function(){n.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},i.extend(o.prototype,e.prototype,{updateDisplay:function(){return this.__foreground.style.width=(this.getValue()-this.__min)/(this.__max-this.__min)*100+"%",o.superclass.prototype.updateDisplay.call(this)}}),o}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common),dat.controllers.FunctionController=function(e,t,n){var i=function(e,n,r){i.superclass.call(this,e,n);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===r?"Fire":r,t.bind(this.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return i.superclass=e,n.extend(i.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),i}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(e,t,n){var i=function(e,n){i.superclass.call(this,e,n);var r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){r.setValue(!r.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return i.superclass=e,n.extend(i.prototype,e.prototype,{setValue:function(e){return e=i.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,i.superclass.prototype.updateDisplay.call(this)}}),i}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(t=t.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(dat.utils.common),dat.color.interpret=function(e,t){var n,i,r=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){return null!==(e=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i))&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){return null!==(e=e.match(/^#([A-F0-9]{6})$/i))&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:e},CSS_RGB:{read:function(e){return null!==(e=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/))&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:e},CSS_RGBA:{read:function(e){return null!==(e=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/))&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){i=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(r,function(r){if(r.litmus(e))return t.each(r.conversions,function(r,o){if(n=r.read(e),!1===i&&!1!==n)return i=n,n.conversionName=o,n.conversion=r,t.BREAK}),t.BREAK}),i}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(e,t,n,i,r,o,a,s,l,c,u,h,d,f,p){function m(e,t,n,o){if(void 0===t[n])throw Error("Object "+t+' has no property "'+n+'"');o.color?t=new u(t,n):(t=[t,n].concat(o.factoryArgs),t=i.apply(e,t)),o.before instanceof r&&(o.before=o.before.__li),E(e,t),f.addClass(t.domElement,"c"),n=document.createElement("span"),f.addClass(n,"property-name"),n.innerHTML=t.property;var a=document.createElement("div");return a.appendChild(n),a.appendChild(t.domElement),o=g(e,a,o.before),f.addClass(o,L.CLASS_CONTROLLER_ROW),f.addClass(o,typeof t.getValue()),v(e,o,t),e.__controllers.push(t),t}function g(e,t,n){var i=document.createElement("li");return t&&i.appendChild(t),n?e.__ul.insertBefore(i,params.before):e.__ul.appendChild(i),e.onResize(),i}function v(e,t,n){if(n.__li=t,n.__gui=e,p.extend(n,{options:function(t){return arguments.length>1?(n.remove(),m(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[p.toArray(arguments)]})):p.isArray(t)||p.isObject(t)?(n.remove(),m(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof l){var i=new s(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});p.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=n[e],r=i[e];n[e]=i[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),r.apply(i,e)}}),f.addClass(t,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof s){var r=function(t){return p.isNumber(n.__min)&&p.isNumber(n.__max)?(n.remove(),m(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=p.compose(r,n.min),n.max=p.compose(r,n.max)}else n instanceof o?(f.bind(t,"click",function(){f.fakeEvent(n.__checkbox,"click")}),f.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof a?(f.bind(t,"click",function(){f.fakeEvent(n.__button,"click")}),f.bind(t,"mouseover",function(){f.addClass(n.__button,"hover")}),f.bind(t,"mouseout",function(){f.removeClass(n.__button,"hover")})):n instanceof u&&(f.addClass(t,"color"),n.updateDisplay=p.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=p.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&w(e.getRoot(),!0),t},n.setValue)}function E(e,t){var n=e.getRoot(),i=n.__rememberedObjects.indexOf(t.object);if(-1!=i){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[t.property]=t,n.load&&n.load.remembered){if((n=n.load.remembered)[e.preset])n=n[e.preset];else{if(!n[S])return;n=n[S]}n[i]&&void 0!==n[i][t.property]&&(i=n[i][t.property],t.initialValue=i,t.setValue(i))}}}function y(e){a=e.__save_row=document.createElement("li");f.addClass(e.domElement,"has-save"),e.__ul.insertBefore(a,e.__ul.firstChild),f.addClass(a,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",f.addClass(t,"button gears");var n=document.createElement("span");n.innerHTML="Save",f.addClass(n,"button"),f.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New",f.addClass(i,"button"),f.addClass(i,"save-as");var r=document.createElement("span");r.innerHTML="Revert",f.addClass(r,"button"),f.addClass(r,"revert");var o=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?p.each(e.load.remembered,function(t,n){_(e,n,n==e.preset)}):_(e,S,!1),f.bind(o,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),a.appendChild(o),a.appendChild(t),a.appendChild(n),a.appendChild(i),a.appendChild(r),H){var a=document.getElementById("dg-save-locally"),s=document.getElementById("dg-local-explain");a.style.display="block",a=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(document.location.href+".isLocal")&&a.setAttribute("checked","checked");var l=function(){s.style.display=e.useLocalStorage?"block":"none"};l(),f.bind(a,"change",function(){e.useLocalStorage=!e.useLocalStorage,l()})}var c=document.getElementById("dg-new-constructor");f.bind(c,"keydown",function(e){e.metaKey&&(67===e.which||67==e.keyCode)&&M.hide()}),f.bind(t,"click",function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),M.show(),c.focus(),c.select()}),f.bind(n,"click",function(){e.save()}),f.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),f.bind(r,"click",function(){e.revert()})}function T(e){function t(t){return t.preventDefault(),r=t.clientX,f.addClass(e.__closeButton,L.CLASS_DRAG),f.bind(window,"mousemove",n),f.bind(window,"mouseup",i),!1}function n(t){return t.preventDefault(),e.width+=r-t.clientX,e.onResize(),r=t.clientX,!1}function i(){f.removeClass(e.__closeButton,L.CLASS_DRAG),f.unbind(window,"mousemove",n),f.unbind(window,"mouseup",i)}e.__resize_handle=document.createElement("div"),p.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var r;f.bind(e.__resize_handle,"mousedown",t),f.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function x(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function b(e,t){var n={};return p.each(e.__rememberedObjects,function(i,r){var o={};p.each(e.__rememberedObjectIndecesToControllers[r],function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[r]=o}),n}function _(e,t,n){var i=document.createElement("option");i.innerHTML=t,i.value=t,e.__preset_select.appendChild(i),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function w(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function R(e){0!=e.length&&h(function(){R(e)}),p.each(e,function(e){e.updateDisplay()})}dat.utils.css.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");var H,S="Default";try{H="localStorage"in window&&null!==window.localStorage}catch(e){H=!1}var M,C,A=!0,k=!1,P=[],L=function(e){function t(){localStorage.setItem(document.location.href+".gui",JSON.stringify(n.getSaveObject()))}var n=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),f.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=e||{},e=p.defaults(e,{autoPlace:!0,width:L.DEFAULT_WIDTH}),e=p.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),p.isUndefined(e.load)?e.load={preset:S}:e.preset&&(e.load.preset=e.preset),p.isUndefined(e.parent)&&e.hideable&&P.push(this),e.resizable=p.isUndefined(e.parent)&&e.resizable,e.autoPlace&&p.isUndefined(e.scrollable)&&(e.scrollable=!0);var i=H&&"true"===localStorage.getItem(document.location.href+".isLocal");if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:e.load.preset},set:function(t){for(n.parent?n.getRoot().preset=t:e.load.preset=t,t=0;t<this.__preset_select.length;t++)this.__preset_select[t].value==this.preset&&(this.__preset_select.selectedIndex=t);n.revert()}},width:{get:function(){return e.width},set:function(t){e.width=t,x(n,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,o&&(o.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(t){e.closed=t,e.closed?f.addClass(n.__ul,L.CLASS_CLOSED):f.removeClass(n.__ul,L.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?L.TEXT_OPEN:L.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return i},set:function(e){H&&((i=e)?f.bind(window,"unload",t):f.unbind(window,"unload",t),localStorage.setItem(document.location.href+".isLocal",e))}}}),p.isUndefined(e.parent)){if(e.closed=!1,f.addClass(this.domElement,L.CLASS_MAIN),f.makeSelectable(this.domElement,!1),H&&i){n.useLocalStorage=!0;var r=localStorage.getItem(document.location.href+".gui");r&&(e.load=JSON.parse(r))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=L.TEXT_CLOSED,f.addClass(this.__closeButton,L.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),f.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===e.closed&&(e.closed=!0);var o=document.createTextNode(e.name);f.addClass(o,"controller-name"),r=g(n,o),f.addClass(this.__ul,L.CLASS_CLOSED),f.addClass(r,"title"),f.bind(r,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),e.closed||(this.closed=!1)}e.autoPlace&&(p.isUndefined(e.parent)&&(A&&(C=document.createElement("div"),f.addClass(C,"dg"),f.addClass(C,L.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(C),A=!1),C.appendChild(this.domElement),f.addClass(this.domElement,L.CLASS_AUTO_PLACE)),this.parent||x(n,e.width)),f.bind(window,"resize",function(){n.onResize()}),f.bind(this.__ul,"webkitTransitionEnd",function(){n.onResize()}),f.bind(this.__ul,"transitionend",function(){n.onResize()}),f.bind(this.__ul,"oTransitionEnd",function(){n.onResize()}),this.onResize(),e.resizable&&T(this),n.getRoot(),e.parent||function(){var e=n.getRoot();e.width+=1,p.defer(function(){e.width-=1})}()};return L.toggleHide=function(){k=!k,p.each(P,function(e){e.domElement.style.zIndex=k?-999:999,e.domElement.style.opacity=k?0:1})},L.CLASS_AUTO_PLACE="a",L.CLASS_AUTO_PLACE_CONTAINER="ac",L.CLASS_MAIN="main",L.CLASS_CONTROLLER_ROW="cr",L.CLASS_TOO_TALL="taller-than-window",L.CLASS_CLOSED="closed",L.CLASS_CLOSE_BUTTON="close-button",L.CLASS_DRAG="drag",L.DEFAULT_WIDTH=245,L.TEXT_CLOSED="Close Controls",L.TEXT_OPEN="Open Controls",f.bind(window,"keydown",function(e){"text"!==document.activeElement.type&&(72===e.which||72==e.keyCode)&&L.toggleHide()},!1),p.extend(L.prototype,{add:function(e,t){return m(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return m(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;p.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&C.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};return t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]),t=new L(t),this.__folders[e]=t,e=g(this,t.domElement),f.addClass(e,"folder"),t},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=f.getOffset(e.__ul).top,n=0;p.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=f.getHeight(t))}),window.innerHeight-t-20<n?(f.addClass(e.domElement,L.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(f.removeClass(e.domElement,L.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&p.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(p.isUndefined(M)&&(M=new d,M.domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw Error("You can only call remember on a top level GUI.");var e=this;p.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&y(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&x(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=b(this)),e.folders={},p.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=b(this),w(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[S]=b(this,!0)),this.load.remembered[e]=b(this),this.preset=e,_(this,e,!0)},revert:function(e){p.each(this.__controllers,function(t){this.getRoot().load.remembered?E(e||this.getRoot(),t):t.setValue(t.initialValue)},this),p.each(this.__folders,function(e){e.revert(e)}),e||w(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&R(this.__listening)}}),L}(0,0,0,dat.controllers.factory=function(e,t,n,i,r,o,a){return function(s,l,c,u){var h=s[l];return a.isArray(c)||a.isObject(c)?new e(s,l,c):a.isNumber(h)?a.isNumber(c)&&a.isNumber(u)?new n(s,l,c,u):new t(s,l,{min:c,max:u}):a.isString(h)?new i(s,l):a.isFunction(h)?new r(s,l,""):a.isBoolean(h)?new o(s,l):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(e,t,n){var i=function(e,n){function r(){o.setValue(o.__input.value)}i.superclass.call(this,e,n);var o=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",r),t.bind(this.__input,"change",r),t.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=e,n.extend(i.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),i.superclass.prototype.updateDisplay.call(this)}}),i}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(e,t,n,i,r){function o(e,t,n,i){e.style.background="",r.each(l,function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+n+" 0%, "+i+" 100%); "})}function a(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var s=function(e,l){function c(e){f(e),t.bind(window,"mousemove",f),t.bind(window,"mouseup",u)}function u(){t.unbind(window,"mousemove",f),t.unbind(window,"mouseup",u)}function h(){var e=i(this.value);!1!==e?(m.__color.__state=e,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function d(){t.unbind(window,"mousemove",p),t.unbind(window,"mouseup",d)}function f(e){e.preventDefault();var n=t.getWidth(m.__saturation_field),i=t.getOffset(m.__saturation_field),r=(e.clientX-i.left+document.body.scrollLeft)/n;return(e=1-(e.clientY-i.top+document.body.scrollTop)/n)>1?e=1:e<0&&(e=0),r>1?r=1:r<0&&(r=0),m.__color.v=e,m.__color.s=r,m.setValue(m.__color.toOriginal()),!1}function p(e){e.preventDefault();var n=t.getHeight(m.__hue_field),i=t.getOffset(m.__hue_field);return(e=1-(e.clientY-i.top+document.body.scrollTop)/n)>1?e=1:e<0&&(e=0),m.__color.h=360*e,m.setValue(m.__color.toOriginal()),!1}s.superclass.call(this,e,l),this.__color=new n(this.getValue()),this.__temp=new n(0);var m=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),t.bind(this.__input,"blur",h),t.bind(this.__selector,"mousedown",function(){t.addClass(this,"drag").bind(window,"mouseup",function(){t.removeClass(m.__selector,"drag")})});var g=document.createElement("div");r.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),r.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),r.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),r.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),r.extend(g.style,{width:"100%",height:"100%",background:"none"}),o(g,"top","rgba(0,0,0,0)","#000"),r.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),a(this.__hue_field),r.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",c),t.bind(this.__field_knob,"mousedown",c),t.bind(this.__hue_field,"mousedown",function(e){p(e),t.bind(window,"mousemove",p),t.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(g),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};s.superclass=e,r.extend(s.prototype,e.prototype,{updateDisplay:function(){var e=i(this.getValue());if(!1!==e){var t=!1;r.each(n.COMPONENTS,function(n){if(!r.isUndefined(e[n])&&!r.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&r.extend(this.__color.__state,e)}r.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,s=255-a;r.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),r.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+s+","+s+","+s+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return s}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(e,t,n,i){function r(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(a(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(a(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(s(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(s(this),this.__state.space="HSV"),this.__state[t]=e}})}function a(e,n,r){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,r);else{if("HSV"!==e.__state.space)throw"Corrupted color state";i.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function s(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);i.extend(e.__state,{s:n.s,v:n.v}),i.isNaN(n.h)?i.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var l=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return l.COMPONENTS="r,g,b,h,s,v,hex,a".split(","),i.extend(l.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),r(l.prototype,"r",2),r(l.prototype,"g",1),r(l.prototype,"b",0),o(l.prototype,"h"),o(l.prototype,"s"),o(l.prototype,"v"),Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(l.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),l}(dat.color.interpret,dat.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var i=e/60-Math.floor(e/60),r=n*(1-t),o=n*(1-i*t);return{r:255*(e=[[n,t=n*(1-(1-i)*t),r],[o,n,r],[r,n,t],[r,o,n],[t,r,n],[n,r,o]][Math.floor(e/60)%6])[0],g:255*e[1],b:255*e[2]}},rgb_to_hsv:function(e,t,n){var i=Math.min(e,t,n),r=Math.max(e,t,n),i=r-i;return 0==r?{h:NaN,s:0,v:0}:(e=e==r?(t-n)/i:t==r?2+(n-e)/i:4+(e-t)/i,(e/=6)<0&&(e+=1),{h:360*e,s:i/r,v:r/255})},rgb_to_hex:function(e,t,n){return e=this.hex_with_component(0,2,e),e=this.hex_with_component(e,1,t),e=this.hex_with_component(e,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,i){return i<<(e=8*n)|t&~(255<<e)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},dat.dom.CenteredDiv=function(e,t){var n=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var t=this,n=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},n}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common),function(e,t,n){function i(n,o){if(!t[n]){if(!e[n]){var a="function"==typeof require&&require;if(!o&&a)return a(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var s=t[n]={exports:{}};e[n][0].call(s.exports,function(t){var r=e[n][1][t];return i(r||t)},s,s.exports)}return t[n].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o])}({1:[function(e,t,n){var i=e("./protocol").chooseProtocol,r=e("events").EventEmitter,o=e("underscore"),a=t.exports=function(e){this.opts=o.defaults(e||{},{host:"127.0.0.1",enableGestures:!1,port:6437,enableHeartbeat:!0,heartbeatInterval:100,requestProtocolVersion:3}),this.host=this.opts.host,this.port=this.opts.port,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.opts.enableHeartbeat&&this.startHeartbeat()}),this.on("disconnect",function(){this.opts.enableHeartbeat&&this.stopHeartbeat()}),this.heartbeatTimer=null};a.prototype.getUrl=function(){return"ws://"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},a.prototype.sendHeartbeat=function(){this.protocol&&(this.setHeartbeatState(!0),this.protocol.sendHeartbeat(this))},a.prototype.handleOpen=function(){!0!==this.connected&&(this.connected=!0,this.emit("connect"))},a.prototype.enableGestures=function(e){this.gesturesEnabled=!!e,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},a.prototype.handleClose=function(){this.connected&&(this.disconnect(),this.startReconnection())},a.prototype.startReconnection=function(){var e=this;setTimeout(function(){e.connect()},1e3)},a.prototype.disconnect=function(){this.socket&&(this.socket.close(),this.connected=!1,delete this.socket,delete this.protocol,this.emit("disconnect"))},a.prototype.handleData=function(e){var t,n=JSON.parse(e);void 0===this.protocol?(t=this.protocol=i(n),this.emit("ready")):t=this.protocol(n),this.emit(t.type,t)},a.prototype.connect=function(){if(!this.socket)return this.socket=this.setupSocket(),!0},a.prototype.send=function(e){this.socket.send(e)},a.prototype.stopHeartbeat=function(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),delete this.heartbeatTimer,this.setHeartbeatState(!1))},a.prototype.setHeartbeatState=function(e){this.heartbeatState!==e&&(this.heartbeatState=e,this.emit(this.heartbeatState?"focus":"blur"))},o.extend(a.prototype,r.prototype)},{"./protocol":12,events:17,underscore:20}],2:[function(e,t,n){var i=t.exports=function(e){this.pos=0,this._buf=[],this.size=e};i.prototype.get=function(e){if(void 0==e&&(e=0),!(e>=this.size||e>=this._buf.length))return this._buf[(this.pos-e-1)%this.size]},i.prototype.push=function(e){return this._buf[this.pos%this.size]=e,this.pos++}},{}],3:[function(e,t,n){var i=t.exports=e("./base_connection");i.prototype.setupSocket=function(){var e=this,t=new WebSocket(this.getUrl());return t.onopen=function(){e.handleOpen()},t.onmessage=function(t){e.handleData(t.data)},t.onclose=function(){e.handleClose()},t},i.prototype.startHeartbeat=function(){if(this.protocol.sendHeartbeat&&!this.heartbeatTimer){var e=this,t=null;t=void 0!==document.hidden?"hidden":void 0!==document.mozHidden?"mozHidden":void 0!==document.msHidden?"msHidden":void 0!==document.webkitHidden?"webkitHidden":void 0;var n=!0,i=window.addEventListener("focus",function(e){n=!0}),r=window.addEventListener("blur",function(e){n=!1});this.on("disconnect",function(){e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),delete e.heartbeatTimer),window.removeEventListener("focus",i),window.removeEventListener("blur",r)}),this.heartbeatTimer=setInterval(function(){(void 0===t||!1===document[t])&&n?e.sendHeartbeat():e.setHeartbeatState(!1)},this.opts.heartbeatInterval)}}},{"./base_connection":1}],4:[function(e,t,n){!function(n){var i=e("./frame"),r=e("./circular_buffer"),o=e("./pipeline"),a=e("events").EventEmitter,s=e("./gesture").gestureListener,l=e("underscore"),c=t.exports=function(t){var o=void 0!==n&&"node"===n.title;t=l.defaults(t||{},{inNode:o}),this.inNode=t.inNode,t=l.defaults(t||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!1}),this.suppressAnimationLoop=t.suppressAnimationLoop,this.frameEventName=t.frameEventName,this.history=new r(200),this.lastFrame=i.Invalid,this.lastValidFrame=i.Invalid,this.lastConnectionFrame=i.Invalid,this.accumulatedGestures=[],void 0===t.connectionType?this.connectionType=e(this.inBrowser()?"./connection":"./node_connection"):this.connectionType=t.connectionType,this.connection=new this.connectionType(t),this.setupConnectionEvents()};c.prototype.gesture=function(e,t){var n=s(this,e);return void 0!==t&&n.stop(t),n},c.prototype.inBrowser=function(){return!this.inNode},c.prototype.useAnimationLoop=function(){return this.inBrowser()&&"undefined"==typeof chrome},c.prototype.connect=function(){var e=this;if(this.connection.connect()&&this.inBrowser()&&!e.suppressAnimationLoop){var t=function(){e.emit("animationFrame",e.lastConnectionFrame),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}},c.prototype.disconnect=function(){this.connection.disconnect()},c.prototype.frame=function(e){return this.history.get(e)||i.Invalid},c.prototype.loop=function(e){switch(e.length){case 1:this.on(this.frameEventName,e);break;case 2:var t=this,n=function(i){e(i,function(){t.lastFrame!=i?n(t.lastFrame):t.once(t.frameEventName,n)})};this.once(this.frameEventName,n)}this.connect()},c.prototype.addStep=function(e){this.pipeline||(this.pipeline=new o(this)),this.pipeline.addStep(e)},c.prototype.processFrame=function(e){e.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(e.gestures)),this.pipeline&&((e=this.pipeline.run(e))||(e=i.Invalid)),this.lastConnectionFrame=e,this.emit("deviceFrame",e)},c.prototype.processFinishedFrame=function(e){if(this.lastFrame=e,e.valid&&(this.lastValidFrame=e),e.controller=this,e.historyIdx=this.history.push(e),e.gestures){e.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var t=0;t!=e.gestures.length;t++)this.emit("gesture",e.gestures[t],e)}this.emit("frame",e)},c.prototype.setupConnectionEvents=function(){var e=this;this.connection.on("frame",function(t){e.processFrame(t)}),this.on(this.frameEventName,function(t){e.processFinishedFrame(t)}),this.connection.on("disconnect",function(){e.emit("disconnect")}),this.connection.on("ready",function(){e.emit("ready")}),this.connection.on("connect",function(){e.emit("connect")}),this.connection.on("focus",function(){e.emit("focus")}),this.connection.on("blur",function(){e.emit("blur")}),this.connection.on("protocol",function(t){e.emit("protocol",t)}),this.connection.on("deviceConnect",function(t){e.emit(t.state?"deviceConnected":"deviceDisconnected")})},l.extend(c.prototype,a.prototype)}(e("__browserify_process"))},{"./circular_buffer":2,"./connection":3,"./frame":5,"./gesture":6,"./node_connection":16,"./pipeline":10,__browserify_process:18,events:17,underscore:20}],5:[function(e,t,n){var i=e("./hand"),r=e("./pointable"),o=e("./gesture").createGesture,a=e("gl-matrix"),s=a.mat3,l=a.vec3,c=e("./interaction_box"),u=e("underscore"),h=t.exports=function(e){this.valid=!0,this.id=e.id,this.timestamp=e.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],e.interactionBox&&(this.interactionBox=new c(e.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=e.t,this._rotation=u.flatten(e.r),this._scaleFactor=e.s,this.data=e,this.type="frame",this.currentFrameRate=e.currentFrameRate;for(var t={},n=0,a=e.hands.length;n!=a;n++)(d=new i(e.hands[n])).frame=this,this.hands.push(d),this.handsMap[d.id]=d,t[d.id]=n;for(var s=0,l=e.pointables.length;s!=l;s++){var h=new r(e.pointables[s]);if(h.frame=this,this.pointables.push(h),this.pointablesMap[h.id]=h,(h.tool?this.tools:this.fingers).push(h),void 0!==h.handId&&t.hasOwnProperty(h.handId)){var d=this.hands[t[h.handId]];d.pointables.push(h),(h.tool?d.tools:d.fingers).push(h)}}if(e.gestures)for(var f=0,p=e.gestures.length;f!=p;f++)this.gestures.push(o(e.gestures[f]))};h.prototype.tool=function(e){var t=this.pointable(e);return t.tool?t:r.Invalid},h.prototype.pointable=function(e){return this.pointablesMap[e]||r.Invalid},h.prototype.finger=function(e){var t=this.pointable(e);return t.tool?r.Invalid:t},h.prototype.hand=function(e){return this.handsMap[e]||i.Invalid},h.prototype.rotationAngle=function(e,t){if(!this.valid||!e.valid)return 0;var n=this.rotationMatrix(e),i=.5*(n[0]+n[4]+n[8]-1),r=Math.acos(i);if(r=isNaN(r)?0:r,void 0!==t){var o=this.rotationAxis(e);r*=l.dot(o,l.normalize(l.create(),t))}return r},h.prototype.rotationAxis=function(e){return this.valid&&e.valid?l.normalize(l.create(),[this._rotation[7]-e._rotation[5],this._rotation[2]-e._rotation[6],this._rotation[3]-e._rotation[1]]):l.create()},h.prototype.rotationMatrix=function(e){if(!this.valid||!e.valid)return s.create();var t=s.transpose(s.create(),this._rotation);return s.multiply(s.create(),e._rotation,t)},h.prototype.scaleFactor=function(e){return this.valid&&e.valid?Math.exp(this._scaleFactor-e._scaleFactor):1},h.prototype.translation=function(e){return this.valid&&e.valid?l.subtract(l.create(),this._translation,e._translation):l.create()},h.prototype.toString=function(){var e="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(e+=" | Gesture count:("+this.gestures.length+")"),e+=" ]"},h.prototype.dump=function(){var e="";e+="Frame Info:<br/>",e+=this.toString(),e+="<br/><br/>Hands:<br/>";for(var t=0,n=this.hands.length;t!=n;t++)e+="  "+this.hands[t].toString()+"<br/>";e+="<br/><br/>Pointables:<br/>";for(var i=0,r=this.pointables.length;i!=r;i++)e+="  "+this.pointables[i].toString()+"<br/>";if(this.gestures){e+="<br/><br/>Gestures:<br/>";for(var o=0,a=this.gestures.length;o!=a;o++)e+="  "+this.gestures[o].toString()+"<br/>"}return e+="<br/><br/>Raw JSON:<br/>",e+=JSON.stringify(this.data)},h.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return r.Invalid},finger:function(){return r.Invalid},hand:function(){return i.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return s.create()},rotationAxis:function(){return l.create()},scaleFactor:function(){return 1},translation:function(){return l.create()}}},{"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"gl-matrix":19,underscore:20}],6:[function(e,t,n){e("gl-matrix").vec3;var i=e("events").EventEmitter,r=e("underscore"),o=(n.createGesture=function(e){var t;switch(e.type){case"circle":t=new a(e);break;case"swipe":t=new s(e);break;case"screenTap":t=new l(e);break;case"keyTap":t=new c(e);break;default:throw"unkown gesture type"}return t.id=e.id,t.handIds=e.handIds,t.pointableIds=e.pointableIds,t.duration=e.duration,t.state=e.state,t.type=e.type,t},n.gestureListener=function(e,t){var n={},i={};e.on("gesture",function(e,a){if(e.type==t){if(("start"==e.state||"stop"==e.state)&&void 0===i[e.id]){var s=new o(e,a);i[e.id]=s,r.each(n,function(e,t){s.on(t,e)})}i[e.id].update(e,a),"stop"==e.state&&delete i[e.id]}});var a={start:function(e){return n.start=e,a},stop:function(e){return n.stop=e,a},complete:function(e){return n.stop=e,a},update:function(e){return n.update=e,a}};return a},n.Gesture=function(e,t){this.gestures=[e],this.frames=[t]});o.prototype.update=function(e,t){this.gestures.push(e),this.frames.push(t),this.emit(e.state,this)},r.extend(o.prototype,i.prototype);var a=function(e){this.center=e.center,this.normal=e.normal,this.progress=e.progress,this.radius=e.radius};a.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var s=function(e){this.startPosition=e.startPosition,this.position=e.position,this.direction=e.direction,this.speed=e.speed};s.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var l=function(e){this.position=e.position,this.direction=e.direction,this.progress=e.progress};l.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var c=function(e){this.position=e.position,this.direction=e.direction,this.progress=e.progress};c.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:17,"gl-matrix":19,underscore:20}],7:[function(e,t,n){var i=e("./pointable"),r=e("gl-matrix"),o=r.mat3,a=r.vec3,s=e("underscore"),l=t.exports=function(e){this.id=e.id,this.palmPosition=e.palmPosition,this.direction=e.direction,this.palmVelocity=e.palmVelocity,this.palmNormal=e.palmNormal,this.sphereCenter=e.sphereCenter,this.sphereRadius=e.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],this.tools=[],this._translation=e.t,this._rotation=s.flatten(e.r),this._scaleFactor=e.s,this.timeVisible=e.timeVisible,this.stabilizedPalmPosition=e.stabilizedPalmPosition};l.prototype.finger=function(e){var t=this.frame.finger(e);return t&&t.handId==this.id?t:i.Invalid},l.prototype.rotationAngle=function(e,t){if(!this.valid||!e.valid)return 0;if(!e.hand(this.id).valid)return 0;var n=this.rotationMatrix(e),i=.5*(n[0]+n[4]+n[8]-1),r=Math.acos(i);if(r=isNaN(r)?0:r,void 0!==t){var o=this.rotationAxis(e);r*=a.dot(o,a.normalize(a.create(),t))}return r},l.prototype.rotationAxis=function(e){if(!this.valid||!e.valid)return a.create();var t=e.hand(this.id);return t.valid?a.normalize(a.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):a.create()},l.prototype.rotationMatrix=function(e){if(!this.valid||!e.valid)return o.create();var t=e.hand(this.id);if(!t.valid)return o.create();var n=o.transpose(o.create(),this._rotation);return o.multiply(o.create(),t._rotation,n)},l.prototype.scaleFactor=function(e){if(!this.valid||!e.valid)return 1;var t=e.hand(this.id);return t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},l.prototype.translation=function(e){if(!this.valid||!e.valid)return a.create();var t=e.hand(this.id);return t.valid?[this._translation[0]-t._translation[0],this._translation[1]-t._translation[1],this._translation[2]-t._translation[2]]:a.create()},l.prototype.toString=function(){return"Hand [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},l.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},l.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},l.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},l.Invalid={valid:!1,fingers:[],tools:[],pointables:[],pointable:function(){return i.Invalid},finger:function(){return i.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return o.create()},rotationAxis:function(){return a.create()},scaleFactor:function(){return 1},translation:function(){return a.create()}}},{"./pointable":11,"gl-matrix":19,underscore:20}],8:[function(e,t,n){t.exports={Controller:e("./controller"),Frame:e("./frame"),Gesture:e("./gesture"),Hand:e("./hand"),Pointable:e("./pointable"),InteractionBox:e("./interaction_box"),Connection:e("./connection"),CircularBuffer:e("./circular_buffer"),UI:e("./ui"),glMatrix:e("gl-matrix"),mat3:e("gl-matrix").mat3,vec3:e("gl-matrix").vec3,loopController:void 0,loop:function(e,t){return void 0===t&&(t=e,e={}),this.loopController||(this.loopController=new this.Controller(e)),this.loopController.loop(t),this.loopController}}},{"./circular_buffer":2,"./connection":3,"./controller":4,"./frame":5,"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"./ui":13,"gl-matrix":19}],9:[function(e,t,n){var i=e("gl-matrix").vec3,r=t.exports=function(e){this.valid=!0,this.center=e.center,this.size=e.size,this.width=e.size[0],this.height=e.size[1],this.depth=e.size[2]};r.prototype.denormalizePoint=function(e){return i.fromValues((e[0]-.5)*this.size[0]+this.center[0],(e[1]-.5)*this.size[1]+this.center[1],(e[2]-.5)*this.size[2]+this.center[2])},r.prototype.normalizePoint=function(e,t){var n=i.fromValues((e[0]-this.center[0])/this.size[0]+.5,(e[1]-this.center[1])/this.size[1]+.5,(e[2]-this.center[2])/this.size[2]+.5);return t&&(n[0]=Math.min(Math.max(n[0],0),1),n[1]=Math.min(Math.max(n[1],0),1),n[2]=Math.min(Math.max(n[2],0),1)),n},r.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},r.Invalid={valid:!1}},{"gl-matrix":19}],10:[function(e,t,n){var i=t.exports=function(){this.steps=[]};i.prototype.addStep=function(e){this.steps.push(e)},i.prototype.run=function(e){for(var t=this.steps.length,n=0;n!=t&&e;n++)e=this.steps[n](e);return e}},{}],11:[function(e,t,n){e("gl-matrix").vec3;var i=t.exports=function(e){this.valid=!0,this.id=e.id,this.handId=e.handId,this.length=e.length,this.tool=e.tool,this.width=e.width,this.direction=e.direction,this.stabilizedTipPosition=e.stabilizedTipPosition,this.tipPosition=e.tipPosition,this.tipVelocity=e.tipVelocity,this.touchZone=e.touchZone,this.touchDistance=e.touchDistance,this.timeVisible=e.timeVisible};i.prototype.toString=function(){return 1==this.tool?"Pointable [ id:"+this.id+" "+this.length+"mmx | with:"+this.width+"mm | direction:"+this.direction+" ]":"Pointable [ id:"+this.id+" "+this.length+"mmx | direction: "+this.direction+" ]"},i.Invalid={valid:!1}},{"gl-matrix":19}],12:[function(e,t,n){var i=e("./frame"),r=function(e){this.type=e.type,this.state=e.state},o=(n.chooseProtocol=function(e){var t;switch(e.version){case 1:t=o(1,function(e){return new i(e)});break;case 2:(t=o(2,function(e){return new i(e)})).sendHeartbeat=function(e){e.send(t.encode({heartbeat:!0}))};break;case 3:(t=o(3,function(e){return e.event?new r(e.event):new i(e)})).sendHeartbeat=function(e){e.send(t.encode({heartbeat:!0}))};break;default:throw"unrecognized version"}return t},function(e,t){var n=t;return n.encode=function(e){return JSON.stringify(e)},n.version=e,n.versionLong="Version "+e,n.type="protocol",n})},{"./frame":5}],13:[function(e,t,n){n.UI={Region:e("./ui/region"),Cursor:e("./ui/cursor")}},{"./ui/cursor":14,"./ui/region":15}],14:[function(e,t,n){t.exports=function(){return function(e){var t=e.pointables.sort(function(e,t){return e.z-t.z})[0];return t&&t.valid&&(e.cursorPosition=t.tipPosition),e}}},{}],15:[function(e,t,n){var i=e("events").EventEmitter,r=e("underscore"),o=t.exports=function(e,t){this.start=new Vector(e),this.end=new Vector(t),this.enteredFrame=null};o.prototype.hasPointables=function(e){for(var t=0;t!=e.pointables.length;t++){var n=e.pointables[t].tipPosition;if(n.x>=this.start.x&&n.x<=this.end.x&&n.y>=this.start.y&&n.y<=this.end.y&&n.z>=this.start.z&&n.z<=this.end.z)return!0}return!1},o.prototype.listener=function(e){var t=this;return e&&e.nearThreshold&&this.setupNearRegion(e.nearThreshold),function(e){return t.updatePosition(e)}},o.prototype.clipper=function(){var e=this;return function(t){return e.updatePosition(t),e.enteredFrame?t:null}},o.prototype.setupNearRegion=function(e){var t=this.nearRegion=new o([this.start.x-e,this.start.y-e,this.start.z-e],[this.end.x+e,this.end.y+e,this.end.z+e]),n=this;t.on("enter",function(e){n.emit("near",e)}),t.on("exit",function(e){n.emit("far",e)}),n.on("exit",function(e){n.emit("near",e)})},o.prototype.updatePosition=function(e){return this.nearRegion&&this.nearRegion.updatePosition(e),this.hasPointables(e)&&null==this.enteredFrame?(this.enteredFrame=e,this.emit("enter",this.enteredFrame)):this.hasPointables(e)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),e},o.prototype.normalize=function(e){return new Vector([(e.x-this.start.x)/(this.end.x-this.start.x),(e.y-this.start.y)/(this.end.y-this.start.y),(e.z-this.start.z)/(this.end.z-this.start.z)])},o.prototype.mapToXY=function(e,t,n){var i=this.normalize(e),r=i.x,o=i.y;return r>1?r=1:r<-1&&(r=-1),o>1?o=1:o<-1&&(o=-1),[(r+1)/2*t,(1-o)/2*n,i.z]},r.extend(o.prototype,i.prototype)},{events:17,underscore:20}],16:[function(e,t,n){},{}],17:[function(e,t,n){!function(e){function t(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}e.EventEmitter||(e.EventEmitter=function(){});var i=n.EventEmitter=e.EventEmitter,r="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};i.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},i.prototype.emit=function(e){if("error"===e&&(!this._events||!this._events.error||r(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1);t.apply(this,n)}return!0}if(r(t)){for(var n=Array.prototype.slice.call(arguments,1),i=t.slice(),o=0,a=i.length;o<a;o++)i[o].apply(this,n);return!0}return!1},i.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",e,t),this._events[e])if(r(this._events[e])){if(!this._events[e].warned){var n;(n=void 0!==this._events.maxListeners?this._events.maxListeners:10)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];else this._events[e]=t;return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){var n=this;return n.on(e,function i(){n.removeListener(e,i),t.apply(this,arguments)}),this},i.prototype.removeListener=function(e,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var i=this._events[e];if(r(i)){var o=t(i,n);if(o<0)return this;i.splice(o,1),0==i.length&&delete this._events[e]}else this._events[e]===n&&delete this._events[e];return this},i.prototype.removeAllListeners=function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},i.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),r(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}(e("__browserify_process"))},{__browserify_process:18}],18:[function(e,t,n){var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){e.source===window&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0&&n.shift()())},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],19:[function(e,t,n){!function(){"use strict";var e={};void 0===n?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e.exports={},define(function(){return e.exports})):e.exports=window:e.exports=n,function(e){var t={};if(!d)d=1e-6;t.create=function(){return new Float32Array(2)},t.clone=function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var n=new Float32Array(2);return n[0]=e,n[1]=t,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,n){return e[0]=t,e[1]=n,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},t.sub=t.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},t.mul=t.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},t.div=t.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},t.dist=t.distance=function(e,t){var n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)},t.sqrDist=t.squaredDistance=function(e,t){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i},t.len=t.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},t.sqrLen=t.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.normalize=function(e,t){var n=t[0],i=t[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,n){var i=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=i,e},t.lerp=function(e,t,n,i){var r=t[0],o=t[1];return e[0]=r+i*(n[0]-r),e[1]=o+i*(n[1]-o),e},t.transformMat2=function(e,t,n){var i=t[0],r=t[1];return e[0]=i*n[0]+r*n[1],e[1]=i*n[2]+r*n[3],e},t.forEach=function(){var e=new Float32Array(2);return function(t,n,i,r,o,a){var s,l;for(n||(n=2),i||(i=0),l=r?Math.min(r*n+i,t.length):t.length,s=i;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},void 0!==e&&(e.vec2=t);var n={};if(!d)d=1e-6;n.create=function(){return new Float32Array(3)},n.clone=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},n.fromValues=function(e,t,n){var i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=n,i},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},n.set=function(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},n.sub=n.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},n.mul=n.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},n.div=n.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},n.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},n.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},n.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},n.dist=n.distance=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(n*n+i*i+r*r)},n.sqrDist=n.squaredDistance=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return n*n+i*i+r*r},n.len=n.length=function(e){var t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)},n.sqrLen=n.squaredLength=function(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i},n.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},n.normalize=function(e,t){var n=t[0],i=t[1],r=t[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},n.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},n.cross=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=r*l-o*s,e[1]=o*a-i*l,e[2]=i*s-r*a,e},n.lerp=function(e,t,n,i){var r=t[0],o=t[1],a=t[2];return e[0]=r+i*(n[0]-r),e[1]=o+i*(n[1]-o),e[2]=a+i*(n[2]-a),e},n.transformMat4=function(e,t,n){var i=t[0],r=t[1],o=t[2];return e[0]=n[0]*i+n[4]*r+n[8]*o+n[12],e[1]=n[1]*i+n[5]*r+n[9]*o+n[13],e[2]=n[2]*i+n[6]*r+n[10]*o+n[14],e},n.transformQuat=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*i+s*o-l*r,h=c*r+l*i-a*o,d=c*o+a*r-s*i,f=-a*i-s*r-l*o;return e[0]=u*c+f*-a+h*-l-d*-s,e[1]=h*c+f*-s+d*-a-u*-l,e[2]=d*c+f*-l+u*-s-h*-a,e},n.forEach=function(){var e=new Float32Array(3);return function(t,n,i,r,o,a){var s,l;for(n||(n=3),i||(i=0),l=r?Math.min(r*n+i,t.length):t.length,s=i;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),n.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},void 0!==e&&(e.vec3=n);var i={};if(!d)d=1e-6;i.create=function(){return new Float32Array(4)},i.clone=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.fromValues=function(e,t,n,i){var r=new Float32Array(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.set=function(e,t,n,i,r){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},i.sub=i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},i.mul=i.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},i.div=i.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},i.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},i.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},i.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},i.dist=i.distance=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+i*i+r*r+o*o)},i.sqrDist=i.squaredDistance=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],o=t[3]-e[3];return n*n+i*i+r*r+o*o},i.len=i.length=function(e){var t=e[0],n=e[1],i=e[2],r=e[3];return Math.sqrt(t*t+n*n+i*i+r*r)},i.sqrLen=i.squaredLength=function(e){var t=e[0],n=e[1],i=e[2],r=e[3];return t*t+n*n+i*i+r*r},i.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},i.normalize=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a),e},i.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},i.lerp=function(e,t,n,i){var r=t[0],o=t[1],a=t[2],s=t[3];return e[0]=r+i*(n[0]-r),e[1]=o+i*(n[1]-o),e[2]=a+i*(n[2]-a),e[3]=s+i*(n[3]-s),e},i.transformMat4=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,e[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,e[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,e[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,e},i.transformQuat=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*i+s*o-l*r,h=c*r+l*i-a*o,d=c*o+a*r-s*i,f=-a*i-s*r-l*o;return e[0]=u*c+f*-a+h*-l-d*-s,e[1]=h*c+f*-s+d*-a-u*-l,e[2]=d*c+f*-l+u*-s-h*-a,e},i.forEach=function(){var e=new Float32Array(4);return function(t,n,i,r,o,a){var s,l;for(n||(n=4),i||(i=0),l=r?Math.min(r*n+i,t.length):t.length,s=i;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),i.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},void 0!==e&&(e.vec4=i);var r={},o=new Float32Array([1,0,0,1]);if(!d)d=1e-6;r.create=function(){return new Float32Array(o)},r.clone=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},r.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},r.invert=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=n*o-r*i;return a?(a=1/a,e[0]=o*a,e[1]=-i*a,e[2]=-r*a,e[3]=n*a,e):null},r.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},r.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},r.mul=r.multiply=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=i*s+r*c,e[1]=i*l+r*u,e[2]=o*s+a*c,e[3]=o*l+a*u,e},r.rotate=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l+r*s,e[1]=i*-s+r*l,e[2]=o*l+a*s,e[3]=o*-s+a*l,e},r.scale=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=n[0],l=n[1];return e[0]=i*s,e[1]=r*l,e[2]=o*s,e[3]=a*l,e},r.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},void 0!==e&&(e.mat2=r);var a={},s=new Float32Array([1,0,0,0,1,0,0,0,1]);if(!d)d=1e-6;a.create=function(){return new Float32Array(s)},a.clone=function(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.transpose=function(e,t){if(e===t){var n=t[1],i=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=i,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},a.invert=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*a-s*c,d=-u*o+s*l,f=c*o-a*l,p=n*h+i*d+r*f;return p?(p=1/p,e[0]=h*p,e[1]=(-u*i+r*c)*p,e[2]=(s*i-r*a)*p,e[3]=d*p,e[4]=(u*n-r*l)*p,e[5]=(-s*n+r*o)*p,e[6]=f*p,e[7]=(-c*n+i*l)*p,e[8]=(a*n-i*o)*p,e):null},a.adjoint=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=r*c-i*u,e[2]=i*s-r*a,e[3]=s*l-o*u,e[4]=n*u-r*l,e[5]=r*o-n*s,e[6]=o*c-a*l,e[7]=i*l-n*c,e[8]=n*a-i*o,e},a.determinant=function(e){var t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*(c*o-a*l)+n*(-c*r+a*s)+i*(l*r-o*s)},a.mul=a.multiply=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=n[0],f=n[1],p=n[2],m=n[3],g=n[4],v=n[5],E=n[6],y=n[7],T=n[8];return e[0]=d*i+f*a+p*c,e[1]=d*r+f*s+p*u,e[2]=d*o+f*l+p*h,e[3]=m*i+g*a+v*c,e[4]=m*r+g*s+v*u,e[5]=m*o+g*l+v*h,e[6]=E*i+y*a+T*c,e[7]=E*r+y*s+T*u,e[8]=E*o+y*l+T*h,e},a.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},void 0!==e&&(e.mat3=a);var l={},c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(!d)d=1e-6;l.create=function(){return new Float32Array(c)},l.clone=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},l.transpose=function(e,t){if(e===t){var n=t[1],i=t[2],r=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=r,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},l.invert=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15],E=n*s-i*a,y=n*l-r*a,T=n*c-o*a,x=i*l-r*s,b=i*c-o*s,_=r*c-o*l,w=u*m-h*p,R=u*g-d*p,H=u*v-f*p,S=h*g-d*m,M=h*v-f*m,C=d*v-f*g,A=E*C-y*M+T*S+x*H-b*R+_*w;return A?(A=1/A,e[0]=(s*C-l*M+c*S)*A,e[1]=(r*M-i*C-o*S)*A,e[2]=(m*_-g*b+v*x)*A,e[3]=(d*b-h*_-f*x)*A,e[4]=(l*H-a*C-c*R)*A,e[5]=(n*C-r*H+o*R)*A,e[6]=(g*T-p*_-v*y)*A,e[7]=(u*_-d*T+f*y)*A,e[8]=(a*M-s*H+c*w)*A,e[9]=(i*H-n*M-o*w)*A,e[10]=(p*b-m*T+v*E)*A,e[11]=(h*T-u*b-f*E)*A,e[12]=(s*R-a*S-l*w)*A,e[13]=(n*S-i*R+r*w)*A,e[14]=(m*y-p*x-g*E)*A,e[15]=(u*x-h*y+d*E)*A,e):null},l.adjoint=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(d*v-f*g)-h*(l*v-c*g)+m*(l*f-c*d),e[1]=-(i*(d*v-f*g)-h*(r*v-o*g)+m*(r*f-o*d)),e[2]=i*(l*v-c*g)-s*(r*v-o*g)+m*(r*c-o*l),e[3]=-(i*(l*f-c*d)-s*(r*f-o*d)+h*(r*c-o*l)),e[4]=-(a*(d*v-f*g)-u*(l*v-c*g)+p*(l*f-c*d)),e[5]=n*(d*v-f*g)-u*(r*v-o*g)+p*(r*f-o*d),e[6]=-(n*(l*v-c*g)-a*(r*v-o*g)+p*(r*c-o*l)),e[7]=n*(l*f-c*d)-a*(r*f-o*d)+u*(r*c-o*l),e[8]=a*(h*v-f*m)-u*(s*v-c*m)+p*(s*f-c*h),e[9]=-(n*(h*v-f*m)-u*(i*v-o*m)+p*(i*f-o*h)),e[10]=n*(s*v-c*m)-a*(i*v-o*m)+p*(i*c-o*s),e[11]=-(n*(s*f-c*h)-a*(i*f-o*h)+u*(i*c-o*s)),e[12]=-(a*(h*g-d*m)-u*(s*g-l*m)+p*(s*d-l*h)),e[13]=n*(h*g-d*m)-u*(i*g-r*m)+p*(i*d-r*h),e[14]=-(n*(s*g-l*m)-a*(i*g-r*m)+p*(i*l-r*s)),e[15]=n*(s*d-l*h)-a*(i*d-r*h)+u*(i*l-r*s),e},l.determinant=function(e){var t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15];return(t*a-n*o)*(h*g-d*m)-(t*s-i*o)*(u*g-d*p)+(t*l-r*o)*(u*m-h*p)+(n*s-i*a)*(c*g-d*f)-(n*l-r*a)*(c*m-h*f)+(i*l-r*s)*(c*p-u*f)},l.mul=l.multiply=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],v=t[14],E=t[15],y=n[0],T=n[1],x=n[2],b=n[3];return e[0]=y*i+T*s+x*h+b*m,e[1]=y*r+T*l+x*d+b*g,e[2]=y*o+T*c+x*f+b*v,e[3]=y*a+T*u+x*p+b*E,y=n[4],T=n[5],x=n[6],b=n[7],e[4]=y*i+T*s+x*h+b*m,e[5]=y*r+T*l+x*d+b*g,e[6]=y*o+T*c+x*f+b*v,e[7]=y*a+T*u+x*p+b*E,y=n[8],T=n[9],x=n[10],b=n[11],e[8]=y*i+T*s+x*h+b*m,e[9]=y*r+T*l+x*d+b*g,e[10]=y*o+T*c+x*f+b*v,e[11]=y*a+T*u+x*p+b*E,y=n[12],T=n[13],x=n[14],b=n[15],e[12]=y*i+T*s+x*h+b*m,e[13]=y*r+T*l+x*d+b*g,e[14]=y*o+T*c+x*f+b*v,e[15]=y*a+T*u+x*p+b*E,e},l.translate=function(e,t,n){var i,r,o,a,s,l,c,u,h,d,f,p,m=n[0],g=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=i,e[1]=r,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=i*m+s*g+h*v+t[12],e[13]=r*m+l*g+d*v+t[13],e[14]=o*m+c*g+f*v+t[14],e[15]=a*m+u*g+p*v+t[15]),e},l.scale=function(e,t,n){var i=n[0],r=n[1],o=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.rotate=function(e,t,n,i){var r,o,a,s,l,c,u,h,f,p,m,g,v,E,y,T,x,b,_,w,R,H,S,M,C=i[0],A=i[1],k=i[2],P=Math.sqrt(C*C+A*A+k*k);return Math.abs(P)<d?null:(P=1/P,C*=P,A*=P,k*=P,r=Math.sin(n),o=Math.cos(n),a=1-o,s=t[0],l=t[1],c=t[2],u=t[3],h=t[4],f=t[5],p=t[6],m=t[7],g=t[8],v=t[9],E=t[10],y=t[11],T=C*C*a+o,x=A*C*a+k*r,b=k*C*a-A*r,_=C*A*a-k*r,w=A*A*a+o,R=k*A*a+C*r,H=C*k*a+A*r,S=A*k*a-C*r,M=k*k*a+o,e[0]=s*T+h*x+g*b,e[1]=l*T+f*x+v*b,e[2]=c*T+p*x+E*b,e[3]=u*T+m*x+y*b,e[4]=s*_+h*w+g*R,e[5]=l*_+f*w+v*R,e[6]=c*_+p*w+E*R,e[7]=u*_+m*w+y*R,e[8]=s*H+h*S+g*M,e[9]=l*H+f*S+v*M,e[10]=c*H+p*S+E*M,e[11]=u*H+m*S+y*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},l.rotateX=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+c*i,e[5]=a*r+u*i,e[6]=s*r+h*i,e[7]=l*r+d*i,e[8]=c*r-o*i,e[9]=u*r-a*i,e[10]=h*r-s*i,e[11]=d*r-l*i,e},l.rotateY=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r-c*i,e[1]=a*r-u*i,e[2]=s*r-h*i,e[3]=l*r-d*i,e[8]=o*i+c*r,e[9]=a*i+u*r,e[10]=s*i+h*r,e[11]=l*i+d*r,e},l.rotateZ=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r+c*i,e[1]=a*r+u*i,e[2]=s*r+h*i,e[3]=l*r+d*i,e[4]=c*r-o*i,e[5]=u*r-a*i,e[6]=h*r-s*i,e[7]=d*r-l*i,e},l.fromRotationTranslation=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=i+i,l=r+r,c=o+o,u=i*s,h=i*l,d=i*c,f=r*l,p=r*c,m=o*c,g=a*s,v=a*l,E=a*c;return e[0]=1-(f+m),e[1]=h+E,e[2]=d-v,e[3]=0,e[4]=h-E,e[5]=1-(u+m),e[6]=p+g,e[7]=0,e[8]=d+v,e[9]=p-g,e[10]=1-(u+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},l.frustum=function(e,t,n,i,r,o,a){var s=1/(n-t),l=1/(r-i),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(r+i)*l,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e},l.perspective=function(e,t,n,i,r){var o=1/Math.tan(t/2),a=1/(i-r);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+i)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*i*a,e[15]=0,e},l.ortho=function(e,t,n,i,r,o,a){var s=1/(t-n),l=1/(i-r),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(a+o)*c,e[15]=1,e},l.lookAt=function(e,t,n,i){var r,o,a,s,c,u,h,f,p,m,g=t[0],v=t[1],E=t[2],y=i[0],T=i[1],x=i[2],b=n[0],_=n[1],w=n[2];return Math.abs(g-b)<d&&Math.abs(v-_)<d&&Math.abs(E-w)<d?l.identity(e):(h=g-b,f=v-_,p=E-w,m=1/Math.sqrt(h*h+f*f+p*p),h*=m,f*=m,p*=m,r=T*p-x*f,o=x*h-y*p,a=y*f-T*h,(m=Math.sqrt(r*r+o*o+a*a))?(r*=m=1/m,o*=m,a*=m):(r=0,o=0,a=0),s=f*a-p*o,c=p*r-h*a,u=h*o-f*r,(m=Math.sqrt(s*s+c*c+u*u))?(s*=m=1/m,c*=m,u*=m):(s=0,c=0,u=0),e[0]=r,e[1]=s,e[2]=h,e[3]=0,e[4]=o,e[5]=c,e[6]=f,e[7]=0,e[8]=a,e[9]=u,e[10]=p,e[11]=0,e[12]=-(r*g+o*v+a*E),e[13]=-(s*g+c*v+u*E),e[14]=-(h*g+f*v+p*E),e[15]=1,e)},l.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},void 0!==e&&(e.mat4=l);var u={},h=new Float32Array([0,0,0,1]);if(!d)var d=1e-6;u.create=function(){return new Float32Array(h)},u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.setAxisAngle=function(e,t,n){n*=.5;var i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e},u.add=i.add,u.mul=u.multiply=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=i*u+a*s+r*c-o*l,e[1]=r*u+a*l+o*s-i*c,e[2]=o*u+a*c+i*l-r*s,e[3]=a*u-i*s-r*l-o*c,e},u.scale=i.scale,u.rotateX=function(e,t,n){n*=.5;var i=t[0],r=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l+a*s,e[1]=r*l+o*s,e[2]=o*l-r*s,e[3]=a*l-i*s,e},u.rotateY=function(e,t,n){n*=.5;var i=t[0],r=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l-o*s,e[1]=r*l+a*s,e[2]=o*l+i*s,e[3]=a*l-r*s,e},u.rotateZ=function(e,t,n){n*=.5;var i=t[0],r=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l+r*s,e[1]=r*l-i*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},u.calculateW=function(e,t){var n=t[0],i=t[1],r=t[2];return e[0]=n,e[1]=i,e[2]=r,e[3]=-Math.sqrt(Math.abs(1-n*n-i*i-r*r)),e},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(e,t,n,i){var r,o,a,s,l=t[0],c=t[1],u=t[2],h=t[3],d=n[0],f=n[1],p=n[2],m=t[3],g=l*d+c*f+u*p+h*m;return Math.abs(g)>=1?(e!==t&&(e[0]=l,e[1]=c,e[2]=u,e[3]=h),e):(r=Math.acos(g),o=Math.sqrt(1-g*g),Math.abs(o)<.001?(e[0]=.5*l+.5*d,e[1]=.5*c+.5*f,e[2]=.5*u+.5*p,e[3]=.5*h+.5*m,e):(a=Math.sin((1-i)*r)/o,s=Math.sin(i*r)/o,e[0]=l*a+d*s,e[1]=c*a+f*s,e[2]=u*a+p*s,e[3]=h*a+m*s,e))},u.invert=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=n*n+i*i+r*r+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-i*s,e[2]=-r*s,e[3]=o*s,e},u.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},u.len=u.length=i.length,u.sqrLen=u.squaredLength=i.squaredLength,u.normalize=i.normalize,u.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},void 0!==e&&(e.quat=u)}(e.exports)}()},{}],20:[function(e,t,n){!function(){(function(){var e=this,i=e._,r={},o=Array.prototype,a=Object.prototype,s=Function.prototype,l=o.push,c=o.slice,u=o.concat,h=a.toString,d=a.hasOwnProperty,f=o.forEach,p=o.map,m=o.reduce,g=o.reduceRight,v=o.filter,E=o.every,y=o.some,T=o.indexOf,x=o.lastIndexOf,b=Array.isArray,_=Object.keys,w=s.bind,R=function(e){return e instanceof R?e:this instanceof R?void(this._wrapped=e):new R(e)};void 0!==n?(void 0!==t&&t.exports&&(n=t.exports=R),n._=R):e._=R,R.VERSION="1.4.4";var H=R.each=R.forEach=function(e,t,n){if(null!=e)if(f&&e.forEach===f)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e)===r)return}else for(var a in e)if(R.has(e,a)&&t.call(n,e[a],a,e)===r)return};R.map=R.collect=function(e,t,n){var i=[];return null==e?i:p&&e.map===p?e.map(t,n):(H(e,function(e,r,o){i[i.length]=t.call(n,e,r,o)}),i)};var S="Reduce of empty array with no initial value";R.reduce=R.foldl=R.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),m&&e.reduce===m)return i&&(t=R.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(H(e,function(e,o,a){r?n=t.call(i,n,e,o,a):(n=e,r=!0)}),!r)throw new TypeError(S);return n},R.reduceRight=R.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return i&&(t=R.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=R.keys(e);o=a.length}if(H(e,function(s,l,c){l=a?a[--o]:--o,r?n=t.call(i,n,e[l],l,c):(n=e[l],r=!0)}),!r)throw new TypeError(S);return n},R.find=R.detect=function(e,t,n){var i;return M(e,function(e,r,o){if(t.call(n,e,r,o))return i=e,!0}),i},R.filter=R.select=function(e,t,n){var i=[];return null==e?i:v&&e.filter===v?e.filter(t,n):(H(e,function(e,r,o){t.call(n,e,r,o)&&(i[i.length]=e)}),i)},R.reject=function(e,t,n){return R.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},R.every=R.all=function(e,t,n){t||(t=R.identity);var i=!0;return null==e?i:E&&e.every===E?e.every(t,n):(H(e,function(e,o,a){if(!(i=i&&t.call(n,e,o,a)))return r}),!!i)};var M=R.some=R.any=function(e,t,n){t||(t=R.identity);var i=!1;return null==e?i:y&&e.some===y?e.some(t,n):(H(e,function(e,o,a){if(i||(i=t.call(n,e,o,a)))return r}),!!i)};R.contains=R.include=function(e,t){return null!=e&&(T&&e.indexOf===T?-1!=e.indexOf(t):M(e,function(e){return e===t}))},R.invoke=function(e,t){var n=c.call(arguments,2),i=R.isFunction(t);return R.map(e,function(e){return(i?t:e[t]).apply(e,n)})},R.pluck=function(e,t){return R.map(e,function(e){return e[t]})},R.where=function(e,t,n){return R.isEmpty(t)?n?null:[]:R[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},R.findWhere=function(e,t){return R.where(e,t,!0)},R.max=function(e,t,n){if(!t&&R.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&R.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return H(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a>=i.computed&&(i={value:e,computed:a})}),i.value},R.min=function(e,t,n){if(!t&&R.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&R.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return H(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a<i.computed&&(i={value:e,computed:a})}),i.value},R.shuffle=function(e){var t,n=0,i=[];return H(e,function(e){t=R.random(n++),i[n-1]=i[t],i[t]=e}),i};var C=function(e){return R.isFunction(e)?e:function(t){return t[e]}};R.sortBy=function(e,t,n){var i=C(t);return R.pluck(R.map(e,function(e,t,r){return{value:e,index:t,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index<t.index?-1:1}),"value")};var A=function(e,t,n,i){var r={},o=C(t||R.identity);return H(e,function(t,a){var s=o.call(n,t,a,e);i(r,s,t)}),r};R.groupBy=function(e,t,n){return A(e,t,n,function(e,t,n){(R.has(e,t)?e[t]:e[t]=[]).push(n)})},R.countBy=function(e,t,n){return A(e,t,n,function(e,t){R.has(e,t)||(e[t]=0),e[t]++})},R.sortedIndex=function(e,t,n,i){for(var r=(n=null==n?R.identity:C(n)).call(i,t),o=0,a=e.length;o<a;){var s=o+a>>>1;n.call(i,e[s])<r?o=s+1:a=s}return o},R.toArray=function(e){return e?R.isArray(e)?c.call(e):e.length===+e.length?R.map(e,R.identity):R.values(e):[]},R.size=function(e){return null==e?0:e.length===+e.length?e.length:R.keys(e).length},R.first=R.head=R.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:c.call(e,0,t)},R.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},R.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},R.rest=R.tail=R.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},R.compact=function(e){return R.filter(e,R.identity)};var k=function(e,t,n){return H(e,function(e){R.isArray(e)?t?l.apply(n,e):k(e,t,n):n.push(e)}),n};R.flatten=function(e,t){return k(e,t,[])},R.without=function(e){return R.difference(e,c.call(arguments,1))},R.uniq=R.unique=function(e,t,n,i){R.isFunction(t)&&(i=n,n=t,t=!1);var r=n?R.map(e,n,i):e,o=[],a=[];return H(r,function(n,i){(t?i&&a[a.length-1]===n:R.contains(a,n))||(a.push(n),o.push(e[i]))}),o},R.union=function(){return R.uniq(u.apply(o,arguments))},R.intersection=function(e){var t=c.call(arguments,1);return R.filter(R.uniq(e),function(e){return R.every(t,function(t){return R.indexOf(t,e)>=0})})},R.difference=function(e){var t=u.apply(o,c.call(arguments,1));return R.filter(e,function(e){return!R.contains(t,e)})},R.zip=function(){for(var e=c.call(arguments),t=R.max(R.pluck(e,"length")),n=new Array(t),i=0;i<t;i++)n[i]=R.pluck(e,""+i);return n},R.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},R.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=R.sortedIndex(e,t),e[i]===t?i:-1;i=n<0?Math.max(0,r+n):n}if(T&&e.indexOf===T)return e.indexOf(t,n);for(;i<r;i++)if(e[i]===t)return i;return-1},R.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(x&&e.lastIndexOf===x)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},R.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,o=new Array(i);r<i;)o[r++]=e,e+=n;return o},R.bind=function(e,t){if(e.bind===w&&w)return w.apply(e,c.call(arguments,1));var n=c.call(arguments,2);return function(){return e.apply(t,n.concat(c.call(arguments)))}},R.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},R.bindAll=function(e){var t=c.call(arguments,1);return 0===t.length&&(t=R.functions(e)),H(t,function(t){e[t]=R.bind(e[t],e)}),e},R.memoize=function(e,t){var n={};return t||(t=R.identity),function(){var i=t.apply(this,arguments);return R.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},R.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},R.defer=function(e){return R.delay.apply(R,[e,1].concat(c.call(arguments,1)))},R.throttle=function(e,t){var n,i,r,o,a=0,s=function(){a=new Date,r=null,o=e.apply(n,i)};return function(){var l=new Date,c=t-(l-a);return n=this,i=arguments,c<=0?(clearTimeout(r),r=null,a=l,o=e.apply(n,i)):r||(r=setTimeout(s,c)),o}},R.debounce=function(e,t,n){var i,r;return function(){var o=this,a=arguments,s=n&&!i;return clearTimeout(i),i=setTimeout(function(){i=null,n||(r=e.apply(o,a))},t),s&&(r=e.apply(o,a)),r}},R.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},R.wrap=function(e,t){return function(){var n=[e];return l.apply(n,arguments),t.apply(this,n)}},R.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},R.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},R.keys=_||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)R.has(e,n)&&(t[t.length]=n);return t},R.values=function(e){var t=[];for(var n in e)R.has(e,n)&&t.push(e[n]);return t},R.pairs=function(e){var t=[];for(var n in e)R.has(e,n)&&t.push([n,e[n]]);return t},R.invert=function(e){var t={};for(var n in e)R.has(e,n)&&(t[e[n]]=n);return t},R.functions=R.methods=function(e){var t=[];for(var n in e)R.isFunction(e[n])&&t.push(n);return t.sort()},R.extend=function(e){return H(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},R.pick=function(e){var t={},n=u.apply(o,c.call(arguments,1));return H(n,function(n){n in e&&(t[n]=e[n])}),t},R.omit=function(e){var t={},n=u.apply(o,c.call(arguments,1));for(var i in e)R.contains(n,i)||(t[i]=e[i]);return t},R.defaults=function(e){return H(c.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},R.clone=function(e){return R.isObject(e)?R.isArray(e)?e.slice():R.extend({},e):e},R.tap=function(e,t){return t(e),e};var P=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof R&&(e=e._wrapped),t instanceof R&&(t=t._wrapped);var r=h.call(e);if(r!=h.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;n.push(e),i.push(t);var a=0,s=!0;if("[object Array]"==r){if(a=e.length,s=a==t.length)for(;a--&&(s=P(e[a],t[a],n,i)););}else{var l=e.constructor,c=t.constructor;if(l!==c&&!(R.isFunction(l)&&l instanceof l&&R.isFunction(c)&&c instanceof c))return!1;for(var u in e)if(R.has(e,u)&&(a++,!(s=R.has(t,u)&&P(e[u],t[u],n,i))))break;if(s){for(u in t)if(R.has(t,u)&&!a--)break;s=!a}}return n.pop(),i.pop(),s};R.isEqual=function(e,t){return P(e,t,[],[])},R.isEmpty=function(e){if(null==e)return!0;if(R.isArray(e)||R.isString(e))return 0===e.length;for(var t in e)if(R.has(e,t))return!1;return!0},R.isElement=function(e){return!(!e||1!==e.nodeType)},R.isArray=b||function(e){return"[object Array]"==h.call(e)},R.isObject=function(e){return e===Object(e)},H(["Arguments","Function","String","Number","Date","RegExp"],function(e){R["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}}),R.isArguments(arguments)||(R.isArguments=function(e){return!(!e||!R.has(e,"callee"))}),"function"!=typeof/./&&(R.isFunction=function(e){return"function"==typeof e}),R.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},R.isNaN=function(e){return R.isNumber(e)&&e!=+e},R.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==h.call(e)},R.isNull=function(e){return null===e},R.isUndefined=function(e){return void 0===e},R.has=function(e,t){return d.call(e,t)},R.noConflict=function(){return e._=i,this},R.identity=function(e){return e},R.times=function(e,t,n){for(var i=Array(e),r=0;r<e;r++)i[r]=t.call(n,r);return i},R.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var L={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};L.unescape=R.invert(L.escape);var D={escape:new RegExp("["+R.keys(L.escape).join("")+"]","g"),unescape:new RegExp("("+R.keys(L.unescape).join("|")+")","g")};R.each(["escape","unescape"],function(e){R[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return L[e][t]})}}),R.result=function(e,t){if(null==e)return null;var n=e[t];return R.isFunction(n)?n.call(e):n},R.mixin=function(e){H(R.functions(e),function(t){var n=R[t]=e[t];R.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),V.call(this,n.apply(R,e))}})};var F=0;R.uniqueId=function(e){var t=++F+"";return e?e+t:t},R.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;R.template=function(e,t,n){var i;n=R.defaults({},n,R.templateSettings);var r=new RegExp([(n.escape||N).source,(n.interpolate||N).source,(n.evaluate||N).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(r,function(t,n,i,r,s){return a+=e.slice(o,s).replace(z,function(e){return"\\"+O[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),o=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(e){throw e.source=a,e}if(t)return i(t,R);var s=function(e){return i.call(this,e,R)};return s.source="function("+(n.variable||"obj")+"){\n"+a+"}",s},R.chain=function(e){return R(e).chain()};var V=function(e){return this._chain?R(e).chain():e};R.mixin(R),H(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];R.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],V.call(this,n)}}),H(["concat","join","slice"],function(e){var t=o[e];R.prototype[e]=function(){return V.call(this,t.apply(this._wrapped,arguments))}}),R.extend(R.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}()},{}],21:[function(e,t,n){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}),Leap=e("../lib/index")},{"../lib/index":8}]},{},[21]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();"undefined"==typeof jQuery&&("function"==typeof require?jQuery=$=require("jquery"):jQuery=$),function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}e.easing.jswing=e.easing.swing;var n=Math.pow,i=Math.sqrt,r=Math.sin,o=Math.cos,a=Math.PI,s=1.70158,l=1.525*s,c=2*a/3,u=2*a/4.5;e.extend(e.easing,{def:"easeOutQuad",swing:function(t){return e.easing[e.easing.def](t)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-n(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-n(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-n(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-n(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-n(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-n(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-n(-2*e+2,5)/2},easeInSine:function(e){return 1-o(e*a/2)},easeOutSine:function(e){return r(e*a/2)},easeInOutSine:function(e){return-(o(a*e)-1)/2},easeInExpo:function(e){return 0===e?0:n(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-n(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?n(2,20*e-10)/2:(2-n(2,-20*e+10))/2},easeInCirc:function(e){return 1-i(1-n(e,2))},easeOutCirc:function(e){return i(1-n(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-i(1-n(2*e,2)))/2:(i(1-n(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-n(2,10*e-10)*r((10*e-10.75)*c)},easeOutElastic:function(e){return 0===e?0:1===e?1:n(2,-10*e)*r((10*e-.75)*c)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-n(2,20*e-10)*r((20*e-11.125)*u)/2:n(2,-20*e+10)*r((20*e-11.125)*u)/2+1},easeInBack:function(e){return 2.70158*e*e*e-s*e*e},easeOutBack:function(e){return 1+2.70158*n(e-1,3)+s*n(e-1,2)},easeInOutBack:function(e){return e<.5?n(2*e,2)*(7.189819*e-l)/2:(n(2*e-2,2)*((l+1)*(2*e-2)+l)+2)/2},easeInBounce:function(e){return 1-t(1-e)},easeOutBounce:t,easeInOutBounce:function(e){return e<.5?(1-t(1-2*e))/2:(1+t(2*e-1))/2}})}),jQuery.extend(jQuery.easing,{easeInOutMaterial:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t+n:i/4*((t-=2)*t*t+2)+n}}),jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(function(e){function t(e){var t=e.length,i=n.type(e);return"function"!==i&&!n.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}if(!e.jQuery){var n=function(e,t){return new n.fn.init(e,t)};n.isWindow=function(e){return null!=e&&e==e.window},n.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[a.call(e)]||"object":typeof e},n.isArray=Array.isArray||function(e){return"array"===n.type(e)},n.isPlainObject=function(e){var t;if(!e||"object"!==n.type(e)||e.nodeType||n.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(t in e);return void 0===t||o.call(e,t)},n.each=function(e,n,i){var r=0,o=e.length,a=t(e);if(i){if(a)for(;o>r&&!1!==n.apply(e[r],i);r++);else for(r in e)if(!1===n.apply(e[r],i))break}else if(a)for(;o>r&&!1!==n.call(e[r],r,e[r]);r++);else for(r in e)if(!1===n.call(e[r],r,e[r]))break;return e},n.data=function(e,t,r){if(void 0===r){var o=(a=e[n.expando])&&i[a];if(void 0===t)return o;if(o&&t in o)return o[t]}else if(void 0!==t){var a=e[n.expando]||(e[n.expando]=++n.uuid);return i[a]=i[a]||{},i[a][t]=r,r}},n.removeData=function(e,t){var r=e[n.expando],o=r&&i[r];o&&n.each(t,function(e,t){delete o[t]})},n.extend=function(){var e,t,i,r,o,a,s=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==n.type(s)&&(s={}),l===c&&(s=this,l--);c>l;l++)if(null!=(o=arguments[l]))for(r in o)e=s[r],s!==(i=o[r])&&(u&&i&&(n.isPlainObject(i)||(t=n.isArray(i)))?(t?(t=!1,a=e&&n.isArray(e)?e:[]):a=e&&n.isPlainObject(e)?e:{},s[r]=n.extend(u,a,i)):void 0!==i&&(s[r]=i));return s},n.queue=function(e,i,r){if(e){i=(i||"fx")+"queue";var o=n.data(e,i);return r?(!o||n.isArray(r)?o=n.data(e,i,function(e,n){var i=[];return null!=e&&(t(Object(e))?function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];e.length=r}(i,"string"==typeof e?[e]:e):[].push.call(i,e)),i}(r)):o.push(r),o):o||[]}},n.dequeue=function(e,t){n.each(e.nodeType?[e]:e,function(e,i){t=t||"fx";var r=n.queue(i,t),o=r.shift();"inprogress"===o&&(o=r.shift()),o&&("fx"===t&&r.unshift("inprogress"),o.call(i,function(){n.dequeue(i,t)}))})},n.fn=n.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),i=this.offset(),r=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:n(e).offset();return i.top-=parseFloat(t.style.marginTop)||0,i.left-=parseFloat(t.style.marginLeft)||0,e.style&&(r.top+=parseFloat(e.style.borderTopWidth)||0,r.left+=parseFloat(e.style.borderLeftWidth)||0),{top:i.top-r.top,left:i.left-r.left}}};var i={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var r={},o=r.hasOwnProperty,a=r.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<s.length;l++)r["[object "+s[l]+"]"]=s[l].toLowerCase();n.fn.init.prototype=n.fn,e.Velocity={Utilities:n}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,n,i){function r(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}function o(e){return m.isWrapped(e)?e=[].slice.call(e):m.isNode(e)&&(e=[e]),e}function a(e){var t=d.data(e,"velocity");return null===t?i:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,n,i,r){function o(e,t){return 1-3*t+3*e}function a(e,t){return 3*t-6*e}function s(e){return 3*e}function l(e,t,n){return((o(t,n)*e+a(t,n))*e+s(t))*e}function c(e,t,n){return 3*o(t,n)*e*e+2*a(t,n)*e+s(t)}function u(t,n){for(var r=0;m>r;++r){var o=c(n,e,i);if(0===o)return n;n-=(l(n,e,i)-t)/o}return n}function h(){for(var t=0;y>t;++t)_[t]=l(t*T,e,i)}function d(t,n,r){var o,a,s=0;do{(o=l(a=n+(r-n)/2,e,i)-t)>0?r=a:n=a}while(Math.abs(o)>v&&++s<E);return a}function f(t){for(var n=0,r=1,o=y-1;r!=o&&_[r]<=t;++r)n+=T;var a=n+(t-_[--r])/(_[r+1]-_[r])*T,s=c(a,e,i);return s>=g?u(t,a):0==s?a:d(t,n,n+T)}function p(){w=!0,(e!=n||i!=r)&&h()}var m=4,g=.001,v=1e-7,E=10,y=11,T=1/(y-1),x="Float32Array"in t;if(4!==arguments.length)return!1;for(var b=0;4>b;++b)if("number"!=typeof arguments[b]||isNaN(arguments[b])||!isFinite(arguments[b]))return!1;e=Math.min(e,1),i=Math.min(i,1),e=Math.max(e,0),i=Math.max(i,0);var _=x?new Float32Array(y):new Array(y),w=!1,R=function(t){return w||p(),e===n&&i===r?t:0===t?0:1===t?1:l(f(t),n,r)};R.getControlPoints=function(){return[{x:e,y:n},{x:i,y:r}]};var H="generateBezier("+[e,n,i,r]+")";return R.toString=function(){return H},R}function c(e,t){var n=e;return m.isString(e)?y.Easings[e]||(n=!1):n=m.isArray(e)&&1===e.length?s.apply(null,e):m.isArray(e)&&2===e.length?T.apply(null,e.concat([t])):!(!m.isArray(e)||4!==e.length)&&l.apply(null,e),!1===n&&(n=y.Easings[y.defaults.easing]?y.defaults.easing:E),n}function u(e){if(e){var t=(new Date).getTime(),n=y.State.calls.length;n>1e4&&(y.State.calls=r(y.State.calls));for(var o=0;n>o;o++)if(y.State.calls[o]){var s=y.State.calls[o],l=s[0],c=s[2],f=s[3],p=!!f,g=null;f||(f=y.State.calls[o][3]=t-16);for(var v=Math.min((t-f)/c.duration,1),E=0,T=l.length;T>E;E++){var b=l[E],w=b.element;if(a(w)){var R=!1;if(c.display!==i&&null!==c.display&&"none"!==c.display){if("flex"===c.display){var H=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];d.each(H,function(e,t){x.setPropertyValue(w,"display",t)})}x.setPropertyValue(w,"display",c.display)}c.visibility!==i&&"hidden"!==c.visibility&&x.setPropertyValue(w,"visibility",c.visibility);for(var S in b)if("element"!==S){var M,C=b[S],A=m.isString(C.easing)?y.Easings[C.easing]:C.easing;if(1===v)M=C.endValue;else{var k=C.endValue-C.startValue;if(M=C.startValue+k*A(v,c,k),!p&&M===C.currentValue)continue}if(C.currentValue=M,"tween"===S)g=M;else{if(x.Hooks.registered[S]){var P=x.Hooks.getRoot(S),L=a(w).rootPropertyValueCache[P];L&&(C.rootPropertyValue=L)}var D=x.setPropertyValue(w,S,C.currentValue+(0===parseFloat(M)?"":C.unitType),C.rootPropertyValue,C.scrollData);x.Hooks.registered[S]&&(a(w).rootPropertyValueCache[P]=x.Normalizations.registered[P]?x.Normalizations.registered[P]("extract",null,D[1]):D[1]),"transform"===D[0]&&(R=!0)}}c.mobileHA&&a(w).transformCache.translate3d===i&&(a(w).transformCache.translate3d="(0px, 0px, 0px)",R=!0),R&&x.flushTransformCache(w)}}c.display!==i&&"none"!==c.display&&(y.State.calls[o][2].display=!1),c.visibility!==i&&"hidden"!==c.visibility&&(y.State.calls[o][2].visibility=!1),c.progress&&c.progress.call(s[1],s[1],v,Math.max(0,f+c.duration-t),f,g),1===v&&h(o)}}y.State.isTicking&&_(u)}function h(e,t){if(!y.State.calls[e])return!1;for(var n=y.State.calls[e][0],r=y.State.calls[e][1],o=y.State.calls[e][2],s=y.State.calls[e][4],l=!1,c=0,u=n.length;u>c;c++){var h=n[c].element;if(t||o.loop||("none"===o.display&&x.setPropertyValue(h,"display",o.display),"hidden"===o.visibility&&x.setPropertyValue(h,"visibility",o.visibility)),!0!==o.loop&&(d.queue(h)[1]===i||!/\.velocityQueueEntryFlag/i.test(d.queue(h)[1]))&&a(h)){a(h).isAnimating=!1,a(h).rootPropertyValueCache={};var f=!1;d.each(x.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,r=a(h).transformCache[t];a(h).transformCache[t]!==i&&new RegExp("^\\("+n+"[^.]").test(r)&&(f=!0,delete a(h).transformCache[t])}),o.mobileHA&&(f=!0,delete a(h).transformCache.translate3d),f&&x.flushTransformCache(h),x.Values.removeClass(h,"velocity-animating")}if(!t&&o.complete&&!o.loop&&c===u-1)try{o.complete.call(r,r)}catch(e){setTimeout(function(){throw e},1)}s&&!0!==o.loop&&s(r),a(h)&&!0===o.loop&&!t&&(d.each(a(h).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),y(h,"reverse",{loop:!0,delay:o.delay})),!1!==o.queue&&d.dequeue(h,o.queue)}y.State.calls[e]=!1;for(var p=0,m=y.State.calls.length;m>p;p++)if(!1!==y.State.calls[p]){l=!0;break}!1===l&&(y.State.isTicking=!1,delete y.State.calls,y.State.calls=[])}var d,f=function(){if(n.documentMode)return n.documentMode;for(var e=7;e>4;e--){var t=n.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}return i}(),p=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var n,i=(new Date).getTime();return n=Math.max(0,16-(i-e)),e=i+n,setTimeout(function(){t(i+n)},n)}}(),m={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==i&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},g=!1;if(e.fn&&e.fn.jquery?(d=e,g=!0):d=t.Velocity.Utilities,8>=f&&!g)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(7>=f)){var v=400,E="swing",y={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:d,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:v,easing:E,begin:i,complete:i,progress:i,display:i,visibility:i,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){d.data(e,"velocity",{isSVG:m.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==i?(y.State.scrollAnchor=t,y.State.scrollPropertyLeft="pageXOffset",y.State.scrollPropertyTop="pageYOffset"):(y.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,y.State.scrollPropertyLeft="scrollLeft",y.State.scrollPropertyTop="scrollTop");var T=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,i){var r={x:t.x+i.dx*n,v:t.v+i.dv*n,tension:t.tension,friction:t.friction};return{dx:r.v,dv:e(r)}}function n(n,i){var r={dx:n.v,dv:e(n)},o=t(n,.5*i,r),a=t(n,.5*i,o),s=t(n,i,a),l=1/6*(r.dx+2*(o.dx+a.dx)+s.dx),c=1/6*(r.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function e(t,i,r){var o,a,s,l={x:-1,v:0,tension:null,friction:null},c=[0],u=0;for(t=parseFloat(t)||500,i=parseFloat(i)||20,r=r||null,l.tension=t,l.friction=i,(o=null!==r)?(u=e(t,i),a=u/r*.016):a=.016;s=n(s||l,a),c.push(1+s.x),u+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return o?function(e){return c[e*(c.length-1)|0]}:u}}();y.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},d.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){y.Easings[t[0]]=l.apply(null,t[1])});var x=y.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(o=0;o<x.Lists.colors.length;o++){var e="color"===x.Lists.colors[o]?"0 0 0 1":"255 255 255 1";x.Hooks.templates[x.Lists.colors[o]]=["Red Green Blue Alpha",e]}var t,n,i;if(f)for(t in x.Hooks.templates){i=(n=x.Hooks.templates[t])[0].split(" ");var r=n[1].match(x.RegEx.valueSplit);"Color"===i[0]&&(i.push(i.shift()),r.push(r.shift()),x.Hooks.templates[t]=[i.join(" "),r.join(" ")])}for(t in x.Hooks.templates){i=(n=x.Hooks.templates[t])[0].split(" ");for(var o in i){var a=t+i[o],s=o;x.Hooks.registered[a]=[t,s]}}},getRoot:function(e){var t=x.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return x.RegEx.valueUnwrap.test(t)&&(t=t.match(x.RegEx.valueUnwrap)[1]),x.Values.isCSSNullValue(t)&&(t=x.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=x.Hooks.registered[e];if(n){var i=n[0],r=n[1];return(t=x.Hooks.cleanRootPropertyValue(i,t)).toString().match(x.RegEx.valueSplit)[r]}return t},injectValue:function(e,t,n){var i=x.Hooks.registered[e];if(i){var r,o=i[0],a=i[1];return n=x.Hooks.cleanRootPropertyValue(o,n),r=n.toString().match(x.RegEx.valueSplit),r[a]=t,r.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var i;return x.RegEx.wrappedValueAlreadyExtracted.test(n)?i=n:(i=n.toString().match(x.RegEx.valueUnwrap),i=i?i[1].replace(/,(\s+)?/g," "):n),i;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return y.State.isFirefox?"filter":"-webkit-filter";case"extract":var i=parseFloat(n);if(!i&&0!==i){var r=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);i=r?r[1]:0}return i;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,n){if(8>=f)switch(e){case"name":return"filter";case"extract":var i=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=i?i[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){for(9>=f||y.State.isGingerbread||(x.Lists.transformsBase=x.Lists.transformsBase.concat(x.Lists.transforms3D)),e=0;e<x.Lists.transformsBase.length;e++)!function(){var t=x.Lists.transformsBase[e];x.Normalizations.registered[t]=function(e,n,r){switch(e){case"name":return"transform";case"extract":return a(n)===i||a(n).transformCache[t]===i?/^scale/i.test(t)?1:0:a(n).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(r);break;case"scal":case"scale":y.State.isAndroid&&a(n).transformCache[t]===i&&1>r&&(r=1),o=!/(\d)$/i.test(r);break;case"skew":o=!/(deg|\d)$/i.test(r);break;case"rotate":o=!/(deg|\d)$/i.test(r)}return o||(a(n).transformCache[t]="("+r+")"),a(n).transformCache[t]}}}();for(var e=0;e<x.Lists.colors.length;e++)!function(){var t=x.Lists.colors[e];x.Normalizations.registered[t]=function(e,n,r){switch(e){case"name":return t;case"extract":var o;if(x.RegEx.wrappedValueAlreadyExtracted.test(r))o=r;else{var a,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(r)?a=s[r]!==i?s[r]:s.black:x.RegEx.isHex.test(r)?a="rgb("+x.Values.hexToRgb(r).join(" ")+")":/^rgba?\(/i.test(r)||(a=s.black),o=(a||r).toString().match(x.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=f||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=f?4===r.split(" ").length&&(r=r.split(/\s+/).slice(0,3).join(" ")):3===r.split(" ").length&&(r+=" 1"),(8>=f?"rgb":"rgba")+"("+r.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||y.State.isAndroid&&!y.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(y.State.prefixMatches[e])return[y.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,i=t.length;i>n;n++){var r;if(r=0===n?e:t[n]+e.replace(/^\w/,function(e){return e.toUpperCase()}),m.isString(y.State.prefixElement.style[r]))return y.State.prefixMatches[e]=r,[r,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(n,function(e,t,n,i){return t+t+n+n+i+i}),(t=i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,n,r,o){function s(e,n){function r(){c&&x.setPropertyValue(e,"display","none")}var l=0;if(8>=f)l=d.css(e,n);else{var c=!1;if(/^(width|height)$/.test(n)&&0===x.getPropertyValue(e,"display")&&(c=!0,x.setPropertyValue(e,"display",x.Values.getDisplayType(e))),!o){if("height"===n&&"border-box"!==x.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var u=e.offsetHeight-(parseFloat(x.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(x.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(x.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(x.getPropertyValue(e,"paddingBottom"))||0);return r(),u}if("width"===n&&"border-box"!==x.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var h=e.offsetWidth-(parseFloat(x.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(x.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(x.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(x.getPropertyValue(e,"paddingRight"))||0);return r(),h}}var p;p=a(e)===i?t.getComputedStyle(e,null):a(e).computedStyle?a(e).computedStyle:a(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===n&&(n="borderTopColor"),(""===(l=9===f&&"filter"===n?p.getPropertyValue(n):p[n])||null===l)&&(l=e.style[n]),r()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(n)){var m=s(e,"position");("fixed"===m||"absolute"===m&&/top|left/i.test(n))&&(l=d(e).position()[n]+"px")}return l}var l;if(x.Hooks.registered[n]){var c=n,u=x.Hooks.getRoot(c);r===i&&(r=x.getPropertyValue(e,x.Names.prefixCheck(u)[0])),x.Normalizations.registered[u]&&(r=x.Normalizations.registered[u]("extract",e,r)),l=x.Hooks.extractValue(c,r)}else if(x.Normalizations.registered[n]){var h,p;"transform"!==(h=x.Normalizations.registered[n]("name",e))&&(p=s(e,x.Names.prefixCheck(h)[0]),x.Values.isCSSNullValue(p)&&x.Hooks.templates[n]&&(p=x.Hooks.templates[n][1])),l=x.Normalizations.registered[n]("extract",e,p)}if(!/^[\d-]/.test(l))if(a(e)&&a(e).isSVG&&x.Names.SVGAttribute(n))if(/^(height|width)$/i.test(n))try{l=e.getBBox()[n]}catch(e){l=0}else l=e.getAttribute(n);else l=s(e,x.Names.prefixCheck(n)[0]);return x.Values.isCSSNullValue(l)&&(l=0),y.debug>=2&&console.log("Get "+n+": "+l),l},setPropertyValue:function(e,n,i,r,o){var s=n;if("scroll"===n)o.container?o.container["scroll"+o.direction]=i:"Left"===o.direction?t.scrollTo(i,o.alternateValue):t.scrollTo(o.alternateValue,i);else if(x.Normalizations.registered[n]&&"transform"===x.Normalizations.registered[n]("name",e))x.Normalizations.registered[n]("inject",e,i),s="transform",i=a(e).transformCache[n];else{if(x.Hooks.registered[n]){var l=n,c=x.Hooks.getRoot(n);r=r||x.getPropertyValue(e,c),i=x.Hooks.injectValue(l,i,r),n=c}if(x.Normalizations.registered[n]&&(i=x.Normalizations.registered[n]("inject",e,i),n=x.Normalizations.registered[n]("name",e)),s=x.Names.prefixCheck(n)[0],8>=f)try{e.style[s]=i}catch(e){y.debug&&console.log("Browser does not support ["+i+"] for ["+s+"]")}else a(e)&&a(e).isSVG&&x.Names.SVGAttribute(n)?e.setAttribute(n,i):e.style[s]=i;y.debug>=2&&console.log("Set "+n+" ("+s+"): "+i)}return[s,i]},flushTransformCache:function(e){function t(t){return parseFloat(x.getPropertyValue(e,t))}var n="";if((f||y.State.isAndroid&&!y.State.isChrome)&&a(e).isSVG){var i={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};d.each(a(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),i[e]&&(n+=e+"("+i[e].join(" ")+") ",delete i[e])})}else{var r,o;d.each(a(e).transformCache,function(t){return r=a(e).transformCache[t],"transformPerspective"===t?(o=r,!0):(9===f&&"rotateZ"===t&&(t="rotate"),void(n+=t+r+" "))}),o&&(n="perspective"+o+" "+n)}x.setPropertyValue(e,"transform",n)}};x.Hooks.register(),x.Normalizations.register(),y.hook=function(e,t,n){var r=i;return e=o(e),d.each(e,function(e,o){if(a(o)===i&&y.init(o),n===i)r===i&&(r=y.CSS.getPropertyValue(o,t));else{var s=y.CSS.setPropertyValue(o,t,n);"transform"===s[0]&&y.CSS.flushTransformCache(o),r=s}}),r};var b=function(){function e(){return s?H.promise||null:l}function r(){function e(e){function h(e,t){var n=i,r=i,a=i;return m.isArray(e)?(n=e[0],!m.isArray(e[1])&&/^[\d-]/.test(e[1])||m.isFunction(e[1])||x.RegEx.isHex.test(e[1])?a=e[1]:(m.isString(e[1])&&!x.RegEx.isHex.test(e[1])||m.isArray(e[1]))&&(r=t?e[1]:c(e[1],s.duration),e[2]!==i&&(a=e[2]))):n=e,t||(r=r||s.easing),m.isFunction(n)&&(n=n.call(o,w,_)),m.isFunction(a)&&(a=a.call(o,w,_)),[n||0,r,a]}function f(e,t){var n,i;return i=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,""}),n||(n=x.Values.getUnitType(e)),[i,n]}if(s.begin&&0===w)try{s.begin.call(p,p)}catch(e){setTimeout(function(){throw e},1)}if("scroll"===S){var v,T,b,R=/^x$/i.test(s.axis)?"Left":"Top",M=parseFloat(s.offset)||0;s.container?m.isWrapped(s.container)||m.isNode(s.container)?(s.container=s.container[0]||s.container,v=s.container["scroll"+R],b=v+d(o).position()[R.toLowerCase()]+M):s.container=null:(v=y.State.scrollAnchor[y.State["scrollProperty"+R]],T=y.State.scrollAnchor[y.State["scrollProperty"+("Left"===R?"Top":"Left")]],b=d(o).offset()[R.toLowerCase()]+M),l={scroll:{rootPropertyValue:!1,startValue:v,currentValue:v,endValue:b,unitType:"",easing:s.easing,scrollData:{container:s.container,direction:R,alternateValue:T}},element:o},y.debug&&console.log("tweensContainer (scroll): ",l.scroll,o)}else if("reverse"===S){if(!a(o).tweensContainer)return void d.dequeue(o,s.queue);"none"===a(o).opts.display&&(a(o).opts.display="auto"),"hidden"===a(o).opts.visibility&&(a(o).opts.visibility="visible"),a(o).opts.loop=!1,a(o).opts.begin=null,a(o).opts.complete=null,E.easing||delete s.easing,E.duration||delete s.duration,s=d.extend({},a(o).opts,s),k=d.extend(!0,{},a(o).tweensContainer);for(var C in k)if("element"!==C){var A=k[C].startValue;k[C].startValue=k[C].currentValue=k[C].endValue,k[C].endValue=A,m.isEmptyObject(E)||(k[C].easing=s.easing),y.debug&&console.log("reverse tweensContainer ("+C+"): "+JSON.stringify(k[C]),o)}l=k}else if("start"===S){var k;a(o).tweensContainer&&!0===a(o).isAnimating&&(k=a(o).tweensContainer),d.each(g,function(e,t){if(RegExp("^"+x.Lists.colors.join("$|^")+"$").test(e)){var n=h(t,!0),r=n[0],o=n[1],a=n[2];if(x.RegEx.isHex.test(r)){for(var s=["Red","Green","Blue"],l=x.Values.hexToRgb(r),c=a?x.Values.hexToRgb(a):i,u=0;u<s.length;u++){var d=[l[u]];o&&d.push(o),c!==i&&d.push(c[u]),g[e+s[u]]=d}delete g[e]}}});for(var D in g){var F=h(g[D]),N=F[0],O=F[1],z=F[2];D=x.Names.camelCase(D);var V=x.Hooks.getRoot(D),B=!1;if(a(o).isSVG||"tween"===V||!1!==x.Names.prefixCheck(V)[1]||x.Normalizations.registered[V]!==i){(s.display!==i&&null!==s.display&&"none"!==s.display||s.visibility!==i&&"hidden"!==s.visibility)&&/opacity|filter/.test(D)&&!z&&0!==N&&(z=0),s._cacheValues&&k&&k[D]?(z===i&&(z=k[D].endValue+k[D].unitType),B=a(o).rootPropertyValueCache[V]):x.Hooks.registered[D]?z===i?(B=x.getPropertyValue(o,V),z=x.getPropertyValue(o,D,B)):B=x.Hooks.templates[V][1]:z===i&&(z=x.getPropertyValue(o,D));var I,U,W,j=!1;if(I=f(D,z),z=I[0],W=I[1],I=f(D,N),N=I[0].replace(/^([+-\/*])=/,function(e,t){return j=t,""}),U=I[1],z=parseFloat(z)||0,N=parseFloat(N)||0,"%"===U&&(/^(fontSize|lineHeight)$/.test(D)?(N/=100,U="em"):/^scale/.test(D)?(N/=100,U=""):/(Red|Green|Blue)$/i.test(D)&&(N=N/100*255,U="")),/[\/*]/.test(j))U=W;else if(W!==U&&0!==z)if(0===N)U=W;else{r=r||function(){var e={myParent:o.parentNode||n.body,position:x.getPropertyValue(o,"position"),fontSize:x.getPropertyValue(o,"fontSize")},i=e.position===P.lastPosition&&e.myParent===P.lastParent,r=e.fontSize===P.lastFontSize;P.lastParent=e.myParent,P.lastPosition=e.position,P.lastFontSize=e.fontSize;var s=100,l={};if(r&&i)l.emToPx=P.lastEmToPx,l.percentToPxWidth=P.lastPercentToPxWidth,l.percentToPxHeight=P.lastPercentToPxHeight;else{var c=a(o).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");y.init(c),e.myParent.appendChild(c),d.each(["overflow","overflowX","overflowY"],function(e,t){y.CSS.setPropertyValue(c,t,"hidden")}),y.CSS.setPropertyValue(c,"position",e.position),y.CSS.setPropertyValue(c,"fontSize",e.fontSize),y.CSS.setPropertyValue(c,"boxSizing","content-box"),d.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){y.CSS.setPropertyValue(c,t,s+"%")}),y.CSS.setPropertyValue(c,"paddingLeft",s+"em"),l.percentToPxWidth=P.lastPercentToPxWidth=(parseFloat(x.getPropertyValue(c,"width",null,!0))||1)/s,l.percentToPxHeight=P.lastPercentToPxHeight=(parseFloat(x.getPropertyValue(c,"height",null,!0))||1)/s,l.emToPx=P.lastEmToPx=(parseFloat(x.getPropertyValue(c,"paddingLeft"))||1)/s,e.myParent.removeChild(c)}return null===P.remToPx&&(P.remToPx=parseFloat(x.getPropertyValue(n.body,"fontSize"))||16),null===P.vwToPx&&(P.vwToPx=parseFloat(t.innerWidth)/100,P.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=P.remToPx,l.vwToPx=P.vwToPx,l.vhToPx=P.vhToPx,y.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),o),l}();var G=/margin|padding|left|right|width|text|word|letter/i.test(D)||/X$/.test(D)||"x"===D?"x":"y";switch(W){case"%":z*="x"===G?r.percentToPxWidth:r.percentToPxHeight;break;case"px":break;default:z*=r[W+"ToPx"]}switch(U){case"%":z*=1/("x"===G?r.percentToPxWidth:r.percentToPxHeight);break;case"px":break;default:z*=1/r[U+"ToPx"]}}switch(j){case"+":N=z+N;break;case"-":N=z-N;break;case"*":N*=z;break;case"/":N=z/N}l[D]={rootPropertyValue:B,startValue:z,currentValue:z,endValue:N,unitType:U,easing:O},y.debug&&console.log("tweensContainer ("+D+"): "+JSON.stringify(l[D]),o)}else y.debug&&console.log("Skipping ["+V+"] due to a lack of browser support.")}l.element=o}l.element&&(x.Values.addClass(o,"velocity-animating"),L.push(l),""===s.queue&&(a(o).tweensContainer=l,a(o).opts=s),a(o).isAnimating=!0,w===_-1?(y.State.calls.push([L,p,s,null,H.resolver]),!1===y.State.isTicking&&(y.State.isTicking=!0,u())):w++)}var r,o=this,s=d.extend({},y.defaults,E),l={};switch(a(o)===i&&y.init(o),parseFloat(s.delay)&&!1!==s.queue&&d.queue(o,s.queue,function(e){y.velocityQueueEntryFlag=!0,a(o).delayTimer={setTimeout:setTimeout(e,parseFloat(s.delay)),next:e}}),s.duration.toString().toLowerCase()){case"fast":s.duration=200;break;case"normal":s.duration=v;break;case"slow":s.duration=600;break;default:s.duration=parseFloat(s.duration)||1}!1!==y.mock&&(!0===y.mock?s.duration=s.delay=1:(s.duration*=parseFloat(y.mock)||1,s.delay*=parseFloat(y.mock)||1)),s.easing=c(s.easing,s.duration),s.begin&&!m.isFunction(s.begin)&&(s.begin=null),s.progress&&!m.isFunction(s.progress)&&(s.progress=null),s.complete&&!m.isFunction(s.complete)&&(s.complete=null),s.display!==i&&null!==s.display&&(s.display=s.display.toString().toLowerCase(),"auto"===s.display&&(s.display=y.CSS.Values.getDisplayType(o))),s.visibility!==i&&null!==s.visibility&&(s.visibility=s.visibility.toString().toLowerCase()),s.mobileHA=s.mobileHA&&y.State.isMobile&&!y.State.isGingerbread,!1===s.queue?s.delay?setTimeout(e,s.delay):e():d.queue(o,s.queue,function(t,n){return!0===n?(H.promise&&H.resolver(p),!0):(y.velocityQueueEntryFlag=!0,void e())}),""!==s.queue&&"fx"!==s.queue||"inprogress"===d.queue(o)[0]||d.dequeue(o)}var s,l,f,p,g,E,T=arguments[0]&&(arguments[0].p||d.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||m.isString(arguments[0].properties));if(m.isWrapped(this)?(s=!1,f=0,p=this,l=this):(s=!0,f=1,p=T?arguments[0].elements||arguments[0].e:arguments[0]),p=o(p)){T?(g=arguments[0].properties||arguments[0].p,E=arguments[0].options||arguments[0].o):(g=arguments[f],E=arguments[f+1]);var _=p.length,w=0;if(!/^(stop|finish)$/i.test(g)&&!d.isPlainObject(E)){E={};for(var R=f+1;R<arguments.length;R++)m.isArray(arguments[R])||!/^(fast|normal|slow)$/i.test(arguments[R])&&!/^\d/.test(arguments[R])?m.isString(arguments[R])||m.isArray(arguments[R])?E.easing=arguments[R]:m.isFunction(arguments[R])&&(E.complete=arguments[R]):E.duration=arguments[R]}var H={promise:null,resolver:null,rejecter:null};s&&y.Promise&&(H.promise=new y.Promise(function(e,t){H.resolver=e,H.rejecter=t}));var S;switch(g){case"scroll":S="scroll";break;case"reverse":S="reverse";break;case"finish":case"stop":d.each(p,function(e,t){a(t)&&a(t).delayTimer&&(clearTimeout(a(t).delayTimer.setTimeout),a(t).delayTimer.next&&a(t).delayTimer.next(),delete a(t).delayTimer)});var M=[];return d.each(y.State.calls,function(e,t){t&&d.each(t[1],function(n,r){var o=E===i?"":E;return!0!==o&&t[2].queue!==o&&(E!==i||!1!==t[2].queue)||void d.each(p,function(n,i){i===r&&((!0===E||m.isString(E))&&(d.each(d.queue(i,m.isString(E)?E:""),function(e,t){m.isFunction(t)&&t(null,!0)}),d.queue(i,m.isString(E)?E:"",[])),"stop"===g?(a(i)&&a(i).tweensContainer&&!1!==o&&d.each(a(i).tweensContainer,function(e,t){t.endValue=t.currentValue}),M.push(e)):"finish"===g&&(t[2].duration=1))})})}),"stop"===g&&(d.each(M,function(e,t){h(t,!0)}),H.promise&&H.resolver(p)),e();default:if(!d.isPlainObject(g)||m.isEmptyObject(g)){if(m.isString(g)&&y.Redirects[g]){var C=(F=d.extend({},E)).duration,A=F.delay||0;return!0===F.backwards&&(p=d.extend(!0,[],p).reverse()),d.each(p,function(e,t){parseFloat(F.stagger)?F.delay=A+parseFloat(F.stagger)*e:m.isFunction(F.stagger)&&(F.delay=A+F.stagger.call(t,e,_)),F.drag&&(F.duration=parseFloat(C)||(/^(callout|transition)/.test(g)?1e3:v),F.duration=Math.max(F.duration*(F.backwards?1-e/_:(e+1)/_),.75*F.duration,200)),y.Redirects[g].call(t,t,F||{},e,_,p,H.promise?H:i)}),e()}var k="Velocity: First argument ("+g+") was not a property map, a known action, or a registered redirect. Aborting.";return H.promise?H.rejecter(new Error(k)):console.log(k),e()}S="start"}var P={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},L=[];d.each(p,function(e,t){m.isNode(t)&&r.call(t)});var D,F=d.extend({},y.defaults,E);if(F.loop=parseInt(F.loop),D=2*F.loop-1,F.loop)for(var N=0;D>N;N++){var O={delay:F.delay,progress:F.progress};N===D-1&&(O.display=F.display,O.visibility=F.visibility,O.complete=F.complete),b(p,"reverse",O)}return e()}};(y=d.extend(b,y)).animate=b;var _=t.requestAnimationFrame||p;return y.State.isMobile||n.hidden===i||n.addEventListener("visibilitychange",function(){n.hidden?(_=function(e){return setTimeout(function(){e(!0)},16)},u()):_=t.requestAnimationFrame||p}),e.Velocity=y,e!==t&&(e.fn.velocity=b,e.fn.velocity.defaults=y.defaults),d.each(["Down","Up"],function(e,t){y.Redirects["slide"+t]=function(e,n,r,o,a,s){var l=d.extend({},n),c=l.begin,u=l.complete,h={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},f={};l.display===i&&(l.display="Down"===t?"inline"===y.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){c&&c.call(a,a);for(var n in h){f[n]=e.style[n];var i=y.CSS.getPropertyValue(e,n);h[n]="Down"===t?[i,0]:[0,i]}f.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in f)e.style[t]=f[t];u&&u.call(a,a),s&&s.resolver(a)},y(e,h,l)}}),d.each(["In","Out"],function(e,t){y.Redirects["fade"+t]=function(e,n,r,o,a,s){var l=d.extend({},n),c={opacity:"In"===t?1:0},u=l.complete;l.complete=r!==o-1?l.begin=null:function(){u&&u.call(a,a),s&&s.resolver(a)},l.display===i&&(l.display="In"===t?"auto":"none"),y(this,c,l)}}),y}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,document)})),function(e,t,n,i){"use strict";function r(e,t,n){return setTimeout(u(e,n),t)}function o(e,t,n){return!!Array.isArray(e)&&(a(e,n[t],n),!0)}function a(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function s(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;)(!n||n&&e[r[o]]===i)&&(e[r[o]]=t[r[o]]),o++;return e}function l(e,t){return s(e,t,!0)}function c(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&s(i,n)}function u(e,t){return function(){return e.apply(t,arguments)}}function h(e,t){return typeof e==ue?e.apply(t?t[0]||i:i,t):e}function d(e,t){return e===i?t:e}function f(e,t,n){a(v(t),function(t){e.addEventListener(t,n,!1)})}function p(e,t,n){a(v(t),function(t){e.removeEventListener(t,n,!1)})}function m(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return e.indexOf(t)>-1}function v(e){return e.trim().split(/\s+/g)}function E(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function T(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];E(r,a)<0&&i.push(e[o]),r[o]=a,o++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function x(e,t){for(var n,r,o=t[0].toUpperCase()+t.slice(1),a=0;a<le.length;){if(n=le[a],(r=n?n+o:t)in e)return r;a++}return i}function b(){return pe++}function _(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function w(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){h(e.options.enable,[e])&&n.handler(t)},this.init()}function R(e){return new(e.options.inputClass||(ve?V:Ee?U:ge?j:z))(e,H)}function H(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&be&&0==i-r,a=t&(we|Re)&&0==i-r;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,S(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function S(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=A(t)),r>1&&!n.firstMultiple?n.firstMultiple=A(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=t.center=k(i);t.timeStamp=fe(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=F(s,l),t.distance=D(s,l),M(n,t),t.offsetDirection=L(t.deltaX,t.deltaY),t.scale=a?O(a.pointers,i):1,t.rotation=a?N(a.pointers,i):0,C(n,t);var c=e.element;m(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}function M(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};(t.eventType===be||o.eventType===we)&&(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function C(e,t){var n,r,o,a,s=e.lastInterval||t,l=t.timeStamp-s.timeStamp;if(t.eventType!=Re&&(l>xe||s.velocity===i)){var c=s.deltaX-t.deltaX,u=s.deltaY-t.deltaY,h=P(l,c,u);r=h.x,o=h.y,n=de(h.x)>de(h.y)?h.x:h.y,a=L(c,u),e.lastInterval=t}else n=s.velocity,r=s.velocityX,o=s.velocityY,a=s.direction;t.velocity=n,t.velocityX=r,t.velocityY=o,t.direction=a}function A(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:he(e.pointers[n].clientX),clientY:he(e.pointers[n].clientY)},n++;return{timeStamp:fe(),pointers:t,center:k(t),deltaX:e.deltaX,deltaY:e.deltaY}}function k(e){var t=e.length;if(1===t)return{x:he(e[0].clientX),y:he(e[0].clientY)};for(var n=0,i=0,r=0;t>r;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:he(n/t),y:he(i/t)}}function P(e,t,n){return{x:t/e||0,y:n/e||0}}function L(e,t){return e===t?He:de(e)>=de(t)?e>0?Se:Me:t>0?Ce:Ae}function D(e,t,n){n||(n=De);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function F(e,t,n){n||(n=De);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function N(e,t){return F(t[1],t[0],Fe)-F(e[1],e[0],Fe)}function O(e,t){return D(t[0],t[1],Fe)/D(e[0],e[1],Fe)}function z(){this.evEl=Oe,this.evWin=ze,this.allow=!0,this.pressed=!1,w.apply(this,arguments)}function V(){this.evEl=Ie,this.evWin=Ue,w.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function B(){this.evTarget=je,this.evWin=Ge,this.started=!1,w.apply(this,arguments)}function I(e,t){var n=y(e.touches),i=y(e.changedTouches);return t&(we|Re)&&(n=T(n.concat(i),"identifier",!0)),[n,i]}function U(){this.evTarget=Xe,this.targetIds={},w.apply(this,arguments)}function W(e,t){var n=y(e.touches),i=this.targetIds;if(t&(be|_e)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=y(e.changedTouches),s=[],l=this.target;if(o=n.filter(function(e){return m(e.target,l)}),t===be)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&s.push(a[r]),t&(we|Re)&&delete i[a[r].identifier],r++;return s.length?[T(o.concat(s),"identifier",!0),s]:void 0}function j(){w.apply(this,arguments);var e=u(this.handler,this);this.touch=new U(this.manager,e),this.mouse=new z(this.manager,e)}function G(e,t){this.manager=e,this.set(t)}function q(e){if(g(e,Je))return Je;var t=g(e,et),n=g(e,tt);return t&&n?et+" "+tt:t||n?t?et:tt:g(e,Ze)?Ze:Ke}function X(e){this.id=b(),this.manager=null,this.options=l(e||{},this.defaults),this.options.enable=d(this.options.enable,!0),this.state=nt,this.simultaneous={},this.requireFail=[]}function Y(e){return e&st?"cancel":e&ot?"end":e&rt?"move":e&it?"start":""}function $(e){return e==Ae?"down":e==Ce?"up":e==Se?"left":e==Me?"right":""}function Q(e,t){var n=t.manager;return n?n.get(e):e}function K(){X.apply(this,arguments)}function Z(){K.apply(this,arguments),this.pX=null,this.pY=null}function J(){K.apply(this,arguments)}function ee(){X.apply(this,arguments),this._timer=null,this._input=null}function te(){K.apply(this,arguments)}function ne(){K.apply(this,arguments)}function ie(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function re(e,t){return t=t||{},t.recognizers=d(t.recognizers,re.defaults.preset),new oe(e,t)}function oe(e,t){t=t||{},this.options=l(t,re.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=R(this),this.touchAction=new G(this,this.options.touchAction),ae(this,!0),a(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ae(e,t){var n=e.element;a(e.options.cssProps,function(e,i){n.style[x(n.style,i)]=t?e:""})}function se(e,n){var i=t.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var le=["","webkit","moz","MS","ms","o"],ce=t.createElement("div"),ue="function",he=Math.round,de=Math.abs,fe=Date.now,pe=1,me=/mobile|tablet|ip(ad|hone|od)|android/i,ge="ontouchstart"in e,ve=x(e,"PointerEvent")!==i,Ee=ge&&me.test(navigator.userAgent),ye="touch",Te="mouse",xe=25,be=1,_e=2,we=4,Re=8,He=1,Se=2,Me=4,Ce=8,Ae=16,ke=Se|Me,Pe=Ce|Ae,Le=ke|Pe,De=["x","y"],Fe=["clientX","clientY"];w.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(_(this.element),this.evWin,this.domHandler)}};var Ne={mousedown:be,mousemove:_e,mouseup:we},Oe="mousedown",ze="mousemove mouseup";c(z,w,{handler:function(e){var t=Ne[e.type];t&be&&0===e.button&&(this.pressed=!0),t&_e&&1!==e.which&&(t=we),this.pressed&&this.allow&&(t&we&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Te,srcEvent:e}))}});var Ve={pointerdown:be,pointermove:_e,pointerup:we,pointercancel:Re,pointerout:Re},Be={2:ye,3:"pen",4:Te,5:"kinect"},Ie="pointerdown",Ue="pointermove pointerup pointercancel";e.MSPointerEvent&&(Ie="MSPointerDown",Ue="MSPointerMove MSPointerUp MSPointerCancel"),c(V,w,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=Ve[i],o=Be[e.pointerType]||e.pointerType,a=o==ye,s=E(t,e.pointerId,"pointerId");r&be&&(0===e.button||a)?0>s&&(t.push(e),s=t.length-1):r&(we|Re)&&(n=!0),0>s||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var We={touchstart:be,touchmove:_e,touchend:we,touchcancel:Re},je="touchstart",Ge="touchstart touchmove touchend touchcancel";c(B,w,{handler:function(e){var t=We[e.type];if(t===be&&(this.started=!0),this.started){var n=I.call(this,e,t);t&(we|Re)&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:ye,srcEvent:e})}}});var qe={touchstart:be,touchmove:_e,touchend:we,touchcancel:Re},Xe="touchstart touchmove touchend touchcancel";c(U,w,{handler:function(e){var t=qe[e.type],n=W.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:ye,srcEvent:e})}}),c(j,w,{handler:function(e,t,n){var i=n.pointerType==ye,r=n.pointerType==Te;if(i)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;t&(we|Re)&&(this.mouse.allow=!0),this.callback(e,t,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ye=x(ce.style,"touchAction"),$e=Ye!==i,Qe="compute",Ke="auto",Ze="manipulation",Je="none",et="pan-x",tt="pan-y";G.prototype={set:function(e){e==Qe&&(e=this.compute()),$e&&(this.manager.element.style[Ye]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return a(this.manager.recognizers,function(t){h(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),q(e.join(" "))},preventDefaults:function(e){if(!$e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=g(i,Je),o=g(i,tt),a=g(i,et);return r||o&&n&ke||a&&n&Pe?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var nt=1,it=2,rt=4,ot=8,at=ot,st=16;X.prototype={defaults:{},set:function(e){return s(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=Q(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return o(e,"dropRecognizeWith",this)?this:(e=Q(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(o(e,"requireFailure",this))return this;var t=this.requireFail;return e=Q(e,this),-1===E(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,"dropRequireFailure",this))return this;e=Q(e,this);var t=E(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(n.options.event+(t?Y(i):""),e)}var n=this,i=this.state;ot>i&&t(!0),t(),i>=ot&&t(!0)},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|nt)))return!1;e++}return!0},recognize:function(e){var t=s({},e);return h(this.options.enable,[this,t])?(this.state&(at|st|32)&&(this.state=nt),this.state=this.process(t),void(this.state&(it|rt|ot|st)&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},c(K,X,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(it|rt),r=this.attrTest(e);return i&&(n&Re||!r)?t|st:i||r?n&we?t|ot:t&it?t|rt:it:32}}),c(Z,K,{defaults:{event:"pan",threshold:10,pointers:1,direction:Le},getTouchAction:function(){var e=this.options.direction,t=[];return e&ke&&t.push(tt),e&Pe&&t.push(et),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,a=e.deltaY;return r&t.direction||(t.direction&ke?(r=0===o?He:0>o?Se:Me,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===a?He:0>a?Ce:Ae,n=a!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return K.prototype.attrTest.call(this,e)&&(this.state&it||!(this.state&it)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=$(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),c(J,K,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Je]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&it)},emit:function(e){if(this._super.emit.call(this,e),1!==e.scale){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),c(ee,X,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Ke]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(we|Re)&&!o)this.reset();else if(e.eventType&be)this.reset(),this._timer=r(function(){this.state=at,this.tryEmit()},t.time,this);else if(e.eventType&we)return at;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===at&&(e&&e.eventType&we?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=fe(),this.manager.emit(this.options.event,this._input)))}}),c(te,K,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Je]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&it)}}),c(ne,K,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:ke|Pe,pointers:1},getTouchAction:function(){return Z.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(ke|Pe)?t=e.velocity:n&ke?t=e.velocityX:n&Pe&&(t=e.velocityY),this._super.attrTest.call(this,e)&&n&e.direction&&e.distance>this.options.threshold&&de(t)>this.options.velocity&&e.eventType&we},emit:function(e){var t=$(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),c(ie,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Ze]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&be&&0===this.count)return this.failTimeout();if(i&&o&&n){if(e.eventType!=we)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||D(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&a?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=r(function(){this.state=at,this.tryEmit()},t.interval,this),it):at}return 32},failTimeout:function(){return this._timer=r(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==at&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),re.VERSION="2.0.4",re.defaults={domEvents:!1,touchAction:Qe,enable:!0,inputTarget:null,inputClass:null,preset:[[te,{enable:!1}],[J,{enable:!1},["rotate"]],[ne,{direction:ke}],[Z,{direction:ke},["swipe"]],[ie],[ie,{event:"doubletap",taps:2},["tap"]],[ee]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},oe.prototype={set:function(e){return s(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&at)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(it|rt|ot)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof X)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(o(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(o(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(E(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return a(v(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return a(v(e),function(e){t?n[e].splice(E(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&se(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&ae(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(re,{INPUT_START:be,INPUT_MOVE:_e,INPUT_END:we,INPUT_CANCEL:Re,STATE_POSSIBLE:nt,STATE_BEGAN:it,STATE_CHANGED:rt,STATE_ENDED:ot,STATE_RECOGNIZED:at,STATE_CANCELLED:st,STATE_FAILED:32,DIRECTION_NONE:He,DIRECTION_LEFT:Se,DIRECTION_RIGHT:Me,DIRECTION_UP:Ce,DIRECTION_DOWN:Ae,DIRECTION_HORIZONTAL:ke,DIRECTION_VERTICAL:Pe,DIRECTION_ALL:Le,Manager:oe,Input:w,TouchAction:G,TouchInput:U,MouseInput:z,PointerEventInput:V,TouchMouseInput:j,SingleTouchInput:B,Recognizer:X,AttrRecognizer:K,Tap:ie,Pan:Z,Swipe:ne,Pinch:J,Rotate:te,Press:ee,on:f,off:p,each:a,merge:l,extend:s,inherit:c,bindFn:u,prefixed:x}),typeof define==ue&&define.amd?define(function(){return re}):"undefined"!=typeof module&&module.exports?module.exports=re:e.Hammer=re}(window,document),function(e){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],e):"object"==typeof exports?e(require("jquery"),require("hammerjs")):e(jQuery,Hammer)}(function(e,t){function n(n,i){var r=e(n);r.data("hammer")||r.data("hammer",new t(r[0],i))}e.fn.hammer=function(e){return this.each(function(){n(this,e)})},t.Manager.prototype.emit=function(t){return function(n,i){t.call(this,n,i),e(this.element).trigger({type:n,gesture:i})}}(t.Manager.prototype.emit)}),function(e){e.Package?Materialize={}:e.Materialize={}}(window),"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=Materialize),exports.default=Materialize),function(e){for(var t=0,n=["webkit","moz"],i=e.requestAnimationFrame,r=e.cancelAnimationFrame,o=n.length;--o>=0&&!i;)i=e[n[o]+"RequestAnimationFrame"],r=e[n[o]+"CancelRequestAnimationFrame"];i&&r||(i=function(e){var n=+Date.now(),i=Math.max(t+16,n);return setTimeout(function(){e(t=i)},i-n)},r=clearTimeout),e.requestAnimationFrame=i,e.cancelAnimationFrame=r}(window),Materialize.objectSelectorString=function(e){return((e.prop("tagName")||"")+(e.attr("id")||"")+(e.attr("class")||"")).replace(/\s/g,"")},Materialize.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),Materialize.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=)/g,"\\$1")},Materialize.elementOrParentIsFixed=function(e){var t=$(e),n=!1;return t.add(t.parents()).each(function(){if("fixed"===$(this).css("position"))return n=!0,!1}),n};var getTime=Date.now||function(){return(new Date).getTime()};Materialize.throttle=function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:getTime(),a=null,o=e.apply(i,r),i=r=null};return function(){var c=getTime();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,r=arguments,u<=0?(clearTimeout(a),a=null,s=c,o=e.apply(i,r),i=r=null):a||!1===n.trailing||(a=setTimeout(l,u)),o}};var Vel;Vel=jQuery?jQuery.Velocity:$?$.Velocity:Velocity,Materialize.Vel=Vel||Velocity,function(e){e.fn.collapsible=function(t,n){var i={accordion:void 0,onOpen:void 0,onClose:void 0},r=t;return t=e.extend(i,t),this.each(function(){function i(t){d=h.find("> li > .collapsible-header"),t.hasClass("active")?t.parent().addClass("active"):t.parent().removeClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}}):t.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}}),d.not(t).removeClass("active").parent().removeClass("active"),d.not(t).parent().children(".collapsible-body").stop(!0,!1).each(function(){e(this).is(":visible")&&e(this).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height",""),s(e(this).siblings(".collapsible-header"))}})})}function o(t){t.hasClass("active")?t.parent().addClass("active"):t.parent().removeClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}}):t.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}})}function a(e,n){n||e.toggleClass("active"),t.accordion||"accordion"===f||void 0===f?i(e):o(e),s(e)}function s(e){e.hasClass("active")?"function"==typeof t.onOpen&&t.onOpen.call(this,e.parent()):"function"==typeof t.onClose&&t.onClose.call(this,e.parent())}function l(e){return c(e).length>0}function c(e){return e.closest("li > .collapsible-header")}function u(){h.off("click.collapse","> li > .collapsible-header")}var h=e(this),d=e(this).find("> li > .collapsible-header"),f=h.data("collapsible");if("destroy"!==r)if(n>=0&&n<d.length){var p=d.eq(n);p.length&&("open"===r||"close"===r&&p.hasClass("active"))&&a(p)}else u(),h.on("click.collapse","> li > .collapsible-header",function(t){var n=e(t.target);l(n)&&(n=c(n)),a(n)}),t.accordion||"accordion"===f||void 0===f?a(d.filter(".active").first(),!0):d.filter(".active").each(function(){a(e(this),!0)});else u()})},e(document).ready(function(){e(".collapsible").collapsible()})}(jQuery),function(e){e.fn.scrollTo=function(t){return e(this).scrollTop(e(this).scrollTop()-e(this).offset().top+e(t).offset().top),this},e.fn.dropdown=function(t){var n={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===t?(this.each(function(){e(this).trigger("open")}),!1):"close"===t?(this.each(function(){e(this).trigger("close")}),!1):void this.each(function(){function i(){void 0!==a.data("induration")&&(s.inDuration=a.data("induration")),void 0!==a.data("outduration")&&(s.outDuration=a.data("outduration")),void 0!==a.data("constrainwidth")&&(s.constrainWidth=a.data("constrainwidth")),void 0!==a.data("hover")&&(s.hover=a.data("hover")),void 0!==a.data("gutter")&&(s.gutter=a.data("gutter")),void 0!==a.data("beloworigin")&&(s.belowOrigin=a.data("beloworigin")),void 0!==a.data("alignment")&&(s.alignment=a.data("alignment")),void 0!==a.data("stoppropagation")&&(s.stopPropagation=a.data("stoppropagation"))}function r(t){"focus"===t&&(l=!0),i(),c.addClass("active"),a.addClass("active");var n=a[0].getBoundingClientRect().width;!0===s.constrainWidth?c.css("width",n):c.css("white-space","nowrap");var r=window.innerHeight,u=a.innerHeight(),h=a.offset().left,d=a.offset().top-e(window).scrollTop(),f=s.alignment,p=0,m=0,g=0;!0===s.belowOrigin&&(g=u);var v=0,E=0,y=a.parent();if(y.is("body")||(y[0].scrollHeight>y[0].clientHeight&&(v=y[0].scrollTop),y[0].scrollWidth>y[0].clientWidth&&(E=y[0].scrollLeft)),h+c.innerWidth()>e(window).width()?f="right":h-c.innerWidth()+a.innerWidth()<0&&(f="left"),d+c.innerHeight()>r)if(d+u-c.innerHeight()<0){var T=r-d-g;c.css("max-height",T)}else g||(g+=u),g-=c.innerHeight();"left"===f?(p=s.gutter,m=a.position().left+p):"right"===f&&(c.stop(!0,!0).css({opacity:0,left:0}),m=a.position().left+n-c.width()+(p=-s.gutter)),c.css({position:"absolute",top:a.position().top+g+v,left:m+E}),c.slideDown({queue:!1,duration:s.inDuration,easing:"easeOutCubic",complete:function(){e(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:s.inDuration,easing:"easeOutSine"}),setTimeout(function(){e(document).on("click."+c.attr("id"),function(t){o(),e(document).off("click."+c.attr("id"))})},0)}function o(){l=!1,c.fadeOut(s.outDuration),c.removeClass("active"),a.removeClass("active"),e(document).off("click."+c.attr("id")),setTimeout(function(){c.css("max-height","")},s.outDuration)}var a=e(this),s=e.extend({},n,t),l=!1,c=e("#"+a.attr("data-activates"));if(i(),a.after(c),s.hover){var u=!1;a.off("click."+a.attr("id")),a.on("mouseenter",function(e){!1===u&&(r(),u=!0)}),a.on("mouseleave",function(t){var n=t.toElement||t.relatedTarget;e(n).closest(".dropdown-content").is(c)||(c.stop(!0,!0),o(),u=!1)}),c.on("mouseleave",function(t){var n=t.toElement||t.relatedTarget;e(n).closest(".dropdown-button").is(a)||(c.stop(!0,!0),o(),u=!1)})}else a.off("click."+a.attr("id")),a.on("click."+a.attr("id"),function(t){l||(a[0]!=t.currentTarget||a.hasClass("active")||0!==e(t.target).closest(".dropdown-content").length?a.hasClass("active")&&(o(),e(document).off("click."+c.attr("id"))):(t.preventDefault(),s.stopPropagation&&t.stopPropagation(),r("click")))});a.on("open",function(e,t){r(t)}),a.on("close",o)})},e(document).ready(function(){e(".dropdown-button").dropdown()})}(jQuery),function(e,t){"use strict";var n={opacity:.5,inDuration:250,outDuration:250,ready:void 0,complete:void 0,dismissible:!0,startingTop:"4%",endingTop:"10%"},i=function(){function i(t,n){_classCallCheck(this,i),t[0].M_Modal&&t[0].M_Modal.destroy(),this.$el=t,this.options=e.extend({},i.defaults,n),this.isOpen=!1,this.$el[0].M_Modal=this,this.id=t.attr("id"),this.openingTrigger=void 0,this.$overlay=e('<div class="modal-overlay"></div>'),i._increment++,i._count++,this.$overlay[0].style.zIndex=1e3+2*i._increment,this.$el[0].style.zIndex=1e3+2*i._increment+1,this.setupEventHandlers()}return _createClass(i,[{key:"getInstance",value:function(){return this}},{key:"destroy",value:function(){this.removeEventHandlers(),this.$el[0].removeAttribute("style"),this.$overlay[0].parentNode&&this.$overlay[0].parentNode.removeChild(this.$overlay[0]),this.$el[0].M_Modal=void 0,i._count--}},{key:"setupEventHandlers",value:function(){this.handleOverlayClickBound=this.handleOverlayClick.bind(this),this.handleModalCloseClickBound=this.handleModalCloseClick.bind(this),1===i._count&&document.body.addEventListener("click",this.handleTriggerClick),this.$overlay[0].addEventListener("click",this.handleOverlayClickBound),this.$el[0].addEventListener("click",this.handleModalCloseClickBound)}},{key:"removeEventHandlers",value:function(){0===i._count&&document.body.removeEventListener("click",this.handleTriggerClick),this.$overlay[0].removeEventListener("click",this.handleOverlayClickBound),this.$el[0].removeEventListener("click",this.handleModalCloseClickBound)}},{key:"handleTriggerClick",value:function(t){var n=e(t.target).closest(".modal-trigger");if(t.target&&n.length){var i=n[0].getAttribute("href");i=i?i.slice(1):n[0].getAttribute("data-target");var r=document.getElementById(i).M_Modal;r&&r.open(n),t.preventDefault()}}},{key:"handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"handleModalCloseClick",value:function(t){var n=e(t.target).closest(".modal-close");t.target&&n.length&&this.close()}},{key:"handleKeydown",value:function(e){27===e.keyCode&&this.options.dismissible&&this.close()}},{key:"animateIn",value:function(){var n=this;e.extend(this.$el[0].style,{display:"block",opacity:0}),e.extend(this.$overlay[0].style,{display:"block",opacity:0}),t(this.$overlay[0],{opacity:this.options.opacity},{duration:this.options.inDuration,queue:!1,ease:"easeOutCubic"});var i={duration:this.options.inDuration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof n.options.ready&&n.options.ready.call(n,n.$el,n.openingTrigger)}};this.$el[0].classList.contains("bottom-sheet")?t(this.$el[0],{bottom:0,opacity:1},i):(t.hook(this.$el[0],"scaleX",.7),this.$el[0].style.top=this.options.startingTop,t(this.$el[0],{top:this.options.endingTop,opacity:1,scaleX:1},i))}},{key:"animateOut",value:function(){var e=this;t(this.$overlay[0],{opacity:0},{duration:this.options.outDuration,queue:!1,ease:"easeOutQuart"});var n={duration:this.options.outDuration,queue:!1,ease:"easeOutCubic",complete:function(){e.$el[0].style.display="none","function"==typeof e.options.complete&&e.options.complete.call(e,e.$el),e.$overlay[0].parentNode.removeChild(e.$overlay[0])}};this.$el[0].classList.contains("bottom-sheet")?t(this.$el[0],{bottom:"-100%",opacity:0},n):t(this.$el[0],{top:this.options.startingTop,opacity:0,scaleX:.7},n)}},{key:"open",value:function(e){if(!this.isOpen){this.isOpen=!0;var t=document.body;return t.style.overflow="hidden",this.$el[0].classList.add("open"),t.appendChild(this.$overlay[0]),this.openingTrigger=e||void 0,this.options.dismissible&&(this.handleKeydownBound=this.handleKeydown.bind(this),document.addEventListener("keydown",this.handleKeydownBound)),this.animateIn(),this}}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,this.$el[0].classList.remove("open"),document.body.style.overflow="",this.options.dismissible&&document.removeEventListener("keydown",this.handleKeydownBound),this.animateOut(),this}}],[{key:"init",value:function(t,n){var r=[];return t.each(function(){r.push(new i(e(this),n))}),r}},{key:"defaults",get:function(){return n}}]),i}();i._increment=0,i._count=0,Materialize.Modal=i,e.fn.modal=function(t){return i.prototype[t]?"get"===t.slice(0,3)?this.first()[0].M_Modal[t]():this.each(function(){this.M_Modal[t]()}):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.modal"):(i.init(this,arguments[0]),this)}}(jQuery,Materialize.Vel),function(e){e.fn.materialbox=function(){return this.each(function(){function t(){o=!1;var t=s.parent(".material-placeholder"),i=(window.innerWidth,window.innerHeight,s.data("width")),l=s.data("height");s.velocity("stop",!0),e("#materialbox-overlay").velocity("stop",!0),e(".materialbox-caption").velocity("stop",!0),e(window).off("scroll.materialbox"),e(document).off("keyup.materialbox"),e(window).off("resize.materialbox"),e("#materialbox-overlay").velocity({opacity:0},{duration:a,queue:!1,easing:"easeOutQuad",complete:function(){r=!1,e(this).remove()}}),s.velocity({width:i,height:l,left:0,top:0},{duration:a,queue:!1,easing:"easeOutQuad",complete:function(){t.css({height:"",width:"",position:"",top:"",left:""}),s.removeAttr("style"),s.attr("style",c),s.removeClass("active"),o=!0,n&&n.css("overflow","")}}),e(".materialbox-caption").velocity({opacity:0},{duration:a,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}})}if(!e(this).hasClass("initialized")){e(this).addClass("initialized");var n,i,r=!1,o=!0,a=200,s=e(this),l=e("<div></div>").addClass("material-placeholder"),c=s.attr("style");s.wrap(l),s.on("click",function(){var a=s.parent(".material-placeholder"),l=window.innerWidth,c=window.innerHeight,u=s.width(),h=s.height();if(!1===o)return t(),!1;if(r&&!0===o)return t(),!1;for(o=!1,s.addClass("active"),r=!0,a.css({width:a[0].getBoundingClientRect().width,height:a[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),n=void 0,i=a[0].parentNode;null!==i&&!e(i).is(document);){var d=e(i);"visible"!==d.css("overflow")&&(d.css("overflow","visible"),n=void 0===n?d:n.add(d)),i=i.parentNode}s.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}).data("width",u).data("height",h);var f=e('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){!0===o&&t()});s.before(f);var p=f[0].getBoundingClientRect();if(f.css({width:l,height:c,left:-1*p.left,top:-1*p.top}),f.velocity({opacity:1},{duration:275,queue:!1,easing:"easeOutQuad"}),""!==s.data("caption")){var m=e('<div class="materialbox-caption"></div>');m.text(s.data("caption")),e("body").append(m),m.css({display:"inline"}),m.velocity({opacity:1},{duration:275,queue:!1,easing:"easeOutQuad"})}var g=0,v=0;u/l>h/c?(g=.9*l,v=.9*l*(h/u)):(g=.9*c*(u/h),v=.9*c),s.hasClass("responsive-img")?s.velocity({"max-width":g,width:u},{duration:0,queue:!1,complete:function(){s.css({left:0,top:0}).velocity({height:v,width:g,left:e(document).scrollLeft()+l/2-s.parent(".material-placeholder").offset().left-g/2,top:e(document).scrollTop()+c/2-s.parent(".material-placeholder").offset().top-v/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){o=!0}})}}):s.css("left",0).css("top",0).velocity({height:v,width:g,left:e(document).scrollLeft()+l/2-s.parent(".material-placeholder").offset().left-g/2,top:e(document).scrollTop()+c/2-s.parent(".material-placeholder").offset().top-v/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){o=!0}}),e(window).on("scroll.materialbox",function(){r&&t()}),e(window).on("resize.materialbox",function(){r&&t()}),e(document).on("keyup.materialbox",function(e){27===e.keyCode&&!0===o&&r&&t()})})}})},e(document).ready(function(){e(".materialboxed").materialbox()})}(jQuery),function(e){e.fn.parallax=function(){var t=e(window).width();return this.each(function(n){function i(n){var i;i=t<601?r.height()>0?r.height():r.children("img").height():r.height()>0?r.height():500;var o=r.children("img").first(),a=o.height()-i,s=r.offset().top+i,l=r.offset().top,c=e(window).scrollTop(),u=window.innerHeight,h=(c+u-l)/(i+u),d=Math.round(a*h);n&&o.css("display","block"),s>c&&l<c+u&&o.css("transform","translate3D(-50%,"+d+"px, 0)")}var r=e(this);r.addClass("parallax"),r.children("img").one("load",function(){i(!0)}).each(function(){this.complete&&e(this).trigger("load")}),e(window).scroll(function(){t=e(window).width(),i(!1)}),e(window).resize(function(){t=e(window).width(),i(!1)})})}}(jQuery),function(e){var t={init:function(t){var n={onShow:null,swipeable:!1,responsiveThreshold:1/0};t=e.extend(n,t);var i=Materialize.objectSelectorString(e(this));return this.each(function(n){var r,o,a,s,l,c=i+n,u=e(this),h=e(window).width(),d=u.find("li.tab a"),f=u.width(),p=e(),m=Math.max(f,u[0].scrollWidth)/d.length,g=0,v=0,E=!1,y=function(e){return Math.ceil(f-e.position().left-e[0].getBoundingClientRect().width-u.scrollLeft())},T=function(e){return Math.floor(e.position().left+u.scrollLeft())},x=function(e){g-e>=0?(s.velocity({right:y(r)},{duration:300,queue:!1,easing:"easeOutQuad"}),s.velocity({left:T(r)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90})):(s.velocity({left:T(r)},{duration:300,queue:!1,easing:"easeOutQuad"}),s.velocity({right:y(r)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90}))};t.swipeable&&h>t.responsiveThreshold&&(t.swipeable=!1),0===(r=e(d.filter('[href="'+location.hash+'"]'))).length&&(r=e(this).find("li.tab a.active").first()),0===r.length&&(r=e(this).find("li.tab a").first()),r.addClass("active"),(g=d.index(r))<0&&(g=0),void 0!==r[0]&&(o=e(r[0].hash)).addClass("active"),u.find(".indicator").length||u.append('<li class="indicator"></li>'),s=u.find(".indicator"),u.append(s),u.is(":visible")&&setTimeout(function(){s.css({right:y(r)}),s.css({left:T(r)})},0),e(window).off("resize.tabs-"+c).on("resize.tabs-"+c,function(){f=u.width(),m=Math.max(f,u[0].scrollWidth)/d.length,g<0&&(g=0),0!==m&&0!==f&&(s.css({right:y(r)}),s.css({left:T(r)}))}),t.swipeable?(d.each(function(){var t=e(Materialize.escapeHash(this.hash));t.addClass("carousel-item"),p=p.add(t)}),a=p.wrapAll('<div class="tabs-content carousel"></div>'),p.css("display",""),e(".tabs-content.carousel").carousel({fullWidth:!0,noWrap:!0,onCycleTo:function(e){if(!E){var n=g;g=a.index(e),r.removeClass("active"),(r=d.eq(g)).addClass("active"),x(n),"function"==typeof t.onShow&&t.onShow.call(u[0],o)}}})):d.not(r).each(function(){e(Materialize.escapeHash(this.hash)).hide()}),u.off("click.tabs").on("click.tabs","a",function(n){if(e(this).parent().hasClass("disabled"))n.preventDefault();else if(!e(this).attr("target")){E=!0,f=u.width(),m=Math.max(f,u[0].scrollWidth)/d.length,r.removeClass("active");var i=o;r=e(this),o=e(Materialize.escapeHash(this.hash)),d=u.find("li.tab a"),r.position(),r.addClass("active"),v=g,(g=d.index(e(this)))<0&&(g=0),t.swipeable?p.length&&p.carousel("set",g,function(){"function"==typeof t.onShow&&t.onShow.call(u[0],o)}):(void 0!==o&&(o.show(),o.addClass("active"),"function"==typeof t.onShow&&t.onShow.call(this,o)),void 0===i||i.is(o)||(i.hide(),i.removeClass("active"))),l=setTimeout(function(){E=!1},300),x(v),n.preventDefault()}})})},select_tab:function(e){this.find('a[href="#'+e+'"]').trigger("click")}};e.fn.tabs=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.tabs"):t.init.apply(this,arguments)},e(document).ready(function(){e("ul.tabs").tabs()})}(jQuery),function(e){e.fn.tooltip=function(n){var i={delay:350,tooltip:"",position:"bottom",html:!1};return"remove"===n?(this.each(function(){e("#"+e(this).attr("data-tooltip-id")).remove(),e(this).removeAttr("data-tooltip-id"),e(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(n=e.extend(i,n),this.each(function(){var i=Materialize.guid(),r=e(this);r.attr("data-tooltip-id")&&e("#"+r.attr("data-tooltip-id")).remove(),r.attr("data-tooltip-id",i);var o,a,s,l,c,u,h=function(){o=r.attr("data-html")?"true"===r.attr("data-html"):n.html,a=r.attr("data-delay"),a=void 0===a||""===a?n.delay:a,s=r.attr("data-position"),s=void 0===s||""===s?n.position:s,l=r.attr("data-tooltip"),l=void 0===l||""===l?n.tooltip:l};h(),c=function(){var t=e('<div class="material-tooltip"></div>');return l=o?e("<span></span>").html(l):e("<span></span>").text(l),t.append(l).appendTo(e("body")).attr("id",i),(u=e('<div class="backdrop"></div>')).appendTo(t),t}(),r.off("mouseenter.tooltip mouseleave.tooltip");var d,f=!1;r.on({"mouseenter.tooltip":function(e){d=setTimeout(function(){h(),f=!0,c.velocity("stop"),u.velocity("stop"),c.css({visibility:"visible",left:"0px",top:"0px"});var e,n,i,o=r.outerWidth(),a=r.outerHeight(),l=c.outerHeight(),d=c.outerWidth(),p="0px",m="0px",g=u[0].offsetWidth,v=u[0].offsetHeight,E=8,y=8,T=0;"top"===s?(e=r.offset().top-l-5,n=r.offset().left+o/2-d/2,i=t(n,e,d,l),p="-10px",u.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:l,marginLeft:d/2-g/2})):"left"===s?(e=r.offset().top+a/2-l/2,n=r.offset().left-d-5,i=t(n,e,d,l),m="-10px",u.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:l/2,marginLeft:d})):"right"===s?(e=r.offset().top+a/2-l/2,n=r.offset().left+o+5,i=t(n,e,d,l),m="+10px",u.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:l/2,marginLeft:"0px"})):(e=r.offset().top+r.outerHeight()+5,n=r.offset().left+o/2-d/2,i=t(n,e,d,l),p="+10px",u.css({top:0,left:0,marginLeft:d/2-g/2})),c.css({top:i.y,left:i.x}),E=Math.SQRT2*d/parseInt(g),y=Math.SQRT2*l/parseInt(v),T=Math.max(E,y),c.velocity({translateY:p,translateX:m},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),u.css({visibility:"visible"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:T,scaleY:T},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})},a)},"mouseleave.tooltip":function(){f=!1,clearTimeout(d),setTimeout(function(){!0!==f&&(c.velocity({opacity:0,translateY:0,translateX:0},{duration:225,queue:!1}),u.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){u.css({visibility:"hidden"}),c.css({visibility:"hidden"}),f=!1}}))},225)}})}))};var t=function(t,n,i,r){var o=t,a=n;return o<0?o=4:o+i>window.innerWidth&&(o-=o+i-window.innerWidth),a<0?a=4:a+r>window.innerHeight+e(window).scrollTop&&(a-=a+r-window.innerHeight),{x:o,y:a}};e(document).ready(function(){e(".tooltipped").tooltip()})}(jQuery),function(e){"use strict";function t(e){return null!==e&&e===e.window}function n(e){return t(e)?e:9===e.nodeType&&e.defaultView}function i(e){var t,i,r={top:0,left:0},o=e&&e.ownerDocument;return t=o.documentElement,void 0!==e.getBoundingClientRect&&(r=e.getBoundingClientRect()),i=n(o),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}}function r(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}function o(e){if(!1===u.allowEvent(e))return null;for(var t=null,n=e.target||e.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){t=n;break}n=n.parentNode}return t}function a(t){var n=o(t);null!==n&&(c.show(t,n),"ontouchstart"in e&&(n.addEventListener("touchend",c.hide,!1),n.addEventListener("touchcancel",c.hide,!1)),n.addEventListener("mouseup",c.hide,!1),n.addEventListener("mouseleave",c.hide,!1),n.addEventListener("dragend",c.hide,!1))}var s=s||{},l=document.querySelectorAll.bind(document),c={duration:750,show:function(e,t){if(2===e.button)return!1;var n=t||this,o=document.createElement("div");o.className="waves-ripple",n.appendChild(o);var a=i(n),s=e.pageY-a.top,l=e.pageX-a.left,u="scale("+n.clientWidth/100*10+")";"touches"in e&&(s=e.touches[0].pageY-a.top,l=e.touches[0].pageX-a.left),o.setAttribute("data-hold",Date.now()),o.setAttribute("data-scale",u),o.setAttribute("data-x",l),o.setAttribute("data-y",s);var h={top:s+"px",left:l+"px"};o.className=o.className+" waves-notransition",o.setAttribute("style",r(h)),o.className=o.className.replace("waves-notransition",""),h["-webkit-transform"]=u,h["-moz-transform"]=u,h["-ms-transform"]=u,h["-o-transform"]=u,h.transform=u,h.opacity="1",h["-webkit-transition-duration"]=c.duration+"ms",h["-moz-transition-duration"]=c.duration+"ms",h["-o-transition-duration"]=c.duration+"ms",h["transition-duration"]=c.duration+"ms",h["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",h["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",h["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",h["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",o.setAttribute("style",r(h))},hide:function(e){u.touchup(e);var t=this,n=(t.clientWidth,null),i=t.getElementsByClassName("waves-ripple");if(!(i.length>0))return!1;var o=(n=i[i.length-1]).getAttribute("data-x"),a=n.getAttribute("data-y"),s=n.getAttribute("data-scale"),l=350-(Date.now()-Number(n.getAttribute("data-hold")));l<0&&(l=0),setTimeout(function(){var e={top:a+"px",left:o+"px",opacity:"0","-webkit-transition-duration":c.duration+"ms","-moz-transition-duration":c.duration+"ms","-o-transition-duration":c.duration+"ms","transition-duration":c.duration+"ms","-webkit-transform":s,"-moz-transform":s,"-ms-transform":s,"-o-transform":s,transform:s};n.setAttribute("style",r(e)),setTimeout(function(){try{t.removeChild(n)}catch(e){return!1}},c.duration)},l)},wrapInput:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=n.className+" waves-input-wrapper";var o=n.getAttribute("style");o||(o=""),r.setAttribute("style",o),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(r,n),r.appendChild(n)}}}},u={touches:0,allowEvent:function(e){var t=!0;return"touchstart"===e.type?u.touches+=1:"touchend"===e.type||"touchcancel"===e.type?setTimeout(function(){u.touches>0&&(u.touches-=1)},500):"mousedown"===e.type&&u.touches>0&&(t=!1),t},touchup:function(e){u.allowEvent(e)}};s.displayEffect=function(t){"duration"in(t=t||{})&&(c.duration=t.duration),c.wrapInput(l(".waves-effect")),"ontouchstart"in e&&document.body.addEventListener("touchstart",a,!1),document.body.addEventListener("mousedown",a,!1)},s.attach=function(t){"input"===t.tagName.toLowerCase()&&(c.wrapInput([t]),t=t.parentNode),"ontouchstart"in e&&t.addEventListener("touchstart",a,!1),t.addEventListener("mousedown",a,!1)},e.Waves=s,document.addEventListener("DOMContentLoaded",function(){s.displayEffect()},!1)}(window),function(e,t){"use strict";var n={displayLength:1/0,inDuration:300,outDuration:375,className:void 0,completeCallback:void 0,activationPercent:.8},i=function(){function i(t,n,r,o){if(_classCallCheck(this,i),t){this.options={displayLength:n,className:r,completeCallback:o},this.options=e.extend({},i.defaults,this.options),this.message=t,this.panning=!1,this.timeRemaining=this.options.displayLength,0===i._toasts.length&&i._createContainer(),i._toasts.push(this);var a=this.createToast();a.M_Toast=this,this.el=a,this._animateIn(),this.setTimer()}}return _createClass(i,[{key:"createToast",value:function(){var t=document.createElement("div");if(t.classList.add("toast"),this.options.className){var n=this.options.className.split(" "),r=void 0,o=void 0;for(r=0,o=n.length;r<o;r++)t.classList.add(n[r])}return("object"==typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"==typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"==typeof this.message.nodeName)?t.appendChild(this.message):this.message instanceof jQuery?e(t).append(this.message):t.innerHTML=this.message,i._container.appendChild(t),t}},{key:"_animateIn",value:function(){t(this.el,{top:0,opacity:1},{duration:300,easing:"easeOutCubic",queue:!1})}},{key:"setTimer",value:function(){var e=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){e.panning||(e.timeRemaining-=20),e.timeRemaining<=0&&e.remove()},20))}},{key:"remove",value:function(){var e=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+n+"px)",this.el.style.opacity=0),t(this.el,{opacity:0,marginTop:"-40px"},{duration:this.options.outDuration,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof e.options.completeCallback&&e.options.completeCallback(),e.el.parentNode.removeChild(e.el),i._toasts.splice(i._toasts.indexOf(e),1),0===i._toasts.length&&i._removeContainer()}})}}],[{key:"_createContainer",value:function(){var e=document.createElement("div");e.setAttribute("id","toast-container"),e.addEventListener("touchstart",i._onDragStart),e.addEventListener("touchmove",i._onDragMove),e.addEventListener("touchend",i._onDragEnd),e.addEventListener("mousedown",i._onDragStart),document.addEventListener("mousemove",i._onDragMove),document.addEventListener("mouseup",i._onDragEnd),document.body.appendChild(e),i._container=e}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",i._onDragMove),document.removeEventListener("mouseup",i._onDragEnd),i._container.parentNode.removeChild(i._container),i._container=null}},{key:"_onDragStart",value:function(t){if(t.target&&e(t.target).closest(".toast").length){var n=e(t.target).closest(".toast")[0].M_Toast;n.panning=!0,i._draggedToast=n,n.el.classList.add("panning"),n.el.style.transition="",n.startingXPos=i._xPos(t),n.time=Date.now(),n.xPos=i._xPos(t)}}},{key:"_onDragMove",value:function(e){if(i._draggedToast){e.preventDefault();var t=i._draggedToast;t.deltaX=Math.abs(t.xPos-i._xPos(e)),t.xPos=i._xPos(e),t.velocityX=t.deltaX/(Date.now()-t.time),t.time=Date.now();var n=t.xPos-t.startingXPos,r=t.el.offsetWidth*t.options.activationPercent;t.el.style.transform="translateX("+n+"px)",t.el.style.opacity=1-Math.abs(n/r)}}},{key:"_onDragEnd",value:function(e){if(i._draggedToast){var t=i._draggedToast;t.panning=!1,t.el.classList.remove("panning");var n=t.xPos-t.startingXPos,r=t.el.offsetWidth*t.options.activationPercent;Math.abs(n)>r||t.velocityX>1?(t.wasSwiped=!0,t.remove()):(t.el.style.transition="transform .2s, opacity .2s",t.el.style.transform="",t.el.style.opacity=""),i._draggedToast=null}}},{key:"_xPos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"removeAll",value:function(){for(var e in i._toasts)i._toasts[e].remove()}},{key:"defaults",get:function(){return n}}]),i}();i._toasts=[],i._container=null,i._draggedToast=null,Materialize.Toast=i,Materialize.toast=function(e,t,n,r){return new i(e,t,n,r)}}(jQuery,Materialize.Vel),function(e){var t={init:function(t){var n={menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0,onOpen:null,onClose:null};t=e.extend(n,t),e(this).each(function(){var n=e(this),i=n.attr("data-activates"),r=e("#"+i);300!=t.menuWidth&&r.css("width",t.menuWidth);var o=e('.drag-target[data-sidenav="'+i+'"]');t.draggable?(o.length&&o.remove(),o=e('<div class="drag-target"></div>').attr("data-sidenav",i),e("body").append(o)):o=e(),"left"==t.edge?(r.css("transform","translateX(-100%)"),o.css({left:0})):(r.addClass("right-aligned").css("transform","translateX(100%)"),o.css({right:0})),r.hasClass("fixed")&&window.innerWidth>992&&r.css("transform","translateX(0)"),r.hasClass("fixed")&&e(window).resize(function(){window.innerWidth>992?0!==e("#sidenav-overlay").length&&l?a(!0):r.css("transform","translateX(0%)"):!1===l&&("left"===t.edge?r.css("transform","translateX(-100%)"):r.css("transform","translateX(100%)"))}),!0===t.closeOnClick&&r.on("click.itemclick","a:not(.collapsible-header)",function(){window.innerWidth>992&&r.hasClass("fixed")||a()});var a=function(n){s=!1,l=!1,e("body").css({overflow:"",width:""}),e("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}}),"left"===t.edge?(o.css({width:"",right:"",left:"0"}),r.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===n&&(r.removeAttr("style"),r.css("width",t.menuWidth))}})):(o.css({width:"",right:"0",left:""}),r.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===n&&(r.removeAttr("style"),r.css("width",t.menuWidth))}})),"function"==typeof t.onClose&&t.onClose.call(this,r)},s=!1,l=!1;t.draggable&&(o.on("click",function(){l&&a()}),o.hammer({prevent_default:!1}).on("pan",function(n){if("touch"==n.gesture.pointerType){n.gesture.direction;var i=n.gesture.center.x,o=n.gesture.center.y;if(n.gesture.velocityX,0===i&&0===o)return;var s=e("body"),c=e("#sidenav-overlay"),u=s.innerWidth();if(s.css("overflow","hidden"),s.width(u),0===c.length&&((c=e('<div id="sidenav-overlay"></div>')).css("opacity",0).click(function(){a()}),"function"==typeof t.onOpen&&t.onOpen.call(this,r),e("body").append(c)),"left"===t.edge&&(i>t.menuWidth?i=t.menuWidth:i<0&&(i=0)),"left"===t.edge)i<t.menuWidth/2?l=!1:i>=t.menuWidth/2&&(l=!0),r.css("transform","translateX("+(i-t.menuWidth)+"px)");else{i<window.innerWidth-t.menuWidth/2?l=!0:i>=window.innerWidth-t.menuWidth/2&&(l=!1);var h=i-t.menuWidth/2;h<0&&(h=0),r.css("transform","translateX("+h+"px)")}var d;"left"===t.edge?(d=i/t.menuWidth,c.velocity({opacity:d},{duration:10,queue:!1,easing:"easeOutQuad"})):(d=Math.abs((i-window.innerWidth)/t.menuWidth),c.velocity({opacity:d},{duration:10,queue:!1,easing:"easeOutQuad"}))}}).on("panend",function(n){if("touch"==n.gesture.pointerType){var i=e("#sidenav-overlay"),a=n.gesture.velocityX,c=n.gesture.center.x,u=c-t.menuWidth,h=c-t.menuWidth/2;u>0&&(u=0),h<0&&(h=0),s=!1,"left"===t.edge?l&&a<=.3||a<-.5?(0!==u&&r.velocity({translateX:[0,u]},{duration:300,queue:!1,easing:"easeOutQuad"}),i.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),o.css({width:"50%",right:0,left:""}),l=!0):(!l||a>.3)&&(e("body").css({overflow:"",width:""}),r.velocity({translateX:[-1*t.menuWidth-10,u]},{duration:200,queue:!1,easing:"easeOutQuad"}),i.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){"function"==typeof t.onClose&&t.onClose.call(this,r),e(this).remove()}}),o.css({width:"10px",right:"",left:0})):l&&a>=-.3||a>.5?(0!==h&&r.velocity({translateX:[0,h]},{duration:300,queue:!1,easing:"easeOutQuad"}),i.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),o.css({width:"50%",right:"",left:0}),l=!0):(!l||a<-.3)&&(e("body").css({overflow:"",width:""}),r.velocity({translateX:[t.menuWidth+10,h]},{duration:200,queue:!1,easing:"easeOutQuad"}),i.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){"function"==typeof t.onClose&&t.onClose.call(this,r),e(this).remove()}}),o.css({width:"10px",right:0,left:""}))}})),n.off("click.sidenav").on("click.sidenav",function(){if(!0===l)l=!1,s=!1,a();else{var n=e("body"),i=e('<div id="sidenav-overlay"></div>'),c=n.innerWidth();n.css("overflow","hidden"),n.width(c),e("body").append(o),"left"===t.edge?(o.css({width:"50%",right:0,left:""}),r.velocity({translateX:[0,-1*t.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(o.css({width:"50%",right:"",left:0}),r.velocity({translateX:[0,t.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})),i.css("opacity",0).click(function(){l=!1,s=!1,a(),i.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}})}),e("body").append(i),i.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){l=!0,s=!1}}),"function"==typeof t.onOpen&&t.onOpen.call(this,r)}return!1})})},destroy:function(){var t=e("#sidenav-overlay"),n=e('.drag-target[data-sidenav="'+e(this).attr("data-activates")+'"]');t.trigger("click"),n.remove(),e(this).off("click"),t.remove()},show:function(){this.trigger("click")},hide:function(){e("#sidenav-overlay").trigger("click")}};e.fn.sideNav=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.sideNav"):t.init.apply(this,arguments)}}(jQuery),function(e){function t(t,n,i,r){var a=e();return e.each(o,function(e,o){if(o.height()>0){var s=o.offset().top,l=o.offset().left,c=l+o.width(),u=s+o.height();!(l>n||c<r||s>i||u<t)&&a.push(o)}}),a}function n(n){++l;var i=r.scrollTop(),o=r.scrollLeft(),s=o+r.width(),u=i+r.height(),h=t(i+c.top+n||200,s+c.right,u+c.bottom,o+c.left);e.each(h,function(e,t){"number"!=typeof t.data("scrollSpy:ticks")&&t.triggerHandler("scrollSpy:enter"),t.data("scrollSpy:ticks",l)}),e.each(a,function(e,t){var n=t.data("scrollSpy:ticks");"number"==typeof n&&n!==l&&(t.triggerHandler("scrollSpy:exit"),t.data("scrollSpy:ticks",null))}),a=h}function i(){r.trigger("scrollSpy:winSize")}var r=e(window),o=[],a=[],s=!1,l=0,c={top:0,right:0,bottom:0,left:0};e.scrollSpy=function(t,i){var a={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(e){return'a[href="#'+e+'"]'}};i=e.extend(a,i);var l=[];(t=e(t)).each(function(t,n){o.push(e(n)),e(n).data("scrollSpy:id",t),e('a[href="#'+e(n).attr("id")+'"]').click(function(t){t.preventDefault();var n=e(Materialize.escapeHash(this.hash)).offset().top+1;e("html, body").animate({scrollTop:n-i.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),c.top=i.offsetTop||0,c.right=i.offsetRight||0,c.bottom=i.offsetBottom||0,c.left=i.offsetLeft||0;var u=Materialize.throttle(function(){n(i.scrollOffset)},i.throttle||100),h=function(){e(document).ready(u)};return s||(r.on("scroll",h),r.on("resize",h),s=!0),setTimeout(h,0),t.on("scrollSpy:enter",function(){l=e.grep(l,function(e){return 0!=e.height()});var t=e(this);l[0]?(e(i.getActiveElement(l[0].attr("id"))).removeClass(i.activeClass),t.data("scrollSpy:id")<l[0].data("scrollSpy:id")?l.unshift(e(this)):l.push(e(this))):l.push(e(this)),e(i.getActiveElement(l[0].attr("id"))).addClass(i.activeClass)}),t.on("scrollSpy:exit",function(){if((l=e.grep(l,function(e){return 0!=e.height()}))[0]){e(i.getActiveElement(l[0].attr("id"))).removeClass(i.activeClass);var t=e(this);(l=e.grep(l,function(e){return e.attr("id")!=t.attr("id")}))[0]&&e(i.getActiveElement(l[0].attr("id"))).addClass(i.activeClass)}}),t},e.winSizeSpy=function(t){return e.winSizeSpy=function(){return r},t=t||{throttle:100},r.on("resize",Materialize.throttle(i,t.throttle||100))},e.fn.scrollSpy=function(t){return e.scrollSpy(e(this),t)}}(jQuery),function(e){e(document).ready(function(){function t(t){var n=t.css("font-family"),r=t.css("font-size"),o=t.css("line-height"),a=t.css("padding");r&&i.css("font-size",r),n&&i.css("font-family",n),o&&i.css("line-height",o),a&&i.css("padding",a),t.data("original-height")||t.data("original-height",t.height()),"off"===t.attr("wrap")&&i.css("overflow-wrap","normal").css("white-space","pre"),i.text(t.val()+"\n");var s=i.html().replace(/\n/g,"<br>");i.html(s),t.is(":visible")?i.css("width",t.width()):i.css("width",e(window).width()/2),t.data("original-height")<=i.height()?t.css("height",i.height()):t.val().length<t.data("previous-length")&&t.css("height",t.data("original-height")),t.data("previous-length",t.val().length)}Materialize.updateTextFields=function(){e("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea").each(function(t,n){var i=e(this);e(n).val().length>0||e(n).is(":focus")||n.autofocus||void 0!==i.attr("placeholder")?i.siblings("label").addClass("active"):e(n)[0].validity?i.siblings("label").toggleClass("active",!0===e(n)[0].validity.badInput):i.siblings("label").removeClass("active")})};var n="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";e(document).on("change",n,function(){0===e(this).val().length&&void 0===e(this).attr("placeholder")||e(this).siblings("label").addClass("active"),validate_field(e(this))}),e(document).ready(function(){Materialize.updateTextFields()}),e(document).on("reset",function(t){var i=e(t.target);i.is("form")&&(i.find(n).removeClass("valid").removeClass("invalid"),i.find(n).each(function(){""===e(this).attr("value")&&e(this).siblings("label").removeClass("active")}),i.find("select.initialized").each(function(){var e=i.find("option[selected]").text();i.siblings("input.select-dropdown").val(e)}))}),e(document).on("focus",n,function(){e(this).siblings("label, .prefix").addClass("active")}),e(document).on("blur",n,function(){var t=e(this),n=".prefix";0===t.val().length&&!0!==t[0].validity.badInput&&void 0===t.attr("placeholder")&&(n+=", label"),t.siblings(n).removeClass("active"),validate_field(t)}),window.validate_field=function(e){var t=void 0!==e.attr("data-length"),n=parseInt(e.attr("data-length")),i=e.val().length;0!==e.val().length||!1!==e[0].validity.badInput||e.is(":required")?e.hasClass("validate")&&(e.is(":valid")&&t&&i<=n||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid"))):e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid"))},e(document).on("keyup.radio","input[type=radio], input[type=checkbox]",function(t){if(9===t.which)return e(this).addClass("tabbed"),void e(this).one("blur",function(t){e(this).removeClass("tabbed")})});var i=e(".hiddendiv").first();i.length||(i=e('<div class="hiddendiv common"></div>'),e("body").append(i)),e(".materialize-textarea").each(function(){var t=e(this);t.data("original-height",t.height()),t.data("previous-length",t.val().length)}),e("body").on("keyup keydown autoresize",".materialize-textarea",function(){t(e(this))}),e(document).on("change",'.file-field input[type="file"]',function(){for(var t=e(this).closest(".file-field").find("input.file-path"),n=e(this)[0].files,i=[],r=0;r<n.length;r++)i.push(n[r].name);t.val(i.join(", ")),t.trigger("change")});var r="input[type=range]",o=!1;e(r).each(function(){var t=e('<span class="thumb"><span class="value"></span></span>');e(this).after(t)});var a=function(e){var t=-7+parseInt(e.parent().css("padding-left"))+"px";e.velocity({height:"30px",width:"30px",top:"-30px",marginLeft:t},{duration:300,easing:"easeOutExpo"})},s=function(e){var t=e.width()-15,n=parseFloat(e.attr("max")),i=parseFloat(e.attr("min"));return(parseFloat(e.val())-i)/(n-i)*t};e(document).on("change",r,function(t){var n=e(this).siblings(".thumb");n.find(".value").html(e(this).val()),n.hasClass("active")||a(n);var i=s(e(this));n.addClass("active").css("left",i)}),e(document).on("mousedown touchstart",r,function(t){var n=e(this).siblings(".thumb");if(n.length<=0&&(n=e('<span class="thumb"><span class="value"></span></span>'),e(this).after(n)),n.find(".value").html(e(this).val()),o=!0,e(this).addClass("active"),n.hasClass("active")||a(n),"input"!==t.type){var i=s(e(this));n.addClass("active").css("left",i)}}),e(document).on("mouseup touchend",".range-field",function(){o=!1,e(this).removeClass("active")}),e(document).on("input mousemove touchmove",".range-field",function(t){var n=e(this).children(".thumb"),i=e(this).find(r);if(o){n.hasClass("active")||a(n);var l=s(i);n.addClass("active").css("left",l),n.find(".value").html(n.siblings(r).val())}}),e(document).on("mouseout touchleave",".range-field",function(){if(!o){var t=e(this).children(".thumb"),n=7+parseInt(e(this).css("padding-left"))+"px";t.hasClass("active")&&t.velocity({height:"0",width:"0",top:"10px",marginLeft:n},{duration:100}),t.removeClass("active")}}),e.fn.autocomplete=function(t){var n={data:{},limit:1/0,onAutocomplete:null,minLength:1};return t=e.extend(n,t),this.each(function(){var n,i=e(this),r=t.data,o=0,a=-1,s=i.closest(".input-field");if(e.isEmptyObject(r))i.off("keyup.autocomplete focus.autocomplete");else{var l,c=e('<ul class="autocomplete-content dropdown-content"></ul>');s.length?(l=s.children(".autocomplete-content.dropdown-content").first()).length||s.append(c):(l=i.next(".autocomplete-content.dropdown-content")).length||i.after(c),l.length&&(c=l);var u=function(e,t){var n=t.find("img"),i=t.text().toLowerCase().indexOf(""+e.toLowerCase()),r=i+e.length-1,o=t.text().slice(0,i),a=t.text().slice(i,r+1),s=t.text().slice(r+1);t.html("<span>"+o+"<span class='highlight'>"+a+"</span>"+s+"</span>"),n.length&&t.prepend(n)},h=function(){a=-1,c.find(".active").removeClass("active")},d=function(){c.empty(),h(),n=void 0};i.off("blur.autocomplete").on("blur.autocomplete",function(){d()}),i.off("keyup.autocomplete focus.autocomplete").on("keyup.autocomplete focus.autocomplete",function(a){o=0;var s=i.val().toLowerCase();if(13!==a.which&&38!==a.which&&40!==a.which){if(n!==s&&(d(),s.length>=t.minLength))for(var l in r)if(r.hasOwnProperty(l)&&-1!==l.toLowerCase().indexOf(s)){if(o>=t.limit)break;var h=e("<li></li>");r[l]?h.append('<img src="'+r[l]+'" class="right circle"><span>'+l+"</span>"):h.append("<span>"+l+"</span>"),c.append(h),u(s,h),o++}n=s}}),i.off("keydown.autocomplete").on("keydown.autocomplete",function(e){var t,n=e.which,i=c.children("li").length,r=c.children(".active").first();13===n&&a>=0?(t=c.children("li").eq(a)).length&&(t.trigger("mousedown.autocomplete"),e.preventDefault()):38!==n&&40!==n||(e.preventDefault(),38===n&&a>0&&a--,40===n&&a<i-1&&a++,r.removeClass("active"),a>=0&&c.children("li").eq(a).addClass("active"))}),c.off("mousedown.autocomplete touchstart.autocomplete").on("mousedown.autocomplete touchstart.autocomplete","li",function(){var n=e(this).text().trim();i.val(n),i.trigger("change"),d(),"function"==typeof t.onAutocomplete&&t.onAutocomplete.call(this,n)})}})}}),e.fn.material_select=function(t){function n(e,t,n){var r=e.indexOf(t),o=-1===r;return o?e.push(t):e.splice(r,1),n.siblings("ul.dropdown-content").find("li:not(.optgroup)").eq(t).toggleClass("active"),n.find("option").eq(t).prop("selected",o),i(e,n),o}function i(e,t){for(var n="",i=0,r=e.length;i<r;i++){var o=t.find("option").eq(e[i]).text();n+=0===i?o:", "+o}""===n&&(n=t.find("option:disabled").eq(0).text()),t.siblings("input.select-dropdown").val(n)}e(this).each(function(){var i=e(this);if(!i.hasClass("browser-default")){var r=!!i.attr("multiple"),o=i.attr("data-select-id");if(o&&(i.parent().find("span.caret").remove(),i.parent().find("input").remove(),i.unwrap(),e("ul#select-options-"+o).remove()),"destroy"===t)return i.removeAttr("data-select-id").removeClass("initialized"),void e(window).off("click.select");var a=Materialize.guid();i.attr("data-select-id",a);var s=e('<div class="select-wrapper"></div>');s.addClass(i.attr("class")),i.is(":disabled")&&s.addClass("disabled");var l=e('<ul id="select-options-'+a+'" class="dropdown-content select-dropdown '+(r?"multiple-select-dropdown":"")+'"></ul>'),c=i.children("option, optgroup"),u=[],h=!1,d=i.find("option:selected").html()||i.find("option:first").html()||"",f=function(t,n,i){var o=n.is(":disabled")?"disabled ":"",a="optgroup-option"===i?"optgroup-option ":"",s=r?'<input type="checkbox"'+o+"/><label></label>":"",c=n.data("icon"),u=n.attr("class");if(c){var h="";return u&&(h=' class="'+u+'"'),l.append(e('<li class="'+o+a+'"><img alt="" src="'+c+'"'+h+"><span>"+s+n.html()+"</span></li>")),!0}l.append(e('<li class="'+o+a+'"><span>'+s+n.html()+"</span></li>"))};c.length&&c.each(function(){if(e(this).is("option"))r?f(0,e(this),"multiple"):f(0,e(this));else if(e(this).is("optgroup")){var t=e(this).children("option");l.append(e('<li class="optgroup"><span>'+e(this).attr("label")+"</span></li>")),t.each(function(){f(0,e(this),"optgroup-option")})}}),l.find("li:not(.optgroup)").each(function(o){e(this).click(function(a){if(!e(this).hasClass("disabled")&&!e(this).hasClass("optgroup")){var s=!0;r?(e('input[type="checkbox"]',this).prop("checked",function(e,t){return!t}),s=n(u,o,i),g.trigger("focus")):(l.find("li").removeClass("active"),e(this).toggleClass("active"),g.val(e(this).text())),v(l,e(this)),i.find("option").eq(o).prop("selected",s),i.trigger("change"),void 0!==t&&t()}a.stopPropagation()})}),i.wrap(s);var p=e('<span class="caret">&#9660;</span>'),m=d.replace(/"/g,"&quot;"),g=e('<input type="text" class="select-dropdown" readonly="true" '+(i.is(":disabled")?"disabled":"")+' data-activates="select-options-'+a+'" value="'+m+'"/>');i.before(g),g.before(p),g.after(l),i.is(":disabled")||g.dropdown({hover:!1}),i.attr("tabindex")&&e(g[0]).attr("tabindex",i.attr("tabindex")),i.addClass("initialized"),g.on({focus:function(){if(e("ul.select-dropdown").not(l[0]).is(":visible")&&(e("input.select-dropdown").trigger("close"),e(window).off("click.select")),!l.is(":visible")){e(this).trigger("open",["focus"]);var t=e(this).val();r&&t.indexOf(",")>=0&&(t=t.split(",")[0]);var n=l.find("li").filter(function(){return e(this).text().toLowerCase()===t.toLowerCase()})[0];v(l,n,!0),e(window).off("click.select").on("click.select",function(){r&&(h||g.trigger("close")),e(window).off("click.select")})}},click:function(e){e.stopPropagation()}}),g.on("blur",function(){r||(e(this).trigger("close"),e(window).off("click.select")),l.find("li.selected").removeClass("selected")}),l.hover(function(){h=!0},function(){h=!1}),r&&i.find("option:selected:not(:disabled)").each(function(){var e=this.index;n(u,e,i),l.find("li:not(.optgroup)").eq(e).find(":checkbox").prop("checked",!0)});var v=function(t,n,i){if(n){t.find("li.selected").removeClass("selected");var o=e(n);o.addClass("selected"),r&&!i||l.scrollTo(o)}},E=[];g.on("keydown",function(t){if(9!=t.which)if(40!=t.which||l.is(":visible")){if(13!=t.which||l.is(":visible")){t.preventDefault();var n=String.fromCharCode(t.which).toLowerCase(),i=[9,13,27,38,40];if(n&&-1===i.indexOf(t.which)){E.push(n);var o=E.join(""),a=l.find("li").filter(function(){return 0===e(this).text().toLowerCase().indexOf(o)})[0];a&&v(l,a)}if(13==t.which){var s=l.find("li.selected:not(.disabled)")[0];s&&(e(s).trigger("click"),r||g.trigger("close"))}40==t.which&&(a=l.find("li.selected").length?l.find("li.selected").next("li:not(.disabled)")[0]:l.find("li:not(.disabled)")[0],v(l,a)),27==t.which&&g.trigger("close"),38==t.which&&(a=l.find("li.selected").prev("li:not(.disabled)")[0])&&v(l,a),setTimeout(function(){E=[]},1e3)}}else g.trigger("open");else g.trigger("close")})}})}}(jQuery),function(e){var t={init:function(t){var n={indicators:!0,height:400,transition:500,interval:6e3};return t=e.extend(n,t),this.each(function(){function n(e,t){e.hasClass("center-align")?e.velocity({opacity:0,translateY:-100},{duration:t,queue:!1}):e.hasClass("right-align")?e.velocity({opacity:0,translateX:100},{duration:t,queue:!1}):e.hasClass("left-align")&&e.velocity({opacity:0,translateX:-100},{duration:t,queue:!1})}function i(e){e>=c.length?e=0:e<0&&(e=c.length-1),(u=l.find(".active").index())!=e&&(r=c.eq(u),$caption=r.find(".caption"),r.removeClass("active"),r.velocity({opacity:0},{duration:t.transition,queue:!1,easing:"easeOutQuad",complete:function(){c.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),n($caption,t.transition),t.indicators&&o.eq(u).removeClass("active"),c.eq(e).velocity({opacity:1},{duration:t.transition,queue:!1,easing:"easeOutQuad"}),c.eq(e).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:t.transition,delay:t.transition,queue:!1,easing:"easeOutQuad"}),c.eq(e).addClass("active"),t.indicators&&o.eq(e).addClass("active"))}var r,o,a,s=e(this),l=s.find("ul.slides").first(),c=l.find("> li"),u=l.find(".active").index();-1!=u&&(r=c.eq(u)),s.hasClass("fullscreen")||(t.indicators?s.height(t.height+40):s.height(t.height),l.height(t.height)),c.find(".caption").each(function(){n(e(this),0)}),c.find("img").each(function(){var t="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";e(this).attr("src")!==t&&(e(this).css("background-image",'url("'+e(this).attr("src")+'")'),e(this).attr("src",t))}),t.indicators&&(o=e('<ul class="indicators"></ul>'),c.each(function(n){var r=e('<li class="indicator-item"></li>');r.click(function(){i(l.parent().find(e(this)).index()),clearInterval(a),a=setInterval(function(){u=l.find(".active").index(),c.length==u+1?u=0:u+=1,i(u)},t.transition+t.interval)}),o.append(r)}),s.append(o),o=s.find("ul.indicators").find("li.indicator-item")),r?r.show():(c.first().addClass("active").velocity({opacity:1},{duration:t.transition,queue:!1,easing:"easeOutQuad"}),u=0,r=c.eq(u),t.indicators&&o.eq(u).addClass("active")),r.find("img").each(function(){r.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:t.transition,queue:!1,easing:"easeOutQuad"})}),a=setInterval(function(){i((u=l.find(".active").index())+1)},t.transition+t.interval);var h=!1,d=!1,f=!1;s.hammer({prevent_default:!1}).on("pan",function(e){if("touch"===e.gesture.pointerType){clearInterval(a);var t=e.gesture.direction,n=e.gesture.deltaX,i=e.gesture.velocityX,r=e.gesture.velocityY;$curr_slide=l.find(".active"),Math.abs(i)>Math.abs(r)&&$curr_slide.velocity({translateX:n},{duration:50,queue:!1,easing:"easeOutQuad"}),4===t&&(n>s.innerWidth()/2||i<-.65)?f=!0:2===t&&(n<-1*s.innerWidth()/2||i>.65)&&(d=!0);var o;d&&(0===(o=$curr_slide.next()).length&&(o=c.first()),o.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),f&&(0===(o=$curr_slide.prev()).length&&(o=c.last()),o.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).on("panend",function(e){"touch"===e.gesture.pointerType&&($curr_slide=l.find(".active"),h=!1,curr_index=l.find(".active").index(),!f&&!d||c.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):d?(i(curr_index+1),$curr_slide.velocity({translateX:-1*s.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):f&&(i(curr_index-1),$curr_slide.velocity({translateX:s.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),d=!1,f=!1,clearInterval(a),a=setInterval(function(){u=l.find(".active").index(),c.length==u+1?u=0:u+=1,i(u)},t.transition+t.interval))}),s.on("sliderPause",function(){clearInterval(a)}),s.on("sliderStart",function(){clearInterval(a),a=setInterval(function(){u=l.find(".active").index(),c.length==u+1?u=0:u+=1,i(u)},t.transition+t.interval)}),s.on("sliderNext",function(){i((u=l.find(".active").index())+1)}),s.on("sliderPrev",function(){i((u=l.find(".active").index())-1)})})},pause:function(){e(this).trigger("sliderPause")},start:function(){e(this).trigger("sliderStart")},next:function(){e(this).trigger("sliderNext")},prev:function(){e(this).trigger("sliderPrev")}};e.fn.slider=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.tooltip"):t.init.apply(this,arguments)}}(jQuery),function(e){e(document).ready(function(){e(document).on("click.card",".card",function(t){if(e(this).find("> .card-reveal").length){var n=e(t.target).closest(".card");void 0===n.data("initialOverflow")&&n.data("initialOverflow",void 0===n.css("overflow")?"":n.css("overflow")),e(t.target).is(e(".card-reveal .card-title"))||e(t.target).is(e(".card-reveal .card-title i"))?e(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){e(this).css({display:"none"}),n.css("overflow",n.data("initialOverflow"))}}):(e(t.target).is(e(".card .activator"))||e(t.target).is(e(".card .activator i")))&&(n.css("overflow","hidden"),e(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"}))}})})}(jQuery),function(e){var t={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{}};e(document).ready(function(){e(document).on("click",".chip .close",function(t){e(this).closest(".chips").attr("data-initialized")||e(this).closest(".chip").remove()})}),e.fn.material_chip=function(n){var i=this;if(this.$el=e(this),this.$document=e(document),this.SELS={CHIPS:".chips",CHIP:".chip",INPUT:"input",DELETE:".material-icons",SELECTED_CHIP:".selected"},"data"===n)return this.$el.data("chips");var r=e.extend({},t,n);i.hasAutocomplete=!e.isEmptyObject(r.autocompleteOptions.data),this.init=function(){var t=0;i.$el.each(function(){var n=e(this),o=Materialize.guid();i.chipId=o,r.data&&r.data instanceof Array||(r.data=[]),n.data("chips",r.data),n.attr("data-index",t),n.attr("data-initialized",!0),n.hasClass(i.SELS.CHIPS)||n.addClass("chips"),i.chips(n,o),t++})},this.handleEvents=function(){var t=i.SELS;i.$document.off("click.chips-focus",t.CHIPS).on("click.chips-focus",t.CHIPS,function(n){e(n.target).find(t.INPUT).focus()}),i.$document.off("click.chips-select",t.CHIP).on("click.chips-select",t.CHIP,function(n){var r=e(n.target);if(r.length){var o=r.hasClass("selected"),a=r.closest(t.CHIPS);e(t.CHIP).removeClass("selected"),o||i.selectChip(r.index(),a)}}),i.$document.off("keydown.chips").on("keydown.chips",function(n){if(!e(n.target).is("input, textarea")){var r,o=i.$document.find(t.CHIP+t.SELECTED_CHIP),a=o.closest(t.CHIPS),s=o.siblings(t.CHIP).length;if(o.length)if(8===n.which||46===n.which){n.preventDefault(),r=o.index(),i.deleteChip(r,a);var l=null;r+1<s?l=r:r!==s&&r+1!==s||(l=s-1),l<0&&(l=null),null!==l&&i.selectChip(l,a),s||a.find("input").focus()}else if(37===n.which){if((r=o.index()-1)<0)return;e(t.CHIP).removeClass("selected"),i.selectChip(r,a)}else if(39===n.which){if(r=o.index()+1,e(t.CHIP).removeClass("selected"),r>s)return void a.find("input").focus();i.selectChip(r,a)}}}),i.$document.off("focusin.chips",t.CHIPS+" "+t.INPUT).on("focusin.chips",t.CHIPS+" "+t.INPUT,function(n){var i=e(n.target).closest(t.CHIPS);i.addClass("focus"),i.siblings("label, .prefix").addClass("active"),e(t.CHIP).removeClass("selected")}),i.$document.off("focusout.chips",t.CHIPS+" "+t.INPUT).on("focusout.chips",t.CHIPS+" "+t.INPUT,function(n){var i=e(n.target).closest(t.CHIPS);i.removeClass("focus"),void 0!==i.data("chips")&&i.data("chips").length||i.siblings("label").removeClass("active"),i.siblings(".prefix").removeClass("active")}),i.$document.off("keydown.chips-add",t.CHIPS+" "+t.INPUT).on("keydown.chips-add",t.CHIPS+" "+t.INPUT,function(n){var r=e(n.target),o=r.closest(t.CHIPS),a=o.children(t.CHIP).length;if(13===n.which){if(i.hasAutocomplete&&o.find(".autocomplete-content.dropdown-content").length&&o.find(".autocomplete-content.dropdown-content").children().length)return;return n.preventDefault(),i.addChip({tag:r.val()},o),void r.val("")}if((8===n.keyCode||37===n.keyCode)&&""===r.val()&&a)return n.preventDefault(),i.selectChip(a-1,o),void r.blur()}),i.$document.off("click.chips-delete",t.CHIPS+" "+t.DELETE).on("click.chips-delete",t.CHIPS+" "+t.DELETE,function(n){var r=e(n.target),o=r.closest(t.CHIPS),a=r.closest(t.CHIP);n.stopPropagation(),i.deleteChip(a.index(),o),o.find("input").focus()})},this.chips=function(t,n){t.empty(),t.data("chips").forEach(function(e){t.append(i.renderChip(e))}),t.append(e('<input id="'+n+'" class="input" placeholder="">')),i.setPlaceholder(t);var o=t.next("label");o.length&&(o.attr("for",n),void 0!==t.data("chips")&&t.data("chips").length&&o.addClass("active"));var a=e("#"+n);i.hasAutocomplete&&(r.autocompleteOptions.onAutocomplete=function(e){i.addChip({tag:e},t),a.val(""),a.focus()},a.autocomplete(r.autocompleteOptions))},this.renderChip=function(t){if(t.tag){var n=e('<div class="chip"></div>');return n.text(t.tag),t.image&&n.prepend(e("<img />").attr("src",t.image)),n.append(e('<i class="material-icons close">close</i>')),n}},this.setPlaceholder=function(e){void 0!==e.data("chips")&&!e.data("chips").length&&r.placeholder?e.find("input").prop("placeholder",r.placeholder):(void 0===e.data("chips")||e.data("chips").length)&&r.secondaryPlaceholder&&e.find("input").prop("placeholder",r.secondaryPlaceholder)},this.isValid=function(e,t){for(var n=e.data("chips"),i=!1,r=0;r<n.length;r++)if(n[r].tag===t.tag)return void(i=!0);return""!==t.tag&&!i},this.addChip=function(e,t){if(i.isValid(t,e)){for(var n=i.renderChip(e),r=[],o=t.data("chips"),a=0;a<o.length;a++)r.push(o[a]);r.push(e),t.data("chips",r),n.insertBefore(t.find("input")),t.trigger("chip.add",e),i.setPlaceholder(t)}},this.deleteChip=function(e,t){var n=t.data("chips")[e];t.find(".chip").eq(e).remove();for(var r=[],o=t.data("chips"),a=0;a<o.length;a++)a!==e&&r.push(o[a]);t.data("chips",r),t.trigger("chip.delete",n),i.setPlaceholder(t)},this.selectChip=function(e,t){var n=t.find(".chip").eq(e);n&&!1===n.hasClass("selected")&&(n.addClass("selected"),t.trigger("chip.select",t.data("chips")[e]))},this.getChipsElement=function(e,t){return t.eq(e)},this.init(),this.handleEvents()}}(jQuery),function(e){e.fn.pushpin=function(t){var n={top:0,bottom:1/0,offset:0};return"remove"===t?(this.each(function(){(id=e(this).data("pushpin-id"))&&(e(window).off("scroll."+id),e(this).removeData("pushpin-id").removeClass("pin-top pinned pin-bottom").removeAttr("style"))}),!1):(t=e.extend(n,t),$index=0,this.each(function(){function n(e){e.removeClass("pin-top"),e.removeClass("pinned"),e.removeClass("pin-bottom")}function i(i,r){i.each(function(){t.top<=r&&t.bottom>=r&&!e(this).hasClass("pinned")&&(n(e(this)),e(this).css("top",t.offset),e(this).addClass("pinned")),r<t.top&&!e(this).hasClass("pin-top")&&(n(e(this)),e(this).css("top",0),e(this).addClass("pin-top")),r>t.bottom&&!e(this).hasClass("pin-bottom")&&(n(e(this)),e(this).addClass("pin-bottom"),e(this).css("top",t.bottom-a))})}var r=Materialize.guid(),o=e(this),a=e(this).offset().top;e(this).data("pushpin-id",r),i(o,e(window).scrollTop()),e(window).on("scroll."+r,function(){var n=e(window).scrollTop()+t.offset;i(o,n)})}))}}(jQuery),function(e){e(document).ready(function(){e.fn.reverse=[].reverse,e(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(n){var i=e(this);t(i)}),e(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(t){var i=e(this);n(i)}),e(document).on("click.fabClickToggle",".fixed-action-btn.click-to-toggle > a",function(i){var r=e(this).parent();r.hasClass("active")?n(r):t(r)}),e(document).on("click.fabToolbar",".fixed-action-btn.toolbar > a",function(t){var n=e(this).parent();i(n)})}),e.fn.extend({openFAB:function(){t(e(this))},closeFAB:function(){n(e(this))},openToolbar:function(){i(e(this))},closeToolbar:function(){r(e(this))}});var t=function(t){var n=t;if(!1===n.hasClass("active")){var i,r;!0===n.hasClass("horizontal")?r=40:i=40,n.addClass("active"),n.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:i+"px",translateX:r+"px"},{duration:0});var o=0;n.find("ul .btn-floating").reverse().each(function(){e(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:o}),o+=40})}},n=function(e){var t,n,i=e;!0===i.hasClass("horizontal")?n=40:t=40,i.removeClass("active"),i.find("ul .btn-floating").velocity("stop",!0),i.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:t+"px",translateX:n+"px"},{duration:80})},i=function(t){if("true"!==t.attr("data-open")){var n,i,o,a=window.innerWidth,s=window.innerHeight,l=t[0].getBoundingClientRect(),c=t.find("> a").first(),u=t.find("> ul").first(),h=e('<div class="fab-backdrop"></div>'),d=c.css("background-color");c.append(h),n=l.left-a/2+l.width/2,i=s-l.bottom,o=a/h.width(),t.attr("data-origin-bottom",l.bottom),t.attr("data-origin-left",l.left),t.attr("data-origin-width",l.width),t.addClass("active"),t.attr("data-open",!0),t.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+n+"px)",transition:"none"}),c.css({transform:"translateY("+-i+"px)",transition:"none"}),h.css({"background-color":d}),setTimeout(function(){t.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),c.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){t.css({overflow:"hidden","background-color":d}),h.css({transform:"scale("+o+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),u.find("> li > a").css({opacity:1}),e(window).on("scroll.fabToolbarClose",function(){r(t),e(window).off("scroll.fabToolbarClose"),e(document).off("click.fabToolbarClose")}),e(document).on("click.fabToolbarClose",function(n){e(n.target).closest(u).length||(r(t),e(window).off("scroll.fabToolbarClose"),e(document).off("click.fabToolbarClose"))})},100)},0)}},r=function(e){if("true"===e.attr("data-open")){var t,n,i=window.innerWidth,r=window.innerHeight,o=e.attr("data-origin-width"),a=e.attr("data-origin-bottom"),s=e.attr("data-origin-left"),l=e.find("> .btn-floating").first(),c=e.find("> ul").first(),u=e.find(".fab-backdrop"),h=l.css("background-color");t=s-i/2+o/2,n=r-a,u.width(),e.removeClass("active"),e.attr("data-open",!1),e.css({"background-color":"transparent",transition:"none"}),l.css({transition:"none"}),u.css({transform:"scale(0)","background-color":h}),c.find("> li > a").css({opacity:""}),setTimeout(function(){u.remove(),e.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-t+"px,0,0)"}),l.css({overflow:"",transform:"translate3d(0,"+n+"px,0)"}),setTimeout(function(){e.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),l.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}}(jQuery),function(e){Materialize.fadeInImage=function(t){var n;if("string"==typeof t)n=e(t);else{if("object"!=typeof t)return;n=t}n.css({opacity:0}),e(n).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),e(n).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(t,n){n.start=100;var i=t/100,r=150-(100-t)/1.75;r<100&&(r=100),t>=0&&e(this).css({"-webkit-filter":"grayscale("+i+")brightness("+r+"%)",filter:"grayscale("+i+")brightness("+r+"%)"})}})},Materialize.showStaggeredList=function(t){var n;if("string"==typeof t)n=e(t);else{if("object"!=typeof t)return;n=t}var i=0;n.find("li").velocity({translateX:"-100px"},{duration:0}),n.find("li").each(function(){e(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:i,easing:[60,10]}),i+=120})},e(document).ready(function(){var t=!1,n=!1;e(".dismissable").each(function(){e(this).hammer({prevent_default:!1}).on("pan",function(i){if("touch"===i.gesture.pointerType){var r=e(this),o=i.gesture.direction,a=i.gesture.deltaX,s=i.gesture.velocityX;r.velocity({translateX:a},{duration:50,queue:!1,easing:"easeOutQuad"}),4===o&&(a>r.innerWidth()/2||s<-.75)&&(t=!0),2===o&&(a<-1*r.innerWidth()/2||s>.75)&&(n=!0)}}).on("panend",function(i){if(Math.abs(i.gesture.deltaX)<e(this).innerWidth()/2&&(n=!1,t=!1),"touch"===i.gesture.pointerType){var r=e(this);if(t||n){var o;o=t?r.innerWidth():-1*r.innerWidth(),r.velocity({translateX:o},{duration:100,queue:!1,easing:"easeOutQuad",complete:function(){r.css("border","none"),r.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){r.remove()}})}})}else r.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"});t=!1,n=!1}})})})}(jQuery),function(e){var t=!1;Materialize.scrollFire=function(e){var n=function(){for(var t=window.pageYOffset+window.innerHeight,n=0;n<e.length;n++){var i=e[n],r=i.selector,o=i.offset,a=i.callback,s=document.querySelector(r);null!==s&&t>s.getBoundingClientRect().top+window.pageYOffset+o&&!0!==i.done&&("function"==typeof a?a.call(this,s):"string"==typeof a&&new Function(a)(s),i.done=!0)}},i=Materialize.throttle(function(){n()},e.throttle||100);t||(window.addEventListener("scroll",i),window.addEventListener("resize",i),t=!0),setTimeout(i,0)}}(jQuery),function(e){Materialize.Picker=e(jQuery)}(function(e){function t(o,s,u,h){function d(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",w.component.nodes(y.open),x.box),x.wrap),x.frame),x.holder)}function f(){b.data(s,w).addClass(x.input).attr("tabindex",-1).val(b.data("value")?w.get("select",T.format):o.value),T.editable||b.on("focus."+y.id+" click."+y.id,function(e){e.preventDefault(),w.$root.eq(0).focus()}).on("keydown."+y.id,g),r(o,{haspopup:!0,expanded:!1,readonly:!1,owns:o.id+"_root"})}function p(){w.$root.on({keydown:g,focusin:function(e){w.$root.removeClass(x.focused),e.stopPropagation()},"mousedown click":function(t){var n=t.target;n!=w.$root.children()[0]&&(t.stopPropagation(),"mousedown"!=t.type||e(n).is("input, select, textarea, button, option")||(t.preventDefault(),w.$root.eq(0).focus()))}}).on({focus:function(){b.addClass(x.target)},blur:function(){b.removeClass(x.target)}}).on("focus.toOpen",v).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var t=e(this),n=t.data(),i=t.hasClass(x.navDisabled)||t.hasClass(x.disabled),r=a();r=r&&(r.type||r.href)&&r,(i||r&&!e.contains(w.$root[0],r))&&w.$root.eq(0).focus(),!i&&n.nav?w.set("highlight",w.component.item.highlight,{nav:n.nav}):!i&&"pick"in n?(w.set("select",n.pick),T.closeOnSelect&&w.close(!0)):n.clear?(w.clear(),T.closeOnSelect&&w.close(!0)):n.close&&w.close(!0)}),r(w.$root[0],"hidden",!0)}function m(){var t;!0===T.hiddenName?(t=o.name,o.name=""):t=(t=["string"==typeof T.hiddenPrefix?T.hiddenPrefix:"","string"==typeof T.hiddenSuffix?T.hiddenSuffix:"_submit"])[0]+o.name+t[1],w._hidden=e('<input type=hidden name="'+t+'"'+(b.data("value")||o.value?' value="'+w.get("select",T.formatSubmit)+'"':"")+">")[0],b.on("change."+y.id,function(){w._hidden.value=o.value?w.get("select",T.formatSubmit):""}),T.container?e(T.container).append(w._hidden):b.before(w._hidden)}function g(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(27==t)return w.close(),!1;(32==t||n||!y.open&&w.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?w.clear().close():w.open())}function v(e){e.stopPropagation(),"focus"==e.type&&w.$root.addClass(x.focused),w.open()}if(!o)return t;var E=!1,y={id:o.id||"P"+Math.abs(~~(Math.random()*new Date))},T=u?e.extend(!0,{},u.defaults,h):h||{},x=e.extend({},t.klasses(),T.klass),b=e(o),_=function(){return this.start()},w=_.prototype={constructor:_,$node:b,start:function(){return y&&y.start?w:(y.methods={},y.start=!0,y.open=!1,y.type=o.type,o.autofocus=o==a(),o.readOnly=!T.editable,o.id=o.id||y.id,"text"!=o.type&&(o.type="text"),w.component=new u(w,T),w.$root=e(t._.node("div",d(),x.picker,'id="'+o.id+'_root" tabindex="0"')),p(),T.formatSubmit&&m(),f(),T.container?e(T.container).append(w.$root):b.before(w.$root),w.on({start:w.component.onStart,render:w.component.onRender,stop:w.component.onStop,open:w.component.onOpen,close:w.component.onClose,set:w.component.onSet}).on({start:T.onStart,render:T.onRender,stop:T.onStop,open:T.onOpen,close:T.onClose,set:T.onSet}),E=n(w.$root.children()[0]),o.autofocus&&w.open(),w.trigger("start").trigger("render"))},render:function(e){return e?w.$root.html(d()):w.$root.find("."+x.box).html(w.component.nodes(y.open)),w.trigger("render")},stop:function(){return y.start?(w.close(),w._hidden&&w._hidden.parentNode.removeChild(w._hidden),w.$root.remove(),b.removeClass(x.input).removeData(s),setTimeout(function(){b.off("."+y.id)},0),o.type=y.type,o.readOnly=!1,w.trigger("stop"),y.methods={},y.start=!1,w):w},open:function(n){return y.open?w:(b.addClass(x.active),r(o,"expanded",!0),setTimeout(function(){w.$root.addClass(x.opened),r(w.$root[0],"hidden",!1)},0),!1!==n&&(y.open=!0,E&&c.css("overflow","hidden").css("padding-right","+="+i()),w.$root.eq(0).focus(),l.on("click."+y.id+" focusin."+y.id,function(e){var t=e.target;t!=o&&t!=document&&3!=e.which&&w.close(t===w.$root.children()[0])}).on("keydown."+y.id,function(n){var i=n.keyCode,r=w.component.key[i],o=n.target;27==i?w.close(!0):o!=w.$root[0]||!r&&13!=i?e.contains(w.$root[0],o)&&13==i&&(n.preventDefault(),o.click()):(n.preventDefault(),r?t._.trigger(w.component.key.go,w,[t._.trigger(r)]):w.$root.find("."+x.highlighted).hasClass(x.disabled)||(w.set("select",w.component.item.highlight),T.closeOnSelect&&w.close(!0)))})),w.trigger("open"))},close:function(e){return e&&(w.$root.off("focus.toOpen").eq(0).focus(),setTimeout(function(){w.$root.on("focus.toOpen",v)},0)),b.removeClass(x.active),r(o,"expanded",!1),setTimeout(function(){w.$root.removeClass(x.opened+" "+x.focused),r(w.$root[0],"hidden",!0)},0),y.open?(y.open=!1,E&&c.css("overflow","").css("padding-right","-="+i()),l.off("."+y.id),w.trigger("close")):w},clear:function(e){return w.set("clear",null,e)},set:function(t,n,i){var r,o,a=e.isPlainObject(t),s=a?t:{};if(i=a&&e.isPlainObject(n)?n:i||{},t){a||(s[t]=n);for(r in s)o=s[r],r in w.component.item&&(void 0===o&&(o=null),w.component.set(r,o,i)),"select"!=r&&"clear"!=r||b.val("clear"==r?"":w.get(r,T.format)).trigger("change");w.render()}return i.muted?w:w.trigger("set",s)},get:function(e,n){if(e=e||"value",null!=y[e])return y[e];if("valueSubmit"==e){if(w._hidden)return w._hidden.value;e="value"}if("value"==e)return o.value;if(e in w.component.item){if("string"==typeof n){var i=w.component.get(e);return i?t._.trigger(w.component.formats.toString,w.component,[n,i]):""}return w.component.get(e)}},on:function(t,n,i){var r,o,a=e.isPlainObject(t),s=a?t:{};if(t){a||(s[t]=n);for(r in s)o=s[r],i&&(r="_"+r),y.methods[r]=y.methods[r]||[],y.methods[r].push(o)}return w},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;e<namesCount;e+=1)(t=n[e])in y.methods&&delete y.methods[t];return w},trigger:function(e,n){var i=function(e){var i=y.methods[e];i&&i.map(function(e){t._.trigger(e,w,[n])})};return i("_"+e),i(e),w}};return new _}function n(e){var t;return e.currentStyle?t=e.currentStyle.position:window.getComputedStyle&&(t=getComputedStyle(e).position),"fixed"==t}function i(){if(c.height()<=s.height())return 0;var t=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),n=t[0].offsetWidth;t.css("overflow","scroll");var i=e('<div style="width:100%" />').appendTo(t)[0].offsetWidth;return t.remove(),n-i}function r(t,n,i){if(e.isPlainObject(n))for(var r in n)o(t,r,n[r]);else o(t,n,i)}function o(e,t,n){e.setAttribute(("role"==t?"":"aria-")+t,n)}function a(){try{return document.activeElement}catch(e){}}var s=e(window),l=e(document),c=e(document.documentElement);return t.klasses=function(e){return e=e||"picker",{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},t._={group:function(e){for(var n,i="",r=t._.trigger(e.min,e);r<=t._.trigger(e.max,e,[r]);r+=e.i)n=t._.trigger(e.item,e,[r]),i+=t._.node(e.node,n[0],n[1],n[2]);return i},node:function(t,n,i,r){return n?(n=e.isArray(n)?n.join(""):n,i=i?' class="'+i+'"':"",r=r?" "+r:"","<"+t+i+r+">"+n+"</"+t+">"):""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1==0},ariaAttr:function(t,n){e.isPlainObject(t)||(t={attribute:n}),n="";for(var i in t){var r=("role"==i?"":"aria-")+i;n+=null==t[i]?"":r+'="'+t[i]+'"'}return n}},t.extend=function(n,i){e.fn[n]=function(r,o){var a=this.data(n);return"picker"==r?a:a&&"string"==typeof r?t._.trigger(a[r],a,[o]):this.each(function(){e(this).data(n)||new t(this,n,i,r)})},e.fn[n].defaults=i.defaults},t}),function(e){e(Materialize.Picker,jQuery)}(function(e,t){function n(e,t){var n=this,i=e.$node[0],r=i.value,o=e.$node.data("value"),a=o||r,s=o?t.formatSubmit:t.format,l=function(){return i.currentStyle?"rtl"==i.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction};n.settings=t,n.$node=e.$node,n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},n.item={},n.item.clear=null,n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return!0===e[0]?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),a?n.set("select",a,{format:s}):n.set("select",null).set("highlight",n.item.now),n.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(e){var t=n.item.highlight,i=new Date(t.year,t.month,t.date+e);n.set("highlight",i,{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var n=this.value;n&&(e.set("highlight",[e.get("view").year,n,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var n=this.value;n&&(e.set("highlight",[n,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var i="";n.disabled(n.get("now"))&&(i=":not(."+t.klass.buttonToday+")"),e.$root.find("button"+i+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}var i=e._;n.prototype.set=function(e,t,n){var i=this,r=i.item;return null===t?("clear"==e&&(e="select"),r[e]=t,i):(r["enable"==e?"disable":"flip"==e?"enable":e]=i.queue[e].split(" ").map(function(r){return t=i[r](e,t,n)}).pop(),"select"==e?i.set("highlight",r.select,n):"highlight"==e?i.set("view",r.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(r.select&&i.disabled(r.select)&&i.set("select",r.select,n),r.highlight&&i.disabled(r.highlight)&&i.set("highlight",r.highlight,n)),i)},n.prototype.get=function(e){return this.item[e]},n.prototype.create=function(e,n,r){var o,a=this;return(n=void 0===n?e:n)==-1/0||n==1/0?o=n:t.isPlainObject(n)&&i.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=i.isDate(n)?n:a.create().obj):n=i.isInteger(n)||i.isDate(n)?a.normalize(new Date(n),r):a.now(e,n,r),{year:o||n.getFullYear(),month:o||n.getMonth(),date:o||n.getDate(),day:o||n.getDay(),obj:o||n,pick:o||n.getTime()}},n.prototype.createRange=function(e,n){var r=this,o=function(e){return!0===e||t.isArray(e)||i.isDate(e)?r.create(e):e};return i.isInteger(e)||(e=o(e)),i.isInteger(n)||(n=o(n)),i.isInteger(e)&&t.isPlainObject(n)?e=[n.year,n.month,n.date+e]:i.isInteger(n)&&t.isPlainObject(e)&&(n=[e.year,e.month,e.date+n]),{from:o(e),to:o(n)}},n.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},n.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},n.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setDate(t.getDate()+n.rel),this.normalize(t,n)},n.prototype.navigate=function(e,n,i){var r,o,a,s,l=t.isArray(n),c=t.isPlainObject(n),u=this.item.view;if(l||c){for(c?(o=n.year,a=n.month,s=n.date):(o=+n[0],a=+n[1],s=+n[2]),i&&i.nav&&u&&u.month!==a&&(o=u.year,a=u.month),o=(r=new Date(o,a+(i&&i.nav?i.nav:0),1)).getFullYear(),a=r.getMonth();new Date(o,a,s).getMonth()!==a;)s-=1;n=[o,a,s]}return n},n.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},n.prototype.measure=function(e,t){var n=this;return t?"string"==typeof t?t=n.parse(e,t):i.isInteger(t)&&(t=n.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},n.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},n.prototype.validate=function(e,n,r){var o,a,s,l,c=this,u=n,h=r&&r.interval?r.interval:1,d=-1===c.item.enable,f=c.item.min,p=c.item.max,m=d&&c.item.disable.filter(function(e){if(t.isArray(e)){var r=c.create(e).pick;r<n.pick?o=!0:r>n.pick&&(a=!0)}return i.isInteger(e)}).length;if((!r||!r.nav)&&(!d&&c.disabled(n)||d&&c.disabled(n)&&(m||o||a)||!d&&(n.pick<=f.pick||n.pick>=p.pick)))for(d&&!m&&(!a&&h>0||!o&&h<0)&&(h*=-1);c.disabled(n)&&(Math.abs(h)>1&&(n.month<u.month||n.month>u.month)&&(n=u,h=h>0?1:-1),n.pick<=f.pick?(s=!0,h=1,n=c.create([f.year,f.month,f.date+(n.pick===f.pick?0:-1)])):n.pick>=p.pick&&(l=!0,h=-1,n=c.create([p.year,p.month,p.date+(n.pick===p.pick?0:1)])),!s||!l);)n=c.create([n.year,n.month,n.date+h]);return n},n.prototype.disabled=function(e){var n=this,r=n.item.disable.filter(function(r){return i.isInteger(r)?e.day===(n.settings.firstDay?r:r-1)%7:t.isArray(r)||i.isDate(r)?e.pick===n.create(r).pick:t.isPlainObject(r)?n.withinRange(r,e):void 0});return r=r.length&&!r.filter(function(e){return t.isArray(e)&&"inverted"==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!r:r||e.pick<n.item.min.pick||e.pick>n.item.max.pick},n.prototype.parse=function(e,t,n){var r=this,o={};return t&&"string"==typeof t?(n&&n.format||((n=n||{}).format=r.settings.format),r.formats.toArray(n.format).map(function(e){var n=r.formats[e],a=n?i.trigger(n,r,[t,o]):e.replace(/^!/,"").length;n&&(o[e]=t.substr(0,a)),t=t.substr(a)}),[o.yyyy||o.yy,+(o.mm||o.m)-1,o.dd||o.d]):t},n.prototype.formats=function(){function e(e,t,n){var i=e.match(/\w+/)[0];return n.mm||n.m||(n.m=t.indexOf(i)+1),i.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?i.digits(e):t.date},dd:function(e,t){return e?2:i.lead(t.date)},ddd:function(e,n){return e?t(e):this.settings.weekdaysShort[n.day]},dddd:function(e,n){return e?t(e):this.settings.weekdaysFull[n.day]},m:function(e,t){return e?i.digits(e):t.month+1},mm:function(e,t){return e?2:i.lead(t.month+1)},mmm:function(t,n){var i=this.settings.monthsShort;return t?e(t,i,n):i[n.month]},mmmm:function(t,n){var i=this.settings.monthsFull;return t?e(t,i,n):i[n.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return i.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}(),n.prototype.isDateExact=function(e,n){var r=this;return i.isInteger(e)&&i.isInteger(n)||"boolean"==typeof e&&"boolean"==typeof n?e===n:(i.isDate(e)||t.isArray(e))&&(i.isDate(n)||t.isArray(n))?r.create(e).pick===r.create(n).pick:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&r.isDateExact(e.from,n.from)&&r.isDateExact(e.to,n.to)},n.prototype.isDateOverlap=function(e,n){var r=this,o=r.settings.firstDay?1:0;return i.isInteger(e)&&(i.isDate(n)||t.isArray(n))?(e=e%7+o)===r.create(n).day+1:i.isInteger(n)&&(i.isDate(e)||t.isArray(e))?(n=n%7+o)===r.create(e).day+1:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&r.overlapRanges(e,n)},n.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},n.prototype.deactivate=function(e,n){var r=this,o=r.item.disable.slice(0);return"flip"==n?r.flipEnable():!1===n?(r.flipEnable(1),o=[]):!0===n?(r.flipEnable(-1),o=[]):n.map(function(e){for(var n,a=0;a<o.length;a+=1)if(r.isDateExact(e,o[a])){n=!0;break}n||(i.isInteger(e)||i.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&o.push(e)}),o},n.prototype.activate=function(e,n){var r=this,o=r.item.disable,a=o.length;return"flip"==n?r.flipEnable():!0===n?(r.flipEnable(1),o=[]):!1===n?(r.flipEnable(-1),o=[]):n.map(function(e){var n,s,l,c;for(l=0;l<a;l+=1){if(s=o[l],r.isDateExact(s,e)){n=o[l]=null,c=!0;break}if(r.isDateOverlap(s,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e)[3]||n.push("inverted"):i.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(l=0;l<a;l+=1)if(r.isDateExact(o[l],e)){o[l]=null;break}if(c)for(l=0;l<a;l+=1)if(r.isDateOverlap(o[l],e)){o[l]=null;break}n&&o.push(n)}),o.filter(function(e){return null!=e})},n.prototype.nodes=function(e){var t=this,n=t.settings,r=t.item,o=r.now,a=r.select,s=r.highlight,l=r.view,c=r.disable,u=r.min,h=r.max,d=function(e,t){return n.firstDay&&(e.push(e.shift()),t.push(t.shift())),i.node("thead",i.node("tr",i.group({min:0,max:6,i:1,node:"th",item:function(i){return[e[i],n.klass.weekdays,'scope=col title="'+t[i]+'"']}})))}((n.showWeekdaysFull?n.weekdaysFull:n.weekdaysLetter).slice(0),n.weekdaysFull.slice(0)),f=function(e){return i.node("div"," ",n.klass["nav"+(e?"Next":"Prev")]+(e&&l.year>=h.year&&l.month>=h.month||!e&&l.year<=u.year&&l.month<=u.month?" "+n.klass.navDisabled:""),"data-nav="+(e||-1)+" "+i.ariaAttr({role:"button",controls:t.$node[0].id+"_table"})+' title="'+(e?n.labelMonthNext:n.labelMonthPrev)+'"')},p=function(r){var o=n.showMonthsShort?n.monthsShort:n.monthsFull;return"short_months"==r&&(o=n.monthsShort),n.selectMonths&&void 0==r?i.node("select",i.group({min:0,max:11,i:1,node:"option",item:function(e){return[o[e],0,"value="+e+(l.month==e?" selected":"")+(l.year==u.year&&e<u.month||l.year==h.year&&e>h.month?" disabled":"")]}}),n.klass.selectMonth+" browser-default",(e?"":"disabled")+" "+i.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+n.labelMonthSelect+'"'):"short_months"==r?null!=a?o[a.month]:o[l.month]:i.node("div",o[l.month],n.klass.month)},m=function(r){var o=l.year,s=!0===n.selectYears?5:~~(n.selectYears/2);if(s){var c=u.year,d=h.year,f=o-s,p=o+s;if(c>f&&(p+=c-f,f=c),d<p){var m=f-c,g=p-d;f-=m>g?g:m,p=d}if(n.selectYears&&void 0==r)return i.node("select",i.group({min:f,max:p,i:1,node:"option",item:function(e){return[e,0,"value="+e+(o==e?" selected":"")]}}),n.klass.selectYear+" browser-default",(e?"":"disabled")+" "+i.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+n.labelYearSelect+'"')}return"raw"===r&&null!=a?i.node("div",a.year):i.node("div",o,n.klass.year)};return createDayLabel=function(){return null!=a?a.date:o.date},createWeekdayLabel=function(){var e;return e=null!=a?a.day:o.day,n.weekdaysShort[e]},i.node("div",i.node("div",m("raw"),n.klass.year_display)+i.node("span",createWeekdayLabel()+", ","picker__weekday-display")+i.node("span",p("short_months")+" ",n.klass.month_display)+i.node("span",createDayLabel(),n.klass.day_display),n.klass.date_display)+i.node("div",i.node("div",i.node("div",(n.selectYears,p()+m()+f()+f(1)),n.klass.header)+i.node("table",d+i.node("tbody",i.group({min:0,max:5,i:1,node:"tr",item:function(e){var r=n.firstDay&&0===t.create([l.year,l.month,1]).day?-7:0;return[i.group({min:7*e-l.day+r+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(e){e=t.create([l.year,l.month,e+(n.firstDay?1:0)]);var r=a&&a.pick==e.pick,d=s&&s.pick==e.pick,f=c&&t.disabled(e)||e.pick<u.pick||e.pick>h.pick,p=i.trigger(t.formats.toString,t,[n.format,e]);return[i.node("div",e.date,function(t){return t.push(l.month==e.month?n.klass.infocus:n.klass.outfocus),o.pick==e.pick&&t.push(n.klass.now),r&&t.push(n.klass.selected),d&&t.push(n.klass.highlighted),f&&t.push(n.klass.disabled),t.join(" ")}([n.klass.day]),"data-pick="+e.pick+" "+i.ariaAttr({role:"gridcell",label:p,selected:!(!r||t.$node.val()!==p)||null,activedescendant:!!d||null,disabled:!!f||null})+" "+(f?"":'tabindex="0"')),"",i.ariaAttr({role:"presentation"})]}})]}})),n.klass.table,'id="'+t.$node[0].id+'_table" '+i.ariaAttr({role:"grid",controls:t.$node[0].id,readonly:!0})),n.klass.calendar_container)+i.node("div",i.node("button",n.today,"btn-flat picker__today waves-effect","type=button data-pick="+o.pick+(e&&!t.disabled(o)?"":" disabled")+" "+i.ariaAttr({controls:t.$node[0].id}))+i.node("button",n.clear,"btn-flat picker__clear waves-effect","type=button data-clear=1"+(e?"":" disabled")+" "+i.ariaAttr({controls:t.$node[0].id}))+i.node("button",n.close,"btn-flat picker__close waves-effect","type=button data-close=true "+(e?"":" disabled")+" "+i.ariaAttr({controls:t.$node[0].id})),n.klass.footer),"picker__container__wrapper")},n.defaults=function(e){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Ok",closeOnSelect:!1,format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",date_display:e+"date-display",day_display:e+"day-display",month_display:e+"month-display",year_display:e+"year-display",calendar_container:e+"calendar-container",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}}}(e.klasses().picker+"__"),e.extend("pickadate",n)}),function(e){function t(e){return document.createElementNS(l,e)}function n(e){return(e<10?"0":"")+e}function i(e){var t=++g+"";return e?e+t:t}function r(r,a){function l(e,t){var n=h.offset(),i=/^touch/.test(e.type),r=n.left+v,o=n.top+v,l=(i?e.originalEvent.touches[0]:e).pageX-r,c=(i?e.originalEvent.touches[0]:e).pageY-o,u=Math.sqrt(l*l+c*c),d=!1;if(!t||!(u<E-T||u>E+T)){e.preventDefault();var m=setTimeout(function(){C.popover.addClass("clockpicker-moving")},200);C.setHand(l,c,!t,!0),s.off(f).on(f,function(e){e.preventDefault();var t=/^touch/.test(e.type),n=(t?e.originalEvent.touches[0]:e).pageX-r,i=(t?e.originalEvent.touches[0]:e).pageY-o;(d||n!==l||i!==c)&&(d=!0,C.setHand(n,i,!1,!0))}),s.off(p).on(p,function(e){s.off(p),e.preventDefault();var n=/^touch/.test(e.type),i=(n?e.originalEvent.changedTouches[0]:e).pageX-r,u=(n?e.originalEvent.changedTouches[0]:e).pageY-o;(t||d)&&i===l&&u===c&&C.setHand(i,u),"hours"===C.currentView?C.toggleView("minutes",b/2):a.autoclose&&(C.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){C.done()},b/2)),h.prepend(F),clearTimeout(m),C.popover.removeClass("clockpicker-moving"),s.off(f)})}}var u=e(_),h=u.find(".clockpicker-plate"),m=u.find(".picker__holder"),g=u.find(".clockpicker-hours"),w=u.find(".clockpicker-minutes"),R=u.find(".clockpicker-am-pm-block"),H="INPUT"===r.prop("tagName"),S=H?r:r.find("input"),M=e("label[for="+S.attr("id")+"]"),C=this;this.id=i("cp"),this.element=r,this.holder=m,this.options=a,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=H,this.input=S,this.label=M,this.popover=u,this.plate=h,this.hoursView=g,this.minutesView=w,this.amPmBlock=R,this.spanHours=u.find(".clockpicker-span-hours"),this.spanMinutes=u.find(".clockpicker-span-minutes"),this.spanAmPm=u.find(".clockpicker-span-am-pm"),this.footer=u.find(".picker__footer"),this.amOrPm="PM",a.twelvehour&&(a.ampmclickable?(this.spanAmPm.empty(),e('<div id="click-am">AM</div>').on("click",function(){C.spanAmPm.children("#click-am").addClass("text-primary"),C.spanAmPm.children("#click-pm").removeClass("text-primary"),C.amOrPm="AM"}).appendTo(this.spanAmPm),e('<div id="click-pm">PM</div>').on("click",function(){C.spanAmPm.children("#click-pm").addClass("text-primary"),C.spanAmPm.children("#click-am").removeClass("text-primary"),C.amOrPm="PM"}).appendTo(this.spanAmPm)):(this.spanAmPm.empty(),e('<div id="click-am">AM</div>').appendTo(this.spanAmPm),e('<div id="click-pm">PM</div>').appendTo(this.spanAmPm))),e('<button type="button" class="btn-flat picker__clear" tabindex="'+(a.twelvehour?"3":"1")+'">'+a.cleartext+"</button>").click(e.proxy(this.clear,this)).appendTo(this.footer),e('<button type="button" class="btn-flat picker__close" tabindex="'+(a.twelvehour?"3":"1")+'">'+a.canceltext+"</button>").click(e.proxy(this.hide,this)).appendTo(this.footer),e('<button type="button" class="btn-flat picker__close" tabindex="'+(a.twelvehour?"3":"1")+'">'+a.donetext+"</button>").click(e.proxy(this.done,this)).appendTo(this.footer),this.spanHours.click(e.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(e.proxy(this.toggleView,this,"minutes")),S.on("focus.clockpicker click.clockpicker",e.proxy(this.show,this));var A,k,P,L,D=e('<div class="clockpicker-tick"></div>');if(a.twelvehour)for(A=1;A<13;A+=1)k=D.clone(),P=A/6*Math.PI,L=E,k.css({left:v+Math.sin(P)*L-T,top:v-Math.cos(P)*L-T}),k.html(0===A?"00":A),g.append(k),k.on(d,l);else for(A=0;A<24;A+=1)k=D.clone(),P=A/6*Math.PI,L=A>0&&A<13?y:E,k.css({left:v+Math.sin(P)*L-T,top:v-Math.cos(P)*L-T}),k.html(0===A?"00":A),g.append(k),k.on(d,l);for(A=0;A<60;A+=5)k=D.clone(),P=A/30*Math.PI,k.css({left:v+Math.sin(P)*E-T,top:v-Math.cos(P)*E-T}),k.html(n(A)),w.append(k),k.on(d,l);if(h.on(d,function(t){0===e(t.target).closest(".clockpicker-tick").length&&l(t,!0)}),c){var F=u.find(".clockpicker-canvas"),N=t("svg");N.setAttribute("class","clockpicker-svg"),N.setAttribute("width",x),N.setAttribute("height",x);var O=t("g");O.setAttribute("transform","translate("+v+","+v+")");var z=t("circle");z.setAttribute("class","clockpicker-canvas-bearing"),z.setAttribute("cx",0),z.setAttribute("cy",0),z.setAttribute("r",4);var V=t("line");V.setAttribute("x1",0),V.setAttribute("y1",0);var B=t("circle");B.setAttribute("class","clockpicker-canvas-bg"),B.setAttribute("r",T),O.appendChild(V),O.appendChild(B),O.appendChild(z),N.appendChild(O),F.append(N),this.hand=V,this.bg=B,this.bearing=z,this.g=O,this.canvas=F}o(this.options.init)}function o(e){e&&"function"==typeof e&&e()}var a=e(window),s=e(document),l="http://www.w3.org/2000/svg",c="SVGAngle"in window&&function(){var e,t=document.createElement("div");return t.innerHTML="<svg/>",e=(t.firstChild&&t.firstChild.namespaceURI)==l,t.innerHTML="",e}(),u=function(){var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e}(),h="ontouchstart"in window,d="mousedown"+(h?" touchstart":""),f="mousemove.clockpicker"+(h?" touchmove.clockpicker":""),p="mouseup.clockpicker"+(h?" touchend.clockpicker":""),m=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,g=0,v=135,E=105,y=70,T=20,x=2*v,b=u?350:1,_=['<div class="clockpicker picker">','<div class="picker__holder">','<div class="picker__frame">','<div class="picker__wrap">','<div class="picker__box">','<div class="picker__date-display">','<div class="clockpicker-display">','<div class="clockpicker-display-column">','<span class="clockpicker-span-hours text-primary"></span>',":",'<span class="clockpicker-span-minutes"></span>',"</div>",'<div class="clockpicker-display-column clockpicker-display-am-pm">','<div class="clockpicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="picker__container__wrapper">','<div class="picker__calendar-container">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<div class="clockpicker-am-pm-block">',"</div>","</div>",'<div class="picker__footer">',"</div>","</div>","</div>","</div>","</div>","</div>","</div>"].join("");r.DEFAULTS={default:"",fromnow:0,donetext:"Ok",cleartext:"Clear",canceltext:"Cancel",autoclose:!1,ampmclickable:!0,darktheme:!1,twelvehour:!0,vibrate:!0},r.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},r.prototype.locate=function(){var e=this.element,t=this.popover;e.offset(),e.outerWidth(),e.outerHeight(),this.options.align,t.show()},r.prototype.show=function(t){if(!this.isShown){o(this.options.beforeShow),e(":input").each(function(){e(this).attr("tabindex",-1)});var i=this;this.input.blur(),this.popover.addClass("picker--opened"),this.input.addClass("picker__input picker__input--active"),e(document.body).css("overflow","hidden");var r=((this.input.prop("value")||this.options.default||"")+"").split(":");if(this.options.twelvehour&&void 0!==r[1]&&(r[1].indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",r[1]=r[1].replace("AM","").replace("PM","")),"now"===r[0]){var l=new Date(+new Date+this.options.fromnow);r=[l.getHours(),l.getMinutes()],this.options.twelvehour&&(this.amOrPm=r[0]>=12&&r[0]<24?"PM":"AM")}if(this.hours=+r[0]||0,this.minutes=+r[1]||0,this.spanHours.html(this.hours),this.spanMinutes.html(n(this.minutes)),!this.isAppended){var c=document.querySelector(this.options.container);this.options.container&&c?c.appendChild(this.popover[0]):this.popover.insertAfter(this.input),this.options.twelvehour&&("PM"===this.amOrPm?(this.spanAmPm.children("#click-pm").addClass("text-primary"),this.spanAmPm.children("#click-am").removeClass("text-primary")):(this.spanAmPm.children("#click-am").addClass("text-primary"),this.spanAmPm.children("#click-pm").removeClass("text-primary"))),a.on("resize.clockpicker"+this.id,function(){i.isShown&&i.locate()}),this.isAppended=!0}this.toggleView("hours"),this.locate(),this.isShown=!0,s.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(t){var n=e(t.target);0===n.closest(i.popover.find(".picker__wrap")).length&&0===n.closest(i.input).length&&i.hide()}),s.on("keyup.clockpicker."+this.id,function(e){27===e.keyCode&&i.hide()}),o(this.options.afterShow)}},r.prototype.hide=function(){o(this.options.beforeHide),this.input.removeClass("picker__input picker__input--active"),this.popover.removeClass("picker--opened"),e(document.body).css("overflow","visible"),this.isShown=!1,e(":input").each(function(t){e(this).attr("tabindex",t+1)}),s.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),s.off("keyup.clockpicker."+this.id),this.popover.hide(),o(this.options.afterHide)},r.prototype.toggleView=function(t,n){var i=!1;"minutes"===t&&"visible"===e(this.hoursView).css("visibility")&&(o(this.options.beforeHourSelect),i=!0);var r="hours"===t,a=r?this.hoursView:this.minutesView,s=r?this.minutesView:this.hoursView;this.currentView=t,this.spanHours.toggleClass("text-primary",r),this.spanMinutes.toggleClass("text-primary",!r),s.addClass("clockpicker-dial-out"),a.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){s.css("visibility","hidden")},b),i&&o(this.options.afterHourSelect)},r.prototype.resetClock=function(e){var t=this.currentView,n=this[t],i="hours"===t,r=n*(Math.PI/(i?6:30)),o=i&&n>0&&n<13?y:E,a=Math.sin(r)*o,s=-Math.cos(r)*o,l=this;c&&e?(l.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){l.canvas.removeClass("clockpicker-canvas-out"),l.setHand(a,s)},e)):this.setHand(a,s)},r.prototype.setHand=function(t,i,r,o){var a,s=Math.atan2(t,-i),l="hours"===this.currentView,u=Math.PI/(l||r?6:30),h=Math.sqrt(t*t+i*i),d=this.options,f=l&&h<(E+y)/2,p=f?y:E;if(d.twelvehour&&(p=E),s<0&&(s=2*Math.PI+s),a=Math.round(s/u),s=a*u,d.twelvehour?l?0===a&&(a=12):(r&&(a*=5),60===a&&(a=0)):l?(12===a&&(a=0),a=f?0===a?12:a:0===a?0:a+12):(r&&(a*=5),60===a&&(a=0)),this[this.currentView]!==a&&m&&this.options.vibrate&&(this.vibrateTimer||(navigator[m](10),this.vibrateTimer=setTimeout(e.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=a,l?this.spanHours.html(a):this.spanMinutes.html(n(a)),c){var g=Math.sin(s)*(p-T),v=-Math.cos(s)*(p-T),x=Math.sin(s)*p,b=-Math.cos(s)*p;this.hand.setAttribute("x2",g),this.hand.setAttribute("y2",v),this.bg.setAttribute("cx",x),this.bg.setAttribute("cy",b)}else this[l?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=e(this);t.toggleClass("active",a===+t.html())})},r.prototype.done=function(){o(this.options.beforeDone),this.hide(),this.label.addClass("active");var e=this.input.prop("value"),t=n(this.hours)+":"+n(this.minutes);this.options.twelvehour&&(t+=this.amOrPm),this.input.prop("value",t),t!==e&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),o(this.options.afterDone)},r.prototype.clear=function(){this.hide(),this.label.removeClass("active");var e=this.input.prop("value");this.input.prop("value",""),""!==e&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur")},r.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(a.off("resize.clockpicker"+this.id),this.popover.remove())},e.fn.pickatime=function(t){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=e(this),o=i.data("clockpicker");if(o)"function"==typeof o[t]&&o[t].apply(o,n);else{var a=e.extend({},r.DEFAULTS,i.data(),"object"==typeof t&&t);i.data("clockpicker",new r(i,a))}})}}(jQuery),function(e){function t(){var t=+e(this).attr("data-length"),n=+e(this).val().length,i=n<=t;e(this).parent().find('span[class="character-counter"]').html(n+"/"+t),r(i,e(this))}function n(t){var n=t.parent().find('span[class="character-counter"]');n.length||(n=e("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),t.parent().append(n))}function i(){e(this).parent().find('span[class="character-counter"]').html("")}function r(e,t){var n=t.hasClass("invalid");e&&n?t.removeClass("invalid"):e||n||(t.removeClass("valid"),t.addClass("invalid"))}e.fn.characterCounter=function(){return this.each(function(){var r=e(this);r.parent().find('span[class="character-counter"]').length||void 0!==r.attr("data-length")&&(r.on("input",t),r.on("focus",t),r.on("blur",i),n(r))})},e(document).ready(function(){e("input, textarea").characterCounter()})}(jQuery),function(e){var t={init:function(t){var n={duration:200,dist:-100,shift:0,padding:0,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null};t=e.extend(n,t);var i=Materialize.objectSelectorString(e(this));return this.each(function(n){function r(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function o(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function a(e){return e>=b?e%b:e<0?a(b+e%b):e}function s(n){M=!0,z.hasClass("scrolling")||z.addClass("scrolling"),null!=N&&window.clearTimeout(N),N=window.setTimeout(function(){M=!1,z.removeClass("scrolling")},t.duration);var i,r,o,s,l,c,u,h=E;if(v="number"==typeof n?n:v,E=Math.floor((v+x/2)/x),o=v-E*x,s=o<0?1:-1,l=-s*o*2/x,r=b>>1,t.fullWidth?u="translateX(0)":(u="translateX("+(z[0].clientWidth-m)/2+"px) ",u+="translateY("+(z[0].clientHeight-g)/2+"px)"),B){var d=E%b,f=F.find(".indicator-item.active");f.index()!==d&&(f.removeClass("active"),F.find(".indicator-item").eq(d).addClass("active"))}for((!I||E>=0&&E<b)&&(c=p[a(E)],e(c).hasClass("active")||(z.find(".carousel-item").removeClass("active"),e(c).addClass("active")),c.style[C]=u+" translateX("+-o/2+"px) translateX("+s*t.shift*l*i+"px) translateZ("+t.dist*l+"px)",c.style.zIndex=0,t.fullWidth?tweenedOpacity=1:tweenedOpacity=1-.2*l,c.style.opacity=tweenedOpacity,c.style.display="block"),i=1;i<=r;++i)t.fullWidth?(zTranslation=t.dist,tweenedOpacity=i===r&&o<0?1-l:1):(zTranslation=t.dist*(2*i+l*s),tweenedOpacity=1-.2*(2*i+l*s)),(!I||E+i<b)&&((c=p[a(E+i)]).style[C]=u+" translateX("+(t.shift+(x*i-o)/2)+"px) translateZ("+zTranslation+"px)",c.style.zIndex=-i,c.style.opacity=tweenedOpacity,c.style.display="block"),t.fullWidth?(zTranslation=t.dist,tweenedOpacity=i===r&&o>0?1-l:1):(zTranslation=t.dist*(2*i-l*s),tweenedOpacity=1-.2*(2*i-l*s)),(!I||E-i>=0)&&((c=p[a(E-i)]).style[C]=u+" translateX("+(-t.shift+(-x*i-o)/2)+"px) translateZ("+zTranslation+"px)",c.style.zIndex=-i,c.style.opacity=tweenedOpacity,c.style.display="block");if((!I||E>=0&&E<b)&&((c=p[a(E)]).style[C]=u+" translateX("+-o/2+"px) translateX("+s*t.shift*l+"px) translateZ("+t.dist*l+"px)",c.style.zIndex=0,t.fullWidth?tweenedOpacity=1:tweenedOpacity=1-.2*l,c.style.opacity=tweenedOpacity,c.style.display="block"),h!==E&&"function"==typeof t.onCycleTo){var y=z.find(".carousel-item").eq(a(E));t.onCycleTo.call(this,y,L)}"function"==typeof O&&(O.call(this,y,L),O=null)}function l(){var e,t,n;t=(e=Date.now())-k,k=e,n=v-A,A=v,S=1e3*n/(1+t)*.8+.2*S}function c(){var e,n;R&&(e=Date.now()-k,(n=R*Math.exp(-e/t.duration))>2||n<-2?(s(H-n),requestAnimationFrame(c)):s(H))}function u(e){var t=E%b-e;I||(t<0?Math.abs(t+b)<Math.abs(t)&&(t+=b):t>0&&Math.abs(t-b)<t&&(t-=b)),t<0?z.trigger("carouselNext",[Math.abs(t)]):t>0&&z.trigger("carouselPrev",[t])}function h(t){"mousedown"===t.type&&e(t.target).is("img")&&t.preventDefault(),T=!0,L=!1,D=!1,_=r(t),w=o(t),S=R=0,A=v,k=Date.now(),clearInterval(P),P=setInterval(l,100)}function d(e){var t,n;if(T)if(t=r(e),y=o(e),n=_-t,Math.abs(w-y)<30&&!D)(n>2||n<-2)&&(L=!0,_=t,s(v+n));else{if(L)return e.preventDefault(),e.stopPropagation(),!1;D=!0}if(L)return e.preventDefault(),e.stopPropagation(),!1}function f(e){if(T)return T=!1,clearInterval(P),H=v,(S>10||S<-10)&&(H=v+(R=.9*S)),H=Math.round(H/x)*x,I&&(H>=x*(b-1)?H=x*(b-1):H<0&&(H=0)),R=H-v,k=Date.now(),requestAnimationFrame(c),L&&(e.preventDefault(),e.stopPropagation()),!1}var p,m,g,v,E,T,x,b,_,w,R,H,S,M,C,A,k,P,L,D,F=e('<ul class="indicators"></ul>'),N=null,O=null,z=e(this),V=z.find(".carousel-item").length>1,B=(z.attr("data-indicators")||t.indicators)&&V,I=z.attr("data-no-wrap")||t.noWrap||!V,U=z.attr("data-namespace")||i+n;z.attr("data-namespace",U);var W=function(t){var n=z.find(".carousel-item.active").length?z.find(".carousel-item.active").first():z.find(".carousel-item").first(),i=n.find("img").first();if(i.length)if(i[0].complete)if(i.height()>0)z.css("height",i.height());else{var r=i[0].naturalWidth,o=i[0].naturalHeight,a=z.width()/r*o;z.css("height",a)}else i.on("load",function(){z.css("height",e(this).height())});else if(!t){var s=n.height();z.css("height",s)}};if(t.fullWidth&&(t.dist=0,W(),B&&z.find(".carousel-fixed-item").addClass("with-indicators")),z.hasClass("initialized"))return e(window).trigger("resize"),z.trigger("carouselNext",[1e-6]),!0;z.addClass("initialized"),T=!1,v=H=0,p=[],m=z.find(".carousel-item").first().innerWidth(),g=z.find(".carousel-item").first().innerHeight(),x=2*m+t.padding,z.find(".carousel-item").each(function(t){if(p.push(e(this)[0]),B){var n=e('<li class="indicator-item"></li>');0===t&&n.addClass("active"),n.click(function(t){t.stopPropagation(),u(e(this).index())}),F.append(n)}}),B&&z.append(F),b=p.length,C="transform",["webkit","Moz","O","ms"].every(function(e){var t=e+"Transform";return void 0===document.body.style[t]||(C=t,!1)});var j=Materialize.throttle(function(){t.fullWidth?(m=z.find(".carousel-item").first().innerWidth(),z.find(".carousel-item.active").height(),x=2*m+t.padding,H=v=2*E*m,W(!0)):s()},200);e(window).off("resize.carousel-"+U).on("resize.carousel-"+U,j),void 0!==window.ontouchstart&&(z.on("touchstart.carousel",h),z.on("touchmove.carousel",d),z.on("touchend.carousel",f)),z.on("mousedown.carousel",h),z.on("mousemove.carousel",d),z.on("mouseup.carousel",f),z.on("mouseleave.carousel",f),z.on("click.carousel",function(n){if(L)return n.preventDefault(),n.stopPropagation(),!1;if(!t.fullWidth){var i=e(n.target).closest(".carousel-item").index();0!=a(E)-i&&(n.preventDefault(),n.stopPropagation()),u(i)}}),s(v),e(this).on("carouselNext",function(e,t,n){void 0===t&&(t=1),"function"==typeof n&&(O=n),H=x*Math.round(v/x)+x*t,v!==H&&(R=H-v,k=Date.now(),requestAnimationFrame(c))}),e(this).on("carouselPrev",function(e,t,n){void 0===t&&(t=1),"function"==typeof n&&(O=n),H=x*Math.round(v/x)-x*t,v!==H&&(R=H-v,k=Date.now(),requestAnimationFrame(c))}),e(this).on("carouselSet",function(e,t,n){void 0===t&&(t=0),"function"==typeof n&&(O=n),u(t)})})},next:function(t,n){e(this).trigger("carouselNext",[t,n])},prev:function(t,n){e(this).trigger("carouselPrev",[t,n])},set:function(t,n){e(this).trigger("carouselSet",[t,n])},destroy:function(){var t=e(this).attr("data-namespace");e(this).removeAttr("data-namespace"),e(this).removeClass("initialized"),e(this).find(".indicators").remove(),e(this).off("carouselNext carouselPrev carouselSet"),e(window).off("resize.carousel-"+t),void 0!==window.ontouchstart&&e(this).off("touchstart.carousel touchmove.carousel touchend.carousel"),e(this).off("mousedown.carousel mousemove.carousel mouseup.carousel mouseleave.carousel click.carousel")}};e.fn.carousel=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.carousel"):t.init.apply(this,arguments)}}(jQuery),function(e){var t={init:function(t){return this.each(function(){var n=e("#"+e(this).attr("data-activates")),i=(e("body"),e(this)),r=i.parent(".tap-target-wrapper"),o=r.find(".tap-target-wave"),a=r.find(".tap-target-origin"),s=i.find(".tap-target-content");r.length||(r=i.wrap(e('<div class="tap-target-wrapper"></div>')).parent()),s.length||(s=e('<div class="tap-target-content"></div>'),i.append(s)),o.length||(o=e('<div class="tap-target-wave"></div>'),a.length||((a=n.clone(!0,!0)).addClass("tap-target-origin"),a.removeAttr("id"),a.removeAttr("style"),o.append(a)),r.append(o));var l=function(){r.is(".open")&&(r.removeClass("open"),a.off("click.tapTarget"),e(document).off("click.tapTarget"),e(window).off("resize.tapTarget"))},c=function(){var t="fixed"===n.css("position");if(!t)for(var a=n.parents(),l=0;l<a.length&&!(t="fixed"==e(a[l]).css("position"));l++);var c=n.outerWidth(),u=n.outerHeight(),h=t?n.offset().top-e(document).scrollTop():n.offset().top,d=t?n.offset().left-e(document).scrollLeft():n.offset().left,f=e(window).width(),p=e(window).height(),m=f/2,g=p/2,v=d<=m,E=d>m,y=h<=g,T=h>g,x=d>=.25*f&&d<=.75*f,b=i.outerWidth(),_=i.outerHeight(),w=h+u/2-_/2,R=d+c/2-b/2,H=t?"fixed":"absolute",S=x?b:b/2+c,M=_/2,C=y?_/2:0,A=v&&!x?b/2-c:0,k=c,P=T?"bottom":"top",L=2*c,D=L,F=_/2-D/2,N=b/2-L/2,O={};O.top=y?w:"",O.right=E?f-R-b:"",O.bottom=T?p-w-_:"",O.left=v?R:"",O.position=H,r.css(O),s.css({width:S,height:M,top:C,right:0,bottom:0,left:A,padding:k,verticalAlign:P}),o.css({top:F,left:N,width:L,height:D})};"open"==t&&(c(),r.is(".open")||(r.addClass("open"),setTimeout(function(){a.off("click.tapTarget").on("click.tapTarget",function(e){l(),a.off("click.tapTarget")}),e(document).off("click.tapTarget").on("click.tapTarget",function(t){l(),e(document).off("click.tapTarget")});var t=Materialize.throttle(function(){c()},200);e(window).off("resize.tapTarget").on("resize.tapTarget",t)},0))),"close"==t&&l()})},open:function(){},close:function(){}};e.fn.tapTarget=function(n){if(t[n]||"object"==typeof n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.tap-target")}}(jQuery),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Amplitude",[],t):"object"==typeof exports?exports.Amplitude=t():e.Amplitude=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";var i={active_song:new Audio,active_metadata:{},active_album:"",active_index:0,active_playlist:"",autoplay:!1,playback_speed:1,callbacks:{},songs:{},playlists:{},shuffled_playlists:{},shuffled_statuses:{},shuffled_active_indexes:{},repeat:!1,shuffle_list:{},shuffle_on:!1,shuffle_active_index:0,default_album_art:"",debug:!1,volume:.5,pre_mute_volume:.5,volume_increment:5,volume_decrement:5,soundcloud_client:"",soundcloud_use_art:!1,soundcloud_song_count:0,soundcloud_songs_ready:0,is_touch_moving:!1};e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3)),o=i(n(2)),a=n(0),s=function(){function e(e){a.debug&&console.log(e)}function t(t){if(a.callbacks[t]){var n=window[a.callbacks[t]];e("Running Callback: "+t);try{n()}catch(t){if("CANCEL EVENT"==t.message)throw t;e("Callback error: "+t.message)}}}function n(e){return a.active_album!=e}function i(e,t){a.active_song.src=e.url,a.active_metadata=e,a.active_album=e.album,a.active_index=t,window.onSongChange&&window.onSongChange()}function s(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}return{resetConfig:function(){a.active_song=new Audio,a.active_metadata={},a.active_album="",a.active_index=0,a.active_playlist="",a.autoplay=!1,a.playback_speed=1,a.callbacks={},a.songs={},a.playlists={},a.shuffled_playlists={},a.shuffled_statuses={},a.repeat=!1,a.shuffle_list={},a.shuffle_on=!1,a.shuffle_active_index=0,a.default_album_art="",a.debug=!1,a.handle_song_elements=!0,a.volume=.5,a.pre_mute_volume=.5,a.volume_increment=5,a.volume_decrement=5,a.soundcloud_client="",a.soundcloud_use_art=!1,a.soundcloud_song_count=0,a.soundcloud_songs_ready=0},writeDebugMessage:e,runCallback:t,changeSong:function(e){var s=a.songs[e];r.default.stop(),o.default.setPlayPauseButtonsToPause(),o.default.resetSongSliders(),o.default.resetSongTimeVisualizations(),o.default.resetTimes(),n(s)&&t("album_change"),i(s,e),o.default.displaySongMetadata(),o.default.setActiveContainer(),o.default.syncSongDuration()},checkNewSong:function(e){return e!=a.active_index},checkNewAlbum:n,checkNewPlaylist:function(e){return a.active_playlist!=e},shuffleSongs:function(){for(var e=new Array(a.songs.length),t=0;t<a.songs.length;t++)e[t]=a.songs[t],e[t].original_index=t;for(t=a.songs.length-1;t>0;t--)s(e,t,Math.floor(Math.random()*a.songs.length+1)-1);a.shuffle_list=e},shufflePlaylistSongs:function(e){for(var t=new Array(a.playlists[e].length),n=0;n<a.playlists[e].length;n++)t[n]=a.songs[a.playlists[e][n]],t[n].original_index=n;for(n=a.playlists[e].length-1;n>0;n--)s(t,n,Math.floor(Math.random()*a.playlists[e].length+1)-1);a.shuffled_playlists[e]=t},setActivePlaylist:function(e){a.active_playlist!=e&&t("playlist_changed"),a.active_playlist=e},isURL:function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},isInt:function(e){return!isNaN(e)&&parseInt(Number(e))==e&&!isNaN(parseInt(e,10))}}}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),a=i(n(10)),s=function(){function e(){for(var e=document.getElementsByClassName("amplitude-volume-slider"),t=0;t<e.length;t++)e[t].value=100*o.default.active_song.volume}function e(e){}function t(e){e=isNaN(e)?0:e;for(var t=document.querySelectorAll('.amplitude-song-slider[amplitude-main-song-slider="true"]'),n=0;n<t.length;n++)t[n].value=e}function n(e,t){t=isNaN(t)?0:t;for(var n=document.querySelectorAll('.amplitude-song-slider[amplitude-playlist-song-slider="true"][amplitude-playlist="'+e+'"]'),i=0;i<n.length;i++)n[i].value=t}function i(e,t,n){if(n=isNaN(n)?0:n,""!=e&&null!=e)for(var i=document.querySelectorAll('.amplitude-song-slider[amplitude-playlist="'+e+'"][amplitude-song-index="'+t+'"]'),r=0;r<i.length;r++)i[r].value=n;else for(var i=document.querySelectorAll('.amplitude-song-slider[amplitude-song-index="'+t+'"]'),r=0;r<i.length;r++)i[r].hasAttribute("amplitude-playlist")||0!=n&&(i[r].value=n)}var s;return s={syncCurrentTime:function(e,r){a.default.syncCurrentHours(e.hours),a.default.syncCurrentMinutes(e.minutes),a.default.syncCurrentSeconds(e.seconds),a.default.syncCurrentTime(e),t(r),n(o.default.active_playlist,r),i(o.default.active_playlist,o.default.active_index,r),a.default.syncSongTimeVisualizations(r)},resetTimes:function(){a.default.resetCurrentHours(),a.default.resetCurrentMinutes(),a.default.resetCurrentSeconds(),a.default.resetCurrentTime()},resetSongSliders:function(){for(var e=document.getElementsByClassName("amplitude-song-slider"),t=0;t<e.length;t++)e[t].value=0},resetSongTimeVisualizations:function(){for(var e=document.getElementsByClassName("amplitude-song-time-visualization"),t=0;t<e.length;t++)e[t].querySelector(".amplitude-song-time-visualization-status").setAttribute("style","width: 0px")},setActiveContainer:function(){for(var e=document.getElementsByClassName("amplitude-song-container"),t=0;t<e.length;t++)e[t].classList.remove("amplitude-active-song-container");if(""==o.default.active_playlist||null==o.default.active_playlist){if(document.querySelectorAll('.amplitude-song-container[amplitude-song-index="'+o.default.active_index+'"]'))for(e=document.querySelectorAll('.amplitude-song-container[amplitude-song-index="'+o.default.active_index+'"]'),t=0;t<e.length;t++)e[t].hasAttribute("amplitude-playlist")||e[t].classList.add("amplitude-active-song-container")}else if(document.querySelectorAll('.amplitude-song-container[amplitude-song-index="'+o.default.active_index+'"][amplitude-playlist="'+o.default.active_playlist+'"]'))for(e=document.querySelectorAll('.amplitude-song-container[amplitude-song-index="'+o.default.active_index+'"][amplitude-playlist="'+o.default.active_playlist+'"]'),t=0;t<e.length;t++)e[t].classList.add("amplitude-active-song-container")},displaySongMetadata:function(){for(var e=["cover_art_url","station_art_url","podcast_episode_cover_art_url"],t=document.querySelectorAll("[amplitude-song-info]"),n=0;n<t.length;n++){var i=t[n].getAttribute("amplitude-song-info"),r=t[n].getAttribute("amplitude-playlist"),a=t[n].getAttribute("amplitude-main-song-info");o.default.active_playlist!=r&&"true"!=a||(void 0!=o.default.active_metadata[i]?e.indexOf(i)>=0?t[n].setAttribute("src",o.default.active_metadata[i]):t[n].innerHTML=o.default.active_metadata[i]:e.indexOf(i)>=0?""!=o.default.default_album_art?t[n].setAttribute("src",o.default.default_album_art):t[n].setAttribute("src",""):t[n].innerHTML="")}},syncPlaybackSpeed:function(){for(var e=document.getElementsByClassName("amplitude-playback-speed"),t=0;t<e.length;t++)switch(e[t].classList.remove("amplitude-playback-speed-10"),e[t].classList.remove("amplitude-playback-speed-15"),e[t].classList.remove("amplitude-playback-speed-20"),o.default.playback_speed){case 1:e[t].classList.add("amplitude-playback-speed-10");break;case 1.5:e[t].classList.add("amplitude-playback-speed-15");break;case 2:e[t].classList.add("amplitude-playback-speed-20")}},syncVolumeSliders:e,setPlayPauseButtonsToPause:function(){for(var e=document.querySelectorAll(".amplitude-play-pause"),t=0;t<e.length;t++)a.default.setElementPause(e[t])},setFirstSongInPlaylist:function(e,t){for(var n=["cover_art_url","station_art_url","podcast_episode_cover_art_url"],i=document.querySelectorAll('[amplitude-song-info][amplitude-playlist="'+t+'"]'),r=0;r<i.length;r++){var o=i[r].getAttribute("amplitude-song-info");i[r].getAttribute("amplitude-playlist")==t&&(void 0!=e[o]?n.indexOf(o)>=0?i[r].setAttribute("src",e[o]):i[r].innerHTML=e[o]:n.indexOf(o)>=0?""!=e.default_album_art?i[r].setAttribute("src",e.default_album_art):i[r].setAttribute("src",""):i[r].innerHTML="")}},syncMainPlayPause:function(e){"string"!=typeof e&&(e=o.default.active_song.paused?"paused":"playing");for(var t=document.querySelectorAll('.amplitude-play-pause[amplitude-main-play-pause="true"]'),n=0;n<t.length;n++)switch(e){case"playing":a.default.setElementPlay(t[n]);break;case"paused":a.default.setElementPause(t[n])}},syncPlaylistPlayPause:function(e,t){"string"!=typeof t&&(t=o.default.active_song.paused?"paused":"playing");for(var n=document.querySelectorAll('.amplitude-play-pause[amplitude-playlist-main-play-pause="true"]'),i=0;i<n.length;i++)n[i].getAttribute("amplitude-playlist")==e&&"playing"==t?a.default.setElementPlay(n[i]):a.default.setElementPause(n[i])},syncSongPlayPause:function(e,t,n){if("string"!=typeof n&&(n=o.default.active_song.paused?"paused":"playing"),null==e||""==e)for(var i=document.querySelectorAll(".amplitude-play-pause[amplitude-song-index]"),r=0;r<i.length;r++)i[r].hasAttribute("amplitude-playlist")?a.default.setElementPause(i[r]):"playing"==n&&i[r].getAttribute("amplitude-song-index")==t?a.default.setElementPlay(i[r]):a.default.setElementPause(i[r]);else for(var i=document.querySelectorAll(".amplitude-play-pause[amplitude-song-index]"),r=0;r<i.length;r++)i[r].hasAttribute("amplitude-playlist")&&i[r].getAttribute("amplitude-song-index")==t&&i[r].getAttribute("amplitude-playlist")==e&&"playing"==n?a.default.setElementPlay(i[r]):a.default.setElementPause(i[r])},syncRepeat:function(){for(var e=document.getElementsByClassName("amplitude-repeat"),t=0;t<e.length;t++)o.default.repeat?(e[t].classList.add("amplitude-repeat-on"),e[t].classList.remove("amplitude-repeat-off")):(e[t].classList.remove("amplitude-repeat-on"),e[t].classList.add("amplitude-repeat-off"))},syncMute:function(e){for(var t=document.getElementsByClassName("amplitude-mute"),n=0;n<t.length;n++)e?(t[n].classList.remove("amplitude-not-muted"),t[n].classList.add("amplitude-muted")):(t[n].classList.add("amplitude-not-muted"),t[n].classList.remove("amplitude-muted"))}},r(s,"syncVolumeSliders",e),r(s,"syncShuffle",function(e){for(var t=document.getElementsByClassName("amplitude-shuffle"),n=0;n<t.length;n++)null==t[n].getAttribute("amplitude-playlist")&&(e?(t[n].classList.add("amplitude-shuffle-on"),t[n].classList.remove("amplitude-shuffle-off")):(t[n].classList.add("amplitude-shuffle-off"),t[n].classList.remove("amplitude-shuffle-on")))}),r(s,"syncPlaylistShuffle",function(e,t){for(var n=document.getElementsByClassName("amplitude-shuffle"),i=0;i<n.length;i++)n[i].getAttribute("amplitude-playlist")==t&&(e?(n[i].classList.add("amplitude-shuffle-on"),n[i].classList.remove("amplitude-shuffle-off")):(n[i].classList.add("amplitude-shuffle-off"),n[i].classList.remove("amplitude-shuffle-on")))}),r(s,"syncMainSliderLocation",t),r(s,"syncPlaylistSliderLocation",n),r(s,"syncSongSliderLocation",i),r(s,"syncVolumeSliderLocation",function(e){for(var t=document.querySelectorAll(".amplitude-volume-slider"),n=0;n<t.length;n++)t[n].value=e}),r(s,"syncSongDuration",function(e){a.default.syncDurationHours(void 0==e||isNaN(e.hours)?"00":e.hours),a.default.syncDurationMinutes(void 0==e||isNaN(e.minutes)?"00":e.minutes),a.default.syncDurationSeconds(void 0==e||isNaN(e.seconds)?"00":e.seconds),a.default.syncDurationTime(void 0!=e?e:{})}),s}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(1)),a=i(n(2)),s=function(){function e(){o.default.runCallback("before_play"),r.default.active_metadata.live&&n(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&!r.default.paused&&n(),r.default.active_song.play(),r.default.active_song.playbackRate=r.default.playback_speed,o.default.runCallback("after_play")}function t(){r.default.active_song.src="",r.default.active_song.load()}function n(){r.default.active_song.src=r.default.active_metadata.url,r.default.active_song.load()}return{play:e,pause:function(){o.default.runCallback("before_pause"),r.default.active_song.pause(),r.default.paused=!0,r.default.active_metadata.live&&t(),o.default.runCallback("after_pause")},stop:function(){o.default.runCallback("before_stop"),0!=r.default.active_song.currentTime&&(r.default.active_song.currentTime=0),r.default.active_song.pause(),r.default.active_metadata.live&&t(),o.default.runCallback("after_stop")},setVolume:function(e){r.default.active_song.volume=e/100},setSongLocation:function(e){r.default.active_metadata.live||(r.default.active_song.currentTime=r.default.active_song.duration*(song_percentage/100))},skipToLocation:function(e){r.default.active_song.addEventListener("canplaythrough",function(){r.default.active_song.duration>=e&&e>0?r.default.active_song.currentTime=e:o.default.writeDebugMessage("Amplitude can't skip to a location greater than the duration of the audio or less than 0")},{once:!0})},disconnectStream:t,reconnectStream:n,playNow:function(t){t.url?(r.default.active_song.src=t.url,r.default.active_metadata=t,r.default.active_album=t.album):o.default.writeDebugMessage("The song needs to have a URL!"),a.default.syncMainPlayPause("playing"),a.default.displaySongMetadata(),a.default.resetSongSliders(),a.default.resetSongTimeVisualizations(),a.default.resetTimes(),e()},setPlaybackSpeed:function(e){r.default.playback_speed=e,r.default.active_song.playbackRate=r.default.playback_speed}}}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(1)),a=i(n(7)),s=function(){function e(){r.default.active_song.removeEventListener("timeupdate",a.default.updateTime),r.default.active_song.addEventListener("timeupdate",a.default.updateTime),r.default.active_song.removeEventListener("durationchange",a.default.updateTime),r.default.active_song.addEventListener("durationchange",a.default.updateTime)}function t(){r.default.active_song.removeEventListener("ended",a.default.songEnded),r.default.active_song.addEventListener("ended",a.default.songEnded)}function n(){for(var e=document.getElementsByClassName("amplitude-play"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.play),e[t].addEventListener("touchend",a.default.play)):(e[t].removeEventListener("click",a.default.play),e[t].addEventListener("click",a.default.play))}function i(){for(var e=document.getElementsByClassName("amplitude-pause"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.pause),e[t].addEventListener("touchend",a.default.pause)):(e[t].removeEventListener("click",a.default.pause),e[t].addEventListener("click",a.default.pause))}function s(){for(var e=document.getElementsByClassName("amplitude-play-pause"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.playPause),e[t].addEventListener("touchend",a.default.playPause)):(e[t].removeEventListener("click",a.default.playPause),e[t].addEventListener("click",a.default.playPause))}function l(){for(var e=document.getElementsByClassName("amplitude-stop"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.stop),e[t].addEventListener("touchend",a.default.stop)):(e[t].removeEventListener("click",a.default.stop),e[t].addEventListener("click",a.default.stop))}function c(){for(var e=document.getElementsByClassName("amplitude-mute"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?/iPhone|iPad|iPod/i.test(navigator.userAgent)?o.default.writeDebugMessage("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):(e[t].removeEventListener("touchend",a.default.mute),e[t].addEventListener("touchend",a.default.mute)):(e[t].removeEventListener("click",a.default.mute),e[t].addEventListener("click",a.default.mute))}function u(){for(var e=document.getElementsByClassName("amplitude-volume-up"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?/iPhone|iPad|iPod/i.test(navigator.userAgent)?o.default.writeDebugMessage("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):(e[t].removeEventListener("touchend",a.default.volumeUp),e[t].addEventListener("touchend",a.default.volumeUp)):(e[t].removeEventListener("click",a.default.volumeUp),e[t].addEventListener("click",a.default.volumeUp))}function h(){for(var e=document.getElementsByClassName("amplitude-volume-down"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?/iPhone|iPad|iPod/i.test(navigator.userAgent)?o.default.writeDebugMessage("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):(e[t].removeEventListener("touchend",a.default.volumeDown),e[t].addEventListener("touchend",a.default.volumeDown)):(e[t].removeEventListener("click",a.default.volumeDown),e[t].addEventListener("click",a.default.volumeDown))}function d(){for(var e=window.navigator.userAgent.indexOf("MSIE "),t=document.getElementsByClassName("amplitude-song-slider"),n=0;n<t.length;n++)e>0||navigator.userAgent.match(/Trident.*rv\:11\./)?(t[n].removeEventListener("change",a.default.songSlider),t[n].addEventListener("change",a.default.songSlider)):(t[n].removeEventListener("input",a.default.songSlider),t[n].addEventListener("input",a.default.songSlider))}function f(){for(var e=window.navigator.userAgent.indexOf("MSIE "),t=document.getElementsByClassName("amplitude-volume-slider"),n=0;n<t.length;n++)/iPhone|iPad|iPod/i.test(navigator.userAgent)?o.default.writeDebugMessage("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):e>0||navigator.userAgent.match(/Trident.*rv\:11\./)?(t[n].removeEventListener("change",a.default.volumeSlider),t[n].addEventListener("change",a.default.volumeSlider)):(t[n].removeEventListener("input",a.default.volumeSlider),t[n].addEventListener("input",a.default.volumeSlider))}function p(){for(var e=document.getElementsByClassName("amplitude-next"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.next),e[t].addEventListener("touchend",a.default.next)):(e[t].removeEventListener("click",a.default.next),e[t].addEventListener("click",a.default.next))}function m(){for(var e=document.getElementsByClassName("amplitude-prev"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.prev),e[t].addEventListener("touchend",a.default.prev)):(e[t].removeEventListener("click",a.default.prev),e[t].addEventListener("click",a.default.prev))}function g(){for(var e=document.getElementsByClassName("amplitude-shuffle"),t=0;t<e.length;t++)e[t].classList.remove("amplitude-shuffle-on"),e[t].classList.add("amplitude-shuffle-off"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.shuffle),e[t].addEventListener("touchend",a.default.shuffle)):(e[t].removeEventListener("click",a.default.shuffle),e[t].addEventListener("click",a.default.shuffle))}function v(){for(var e=document.getElementsByClassName("amplitude-repeat"),t=0;t<e.length;t++)e[t].classList.remove("amplitude-repeat-on"),e[t].classList.add("amplitude-repeat-off"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.repeat),e[t].addEventListener("touchend",a.default.repeat)):(e[t].removeEventListener("click",a.default.repeat),e[t].addEventListener("click",a.default.repeat))}function E(){for(var e=document.getElementsByClassName("amplitude-playback-speed"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.playbackSpeed),e[t].addEventListener("touchend",a.default.playbackSpeed)):(e[t].removeEventListener("click",a.default.playbackSpeed),e[t].addEventListener("click",a.default.playbackSpeed))}function y(){for(var e=document.getElementsByClassName("amplitude-skip-to"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e[t].removeEventListener("touchend",a.default.skipTo),e[t].addEventListener("touchend",a.default.skipTo)):(e[t].removeEventListener("click",a.default.skipTo),e[t].addEventListener("click",a.default.skipTo))}return{initializeEvents:function(){o.default.writeDebugMessage("Beginning initialization of event handlers.."),document.addEventListener("touchmove",function(){r.default.is_touch_moving=!0}),document.addEventListener("touchend",function(){r.default.is_touch_moving&&(r.default.is_touch_moving=!1)}),e(),t(),n(),i(),s(),l(),c(),u(),h(),d(),f(),p(),m(),g(),v(),E(),y()}}}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(2)),a=i(n(3)),s=i(n(1)),l=function(){return{computeCurrentTimes:function(){var e={},t=(Math.floor(r.default.active_song.currentTime%60)<10?"0":"")+Math.floor(r.default.active_song.currentTime%60),n=Math.floor(r.default.active_song.currentTime/60),i="00";return n<10&&(n="0"+n),n>60&&(i=Math.floor(n/60),n%=60,i<10&&(i="0"+i),n<10&&(n="0"+n)),e.seconds=t,e.minutes=n,e.hours=i,e},computeSongDuration:function(){var e={},t=(Math.floor(r.default.active_song.duration%60)<10?"0":"")+Math.floor(r.default.active_song.duration%60),n=Math.floor(r.default.active_song.duration/60),i="00";return n<10&&(n="0"+n),n>60&&(i=Math.floor(n/60),n%=60,i<10&&(i="0"+i),n<10&&(n="0"+n)),e.seconds=t,e.minutes=n,e.hours=i,e},computeSongCompletionPercentage:function(){return r.default.active_song.currentTime/r.default.active_song.duration*100},setPlaybackSpeed:function(e){a.default.setPlaybackSpeed(e)},setRepeat:function(e){r.default.repeat=e},setMainPlayPause:function(){r.default.active_song.paused?(o.default.syncMainPlayPause("playing"),o.default.syncPlaylistPlayPause(r.default.active_playlist,"playing"),o.default.syncSongPlayPause(r.default.active_playlist,r.default.active_index,"playing"),a.default.play()):(o.default.syncMainPlayPause("paused"),o.default.syncPlaylistPlayPause(r.default.active_playlist,"paused"),o.default.syncSongPlayPause(r.default.active_playlist,r.default.active_index,"paused"),a.default.pause())},setPlaylistPlayPause:function(e){s.default.checkNewPlaylist(e)&&(s.default.setActivePlaylist(e),r.default.shuffled_statuses[e]?s.default.changeSong(r.default.shuffled_playlists[e][0].original_index):s.default.changeSong(r.default.playlists[e][0])),r.default.active_song.paused?(o.default.syncMainPlayPause("playing"),o.default.syncPlaylistPlayPause(r.default.active_playlist,"playing"),o.default.syncSongPlayPause(r.default.active_playlist,r.default.active_index,"playing"),a.default.play()):(o.default.syncMainPlayPause("paused"),o.default.syncPlaylistPlayPause(r.default.active_playlist,"paused"),o.default.syncSongPlayPause(r.default.active_playlist,r.default.active_index,"paused"),a.default.pause())},setSongPlayPause:function(e,t){s.default.checkNewPlaylist(e)&&(s.default.setActivePlaylist(e),s.default.changeSong(t)),s.default.checkNewSong(t)&&s.default.changeSong(t),r.default.active_song.paused?(o.default.syncMainPlayPause("playing"),o.default.syncPlaylistPlayPause(r.default.active_playlist,"playing"),o.default.syncSongPlayPause(r.default.active_playlist,r.default.active_index,"playing"),a.default.play()):(o.default.syncMainPlayPause("paused"),o.default.syncPlaylistPlayPause(r.default.active_playlist,"paused"),o.default.syncSongPlayPause(r.default.active_playlist,r.default.active_index,"paused"),a.default.pause())},setShuffle:function(e){null==e?(r.default.shuffle_on?(r.default.shuffle_on=!1,r.default.shuffle_list={}):(r.default.shuffle_on=!0,s.default.shuffleSongs()),o.default.syncShuffle(r.default.shuffle_on)):(r.default.shuffled_statuses[e]?(r.default.shuffled_statuses[e]=!1,r.default.shuffled_playlists[e]=[]):(r.default.shuffled_statuses[e]=!0,s.default.shufflePlaylistSongs(e)),o.default.syncPlaylistShuffle(r.default.shuffled_statuses[e],e))},setNext:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0,n=!1;r.default.shuffle_on?r.default.shuffle_active_index+1<r.default.shuffle_list.length?(r.default.shuffle_active_index=parseInt(r.default.shuffle_active_index)+1,t=r.default.shuffle_list[parseInt(r.default.shuffle_active_index)].original_index):(r.default.shuffle_active_index=0,t=0,n=!0):(r.default.active_index+1<r.default.songs.length?r.default.active_index=parseInt(r.default.active_index)+1:(r.default.active_index=0,n=!0),t=r.default.active_index),a.default.stop(),s.default.changeSong(t),e&&!r.default.repeat&&n||a.default.play(),o.default.syncMainPlayPause(),o.default.syncSongPlayPause(null,t),s.default.runCallback("after_next")},setNextPlaylist:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,i=!1;if(r.default.shuffled_statuses[e]){var l=parseInt(r.default.shuffled_active_indexes[e]);l+1<r.default.shuffled_playlists[e].length?(r.default.shuffled_active_indexes[e]=l+1,n=r.default.shuffled_playlists[e][r.default.shuffled_active_indexes[e]].original_index):(r.default.shuffled_active_indexes[e]=0,n=r.default.shuffled_playlists[e][0].original_index,i=!0)}else{var c=r.default.playlists[e].indexOf(parseInt(r.default.active_index));c+1<r.default.playlists[e].length?r.default.active_index=parseInt(r.default.playlists[e][c+1]):(r.default.active_index=parseInt(r.default.playlists[e][0]),i=!0),n=r.default.active_index}a.default.stop(),s.default.changeSong(n),s.default.setActivePlaylist(e),t&&!r.default.repeat&&i||a.default.play(),o.default.syncMainPlayPause(),o.default.syncPlaylistPlayPause(e),o.default.syncSongPlayPause(e,n),s.default.runCallback("after_next")},setPrev:function(){var e=0;r.default.shuffle_on?parseInt(r.default.shuffle_active_index)-1>=0?(r.default.shuffle_active_index=parseInt(r.default.shuffle_active_index)-1,e=r.default.shuffle_list[parseInt(r.default.shuffle_active_index)].original_index):(r.default.shuffle_active_index=r.default.shuffle_list.length-1,e=r.default.shuffle_list[parseInt(r.default.shuffle_list.length)-1].original_index):(parseInt(r.default.active_index)-1>=0?r.default.active_index=parseInt(r.default.active_index)-1:r.default.active_index=r.default.songs.length-1,e=r.default.active_index),a.default.stop(),s.default.changeSong(e),a.default.play(),o.default.syncMainPlayPause("playing"),o.default.syncSongPlayPause(null,e,"playing"),s.default.runCallback("after_prev")},setPrevPlaylist:function(e){var t=0;if(r.default.shuffled_statuses[e]){var n=parseInt(r.default.shuffled_active_indexes[e]);n-1>=0?(r.default.shuffled_active_indexes[e]=n-1,t=r.default.shuffled_playlists[e][r.default.shuffled_active_indexes[e]].original_index):(r.default.shuffled_active_indexes[e]=r.default.shuffled_playlists[e].length-1,t=r.default.shuffled_playlists[e][r.default.shuffled_playlists[e].length-1].original_index)}else{var i=r.default.playlists[e].indexOf(parseInt(r.default.active_index));r.default.active_index=i-1>=0?parseInt(r.default.playlists[e][i-1]):parseInt(r.default.playlists[e][r.default.playlists[e].length-1]),t=r.default.active_index}a.default.stop(),s.default.changeSong(t),s.default.setActivePlaylist(e),a.default.play(),o.default.syncMainPlayPause("playing"),o.default.syncPlaylistPlayPause(e,"playing"),o.default.syncSongPlayPause(e,t,"playing"),s.default.runCallback("after_prev")}}}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3)),o=i(n(1)),a=i(n(4)),s=i(n(9)),l=i(n(2)),c=n(0),u=function(){function e(e){void 0!=e.start_song?o.default.isInt(e.start_song)?o.default.changeSong(e.start_song):o.default.writeDebugMessage("You must enter an integer index for the start song."):o.default.changeSong(0),c.playback_speed=void 0!=e.playback_speed?e.playback_speed:1,r.default.setPlaybackSpeed(c.playback_speed),c.active_song.preload=void 0!=e.preload?e.preload:"auto",c.callbacks=void 0!=e.callbacks?e.callbacks:{},c.volume=void 0!=e.volume?e.volume:50,c.volume_increment=void 0!=e.volume_increment?e.volume_increment:5,c.volume_decrement=void 0!=e.volume_decrement?e.volume_decrement:5,r.default.setVolume(c.volume),l.default.syncVolumeSliders(),void 0!=e.default_album_art?c.default_album_art=e.default_album_art:c.default_album_art="",l.default.resetTimes(),l.default.setPlayPauseButtonsToPause(),e.autoplay&&(c.active_playlist=null,l.default.syncMainPlayPause("playing"),l.default.syncSongPlayPause(null,0,"playing"),r.default.play()),o.default.runCallback("after_init")}function t(){for(var e=document.getElementsByClassName("amplitude-song-time-visualization"),t=0;t<e.length;t++){var n=document.createElement("div");n.classList.add("amplitude-song-time-visualization-status"),n.setAttribute("style","width: 0px"),e[t].innerHTML="",e[t].appendChild(n)}}function n(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return o.default.writeDebugMessage("You have "+n+" playlist(s) in your config"),n}function i(){for(var e in c.playlists)if(c.playlists.hasOwnProperty(e)&&c.playlists[e].songs)for(var t=0;t<c.playlists[e].songs.length;t++)c.songs[c.playlists[e].songs[t]]||o.default.writeDebugMessage("The song index: "+c.playlists[e].songs[t]+" in playlist with key: "+e+" is not defined in your songs array!")}function u(){for(var e in c.playlists)c.shuffled_statuses[e]=!1}function h(){for(var e in c.playlists)c.shuffled_playlists[e]=[]}function d(){for(var e in c.playlists)c.shuffled_active_indexes[e]=0}function f(){for(var e in c.playlists)l.default.setFirstSongInPlaylist(c.songs[c.playlists[e][0]],e)}function p(){for(var e=0;e<c.songs.length;e++)void 0==c.songs[e].live&&(c.songs[e].live=!1)}return{initialize:function(r){var l=!1;o.default.resetConfig(),a.default.initializeEvents(),t(),c.debug=void 0!=r.debug&&r.debug,r.songs?0!=r.songs.length?(c.songs=r.songs,l=!0):o.default.writeDebugMessage("Please add some songs, to your songs object!"):o.default.writeDebugMessage("Please provide a songs object for AmplitudeJS to run!"),r.playlists&&n(r.playlists)>0&&(c.playlists=r.playlists,p(),i(),u(),h(),d(),f()),l&&(c.soundcloud_client=void 0!=r.soundcloud_client?r.soundcloud_client:"",c.soundcloud_use_art=void 0!=r.soundcloud_use_art?r.soundcloud_use_art:"",""!=c.soundcloud_client?(tempUserConfig=r,s.default.loadSoundCloud(tempUserConfig)):e(r)),o.default.writeDebugMessage("Initialized With: "),o.default.writeDebugMessage(c)},setConfig:e,rebindDisplay:function(){a.default.initializeEvents(),t()}}}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(5)),a=i(n(2)),s=i(n(3)),l=i(n(1));t.default={updateTime:function(){if(!r.default.active_metadata.live){var e=o.default.computeCurrentTimes(),t=o.default.computeSongCompletionPercentage(),n=o.default.computeSongDuration();a.default.syncCurrentTime(e,t),a.default.syncSongDuration(n)}},songEnded:function(){""==r.default.active_playlist||null==r.default.active_playlist?o.default.setNext(!0):o.default.setNextPlaylist(r.default.active_playlist,!0)},play:function(){if(!r.default.is_touch_moving){var e=this.getAttribute("amplitude-song-index"),t=this.getAttribute("amplitude-playlist");null==t&&null==e&&o.default.setSongPlayPause(r.default.active_playlist,r.default.active_index),null!=t&&""!=t&&(l.default.checkNewPlaylist(t)?(l.default.setActivePlaylist(t),null!=e?(l.default.changeSong(e),o.default.setPlaylistPlayPause(t)):(l.default.changeSong(r.default.playlists[t][0]),o.default.setPlaylistPlayPause(t))):null!=e?(l.default.changeSong(e),o.default.setPlaylistPlayPause(t)):(l.default.changeSong(r.default.active_index),o.default.setPlaylistPlayPause(t))),null!=t&&""!=t||null==e||""==e||((l.default.checkNewSong(e)||r.default.active_playlist!=t)&&l.default.changeSong(e),o.default.setSongPlayPause(t,e))}},pause:function(){if(!r.default.is_touch_moving){var e=this.getAttribute("amplitude-song-index"),t=this.getAttribute("amplitude-playlist");null==e&&null==t&&(o.default.setSongPlayPause(r.default.active_playlist,r.default.active_index),s.default.pause()),(null!=t||""!=t&&r.default.active_playlist==t)&&(a.default.syncMainPlayPause("paused"),a.default.syncPlaylistPlayPause(r.default.active_playlist,"paused"),a.default.syncSongPlayPause(r.default.active_playlist,r.default.active_index,"paused"),s.default.pause()),null!=t&&""!=t||e!=r.default.active_index||(a.default.syncMainPlayPause("paused"),a.default.syncPlaylistPlayPause(r.default.active_playlist,"paused"),a.default.syncSongPlayPause(r.default.active_playlist,r.default.active_index,"paused"),s.default.pause())}},playPause:function(){if(!r.default.is_touch_moving)if(null!=this.getAttribute("amplitude-main-play-pause"))o.default.setMainPlayPause();else if(null!=this.getAttribute("amplitude-playlist-main-play-pause")){e=this.getAttribute("amplitude-playlist");o.default.setPlaylistPlayPause(e)}else{var e=this.getAttribute("amplitude-playlist"),t=this.getAttribute("amplitude-song-index");o.default.setSongPlayPause(e,t)}},stop:function(){r.default.is_touch_moving||(a.default.setPlayPauseButtonsToPause(),s.default.stop())},mute:function(){r.default.is_touch_moving||(0==r.default.volume?(r.default.volume=r.default.pre_mute_volume,a.default.syncMute(!1)):(r.default.pre_mute_volume=r.default.volume,r.default.volume=0,a.default.syncMute(!0)),s.default.setVolume(r.default.volume),a.default.syncVolumeSliders(r.default.volume))},volumeUp:function(){r.default.is_touch_moving||(r.default.volume+r.default.volume_increment<=100?r.default.volume=r.default.volume+r.default.volume_increment:r.default.volume=100,s.default.setVolume(r.default.volume),a.default.syncVolumeSliders(r.default.volume))},volumeDown:function(){r.default.is_touch_moving||(r.default.volume-r.default.volume_increment>0?r.default.volume=r.default.volume-r.default.volume_increment:r.default.volume=0,s.default.setVolume(r.default.volume),a.default.syncVolumeSliders(r.default.volume))},songSlider:function(){var e=this.value;if(null!=this.getAttribute("amplitude-main-song-slider")){if(!r.default.active_metadata.live){var t=r.default.active_song.duration*(e/100);isFinite(t)&&(r.default.active_song.currentTime=t)}a.default.syncMainSliderLocation(e),""!=r.default.active_playlist&&null!=r.default.active_playlist&&a.default.syncPlaylistSliderLocation(r.default.active_playlist,e)}if(null!=this.getAttribute("amplitude-playlist-song-slider")){n=this.getAttribute("amplitude-playlist");r.default.active_playlist==n&&(r.default.active_metadata.live||(r.default.active_song.currentTime=r.default.active_song.duration*(e/100)),a.default.syncMainSliderLocation(e),a.default.syncPlaylistSliderLocation(n,e))}if(null==this.getAttribute("amplitude-playlist-song-slider")&&null==this.getAttribute("amplitude-main-song-slider")){var n=this.getAttribute("amplitude-playlist"),i=this.getAttribute("amplitude-song-index");r.default.active_index==i&&(r.default.active_metadata.live||(r.default.active_song.currentTime=r.default.active_song.duration*(e/100)),a.default.syncMainSliderLocation(),""!=r.default.active_playlist&&null!=r.default.active_playlist&&r.default.active_playlist==n&&a.default.syncPlaylistSliderLocation(n,location),a.default.syncSongSliderLocation(n,i,location))}},volumeSlider:function(){s.default.setVolume(this.value),a.default.syncVolumeSliderLocation(this.value)},next:function(){if(!r.default.is_touch_moving)if(""==this.getAttribute("amplitude-playlist")||null==this.getAttribute("amplitude-playlist"))""==r.default.active_playlist||null==r.default.active_playlist?o.default.setNext():o.default.setNextPlaylist(r.default.active_playlist);else{var e=this.getAttribute("amplitude-playlist");o.default.setNextPlaylist(e)}},prev:function(){if(!r.default.is_touch_moving)if(""==this.getAttribute("amplitude-playlist")||null==this.getAttribute("amplitude-playlist"))""==r.default.active_playlist||null==r.default.active_playlist?o.default.setPrev():o.default.setPrevPlaylist(r.default.active_playlist);else{var e=this.getAttribute("amplitude-playlist");o.default.setPrevPlaylist(e)}},shuffle:function(){if(!r.default.is_touch_moving)if(""==this.getAttribute("amplitude-playlist")||null==this.getAttribute("amplitude-playlist"))o.default.setShuffle(null);else{var e=this.getAttribute("amplitude-playlist");o.default.setShuffle(e)}},repeat:function(){r.default.is_touch_moving||(o.default.setRepeat(!r.default.repeat),a.default.syncRepeat())},playbackSpeed:function(){if(!r.default.is_touch_moving){switch(r.default.playback_speed){case 1:o.default.setPlaybackSpeed(1.5);break;case 1.5:o.default.setPlaybackSpeed(2);break;case 2:o.default.setPlaybackSpeed(1)}a.default.syncPlaybackSpeed()}},skipTo:function(){if(!r.default.is_touch_moving)if(this.hasAttribute("amplitude-playlist")){t=this.getAttribute("amplitude-playlist");l.default.checkNewPlaylist(t)&&l.default.setActivePlaylist(t);var e=parseInt(this.getAttribute("amplitude-location")),t=this.getAttribute("amplitude-playlist"),n=parseInt(this.getAttribute("amplitude-song-index"));l.default.changeSong(n),s.default.play(),s.default.skipToLocation(e)}else{var e=parseInt(this.getAttribute("amplitude-location")),n=parseInt(this.getAttribute("amplitude-song-index"));l.default.changeSong(n),s.default.play(),s.default.skipToLocation(e)}}},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(6)),a=i(n(3)),s=(i(n(1)),i(n(4)),i(n(5))),l=(i(n(2)),i(n(0))),c=function(){function e(e){return l.default.songs.push(e),l.default.songs.length-1}var t;return t={init:function(e){o.default.initialize(e)},bindNewElements:function(){o.default.rebindDisplay()},getActivePlaylist:function(){return l.default.active_playlist},getPlaybackSpeed:function(){return l.default.playback_speed},getRepeat:function(){return l.default.repeat},getShuffle:function(){return l.default.shuffle_on},getShufflePlaylist:function(e){return l.default.shuffled_statuses[e]},getDefaultAlbumArt:function(){return l.default.default_album_art},setDefaultAlbumArt:function(e){l.default.default_album_art=e},getSongPlayedPercentage:function(){return l.default.active_song.currentTime/l.default.active_song.duration*100},setSongPlayedPercentage:function(e){"number"==typeof e&&e>0&&e<100&&(l.default.active_song.currentTime=l.default.active_song.duration*(e/100))},setDebug:function(e){l.default.debug=e},getActiveSongMetadata:function(){return l.default.active_metadata},getSongByIndex:function(e){return l.default.songs[e]},getSongAtPlaylistIndex:function(e,t){var n=l.default.playlists[e][t];return l.default.songs[n]},addSong:e,playNow:function(e){a.default.playNow(e)},play:function(){a.default.play()},pause:function(){a.default.pause()}},r(t,"addSong",e),r(t,"audio",function(){return l.default.active_song}),r(t,"next",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;""==e||null==e?null==l.default.active_playlist||""==l.default.active_playlist?s.default.setNext():s.default.setNextPlaylist(l.default.active_playlist):s.default.setNextPlaylist(e)}),r(t,"prev",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;""==e||null==e?null==l.default.active_playlist||""==l.default.active_playlist?s.default.setPrev():s.default.setPrevPlaylist(l.default.active_playlist):s.default.setPrevPlaylist(e)}),t}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(1)),a=i(n(6)),s=function(){function e(){SC.initialize({client_id:r.default.soundcloud_client}),t()}function t(){for(var e=/^https?:\/\/(soundcloud.com|snd.sc)\/(.*)$/,t=0;t<r.default.songs.length;t++)r.default.songs[t].url.match(e)&&(r.default.soundcloud_song_count++,n(r.default.songs[t].url,t))}function n(e,t){SC.get("/resolve/?url="+e,function(e){e.streamable?(r.default.songs[t].url=e.stream_url+"?client_id="+r.default.soundcloud_client,r.default.soundcloud_use_art&&(r.default.songs[t].cover_art_url=e.artwork_url),r.default.songs[t].soundcloud_data=e):o.default.writeDebugMessage(r.default.songs[t].name+" by "+r.default.songs[t].artist+" is not streamable by the Soundcloud API"),r.default.soundcloud_songs_ready++,r.default.soundcloud_songs_ready==r.default.soundcloud_song_count&&a.default.setConfig(i)})}var i={};return{loadSoundCloud:function(t){i=t;var n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src="https://connect.soundcloud.com/sdk.js",r.onreadystatechange=e,r.onload=e,n.appendChild(r)}}}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=function(){function e(e){for(var t=document.querySelectorAll('.amplitude-song-time-visualization[amplitude-main-song-time-visualization="true"]'),n=0;n<t.length;n++){var i=t[n].querySelectorAll(".amplitude-song-time-visualization-status"),r=t[n].offsetWidth*(e/100);i[0].setAttribute("style","width: "+r+"px")}}function t(e){for(var t=document.querySelectorAll('.amplitude-song-time-visualization[amplitude-playlist-song-time-visualization="true"][amplitude-playlist="'+i.default.active_playlist+'"]'),n=0;n<t.length;n++){var r=t[n].querySelectorAll(".amplitude-song-time-visualization-status"),o=t[n].offsetWidth*(e/100);r[0].setAttribute("style","width: "+o+"px")}}function n(e){if(""!=i.default.active_playlist&&null!=i.default.active_playlist)for(var t=document.querySelectorAll('.amplitude-song-time-visualization[amplitude-playlist="'+i.default.active_playlist+'"][amplitude-song-index="'+i.default.active_index+'"]'),n=0;n<t.length;n++){var r=t[n].querySelectorAll(".amplitude-song-time-visualization-status"),o=(a=t[n].offsetWidth)*(e/100);r[0].setAttribute("style","width: "+o+"px")}else for(var t=document.querySelectorAll('.amplitude-song-time-visualization[amplitude-song-index="'+i.default.active_index+'"]'),n=0;n<t.length;n++)if(!t[n].hasAttribute("amplitude-playlist")){var r=t[n].querySelectorAll(".amplitude-song-time-visualization-status"),a=t[n].offsetWidth,o=a*(e/100);r[0].setAttribute("style","width: "+o+"px")}}return{syncCurrentHours:function(e){if(null!=i.default.active_playlist&&""!=i.default.active_playlist)t=['.amplitude-current-hours[amplitude-main-current-hours="true"]','.amplitude-current-hours[amplitude-playlist-current-hours="true"][amplitude-playlist="'+i.default.active_playlist+'"]','.amplitude-current-hours[amplitude-song-index="'+i.default.active_index+'"]'];else var t=['.amplitude-current-hours[amplitude-main-current-hours="true"]','.amplitude-current-hours[amplitude-song-index="'+i.default.active_index+'"]'];if(document.querySelectorAll(t.join()).length>0)for(var n=document.querySelectorAll(t.join()),r=0;r<n.length;r++)"true"==n[r].getAttribute("amplitude-main-current-hours")?n[r].innerHTML=e:""!=i.default.active_playlist&&null!=i.default.active_playlist&&n[r].getAttribute("amplitude-playlist")==i.default.active_playlist?n[r].innerHTML=e:""==i.default.active_playlist||null==i.default.active_playlist&&!n[r].hasAttribute("amplitude-playlist")?n[r].innerHTML=e:n[r].innerHTML="00"},syncCurrentMinutes:function(e){if(null!=i.default.active_playlist&&""!=i.default.active_playlist)t=['.amplitude-current-minutes[amplitude-main-current-minutes="true"]','.amplitude-current-minutes[amplitude-playlist-current-minutes="true"][amplitude-playlist="'+i.default.active_playlist+'"]','.amplitude-current-minutes[amplitude-song-index="'+i.default.active_index+'"]'];else var t=['.amplitude-current-minutes[amplitude-main-current-minutes="true"]','.amplitude-current-minutes[amplitude-song-index="'+i.default.active_index+'"]'];for(var n=document.querySelectorAll(t.join()),r=0,o=n.length;r<o;r++)"true"==n[r].getAttribute("amplitude-main-current-minutes")?n[r].innerHTML=e:""!=i.default.active_playlist&&null!=i.default.active_playlist&&n[r].getAttribute("amplitude-playlist")==i.default.active_playlist?n[r].innerHTML=e:""==i.default.active_playlist||null==i.default.active_playlist&&!n[r].hasAttribute("amplitude-playlist")?n[r].innerHTML=e:n[r].innerHTML="00"},syncCurrentSeconds:function(e){if(null!=i.default.active_playlist&&""!=i.default.active_playlist)t=['.amplitude-current-seconds[amplitude-main-current-seconds="true"]','.amplitude-current-seconds[amplitude-playlist-current-seconds="true"][amplitude-playlist="'+i.default.active_playlist+'"]','.amplitude-current-seconds[amplitude-song-index="'+i.default.active_index+'"]'];else var t=['.amplitude-current-seconds[amplitude-main-current-seconds="true"]','.amplitude-current-seconds[amplitude-song-index="'+i.default.active_index+'"]'];for(var n=document.querySelectorAll(t.join()),r=0,o=n.length;r<o;r++)"true"==n[r].getAttribute("amplitude-main-current-seconds")?n[r].innerHTML=e:""!=i.default.active_playlist&&null!=i.default.active_playlist&&n[r].getAttribute("amplitude-playlist")==i.default.active_playlist?n[r].innerHTML=e:""==i.default.active_playlist||null==i.default.active_playlist&&!n[r].hasAttribute("amplitude-playlist")?n[r].innerHTML=e:n[r].innerHTML="00"},syncCurrentTime:function(e){for(var t=['.amplitude-current-time[amplitude-main-current-time="true"]','.amplitude-current-time[amplitude-playlist-main-current-time="'+i.default.active_playlist+'"]','.amplitude-current-time[amplitude-song-index="'+i.default.active_index+'"]'],n=document.querySelectorAll(t.join()),r=0,o=n.length;r<o;r++)n[r].innerHTML=e.minutes+":"+e.seconds},resetCurrentHours:function(){for(var e=document.querySelectorAll(".amplitude-current-hours"),t=0;t<e.length;t++)e[t].innerHTML="00"},resetCurrentMinutes:function(){for(var e=document.querySelectorAll(".amplitude-current-minutes"),t=0;t<e.length;t++)e[t].innerHTML="00"},resetCurrentSeconds:function(){for(var e=document.querySelectorAll(".amplitude-current-seconds"),t=0;t<e.length;t++)e[t].innerHTML="00"},resetCurrentTime:function(){for(var e=document.querySelectorAll(".amplitude-current-time"),t=0;t<e.length;t++)e[t].innerHTML="00:00"},syncSongTimeVisualizations:function(i){e(i),t(i),n(i)},setElementPlay:function(e){e.classList.add("amplitude-playing"),e.classList.remove("amplitude-paused")},setElementPause:function(e){e.classList.remove("amplitude-playing"),e.classList.add("amplitude-paused")},syncDurationHours:function(e){if(null!=i.default.active_playlist&&""!=i.default.active_playlist)t=['.amplitude-duration-hours[amplitude-main-duration-hours="true"]','.amplitude-duration-hours[amplitude-playlist-duration-hours="true"][amplitude-playlist="'+i.default.active_playlist+'"]','.amplitude-duration-hours[amplitude-song-index="'+i.default.active_index+'"]'];else var t=['.amplitude-duration-hours[amplitude-main-duration-hours="true"]','.amplitude-duration-hours[amplitude-song-index="'+i.default.active_index+'"]'];if(document.querySelectorAll(t.join()).length>0)for(var n=document.querySelectorAll(t.join()),r=0;r<n.length;r++)"true"==n[r].getAttribute("amplitude-main-duration-hours")?n[r].innerHTML=e:""!=i.default.active_playlist&&null!=i.default.active_playlist&&n[r].getAttribute("amplitude-playlist")==i.default.active_playlist?n[r].innerHTML=e:""==i.default.active_playlist||null==i.default.active_playlist&&!n[r].hasAttribute("amplitude-playlist")?n[r].innerHTML=e:n[r].innerHTML="00"},syncDurationMinutes:function(e){if(null!=i.default.active_playlist&&""!=i.default.active_playlist)t=['.amplitude-duration-minutes[amplitude-main-duration-minutes="true"]','.amplitude-duration-minutes[amplitude-playlist-duration-minutes="true"][amplitude-playlist="'+i.default.active_playlist+'"]','.amplitude-duration-minutes[amplitude-song-index="'+i.default.active_index+'"]'];else var t=['.amplitude-duration-minutes[amplitude-main-duration-minutes="true"]','.amplitude-duration-minutes[amplitude-song-index="'+i.default.active_index+'"]'];for(var n=document.querySelectorAll(t.join()),r=0;r<n.length;r++)"true"==n[r].getAttribute("amplitude-main-duration-minutes")?n[r].innerHTML=e:""!=i.default.active_playlist&&null!=i.default.active_playlist&&n[r].getAttribute("amplitude-playlist")==i.default.active_playlist?n[r].innerHTML=e:""==i.default.active_playlist||null==i.default.active_playlist&&!n[r].hasAttribute("amplitude-playlist")?n[r].innerHTML=e:n[r].innerHTML="00"},syncDurationSeconds:function(e){if(null!=i.default.active_playlist&&""!=i.default.active_playlist)t=['.amplitude-duration-seconds[amplitude-main-duration-seconds="true"]','.amplitude-duration-seconds[amplitude-playlist-duration-seconds="true"][amplitude-playlist="'+i.default.active_playlist+'"]','.amplitude-duration-seconds[amplitude-song-index="'+i.default.active_index+'"]'];else var t=['.amplitude-duration-seconds[amplitude-main-duration-seconds="true"]','.amplitude-duration-seconds[amplitude-song-index="'+i.default.active_index+'"]'];for(var n=document.querySelectorAll(t.join()),r=0;r<n.length;r++)"true"==n[r].getAttribute("amplitude-main-duration-seconds")?n[r].innerHTML=e:""!=i.default.active_playlist&&null!=i.default.active_playlist&&n[r].getAttribute("amplitude-playlist")==i.default.active_playlist?n[r].innerHTML=e:""==i.default.active_playlist||null==i.default.active_playlist&&!n[r].hasAttribute("amplitude-playlist")?n[r].innerHTML=e:n[r].innerHTML="00"},syncDurationTime:function(e){for(var t=['.amplitude-duration-time[amplitude-main-duration-time="true"]','.amplitude-duration-time[amplitude-playlist-main-duration-time="'+i.default.active_playlist+'"]','.amplitude-duration-time[amplitude-song-index="'+i.default.active_index+'"]'],n=document.querySelectorAll(t.join()),r=0;r<n.length;r++)isNaN(e.minutes)||isNaN(e.seconds)?n[r].innerHTML="00:00":n[r].innerHTML=e.minutes+":"+e.seconds}}}();t.default=r,e.exports=t.default}])}),function(e){function t(e,t){return e.getAttribute("data-"+t)}function n(e){window.addEventListener&&window.addEventListener("message",function(t){e.id===t.data.sender&&(e.height=t.data.height)},!1)}function i(i,r){if(!(r=r||o)){var h=t(i,"theme")||l||"default";r=c+"cards/"+h+".html"}var d=t(i,"user"),f=t(i,"repo"),p=t(i,"github");if(p&&(p=p.split("/")).length&&!d&&(d=p[0],f=f||p[1]),d){u+=1;var m=t(i,"width"),g=t(i,"height"),v=t(i,"target"),E=t(i,"client-id")||a,y=t(i,"client-secret")||s,T="ghcard-"+d+"-"+u,x=e.createElement("iframe");x.setAttribute("id",T),x.setAttribute("frameborder",0),x.setAttribute("scrolling",0),x.setAttribute("allowtransparency",!0);var b=r+"?user="+d+"&identity="+T;return f&&(b+="&repo="+f),v&&(b+="&target="+v),E&&y&&(b+="&client_id="+E+"&client_secret="+y),x.src=b,x.width=m||Math.min(i.parentNode.clientWidth||400,400),g&&(x.height=g),n(x),i.parentNode.replaceChild(x,i),x}}var r,o,a,s,l,c="//cdn.jsdelivr.net/github-cards/1.0.2/",u=0,h=e.getElementsByTagName("meta");for(r=0;r<h.length;r++){var d=h[r].getAttribute("name"),f=h[r].getAttribute("content");"gc:url"===d?o=f:"gc:base"===d?c=f:"gc:client-id"===d?a=f:"gc:client-secret"===d?s=f:"gc:theme"===d&&(l=f)}var p=function(t){if(e.querySelectorAll)return e.querySelectorAll("."+t);var n=e.getElementsByTagName("div"),i=[];for(r=0;r<n.length;r++)~n[r].className.split(" ").indexOf(t)&&i.push(n[r]);return i}("github-card");for(r=0;r<p.length;r++)i(p[r]);window.githubCard&&(window.githubCard.render=i)}(document),function(e,t){if("object"==typeof exports&&exports)t(exports);else{var n={};t(n),"function"==typeof define&&define.amd?define(n):e.Mustache=n}}(this,function(e){function t(e,t){return d.call(e,t)}function n(e){return!t(f,e)}function i(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e){if(!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);return[new RegExp(r(e[0])+"\\s*"),new RegExp("\\s*"+r(e[1]))]}function a(t,i){i=i||e.tags,t=t||"","string"==typeof i&&(i=i.split(E));for(var a,u,h,d,f,p,m=o(i),g=new c(t),b=[],_=[],w=[],R=!1,H=!1;!g.eos();){if(a=g.pos,h=g.scanUntil(m[0]))for(var S=0,M=h.length;S<M;++S)d=h.charAt(S),n(d)?w.push(_.length):H=!0,_.push(["text",d,a,a+1]),a+=1,"\n"===d&&function(){if(R&&!H)for(;w.length;)delete _[w.pop()];else w=[];R=!1,H=!1}();if(!g.scan(m[0]))break;if(R=!0,u=g.scan(x)||"name",g.scan(v),"="===u?(h=g.scanUntil(y),g.scan(y),g.scanUntil(m[1])):"{"===u?(h=g.scanUntil(new RegExp("\\s*"+r("}"+i[1]))),g.scan(T),g.scanUntil(m[1]),u="&"):h=g.scanUntil(m[1]),!g.scan(m[1]))throw new Error("Unclosed tag at "+g.pos);if(f=[u,h,a,g.pos],_.push(f),"#"===u||"^"===u)b.push(f);else if("/"===u){if(!(p=b.pop()))throw new Error('Unopened section "'+h+'" at '+a);if(p[1]!==h)throw new Error('Unclosed section "'+p[1]+'" at '+a)}else"name"===u||"{"===u||"&"===u?H=!0:"="===u&&(m=o(i=h.split(E)))}if(p=b.pop())throw new Error('Unclosed section "'+p[1]+'" at '+g.pos);return l(s(_))}function s(e){for(var t,n,i=[],r=0,o=e.length;r<o;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}function l(e){for(var t,n=[],i=n,r=[],o=0,a=e.length;o<a;++o)switch((t=e[o])[0]){case"#":case"^":i.push(t),r.push(t),i=t[4]=[];break;case"/":r.pop()[5]=t[2],i=r.length>0?r[r.length-1][4]:n;break;default:i.push(t)}return n}function c(e){this.string=e,this.tail=e,this.pos=0}function u(e,t){this.view=null==e?{}:e,this.cache={".":this.view},this.parent=t}function h(){this.cache={}}var d=RegExp.prototype.test,f=/\S/,p=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===p.call(e)},g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},v=/\s*/,E=/\s+/,y=/\s*=/,T=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(e){var t=this.tail.match(e);if(t&&0===t.index){var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},c.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},u.prototype.push=function(e){return new u(e,this)},u.prototype.lookup=function(e){var t;if(e in this.cache)t=this.cache[e];else{for(var n=this;n;){if(e.indexOf(".")>0){t=n.view;for(var r=e.split("."),o=0;null!=t&&o<r.length;)t=t[r[o++]]}else t=n.view[e];if(null!=t)break;n=n.parent}this.cache[e]=t}return i(t)&&(t=t.call(this.view)),t},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=a(e,t)),i},h.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof u?t:new u(t);return this.renderTokens(i,r,n,e)},h.prototype.renderTokens=function(t,n,r,o){for(var a,s,l="",c=this,u=0,h=t.length;u<h;++u)switch((a=t[u])[0]){case"#":if(!(s=n.lookup(a[1])))continue;if(m(s))for(var d=0,f=s.length;d<f;++d)l+=this.renderTokens(a[4],n.push(s[d]),r,o);else if("object"==typeof s||"string"==typeof s)l+=this.renderTokens(a[4],n.push(s),r,o);else if(i(s)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(n.view,o.slice(a[3],a[5]),function(e){return c.render(e,n,r)}))&&(l+=s)}else l+=this.renderTokens(a[4],n,r,o);break;case"^":(!(s=n.lookup(a[1]))||m(s)&&0===s.length)&&(l+=this.renderTokens(a[4],n,r,o));break;case">":if(!r)continue;null!=(s=i(r)?r(a[1]):r[a[1]])&&(l+=this.renderTokens(this.parse(s),n,r,s));break;case"&":null!=(s=n.lookup(a[1]))&&(l+=s);break;case"name":null!=(s=n.lookup(a[1]))&&(l+=e.escape(s));break;case"text":l+=a[1]}return l},e.name="mustache.js",e.version="0.8.1",e.tags=["{{","}}"];var b=new h;e.clearCache=function(){return b.clearCache()},e.parse=function(e,t){return b.parse(e,t)},e.render=function(e,t,n){return b.render(e,t,n)},e.to_html=function(t,n,r,o){var a=e.render(t,n,r);if(!i(o))return a;o(a)},e.escape=function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return g[e]})},e.Scanner=c,e.Context=u,e.Writer=h});var GitHubActivity=function(){"use strict";var e={},t={renderLink:function(e,t,n){return t||(t=e),void 0===n&&(n=""),Mustache.render('<a class="'+n+'" href="{{url}}" target="_blank">{{{title}}}</a>',{url:e,title:t})},renderGitHubLink:function(e,n,i){return n||(n=e),void 0===i&&(i=""),t.renderLink("https://github.com/"+e,n,i)},getMessageFor:function(e){var n=e.payload;if(e.repoLink=t.renderGitHubLink(e.repo.name),e.userGravatar=Mustache.render('<div class="gha-gravatar-user"><img src="{{url}}" class="gha-gravatar-small"></div>',{url:e.actor.avatar_url}),n.ref&&("refs/heads/"===n.ref.substring(0,11)?e.branch=n.ref.substring(11):e.branch=n.ref,e.branchLink=t.renderGitHubLink(e.repo.name+"/tree/"+e.branch,e.branch)+" at "),n.commits){var i=n.before+"..."+n.head,r=n.commits.length;2===r?e.commitsMessage=Mustache.render('<a href="https://github.com/{{repo}}/compare/{{shaDiff}}">View comparison for these 2 commits &raquo;</a>',{repo:e.repo.name,shaDiff:i}):r>2&&(e.commitsMessage=Mustache.render('<a href="https://github.com/{{repo}}/compare/{{shaDiff}}">{{length}} more '+pluralize("commit",r-2)+" &raquo;</a>",{repo:e.repo.name,shaDiff:i,length:n.size-2})),n.commits.forEach(function(i,r){if(i.message.length>66&&(i.message=i.message.substring(0,66)+"..."),!(r<2))return n.commits.splice(2,n.size),!1;i.shaLink=t.renderGitHubLink(e.repo.name+"/commit/"+i.sha,i.sha.substring(0,6),"gha-sha"),i.committerGravatar=Mustache.render('<img class="gha-gravatar-commit" src="https://gravatar.com/avatar/{{hash}}?s=30&d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="16" />',{hash:md5(i.author.email)})})}if(n.issue){a=e.repo.name+"#"+n.issue.number;e.issueLink=t.renderLink(n.issue.html_url,a),e.issueType="issue",n.issue.pull_request&&(e.issueType="pull request")}if(n.pull_request){var o=n.pull_request;if(e.pullRequestLink=t.renderLink(o.html_url,e.repo.name+"#"+o.number),e.mergeMessage="",n.pull_request.merged){n.action="merged";c="{{c}} "+pluralize("commit",o.commits)+" with {{a}} "+pluralize("addition",o.additions)+" and {{d}} "+pluralize("deletion",o.deletions);e.mergeMessage=Mustache.render('<br><small class="gha-message-merge">'+c+"</small>",{c:o.commits,a:o.additions,d:o.deletions})}}if(n.comment&&n.comment.pull_request_url){a=e.repo.name+"#"+n.comment.pull_request_url.split("/").pop();e.pullRequestLink=t.renderLink(n.comment.html_url,a)}if(n.comment&&n.comment.body&&(e.comment=n.comment.body,e.comment.length>150&&(e.comment=e.comment.substring(0,150)+"..."),n.comment.html_url&&n.comment.commit_id)){var a=e.repo.name+"@"+n.comment.commit_id.substring(0,10);e.commentLink=t.renderLink(n.comment.html_url,a)}if("ReleaseEvent"===e.type&&(e.tagLink=t.renderLink(n.release.html_url,n.release.tag_name),e.zipLink=t.renderLink(n.release.zipball_url,"Download Source Code (zip)")),"GollumEvent"===e.type){var s=n.pages[0];e.actionType=s.action,e.message=e.actionType.charAt(0).toUpperCase()+e.actionType.slice(1)+" ",e.message+=t.renderGitHubLink(s.html_url,s.title)}"FollowEvent"===e.type&&(e.targetLink=t.renderGitHubLink(n.target.login)),"ForkEvent"===e.type&&(e.forkLink=t.renderGitHubLink(n.forkee.full_name)),"MemberEvent"===e.type&&(e.memberLink=t.renderGitHubLink(n.member.login)),n.gist&&(e.actionType="fork"===n.action?n.action+"ed":n.action+"d",e.gistLink=t.renderLink(n.gist.html_url,"gist: "+n.gist.id));var l,c=Mustache.render(templates[e.type],e),u=millisecondsToStr(new Date-new Date(e.created_at)),h={message:c,icon:l="CreateEvent"==e.type&&["repository","branch","tag"].indexOf(n.ref_type)>=0?icons[e.type+"_"+n.ref_type]:icons[e.type],timeString:u,userLink:t.renderGitHubLink(e.actor.login)};return singleLineActivities.indexOf(e.type)>-1?Mustache.render(templates.SingleLineActivity,h):Mustache.render(templates.Activity,h)},getHeaderHTML:function(e){return e.name?e.userNameLink=t.renderLink(e.html_url,e.name):e.withoutName=" without-name",e.userLink=t.renderLink(e.html_url,e.login),e.gravatarLink=t.renderLink(e.html_url,'<img src="'+e.avatar_url+'">'),Mustache.render(templates.UserHeader,e)},getActivityHTML:function(e,n){var i="",r=e.length;if(n&&n>r&&(n=r),0===(n=n||r))return Mustache.render(templates.NoActivity,{});for(var o=0;o<n;o++)i+=t.getMessageFor(e[o]);return i},getOutputFromRequest:function(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.setRequestHeader("Accept","application/vnd.github.v3+json"),n.onreadystatechange=function(){if(4===n.readyState)if(n.status>=200&&n.status<300){var i=JSON.parse(n.responseText);t(void 0,i)}else t("request for "+e+" yielded status "+n.status)},n.onerror=function(){t("An error occurred connecting to "+e)},n.send()},renderStream:function(e,t){t.innerHTML=Mustache.render(templates.Stream,{text:e,footer:templates.Footer}),t.style.position="relative"},writeOutput:function(e,n){var i="#"===e.charAt(0)?document.getElementById(e.substring(1)):document.getElementsByClassName(e.substring(1));if(i instanceof HTMLCollection)for(var r=0;r<i.length;r++)t.renderStream(n,i[r]);else t.renderStream(n,i)},renderIfReady:function(e,n,i){n&&i&&t.writeOutput(e,n+i)}};return e.feed=function(e){if(!e.username||!e.selector)throw"You must specify the username and selector options for the activity stream.";var n,i,r=e.selector,o="https://api.github.com/users/"+e.username,a=o+"/events";if(e.repository&&(a="https://api.github.com/repos/"+e.username+"/"+e.repository+"/events"),e.clientId&&e.clientSecret){var s="?client_id="+e.clientId+"&client_secret="+e.clientSecret;o+=s,a+=s}if(e.eventsUrl&&(a=e.eventsUrl),"object"==typeof e.templates)for(var l in templates)"string"==typeof e.templates[l]&&(templates[l]=e.templates[l]);t.getOutputFromRequest(o,function(o,a){n=o?Mustache.render(templates.UserNotFound,{username:e.username}):t.getHeaderHTML(a),t.renderIfReady(r,n,i)}),t.getOutputFromRequest(a,function(o,a){if(o)i=Mustache.render(templates.EventsNotFound,{username:e.username});else{var s="undefined"!=e.limit?parseInt(e.limit,10):null;i=t.getActivityHTML(a,s)}t.renderIfReady(r,n,i)})},e}(),hex_chr="0123456789abcdef".split("");md5("hello");var templates={Stream:'<div class="gha-feed">{{{text}}}<div class="gha-push-small"></div>{{{footer}}}</div>',Activity:'<div id="{{id}}" class="gha-activity">               <div class="gha-activity-icon"><span class="octicon octicon-{{icon}}"></span></div>               <div class="gha-message"><div class="gha-time">{{{timeString}}}</div>{{{userLink}}} {{{message}}}</div>               <div class="gha-clear"></div>             </div>',SingleLineActivity:'<div class="gha-activity gha-small">                         <div class="gha-activity-icon"><span class="octicon octicon-{{icon}}"></span></div>                         <div class="gha-message"><div class="gha-time">{{{timeString}}}</div>{{{userLink}}} {{{message}}}</div>                         <div class="gha-clear"></div>                       </div>',UserHeader:'<div class="gha-header">                 <div class="gha-github-icon"><span class="octicon octicon-mark-github"></span></div>                 <div class="gha-user-info{{withoutName}}">{{{userNameLink}}}<p>{{{userLink}}}</p></div>                 <div class="gha-gravatar">{{{gravatarLink}}}</div>               </div><div class="gha-push"></div>',Footer:'<div class="gha-footer">Public Activity <a href="https://github.com/caseyscarborough/github-activity" target="_blank">GitHub Activity Stream</a>',NoActivity:'<div class="gha-info">This user does not have any public activity yet.</div>',UserNotFound:'<div class="gha-info">User {{username}} wasn\'t found.</div>',EventsNotFound:'<div class="gha-info">Events for user {{username}} not found.</div>',CommitCommentEvent:"commented on commit {{{commentLink}}}<br>{{{userGravatar}}}<small>{{comment}}</small>",CreateEvent:"created {{payload.ref_type}} {{{branchLink}}}{{{repoLink}}}",DeleteEvent:"deleted {{payload.ref_type}} {{payload.ref}} at {{{repoLink}}}",FollowEvent:"started following {{{targetLink}}}",ForkEvent:"forked {{{repoLink}}} to {{{forkLink}}}",GistEvent:"{{actionType}} {{{gistLink}}}",GollumEvent:"{{actionType}} the {{{repoLink}}} wiki<br>{{{userGravatar}}}<small>{{{message}}}</small>",IssueCommentEvent:"commented on {{issueType}} {{{issueLink}}}<br>{{{userGravatar}}}<small>{{comment}}</small>",IssuesEvent:"{{payload.action}} issue {{{issueLink}}}<br>{{{userGravatar}}}<small>{{payload.issue.title}}</small>",MemberEvent:"added {{{memberLink}}} to {{{repoLink}}}",PublicEvent:"open sourced {{{repoLink}}}",PullRequestEvent:"{{payload.action}} pull request {{{pullRequestLink}}}<br>{{{userGravatar}}}<small>{{payload.pull_request.title}}</small>{{{mergeMessage}}}",PullRequestReviewCommentEvent:"commented on pull request {{{pullRequestLink}}}<br>{{{userGravatar}}}<small>{{comment}}</small>",PushEvent:'pushed to {{{branchLink}}}{{{repoLink}}}<br>                <ul class="gha-commits">{{#payload.commits}}<li><small>{{{committerGravatar}}} {{{shaLink}}} {{message}}</small></li>{{/payload.commits}}</ul>                <small class="gha-message-commits">{{{commitsMessage}}}</small>',ReleaseEvent:'released {{{tagLink}}} at {{{repoLink}}}<br>{{{userGravatar}}}<small><span class="octicon octicon-cloud-download"></span>  {{{zipLink}}}</small>',WatchEvent:"starred {{{repoLink}}}"},icons={CommitCommentEvent:"comment-discussion",CreateEvent_repository:"repo-create",CreateEvent_tag:"tag-add",CreateEvent_branch:"git-branch-create",DeleteEvent:"repo-delete",FollowEvent:"person-follow",ForkEvent:"repo-forked",GistEvent:"gist",GollumEvent:"repo",IssuesEvent:"issue-opened",IssueCommentEvent:"comment-discussion",MemberEvent:"person",PublicEvent:"globe",PullRequestEvent:"git-pull-request",PullRequestReviewCommentEvent:"comment-discussion",PushEvent:"git-commit",ReleaseEvent:"tag-add",WatchEvent:"star"},singleLineActivities=["CreateEvent","DeleteEvent","FollowEvent","ForkEvent","GistEvent","MemberEvent","WatchEvent"];"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(){console.log("Service Worker Registered")}),jQuery,$(function(){function e(e,n,i){$(".card.music .btn-flat");var r=n?$($(n).find(".btn-flat")[0]):Number.isInteger(e)?$('[song-index="'+e+'"]'):$(this),o=r.hasClass("active");if(t(),o)i||(Amplitude.pause(),$(".bbplayer").removeClass("bb-show"));else{var a=Amplitude.getSongByIndex(parseInt(r.attr("song-index")));i||(Amplitude.playNow(a),$(".bbplayer").addClass("bb-show")),r.closest(".card.music").addClass("play"),r.addClass("active"),r.find("i").text("pause_circle_filled"),r.closest(".card").find(".album-play i").text("pause"),r.append([].join(""))}}function t(){var e=$(".card.music .btn-flat");$(".card.music").removeClass("play"),e.removeClass("active"),e.find("i").text("play_circle_outline"),$(".card.music .album-play i").text("play_arrow"),$(".card.music .play-bars").remove()}function n(e,t,n){e.each(function(){$(this).offset().top>$(window).scrollTop()+$(window).height()*t&&$(this).find(".cd-timeline-img, .cd-timeline-content").addClass("is-hidden").removeClass("bounce-in")}),n.each(function(){$(this).offset().top>$(window).scrollTop()+$(window).height()&&$(this).addClass("not-in-view")})}function i(e,t,n){var i=$(window);e.each(function(){var e=$(this);e.offset().top<=i.scrollTop()+i.height()&&e.find(".cd-timeline-img").hasClass("is-hidden")&&e.find(".cd-timeline-img, .cd-timeline-content").removeClass("is-hidden").addClass("bounce-in")}),n.each(function(){var e=$(this);e.offset().top<=i.scrollTop()+i.height()&&e.hasClass("not-in-view")&&e.removeClass("not-in-view")})}var r=[{name:"Power Of Weakness",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho01.mp3",index:0},{name:"Shwarma de Pulpo",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho02.mp3",index:1},{name:"Cincuenta",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho03.mp3",index:2},{name:"Con LimÃ³n",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho04.mp3",index:3},{name:"Timmy",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho05.mp3",index:4},{name:"Piekielny",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho06.mp3",index:5},{name:"Ballyhoo",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho07.mp3",index:6},{name:"Scentless Apprentice",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho08.mp3",index:7},{name:"Panchito",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho09.mp3",index:8},{name:"Sex On A Pyramid",artist:"Pancho",album:"Pancho",url:"/assets/songs/pancho/pancho10.mp3",index:9},{name:"Funny",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel01.mp3",index:10},{name:"Hostage",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel02.mp3",index:11},{name:"It's Carlos",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel03.mp3",index:12},{name:"Foie Gras",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel04.mp3",index:13},{name:"Boiler Room",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel05.mp3",index:14},{name:"Trains and Rooftops",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel06.mp3",index:15},{name:"Broken Blood Freezer",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel07.mp3",index:16},{name:"Pix Mate",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel08.mp3",index:17},{name:"Five Million Dollars",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel09.mp3",index:18},{name:"Sunday Pizza",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel10.mp3",index:19},{name:"Short Sugar Canes",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel11.mp3",index:20},{name:"Not Funny",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel12.mp3",index:21},{name:"Summer Overture / Lux Aeterna",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel13.mp3",index:22},{name:"Ultra Sexy (Bonus)",artist:"Carmel Apple Pop",album:"Funnyâ/âNot Funny",url:"/assets/songs/carmel/carmel14.mp3",index:23},{name:"Skeleton Dance",artist:"Igor Krutogolov's Karate Band",album:"How To Be A Crocodile",url:"/assets/songs/toys/toys01.mp3",index:24},{name:"Last Supper Souffle",artist:"Igor Krutogolov's Karate Band",album:"How To Be A Crocodile",url:"/assets/songs/toys/toys02.mp3",index:25},{name:"Seven",artist:"Igor Krutogolov's Karate Band",album:"How To Be A Crocodile",url:"/assets/songs/toys/toys03.mp3",index:26},{name:"Beyond The Hill",artist:"Igor Krutogolov's Karate Band",album:"How To Be A Crocodile",url:"/assets/songs/toys/toys04.mp3",index:27},{name:"Mad Medow",artist:"Igor Krutogolov's Karate Band",album:"How To Be A Crocodile",url:"/assets/songs/toys/toys05.mp3",index:28},{name:"Drink N' Drive",artist:"Igor Krutogolov's Karate Band",album:"How To Be A Crocodile",url:"/assets/songs/toys/toys06.mp3",index:29},{name:"Swamp King",artist:"Igor Krutogolov's Karate Band",album:"How To Be A Crocodile",url:"/assets/songs/toys/toys07.mp3",index:30},{name:"Black Lip Oyster",artist:"Igor Krutogolov's Karate Band",album:"How To Be A Crocodile",url:"/assets/songs/toys/toys08.mp3",index:31},{name:"Zhuravli i Korabli",artist:"Igor Krutogolov's Karate Band",album:"How To Be A Crocodile",url:"/assets/songs/toys/toys09.mp3",index:32},{name:"Another Day To Live",artist:"Aperco",album:"The Battle",url:"/assets/songs/aperco/aperco01.mp3",index:33},{name:"Rewind My Life",artist:"Bilgo & Co",album:"Rewind My Life",url:"/assets/songs/bilgo/bilgo01.mp3",index:34}];!function(){GitHubActivity.feed({username:"Thatkookooguy",selector:"#feed",limit:5}),Amplitude.init({callbacks:{before_pause:function(){t()}},songs:r}),window.onSongChange=function(){e(Amplitude.getActiveSongMetadata().index,void 0,!0)};var o=$(".cd-timeline-block"),a=$(".skillbar");n(o,.8,a),$(".button-collapse").sideNav(),$("ul.tabs").tabs({onShow:function(e){n(o,.8,a),setTimeout(function(){i(o,0,a)}),"resume"===e[0].id?$(window).on("scroll",function(){window.requestAnimationFrame?window.requestAnimationFrame(function(){i(o,0,a)}):setTimeout(function(){i(o,0,a)},100)}):$(window).off("scroll")}})}(),$(".card.music .btn-flat").on("click",e),$(".card.music .album-play").on("click",function(){var n=$(this);"pause"===n.find("i").text()?(Amplitude.pause(),t(),$(".bbplayer").removeClass("bb-show")):e(0,n.closest(".card.music"))})});